\doxysection{stb\+\_\+image\+\_\+resize2.\+h}
\hypertarget{stb__image__resize2_8h_source}{}\label{stb__image__resize2_8h_source}\index{/home/giangvu/CPPprog/raylib-\/tetris/build/external/raylib-\/master/src/external/stb\_image\_resize2.h@{/home/giangvu/CPPprog/raylib-\/tetris/build/external/raylib-\/master/src/external/stb\_image\_resize2.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ stb\_image\_resize2\ -\/\ v2.12\ -\/\ public\ domain\ image\ resizing}}
\DoxyCodeLine{00002\ \textcolor{comment}{}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ \ \ by\ Jeff\ Roberts\ (v2)\ and\ Jorge\ L\ Rodriguez}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ \ \ http://github.com/nothings/stb}}
\DoxyCodeLine{00005\ \textcolor{comment}{}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ Can\ be\ threaded\ with\ the\ extended\ API.\ SSE2,\ AVX,\ Neon\ and\ WASM\ SIMD\ support.\ Only}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ \ \ scaling\ and\ translation\ is\ supported,\ no\ rotations\ or\ shears.}}
\DoxyCodeLine{00008\ \textcolor{comment}{}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ \ \ COMPILING\ \&\ LINKING}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ \ \ In\ one\ C/C++\ file\ that\ \#includes\ this\ file,\ do\ this:}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \#define\ STB\_IMAGE\_RESIZE\_IMPLEMENTATION}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ \ \ before\ the\ \#include.\ That\ will\ create\ the\ implementation\ in\ that\ file.}}
\DoxyCodeLine{00013\ \textcolor{comment}{}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ EASY\ API\ CALLS:}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ \ \ \ \ Easy\ API\ downsamples\ w/Mitchell\ filter,\ upsamples\ w/cubic\ interpolation,\ clamps\ to\ edge.}}
\DoxyCodeLine{00016\ \textcolor{comment}{}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ \ \ \ stbir\_resize\_uint8\_srgb(\ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout\_enum\ )}}
\DoxyCodeLine{00020\ \textcolor{comment}{}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ \ \ \ stbir\_resize\_uint8\_linear(\ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout\_enum\ )}}
\DoxyCodeLine{00024\ \textcolor{comment}{}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ \ \ \ \ stbir\_resize\_float\_linear(\ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout\_enum\ )}}
\DoxyCodeLine{00028\ \textcolor{comment}{}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ \ \ \ \ If\ you\ pass\ NULL\ or\ zero\ for\ the\ output\_pixels,\ we\ will\ allocate\ the\ output\ buffer}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ \ \ \ \ for\ you\ and\ return\ it\ from\ the\ function\ (free\ with\ free()\ or\ STBIR\_FREE).}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ \ \ \ \ As\ a\ special\ case,\ XX\_stride\_in\_bytes\ of\ 0\ means\ packed\ continuously\ in\ memory.}}
\DoxyCodeLine{00032\ \textcolor{comment}{}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ \ \ API\ LEVELS}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ \ \ There\ are\ three\ levels\ of\ API\ -\/\ easy-\/to-\/use,\ medium-\/complexity\ and\ extended-\/complexity.}}
\DoxyCodeLine{00035\ \textcolor{comment}{}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ \ \ \ \ \ See\ the\ "{}header\ file"{}\ section\ of\ the\ source\ for\ API\ documentation.}}
\DoxyCodeLine{00037\ \textcolor{comment}{}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ \ \ ADDITIONAL\ DOCUMENTATION}}
\DoxyCodeLine{00039\ \textcolor{comment}{}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ \ \ \ \ \ MEMORY\ ALLOCATION}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ By\ default,\ we\ use\ malloc\ and\ free\ for\ memory\ allocation.\ \ To\ override\ the}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ memory\ allocation,\ before\ the\ implementation\ \#include,\ add\ a:}}
\DoxyCodeLine{00043\ \textcolor{comment}{}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_MALLOC(size,user\_data)\ ...}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_FREE(ptr,user\_data)\ \ \ ...}}
\DoxyCodeLine{00046\ \textcolor{comment}{}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Each\ resize\ makes\ exactly\ one\ call\ to\ malloc/free\ (unless\ you\ use\ the}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ extended\ API\ where\ you\ can\ do\ one\ allocation\ for\ many\ resizes).\ Under}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ address\ sanitizer,\ we\ do\ separate\ allocations\ to\ find\ overread/writes.}}
\DoxyCodeLine{00050\ \textcolor{comment}{}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ \ \ \ \ \ PERFORMANCE}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ This\ library\ was\ written\ with\ an\ emphasis\ on\ performance.\ When\ testing}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ stb\_image\_resize\ with\ RGBA,\ the\ fastest\ mode\ is\ STBIR\_4CHANNEL\ with}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_TYPE\_UINT8\ pixels\ and\ CLAMPed\ edges\ (which\ is\ what\ many\ other\ resize}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ libs\ do\ by\ default).\ Also,\ make\ sure\ SIMD\ is\ turned\ on\ of\ course\ (default}}
\DoxyCodeLine{00056\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ for\ 64-\/bit\ targets).\ Avoid\ WRAP\ edge\ mode\ if\ you\ want\ the\ fastest\ speed.}}
\DoxyCodeLine{00057\ \textcolor{comment}{}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ This\ library\ also\ comes\ with\ profiling\ built-\/in.\ If\ you\ define\ STBIR\_PROFILE,}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ you\ can\ use\ the\ advanced\ API\ and\ get\ low-\/level\ profiling\ information\ by}}
\DoxyCodeLine{00060\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ calling\ stbir\_resize\_extended\_profile\_info()\ or\ stbir\_resize\_split\_profile\_info()}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ after\ a\ resize.}}
\DoxyCodeLine{00062\ \textcolor{comment}{}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ \ \ \ \ \ SIMD}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Most\ of\ the\ routines\ have\ optimized\ SSE2,\ AVX,\ NEON\ and\ WASM\ versions.}}
\DoxyCodeLine{00065\ \textcolor{comment}{}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ On\ Microsoft\ compilers,\ we\ automatically\ turn\ on\ SIMD\ for\ 64-\/bit\ x64\ and}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ ARM;\ for\ 32-\/bit\ x86\ and\ ARM,\ you\ select\ SIMD\ mode\ by\ defining\ STBIR\_SSE2\ or}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_NEON.\ For\ AVX\ and\ AVX2,\ we\ auto-\/select\ it\ by\ detecting\ the\ /arch:AVX}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ or\ /arch:AVX2\ switches.\ You\ can\ also\ always\ manually\ turn\ SSE2,\ AVX\ or\ AVX2}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ support\ on\ by\ defining\ STBIR\_SSE2,\ STBIR\_AVX\ or\ STBIR\_AVX2.}}
\DoxyCodeLine{00071\ \textcolor{comment}{}}
\DoxyCodeLine{00072\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ On\ Linux,\ SSE2\ and\ Neon\ is\ on\ by\ default\ for\ 64-\/bit\ x64\ or\ ARM64.\ For\ 32-\/bit,}}
\DoxyCodeLine{00073\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ we\ select\ x86\ SIMD\ mode\ by\ whether\ you\ have\ -\/msse2,\ -\/mavx\ or\ -\/mavx2\ enabled}}
\DoxyCodeLine{00074\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ on\ the\ command\ line.\ For\ 32-\/bit\ ARM,\ you\ must\ pass\ -\/mfpu=neon-\/vfpv4\ for\ both}}
\DoxyCodeLine{00075\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ clang\ and\ GCC,\ but\ GCC\ also\ requires\ an\ additional\ -\/mfp16-\/format=ieee\ to}}
\DoxyCodeLine{00076\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ automatically\ enable\ NEON.}}
\DoxyCodeLine{00077\ \textcolor{comment}{}}
\DoxyCodeLine{00078\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ On\ x86\ platforms,\ you\ can\ also\ define\ STBIR\_FP16C\ to\ turn\ on\ FP16C\ instructions}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ for\ converting\ back\ and\ forth\ to\ half-\/floats.\ This\ is\ autoselected\ when\ we}}
\DoxyCodeLine{00080\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ are\ using\ AVX2.\ Clang\ and\ GCC\ also\ require\ the\ -\/mf16c\ switch.\ ARM\ always\ uses}}
\DoxyCodeLine{00081\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ built-\/in\ half\ float\ hardware\ NEON\ instructions.}}
\DoxyCodeLine{00082\ \textcolor{comment}{}}
\DoxyCodeLine{00083\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ You\ can\ also\ tell\ us\ to\ use\ multiply-\/add\ instructions\ with\ STBIR\_USE\_FMA.}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Because\ x86\ doesn't\ always\ have\ fma,\ we\ turn\ it\ off\ by\ default\ to\ maintain}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ determinism\ across\ all\ platforms.\ If\ you\ don't\ care\ about\ non-\/FMA\ determinism}}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ and\ are\ willing\ to\ restrict\ yourself\ to\ more\ recent\ x86\ CPUs\ (around\ the\ AVX}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ timeframe),\ then\ fma\ will\ give\ you\ around\ a\ 15\%\ speedup.}}
\DoxyCodeLine{00088\ \textcolor{comment}{}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ You\ can\ force\ off\ SIMD\ in\ all\ cases\ by\ defining\ STBIR\_NO\_SIMD.\ You\ can\ turn}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ off\ AVX\ or\ AVX2\ specifically\ with\ STBIR\_NO\_AVX\ or\ STBIR\_NO\_AVX2.\ AVX\ is\ 10\%}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ 40\%\ faster,\ and\ AVX2\ is\ generally\ another\ 12\%.}}
\DoxyCodeLine{00092\ \textcolor{comment}{}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ \ ALPHA\ CHANNEL}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Most\ of\ the\ resizing\ functions\ provide\ the\ ability\ to\ control\ how\ the\ alpha}}
\DoxyCodeLine{00095\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ channel\ of\ an\ image\ is\ processed.}}
\DoxyCodeLine{00096\ \textcolor{comment}{}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ When\ alpha\ represents\ transparency,\ it\ is\ important\ that\ when\ combining}}
\DoxyCodeLine{00098\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ colors\ with\ filtering,\ the\ pixels\ should\ not\ be\ treated\ equally;\ they}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ should\ use\ a\ weighted\ average\ based\ on\ their\ alpha\ values.\ For\ example,}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ if\ a\ pixel\ is\ 1\%\ opaque\ bright\ green\ and\ another\ pixel\ is\ 99\%\ opaque}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ black\ and\ you\ average\ them,\ the\ average\ will\ be\ 50\%\ opaque,\ but\ the}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ unweighted\ average\ and\ will\ be\ a\ middling\ green\ color,\ while\ the\ weighted}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ average\ will\ be\ nearly\ black.\ This\ means\ the\ unweighted\ version\ introduced}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ green\ energy\ that\ didn't\ exist\ in\ the\ source\ image.}}
\DoxyCodeLine{00105\ \textcolor{comment}{}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ (If\ you\ want\ to\ know\ why\ this\ makes\ sense,\ you\ can\ work\ out\ the\ math\ for}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ following:\ consider\ what\ happens\ if\ you\ alpha\ composite\ a\ source\ image}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ over\ a\ fixed\ color\ and\ then\ average\ the\ output,\ vs.\ if\ you\ average\ the}}
\DoxyCodeLine{00109\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ source\ image\ pixels\ and\ then\ composite\ that\ over\ the\ same\ fixed\ color.}}
\DoxyCodeLine{00110\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Only\ the\ weighted\ average\ produces\ the\ same\ result\ as\ the\ ground\ truth}}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ composite-\/then-\/average\ result.)}}
\DoxyCodeLine{00112\ \textcolor{comment}{}}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Therefore,\ it\ is\ in\ general\ best\ to\ "{}alpha\ weight"{}\ the\ pixels\ when\ applying}}
\DoxyCodeLine{00114\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ filters\ to\ them.\ This\ essentially\ means\ multiplying\ the\ colors\ by\ the\ alpha}}
\DoxyCodeLine{00115\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ values\ before\ combining\ them,\ and\ then\ dividing\ by\ the\ alpha\ value\ at\ the}}
\DoxyCodeLine{00116\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ end.}}
\DoxyCodeLine{00117\ \textcolor{comment}{}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ computer\ graphics\ industry\ introduced\ a\ technique\ called\ "{}premultiplied}}
\DoxyCodeLine{00119\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ alpha"{}\ or\ "{}associated\ alpha"{}\ in\ which\ image\ colors\ are\ stored\ in\ image\ files}}
\DoxyCodeLine{00120\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ already\ multiplied\ by\ their\ alpha.\ This\ saves\ some\ math\ when\ compositing,}}
\DoxyCodeLine{00121\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ and\ also\ avoids\ the\ need\ to\ divide\ by\ the\ alpha\ at\ the\ end\ (which\ is\ quite}}
\DoxyCodeLine{00122\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ inefficient).\ However,\ while\ premultiplied\ alpha\ is\ common\ in\ the\ movie\ CGI}}
\DoxyCodeLine{00123\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ industry,\ it\ is\ not\ commonplace\ in\ other\ industries\ like\ videogames,\ and\ most}}
\DoxyCodeLine{00124\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ consumer\ file\ formats\ are\ generally\ expected\ to\ contain\ not-\/premultiplied}}
\DoxyCodeLine{00125\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ colors.\ For\ example,\ Photoshop\ saves\ PNG\ files\ "{}unpremultiplied"{},\ and\ web}}
\DoxyCodeLine{00126\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ browsers\ like\ Chrome\ and\ Firefox\ expect\ PNG\ images\ to\ be\ unpremultiplied.}}
\DoxyCodeLine{00127\ \textcolor{comment}{}}
\DoxyCodeLine{00128\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Note\ that\ there\ are\ three\ possibilities\ that\ might\ describe\ your\ image}}
\DoxyCodeLine{00129\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ and\ resize\ expectation:}}
\DoxyCodeLine{00130\ \textcolor{comment}{}}
\DoxyCodeLine{00131\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ 1.\ images\ are\ not\ premultiplied,\ alpha\ weighting\ is\ desired}}
\DoxyCodeLine{00132\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ 2.\ images\ are\ not\ premultiplied,\ alpha\ weighting\ is\ not\ desired}}
\DoxyCodeLine{00133\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ 3.\ images\ are\ premultiplied}}
\DoxyCodeLine{00134\ \textcolor{comment}{}}
\DoxyCodeLine{00135\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Both\ case\ \#2\ and\ case\ \#3\ require\ the\ exact\ same\ math:\ no\ alpha\ weighting}}
\DoxyCodeLine{00136\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ should\ be\ applied\ or\ removed.\ Only\ case\ 1\ requires\ extra\ math\ operations;}}
\DoxyCodeLine{00137\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ other\ two\ cases\ can\ be\ handled\ identically.}}
\DoxyCodeLine{00138\ \textcolor{comment}{}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ stb\_image\_resize\ expects\ case\ \#1\ by\ default,\ applying\ alpha\ weighting\ to}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ images,\ expecting\ the\ input\ images\ to\ be\ unpremultiplied.\ This\ is\ what\ the}}
\DoxyCodeLine{00141\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ COLOR+ALPHA\ buffer\ types\ tell\ the\ resizer\ to\ do.}}
\DoxyCodeLine{00142\ \textcolor{comment}{}}
\DoxyCodeLine{00143\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ When\ you\ use\ the\ pixel\ layouts\ STBIR\_RGBA,\ STBIR\_BGRA,\ STBIR\_ARGB,}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_ABGR,\ STBIR\_RX,\ or\ STBIR\_XR\ you\ are\ telling\ us\ that\ the\ pixels\ are}}
\DoxyCodeLine{00145\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ non-\/premultiplied.\ In\ these\ cases,\ the\ resizer\ will\ alpha\ weight\ the\ colors}}
\DoxyCodeLine{00146\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ (effectively\ creating\ the\ premultiplied\ image),\ do\ the\ filtering,\ and\ then}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ convert\ back\ to\ non-\/premult\ on\ exit.}}
\DoxyCodeLine{00148\ \textcolor{comment}{}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ When\ you\ use\ the\ pixel\ layouts\ STBIR\_RGBA\_PM,\ STBIR\_RGBA\_PM,\ STBIR\_RGBA\_PM,}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_RGBA\_PM,\ STBIR\_RX\_PM\ or\ STBIR\_XR\_PM,\ you\ are\ telling\ that\ the\ pixels}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ ARE\ premultiplied.\ In\ this\ case,\ the\ resizer\ doesn't\ have\ to\ do\ the}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ premultipling\ -\/\ it\ can\ filter\ directly\ on\ the\ input.\ This\ about\ twice\ as}}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ fast\ as\ the\ non-\/premultiplied\ case,\ so\ it's\ the\ right\ option\ if\ your\ data\ is}}
\DoxyCodeLine{00154\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ already\ setup\ correctly.}}
\DoxyCodeLine{00155\ \textcolor{comment}{}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ When\ you\ use\ the\ pixel\ layout\ STBIR\_4CHANNEL\ or\ STBIR\_2CHANNEL,\ you\ are}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ telling\ us\ that\ there\ is\ no\ channel\ that\ represents\ transparency;\ it\ may\ be}}
\DoxyCodeLine{00158\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ RGB\ and\ some\ unrelated\ fourth\ channel\ that\ has\ been\ stored\ in\ the\ alpha}}
\DoxyCodeLine{00159\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ channel,\ but\ it\ is\ actually\ not\ alpha.\ No\ special\ processing\ will\ be}}
\DoxyCodeLine{00160\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ performed.}}
\DoxyCodeLine{00161\ \textcolor{comment}{}}
\DoxyCodeLine{00162\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ difference\ between\ the\ generic\ 4\ or\ 2\ channel\ layouts,\ and\ the}}
\DoxyCodeLine{00163\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ specialized\ \_PM\ versions\ is\ with\ the\ \_PM\ versions\ you\ are\ telling\ us\ that}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ data\ *is*\ alpha,\ just\ don't\ premultiply\ it.\ That's\ important\ when}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ using\ SRGB\ pixel\ formats,\ we\ need\ to\ know\ where\ the\ alpha\ is,\ because}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ it\ is\ converted\ linearly\ (rather\ than\ with\ the\ SRGB\ converters).}}
\DoxyCodeLine{00167\ \textcolor{comment}{}}
\DoxyCodeLine{00168\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Because\ alpha\ weighting\ produces\ the\ same\ effect\ as\ premultiplying,\ you}}
\DoxyCodeLine{00169\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ even\ have\ the\ option\ with\ non-\/premultiplied\ inputs\ to\ let\ the\ resizer}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ produce\ a\ premultiplied\ output.\ Because\ the\ intially\ computed\ alpha-\/weighted}}
\DoxyCodeLine{00171\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ output\ image\ is\ effectively\ premultiplied,\ this\ is\ actually\ more\ performant}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ than\ the\ normal\ path\ which\ un-\/premultiplies\ the\ output\ image\ as\ a\ final\ step.}}
\DoxyCodeLine{00173\ \textcolor{comment}{}}
\DoxyCodeLine{00174\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Finally,\ when\ converting\ both\ in\ and\ out\ of\ non-\/premulitplied\ space\ (for}}
\DoxyCodeLine{00175\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ example,\ when\ using\ STBIR\_RGBA),\ we\ go\ to\ somewhat\ heroic\ measures\ to}}
\DoxyCodeLine{00176\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ ensure\ that\ areas\ with\ zero\ alpha\ value\ pixels\ get\ something\ reasonable}}
\DoxyCodeLine{00177\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ in\ the\ RGB\ values.\ If\ you\ don't\ care\ about\ the\ RGB\ values\ of\ zero\ alpha}}
\DoxyCodeLine{00178\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ pixels,\ you\ can\ call\ the\ stbir\_set\_non\_pm\_alpha\_speed\_over\_quality()}}
\DoxyCodeLine{00179\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ function\ -\/\ this\ runs\ a\ premultiplied\ resize\ about\ 25\%\ faster.\ That\ said,}}
\DoxyCodeLine{00180\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ when\ you\ really\ care\ about\ speed,\ using\ premultiplied\ pixels\ for\ both\ in}}
\DoxyCodeLine{00181\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ and\ out\ (STBIR\_RGBA\_PM,\ etc)\ much\ faster\ than\ both\ of\ these\ premultiplied}}
\DoxyCodeLine{00182\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ options.}}
\DoxyCodeLine{00183\ \textcolor{comment}{}}
\DoxyCodeLine{00184\ \textcolor{comment}{\ \ \ \ \ \ PIXEL\ LAYOUT\ CONVERSION}}
\DoxyCodeLine{00185\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ resizer\ can\ convert\ from\ some\ pixel\ layouts\ to\ others.\ When\ using\ the}}
\DoxyCodeLine{00186\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ stbir\_set\_pixel\_layouts(),\ you\ can,\ for\ example,\ specify\ STBIR\_RGBA}}
\DoxyCodeLine{00187\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ on\ input,\ and\ STBIR\_ARGB\ on\ output,\ and\ it\ will\ re-\/organize\ the\ channels}}
\DoxyCodeLine{00188\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ during\ the\ resize.\ Currently,\ you\ can\ only\ convert\ between\ two\ pixel}}
\DoxyCodeLine{00189\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ layouts\ with\ the\ same\ number\ of\ channels.}}
\DoxyCodeLine{00190\ \textcolor{comment}{}}
\DoxyCodeLine{00191\ \textcolor{comment}{\ \ \ \ \ \ DETERMINISM}}
\DoxyCodeLine{00192\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ We\ commit\ to\ being\ deterministic\ (from\ x64\ to\ ARM\ to\ scalar\ to\ SIMD,\ etc).}}
\DoxyCodeLine{00193\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ This\ requires\ compiling\ with\ fast-\/math\ off\ (using\ at\ least\ /fp:precise).}}
\DoxyCodeLine{00194\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Also,\ you\ must\ turn\ off\ fp-\/contracting\ (which\ turns\ mult+adds\ into\ fmas)!}}
\DoxyCodeLine{00195\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ We\ attempt\ to\ do\ this\ with\ pragmas,\ but\ with\ Clang,\ you\ usually\ want\ to\ add}}
\DoxyCodeLine{00196\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ -\/ffp-\/contract=off\ to\ the\ command\ line\ as\ well.}}
\DoxyCodeLine{00197\ \textcolor{comment}{}}
\DoxyCodeLine{00198\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ For\ 32-\/bit\ x86,\ you\ must\ use\ SSE\ and\ SSE2\ codegen\ for\ determinism.\ That\ is,}}
\DoxyCodeLine{00199\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ if\ the\ scalar\ x87\ unit\ gets\ used\ at\ all,\ we\ immediately\ lose\ determinism.}}
\DoxyCodeLine{00200\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ On\ Microsoft\ Visual\ Studio\ 2008\ and\ earlier,\ from\ what\ we\ can\ tell\ there\ is}}
\DoxyCodeLine{00201\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ no\ way\ to\ be\ deterministic\ in\ 32-\/bit\ x86\ (some\ x87\ always\ leaks\ in,\ even}}
\DoxyCodeLine{00202\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ with\ fp:strict).\ On\ 32-\/bit\ x86\ GCC,\ determinism\ requires\ both\ -\/msse2\ and}}
\DoxyCodeLine{00203\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ -\/fpmath=sse.}}
\DoxyCodeLine{00204\ \textcolor{comment}{}}
\DoxyCodeLine{00205\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Note\ that\ we\ will\ not\ be\ deterministic\ with\ float\ data\ containing\ NaNs\ -\/}}
\DoxyCodeLine{00206\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ NaNs\ will\ propagate\ differently\ on\ different\ SIMD\ and\ platforms.}}
\DoxyCodeLine{00207\ \textcolor{comment}{}}
\DoxyCodeLine{00208\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ If\ you\ turn\ on\ STBIR\_USE\_FMA,\ then\ we\ will\ be\ deterministic\ with\ other}}
\DoxyCodeLine{00209\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ fma\ targets,\ but\ we\ will\ differ\ from\ non-\/fma\ targets\ (this\ is\ unavoidable,}}
\DoxyCodeLine{00210\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ because\ a\ fma\ isn't\ simply\ an\ add\ with\ a\ mult\ -\/\ it\ also\ introduces\ a}}
\DoxyCodeLine{00211\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ rounding\ difference\ compared\ to\ non-\/fma\ instruction\ sequences.}}
\DoxyCodeLine{00212\ \textcolor{comment}{}}
\DoxyCodeLine{00213\ \textcolor{comment}{\ \ \ \ \ \ FLOAT\ PIXEL\ FORMAT\ RANGE}}
\DoxyCodeLine{00214\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Any\ range\ of\ values\ can\ be\ used\ for\ the\ non-\/alpha\ float\ data\ that\ you\ pass}}
\DoxyCodeLine{00215\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ in\ (0\ to\ 1,\ -\/1\ to\ 1,\ whatever).\ However,\ if\ you\ are\ inputting\ float\ values}}
\DoxyCodeLine{00216\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ but\ *outputting*\ bytes\ or\ shorts,\ you\ must\ use\ a\ range\ of\ 0\ to\ 1\ so\ that\ we}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ scale\ back\ properly.\ The\ alpha\ channel\ must\ also\ be\ 0\ to\ 1\ for\ any\ format}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ that\ does\ premultiplication\ prior\ to\ resizing.}}
\DoxyCodeLine{00219\ \textcolor{comment}{}}
\DoxyCodeLine{00220\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Note\ also\ that\ with\ float\ output,\ using\ filters\ with\ negative\ lobes,\ the}}
\DoxyCodeLine{00221\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ output\ filtered\ values\ might\ go\ slightly\ out\ of\ range.\ You\ can\ define}}
\DoxyCodeLine{00222\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_FLOAT\_LOW\_CLAMP\ and/or\ STBIR\_FLOAT\_HIGH\_CLAMP\ to\ specify\ the\ range}}
\DoxyCodeLine{00223\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ clamp\ to\ on\ output,\ if\ that's\ important.}}
\DoxyCodeLine{00224\ \textcolor{comment}{}}
\DoxyCodeLine{00225\ \textcolor{comment}{\ \ \ \ \ \ MAX/MIN\ SCALE\ FACTORS}}
\DoxyCodeLine{00226\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ input\ pixel\ resolutions\ are\ in\ integers,\ and\ we\ do\ the\ internal\ pointer}}
\DoxyCodeLine{00227\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ resolution\ in\ size\_t\ sized\ integers.\ However,\ the\ scale\ ratio\ from\ input}}
\DoxyCodeLine{00228\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ resolution\ to\ output\ resolution\ is\ calculated\ in\ float\ form.\ This\ means}}
\DoxyCodeLine{00229\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ effective\ possible\ scale\ ratio\ is\ limited\ to\ 24\ bits\ (or\ 16\ million}}
\DoxyCodeLine{00230\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ 1).\ As\ you\ get\ close\ to\ the\ size\ of\ the\ float\ resolution\ (again,\ 16}}
\DoxyCodeLine{00231\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ million\ pixels\ wide\ or\ high),\ you\ might\ start\ seeing\ float\ inaccuracy}}
\DoxyCodeLine{00232\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ issues\ in\ general\ in\ the\ pipeline.\ If\ you\ have\ to\ do\ extreme\ resizes,}}
\DoxyCodeLine{00233\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ you\ can\ usually\ do\ this\ is\ multiple\ stages\ (using\ float\ intermediate}}
\DoxyCodeLine{00234\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ buffers).}}
\DoxyCodeLine{00235\ \textcolor{comment}{}}
\DoxyCodeLine{00236\ \textcolor{comment}{\ \ \ \ \ \ FLIPPED\ IMAGES}}
\DoxyCodeLine{00237\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Stride\ is\ just\ the\ delta\ from\ one\ scanline\ to\ the\ next.\ This\ means\ you\ can}}
\DoxyCodeLine{00238\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ use\ a\ negative\ stride\ to\ handle\ inverted\ images\ (point\ to\ the\ final}}
\DoxyCodeLine{00239\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ scanline\ and\ use\ a\ negative\ stride).\ You\ can\ invert\ the\ input\ or\ output,}}
\DoxyCodeLine{00240\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ using\ negative\ strides.}}
\DoxyCodeLine{00241\ \textcolor{comment}{}}
\DoxyCodeLine{00242\ \textcolor{comment}{\ \ \ \ \ \ DEFAULT\ FILTERS}}
\DoxyCodeLine{00243\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ For\ functions\ which\ don't\ provide\ explicit\ control\ over\ what\ filters\ to}}
\DoxyCodeLine{00244\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ use,\ you\ can\ change\ the\ compile-\/time\ defaults\ with:}}
\DoxyCodeLine{00245\ \textcolor{comment}{}}
\DoxyCodeLine{00246\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE\ \ \ \ \ STBIR\_FILTER\_something}}
\DoxyCodeLine{00247\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE\ \ \ STBIR\_FILTER\_something}}
\DoxyCodeLine{00248\ \textcolor{comment}{}}
\DoxyCodeLine{00249\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ See\ stbir\_filter\ in\ the\ header-\/file\ section\ for\ the\ list\ of\ filters.}}
\DoxyCodeLine{00250\ \textcolor{comment}{}}
\DoxyCodeLine{00251\ \textcolor{comment}{\ \ \ \ \ \ NEW\ FILTERS}}
\DoxyCodeLine{00252\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ A\ number\ of\ 1D\ filter\ kernels\ are\ supplied.\ For\ a\ list\ of\ supported}}
\DoxyCodeLine{00253\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ filters,\ see\ the\ stbir\_filter\ enum.\ You\ can\ install\ your\ own\ filters\ by}}
\DoxyCodeLine{00254\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ using\ the\ stbir\_set\_filter\_callbacks\ function.}}
\DoxyCodeLine{00255\ \textcolor{comment}{}}
\DoxyCodeLine{00256\ \textcolor{comment}{\ \ \ \ \ \ PROGRESS}}
\DoxyCodeLine{00257\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ For\ interactive\ use\ with\ slow\ resize\ operations,\ you\ can\ use\ the\ the}}
\DoxyCodeLine{00258\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ scanline\ callbacks\ in\ the\ extended\ API.\ It\ would\ have\ to\ be\ a\ *very*\ large}}
\DoxyCodeLine{00259\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ image\ resample\ to\ need\ progress\ though\ -\/\ we're\ very\ fast.}}
\DoxyCodeLine{00260\ \textcolor{comment}{}}
\DoxyCodeLine{00261\ \textcolor{comment}{\ \ \ \ \ \ CEIL\ and\ FLOOR}}
\DoxyCodeLine{00262\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ In\ scalar\ mode,\ the\ only\ functions\ we\ use\ from\ math.h\ are\ ceilf\ and\ floorf,}}
\DoxyCodeLine{00263\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ but\ if\ you\ have\ your\ own\ versions,\ you\ can\ define\ the\ STBIR\_CEILF(v)\ and}}
\DoxyCodeLine{00264\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_FLOORF(v)\ macros\ and\ we'll\ use\ them\ instead.\ In\ SIMD,\ we\ just\ use}}
\DoxyCodeLine{00265\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ our\ own\ versions.}}
\DoxyCodeLine{00266\ \textcolor{comment}{}}
\DoxyCodeLine{00267\ \textcolor{comment}{\ \ \ \ \ \ ASSERT}}
\DoxyCodeLine{00268\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Define\ STBIR\_ASSERT(boolval)\ to\ override\ assert()\ and\ not\ use\ assert.h}}
\DoxyCodeLine{00269\ \textcolor{comment}{}}
\DoxyCodeLine{00270\ \textcolor{comment}{\ \ \ \ \ PORTING\ FROM\ VERSION\ 1}}
\DoxyCodeLine{00271\ \textcolor{comment}{\ \ \ \ \ \ \ \ The\ API\ has\ changed.\ You\ can\ continue\ to\ use\ the\ old\ version\ of\ stb\_image\_resize.h,}}
\DoxyCodeLine{00272\ \textcolor{comment}{\ \ \ \ \ \ \ \ which\ is\ available\ in\ the\ "{}deprecated/"{}\ directory.}}
\DoxyCodeLine{00273\ \textcolor{comment}{}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ \ \ \ If\ you're\ using\ the\ old\ simple-\/to-\/use\ API,\ porting\ is\ straightforward.}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ \ \ \ \ (For\ more\ advanced\ APIs,\ read\ the\ documentation.)}}
\DoxyCodeLine{00276\ \textcolor{comment}{}}
\DoxyCodeLine{00277\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ stbir\_resize\_uint8():}}
\DoxyCodeLine{00278\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ call\ \`{}stbir\_resize\_uint8\_linear`,\ cast\ channel\ count\ to\ \`{}stbir\_pixel\_layout`}}
\DoxyCodeLine{00279\ \textcolor{comment}{}}
\DoxyCodeLine{00280\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ stbir\_resize\_float():}}
\DoxyCodeLine{00281\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ call\ \`{}stbir\_resize\_float\_linear`,\ cast\ channel\ count\ to\ \`{}stbir\_pixel\_layout`}}
\DoxyCodeLine{00282\ \textcolor{comment}{}}
\DoxyCodeLine{00283\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ stbir\_resize\_uint8\_srgb():}}
\DoxyCodeLine{00284\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ function\ name\ is\ unchanged}}
\DoxyCodeLine{00285\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ cast\ channel\ count\ to\ \`{}stbir\_pixel\_layout`}}
\DoxyCodeLine{00286\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ above\ is\ sufficient\ unless\ your\ image\ has\ alpha\ and\ it's\ not\ RGBA/BGRA}}
\DoxyCodeLine{00287\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/\ in\ that\ case,\ follow\ the\ below\ instructions\ for\ stbir\_resize\_uint8\_srgb\_edgemode}}
\DoxyCodeLine{00288\ \textcolor{comment}{}}
\DoxyCodeLine{00289\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ stbir\_resize\_uint8\_srgb\_edgemode()}}
\DoxyCodeLine{00290\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ switch\ to\ the\ "{}medium\ complexity"{}\ API}}
\DoxyCodeLine{00291\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ stbir\_resize(),\ very\ similar\ API\ but\ a\ few\ more\ parameters:}}
\DoxyCodeLine{00292\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/\ pixel\_layout:\ cast\ channel\ count\ to\ \`{}stbir\_pixel\_layout`}}
\DoxyCodeLine{00293\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/\ data\_type:\ \ \ \ STBIR\_TYPE\_UINT8\_SRGB}}
\DoxyCodeLine{00294\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/\ edge:\ \ \ \ \ \ \ \ \ unchanged\ (STBIR\_EDGE\_WRAP,\ etc.)}}
\DoxyCodeLine{00295\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/\ filter:\ \ \ \ \ \ \ STBIR\_FILTER\_DEFAULT}}
\DoxyCodeLine{00296\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ -\/\ which\ channel\ is\ alpha\ is\ specified\ in\ stbir\_pixel\_layout,\ see\ enum\ for\ details}}
\DoxyCodeLine{00297\ \textcolor{comment}{}}
\DoxyCodeLine{00298\ \textcolor{comment}{\ \ \ \ \ \ FUTURE\ TODOS}}
\DoxyCodeLine{00299\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ \ For\ polyphase\ integral\ filters,\ we\ just\ memcpy\ the\ coeffs\ to\ dupe}}
\DoxyCodeLine{00300\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ them,\ but\ we\ should\ indirect\ and\ use\ the\ same\ coeff\ memory.}}
\DoxyCodeLine{00301\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ \ Add\ pixel\ layout\ conversions\ for\ sensible\ different\ channel\ counts}}
\DoxyCodeLine{00302\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ (maybe,\ 1-\/>3/4,\ 3-\/>4,\ 4-\/>1,\ 3-\/>1).}}
\DoxyCodeLine{00303\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ For\ SIMD\ encode\ and\ decode\ scanline\ routines,\ do\ any\ pre-\/aligning}}
\DoxyCodeLine{00304\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ for\ bad\ input/output\ buffer\ alignments\ and\ pitch?}}
\DoxyCodeLine{00305\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ For\ very\ wide\ scanlines,\ we\ should\ we\ do\ vertical\ strips\ to\ stay\ within}}
\DoxyCodeLine{00306\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ L2\ cache.\ Maybe\ do\ chunks\ of\ 1K\ pixels\ at\ a\ time.\ There\ would\ be}}
\DoxyCodeLine{00307\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ some\ pixel\ reconversion,\ but\ probably\ dwarfed\ by\ things\ falling\ out}}
\DoxyCodeLine{00308\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ of\ cache.\ Probably\ also\ something\ possible\ with\ alternating\ between}}
\DoxyCodeLine{00309\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ scattering\ and\ gathering\ at\ high\ resize\ scales?}}
\DoxyCodeLine{00310\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Rewrite\ the\ coefficient\ generator\ to\ do\ many\ at\ once.}}
\DoxyCodeLine{00311\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ AVX-\/512\ vertical\ kernels\ -\/\ worried\ about\ downclocking\ here.}}
\DoxyCodeLine{00312\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Convert\ the\ reincludes\ to\ macros\ when\ we\ know\ they\ aren't\ changing.}}
\DoxyCodeLine{00313\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Experiment\ with\ pivoting\ the\ horizontal\ and\ always\ using\ the}}
\DoxyCodeLine{00314\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ vertical\ filters\ (which\ are\ faster,\ but\ perhaps\ not\ enough\ to\ overcome}}
\DoxyCodeLine{00315\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ the\ pivot\ cost\ and\ the\ extra\ memory\ touches).\ Need\ to\ buffer\ the\ whole}}
\DoxyCodeLine{00316\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ image\ so\ have\ to\ balance\ memory\ use.}}
\DoxyCodeLine{00317\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Most\ of\ our\ code\ is\ internally\ function\ pointers,\ should\ we\ compile}}
\DoxyCodeLine{00318\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ all\ the\ SIMD\ stuff\ always\ and\ dynamically\ dispatch?}}
\DoxyCodeLine{00319\ \textcolor{comment}{}}
\DoxyCodeLine{00320\ \textcolor{comment}{\ \ \ CONTRIBUTORS}}
\DoxyCodeLine{00321\ \textcolor{comment}{\ \ \ \ \ \ Jeff\ Roberts:\ 2.0\ implementation,\ optimizations,\ SIMD}}
\DoxyCodeLine{00322\ \textcolor{comment}{\ \ \ \ \ \ Martins\ Mozeiko:\ NEON\ simd,\ WASM\ simd,\ clang\ and\ GCC\ whisperer}}
\DoxyCodeLine{00323\ \textcolor{comment}{\ \ \ \ \ \ Fabian\ Giesen:\ half\ float\ and\ srgb\ converters}}
\DoxyCodeLine{00324\ \textcolor{comment}{\ \ \ \ \ \ Sean\ Barrett:\ API\ design,\ optimizations}}
\DoxyCodeLine{00325\ \textcolor{comment}{\ \ \ \ \ \ Jorge\ L\ Rodriguez:\ Original\ 1.0\ implementation}}
\DoxyCodeLine{00326\ \textcolor{comment}{\ \ \ \ \ \ Aras\ Pranckevicius:\ bugfixes}}
\DoxyCodeLine{00327\ \textcolor{comment}{\ \ \ \ \ \ Nathan\ Reed:\ warning\ fixes\ for\ 1.0}}
\DoxyCodeLine{00328\ \textcolor{comment}{}}
\DoxyCodeLine{00329\ \textcolor{comment}{\ \ \ REVISIONS}}
\DoxyCodeLine{00330\ \textcolor{comment}{\ \ \ \ \ \ 2.12\ (2024-\/10-\/18)\ fix\ incorrect\ use\ of\ user\_data\ with\ STBIR\_FREE}}
\DoxyCodeLine{00331\ \textcolor{comment}{\ \ \ \ \ \ 2.11\ (2024-\/09-\/08)\ fix\ harmless\ asan\ warnings\ in\ 2-\/channel\ and\ 3-\/channel\ mode}}
\DoxyCodeLine{00332\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ with\ AVX-\/2,\ fix\ some\ weird\ scaling\ edge\ conditions\ with}}
\DoxyCodeLine{00333\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ point\ sample\ mode.}}
\DoxyCodeLine{00334\ \textcolor{comment}{\ \ \ \ \ \ 2.10\ (2024-\/07-\/27)\ fix\ the\ defines\ GCC\ and\ mingw\ for\ loop\ unroll\ control,}}
\DoxyCodeLine{00335\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fix\ MSVC\ 32-\/bit\ arm\ half\ float\ routines.}}
\DoxyCodeLine{00336\ \textcolor{comment}{\ \ \ \ \ \ 2.09\ (2024-\/06-\/19)\ fix\ the\ defines\ for\ 32-\/bit\ ARM\ GCC\ builds\ (was\ selecting}}
\DoxyCodeLine{00337\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hardware\ half\ floats).}}
\DoxyCodeLine{00338\ \textcolor{comment}{\ \ \ \ \ \ 2.08\ (2024-\/06-\/10)\ fix\ for\ RGB-\/>BGR\ three\ channel\ flips\ and\ add\ SIMD\ (thanks}}
\DoxyCodeLine{00339\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ to\ Ryan\ Salsbury),\ fix\ for\ sub-\/rect\ resizes,\ use\ the}}
\DoxyCodeLine{00340\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pragmas\ to\ control\ unrolling\ when\ they\ are\ available.}}
\DoxyCodeLine{00341\ \textcolor{comment}{\ \ \ \ \ \ 2.07\ (2024-\/05-\/24)\ fix\ for\ slow\ final\ split\ during\ threaded\ conversions\ of\ very\ }}
\DoxyCodeLine{00342\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wide\ scanlines\ when\ downsampling\ (caused\ by\ extra\ input\ }}
\DoxyCodeLine{00343\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ converting),\ fix\ for\ wide\ scanline\ resamples\ with\ many\ }}
\DoxyCodeLine{00344\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ splits\ (int\ overflow),\ fix\ GCC\ warning.}}
\DoxyCodeLine{00345\ \textcolor{comment}{\ \ \ \ \ \ 2.06\ (2024-\/02-\/10)\ fix\ for\ identical\ width/height\ 3x\ or\ more\ down-\/scaling\ }}
\DoxyCodeLine{00346\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ undersampling\ a\ single\ row\ on\ rare\ resize\ ratios\ (about\ 1\%).}}
\DoxyCodeLine{00347\ \textcolor{comment}{\ \ \ \ \ \ 2.05\ (2024-\/02-\/07)\ fix\ for\ 2\ pixel\ to\ 1\ pixel\ resizes\ with\ wrap\ (thanks\ Aras),}}
\DoxyCodeLine{00348\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fix\ for\ output\ callback\ (thanks\ Julien\ Koenen).}}
\DoxyCodeLine{00349\ \textcolor{comment}{\ \ \ \ \ \ 2.04\ (2023-\/11-\/17)\ fix\ for\ rare\ AVX\ bug,\ shadowed\ symbol\ (thanks\ Nikola\ Smiljanic).}}
\DoxyCodeLine{00350\ \textcolor{comment}{\ \ \ \ \ \ 2.03\ (2023-\/11-\/01)\ ASAN\ and\ TSAN\ warnings\ fixed,\ minor\ tweaks.}}
\DoxyCodeLine{00351\ \textcolor{comment}{\ \ \ \ \ \ 2.00\ (2023-\/10-\/10)\ mostly\ new\ source:\ new\ api,\ optimizations,\ simd,\ vertical-\/first,\ etc}}
\DoxyCodeLine{00352\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2x-\/5x\ faster\ without\ simd,\ 4x-\/12x\ faster\ with\ simd,}}
\DoxyCodeLine{00353\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ in\ some\ cases,\ 20x\ to\ 40x\ faster\ esp\ resizing\ large\ to\ very\ small.}}
\DoxyCodeLine{00354\ \textcolor{comment}{\ \ \ \ \ \ 0.96\ (2019-\/03-\/04)\ fixed\ warnings}}
\DoxyCodeLine{00355\ \textcolor{comment}{\ \ \ \ \ \ 0.95\ (2017-\/07-\/23)\ fixed\ warnings}}
\DoxyCodeLine{00356\ \textcolor{comment}{\ \ \ \ \ \ 0.94\ (2017-\/03-\/18)\ fixed\ warnings}}
\DoxyCodeLine{00357\ \textcolor{comment}{\ \ \ \ \ \ 0.93\ (2017-\/03-\/03)\ fixed\ bug\ with\ certain\ combinations\ of\ heights}}
\DoxyCodeLine{00358\ \textcolor{comment}{\ \ \ \ \ \ 0.92\ (2017-\/01-\/02)\ fix\ integer\ overflow\ on\ large\ (>2GB)\ images}}
\DoxyCodeLine{00359\ \textcolor{comment}{\ \ \ \ \ \ 0.91\ (2016-\/04-\/02)\ fix\ warnings;\ fix\ handling\ of\ subpixel\ regions}}
\DoxyCodeLine{00360\ \textcolor{comment}{\ \ \ \ \ \ 0.90\ (2014-\/09-\/17)\ first\ released\ version}}
\DoxyCodeLine{00361\ \textcolor{comment}{}}
\DoxyCodeLine{00362\ \textcolor{comment}{\ \ \ LICENSE}}
\DoxyCodeLine{00363\ \textcolor{comment}{\ \ \ \ \ See\ end\ of\ file\ for\ license\ information.}}
\DoxyCodeLine{00364\ \textcolor{comment}{*/}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \textcolor{preprocessor}{\#if\ !defined(STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS)\ \&\&\ !defined(STB\_IMAGE\_RESIZE\_DO\_VERTICALS)\ \&\&\ !defined(STB\_IMAGE\_RESIZE\_DO\_CODERS)\ \ \ }\textcolor{comment}{//\ for\ internal\ re-\/includes}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#ifndef\ STBIR\_INCLUDE\_STB\_IMAGE\_RESIZE2\_H}}
\DoxyCodeLine{00369\ \textcolor{preprocessor}{\#define\ STBIR\_INCLUDE\_STB\_IMAGE\_RESIZE2\_H}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00372\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00373\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \ \ \ stbir\_uint8;}
\DoxyCodeLine{00374\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \ \ stbir\_uint16;}
\DoxyCodeLine{00375\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ \ stbir\_uint32;}
\DoxyCodeLine{00376\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \_\_int64\ stbir\_uint64;}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00379\ \textcolor{keyword}{typedef}\ uint8\_t\ \ stbir\_uint8;}
\DoxyCodeLine{00380\ \textcolor{keyword}{typedef}\ uint16\_t\ stbir\_uint16;}
\DoxyCodeLine{00381\ \textcolor{keyword}{typedef}\ uint32\_t\ stbir\_uint32;}
\DoxyCodeLine{00382\ \textcolor{keyword}{typedef}\ uint64\_t\ stbir\_uint64;}
\DoxyCodeLine{00383\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#ifdef\ \_M\_IX86\_FP}}
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\#if\ (\ \_M\_IX86\_FP\ >=\ 1\ )}}
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\#ifndef\ STBIR\_SSE}}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\#define\ STBIR\_SSE}}
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\#if\ defined(\_x86\_64)\ ||\ defined(\ \_\_x86\_64\_\_\ )\ ||\ defined(\ \_M\_X64\ )\ ||\ defined(\_\_x86\_64)\ ||\ defined(\_M\_AMD64)\ ||\ defined(\_\_SSE2\_\_)\ ||\ defined(STBIR\_SSE)\ ||\ defined(STBIR\_SSE2)}}
\DoxyCodeLine{00394\ \textcolor{preprocessor}{\ \ \#ifndef\ STBIR\_SSE2}}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_SSE2}}
\DoxyCodeLine{00396\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\ \ \#if\ defined(\_\_AVX\_\_)\ ||\ defined(STBIR\_AVX2)}}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ STBIR\_AVX}}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifndef\ STBIR\_NO\_AVX}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ STBIR\_AVX}}
\DoxyCodeLine{00401\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00403\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00404\ \textcolor{preprocessor}{\ \ \#if\ defined(\_\_AVX2\_\_)\ ||\ defined(STBIR\_AVX2)}}
\DoxyCodeLine{00405\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ STBIR\_NO\_AVX2}}
\DoxyCodeLine{00406\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifndef\ STBIR\_AVX2}}
\DoxyCodeLine{00407\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ STBIR\_AVX2}}
\DoxyCodeLine{00408\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00409\ \textcolor{preprocessor}{\ \ \ \ \ \ \#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{00410\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifndef\ STBIR\_FP16C\ \ }\textcolor{comment}{//\ FP16C\ instructions\ are\ on\ all\ AVX2\ cpus,\ so\ we\ can\ autoselect\ it\ here\ on\ microsoft\ -\/\ clang\ needs\ -\/m16c}}
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_FP16C}}
\DoxyCodeLine{00412\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00413\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00414\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00415\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00416\ \textcolor{preprocessor}{\ \ \#ifdef\ \_\_F16C\_\_}}
\DoxyCodeLine{00417\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ STBIR\_FP16C\ \ }\textcolor{comment}{//\ turn\ on\ FP16C\ instructions\ if\ the\ define\ is\ set\ (for\ clang\ and\ gcc)}}
\DoxyCodeLine{00418\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ STBIR\_FP16C}}
\DoxyCodeLine{00419\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00420\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00421\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \textcolor{preprocessor}{\#if\ defined(\ \_M\_ARM64\ )\ ||\ defined(\ \_\_aarch64\_\_\ )\ ||\ defined(\ \_\_arm64\_\_\ )\ ||\ ((\_\_ARM\_NEON\_FP\ \&\ 4)\ !=\ 0)\ ||\ defined(\_\_ARM\_NEON\_\_)}}
\DoxyCodeLine{00424\ \textcolor{preprocessor}{\#ifndef\ STBIR\_NEON}}
\DoxyCodeLine{00425\ \textcolor{preprocessor}{\#define\ STBIR\_NEON}}
\DoxyCodeLine{00426\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00427\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \textcolor{preprocessor}{\#if\ defined(\_M\_ARM)\ ||\ defined(\_\_arm\_\_)}}
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\#ifdef\ STBIR\_USE\_FMA}}
\DoxyCodeLine{00431\ \textcolor{preprocessor}{\#undef\ STBIR\_USE\_FMA\ }\textcolor{comment}{//\ no\ FMA\ for\ 32-\/bit\ arm\ on\ MSVC}}
\DoxyCodeLine{00432\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00433\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \textcolor{preprocessor}{\#if\ defined(\_\_wasm\_\_)\ \&\&\ defined(\_\_wasm\_simd128\_\_)}}
\DoxyCodeLine{00436\ \textcolor{preprocessor}{\#ifndef\ STBIR\_WASM}}
\DoxyCodeLine{00437\ \textcolor{preprocessor}{\#define\ STBIR\_WASM}}
\DoxyCodeLine{00438\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00439\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#ifndef\ STBIRDEF}}
\DoxyCodeLine{00442\ \textcolor{preprocessor}{\#ifdef\ STB\_IMAGE\_RESIZE\_STATIC}}
\DoxyCodeLine{00443\ \textcolor{preprocessor}{\#define\ STBIRDEF\ static}}
\DoxyCodeLine{00444\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00445\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00446\ \textcolor{preprocessor}{\#define\ STBIRDEF\ extern\ "{}C"{}}}
\DoxyCodeLine{00447\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\#define\ STBIRDEF\ extern}}
\DoxyCodeLine{00449\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00450\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00451\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00455\ \textcolor{comment}{//}}
\DoxyCodeLine{00456\ \textcolor{comment}{//\ Easy-\/to-\/use\ API:}}
\DoxyCodeLine{00457\ \textcolor{comment}{//}}
\DoxyCodeLine{00458\ \textcolor{comment}{//\ \ \ \ \ *\ stride\ is\ the\ offset\ between\ successive\ rows\ of\ image\ data}}
\DoxyCodeLine{00459\ \textcolor{comment}{//\ \ \ \ \ \ \ \ in\ memory,\ in\ bytes.\ specify\ 0\ for\ packed\ continuously\ in\ memory}}
\DoxyCodeLine{00460\ \textcolor{comment}{//\ \ \ \ \ *\ colorspace\ is\ linear\ or\ sRGB\ as\ specified\ by\ function\ name}}
\DoxyCodeLine{00461\ \textcolor{comment}{//\ \ \ \ \ *\ Uses\ the\ default\ filters}}
\DoxyCodeLine{00462\ \textcolor{comment}{//\ \ \ \ \ *\ Uses\ edge\ mode\ clamped}}
\DoxyCodeLine{00463\ \textcolor{comment}{//\ \ \ \ \ *\ returned\ result\ is\ 1\ for\ success\ or\ 0\ in\ case\ of\ an\ error.}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \textcolor{comment}{//\ stbir\_pixel\_layout\ specifies:}}
\DoxyCodeLine{00467\ \textcolor{comment}{//\ \ \ number\ of\ channels}}
\DoxyCodeLine{00468\ \textcolor{comment}{//\ \ \ order\ of\ channels}}
\DoxyCodeLine{00469\ \textcolor{comment}{//\ \ \ whether\ color\ is\ premultiplied\ by\ alpha}}
\DoxyCodeLine{00470\ \textcolor{comment}{//\ for\ back\ compatibility,\ you\ can\ cast\ the\ old\ channel\ count\ to\ an\ stbir\_pixel\_layout}}
\DoxyCodeLine{00471\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00472\ \{}
\DoxyCodeLine{00473\ \ \ STBIR\_1CHANNEL\ =\ 1,}
\DoxyCodeLine{00474\ \ \ STBIR\_2CHANNEL\ =\ 2,}
\DoxyCodeLine{00475\ \ \ STBIR\_RGB\ \ \ \ \ \ =\ 3,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 3-\/chan,\ with\ order\ specified\ (for\ channel\ flipping)}}
\DoxyCodeLine{00476\ \ \ STBIR\_BGR\ \ \ \ \ \ =\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 3-\/chan,\ with\ order\ specified\ (for\ channel\ flipping)}}
\DoxyCodeLine{00477\ \ \ STBIR\_4CHANNEL\ =\ 5,}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ STBIR\_RGBA\ =\ 4,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ alpha\ formats,\ where\ alpha\ is\ NOT\ premultiplied\ into\ color\ channels}}
\DoxyCodeLine{00480\ \ \ STBIR\_BGRA\ =\ 6,}
\DoxyCodeLine{00481\ \ \ STBIR\_ARGB\ =\ 7,}
\DoxyCodeLine{00482\ \ \ STBIR\_ABGR\ =\ 8,}
\DoxyCodeLine{00483\ \ \ STBIR\_RA\ \ \ =\ 9,}
\DoxyCodeLine{00484\ \ \ STBIR\_AR\ \ \ =\ 10,}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ STBIR\_RGBA\_PM\ =\ 11,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ alpha\ formats,\ where\ alpha\ is\ premultiplied\ into\ color\ channels}}
\DoxyCodeLine{00487\ \ \ STBIR\_BGRA\_PM\ =\ 12,}
\DoxyCodeLine{00488\ \ \ STBIR\_ARGB\_PM\ =\ 13,}
\DoxyCodeLine{00489\ \ \ STBIR\_ABGR\_PM\ =\ 14,}
\DoxyCodeLine{00490\ \ \ STBIR\_RA\_PM\ \ \ =\ 15,}
\DoxyCodeLine{00491\ \ \ STBIR\_AR\_PM\ \ \ =\ 16,}
\DoxyCodeLine{00492\ }
\DoxyCodeLine{00493\ \ \ STBIR\_RGBA\_NO\_AW\ =\ 11,\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ alpha\ formats,\ where\ NO\ alpha\ weighting\ is\ applied\ at\ all!}}
\DoxyCodeLine{00494\ \ \ STBIR\_BGRA\_NO\_AW\ =\ 12,\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ these\ are\ just\ synonyms\ for\ the\ \_PM\ flags\ (which\ also\ do}}
\DoxyCodeLine{00495\ \ \ STBIR\_ARGB\_NO\_AW\ =\ 13,\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ no\ alpha\ weighting).\ These\ names\ just\ make\ it\ more\ clear}}
\DoxyCodeLine{00496\ \ \ STBIR\_ABGR\_NO\_AW\ =\ 14,\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ for\ some\ folks).}}
\DoxyCodeLine{00497\ \ \ STBIR\_RA\_NO\_AW\ \ \ =\ 15,}
\DoxyCodeLine{00498\ \ \ STBIR\_AR\_NO\_AW\ \ \ =\ 16,}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \}\ stbir\_pixel\_layout;}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00503\ \textcolor{comment}{//\ \ Simple-\/complexity\ API}}
\DoxyCodeLine{00504\ \textcolor{comment}{//}}
\DoxyCodeLine{00505\ \textcolor{comment}{//\ \ \ \ If\ output\_pixels\ is\ NULL\ (0),\ then\ we\ will\ allocate\ the\ buffer\ and\ return\ it\ to\ you.}}
\DoxyCodeLine{00506\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ STBIRDEF\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ stbir\_resize\_uint8\_srgb(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_type\ );}
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00512\ STBIRDEF\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ stbir\_resize\_uint8\_linear(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_type\ );}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ STBIRDEF\ \textcolor{keywordtype}{float}\ *\ stbir\_resize\_float\_linear(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_type\ );}
\DoxyCodeLine{00519\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00522\ \textcolor{comment}{//\ Medium-\/complexity\ API}}
\DoxyCodeLine{00523\ \textcolor{comment}{//}}
\DoxyCodeLine{00524\ \textcolor{comment}{//\ This\ extends\ the\ easy-\/to-\/use\ API\ as\ follows:}}
\DoxyCodeLine{00525\ \textcolor{comment}{//}}
\DoxyCodeLine{00526\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ specify\ the\ datatype\ -\/\ U8,\ U8\_SRGB,\ U16,\ FLOAT,\ HALF\_FLOAT}}
\DoxyCodeLine{00527\ \textcolor{comment}{//\ \ \ \ \ *\ Edge\ wrap\ can\ selected\ explicitly}}
\DoxyCodeLine{00528\ \textcolor{comment}{//\ \ \ \ \ *\ Filter\ can\ be\ selected\ explicitly}}
\DoxyCodeLine{00529\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00532\ \{}
\DoxyCodeLine{00533\ \ \ STBIR\_EDGE\_CLAMP\ \ \ =\ 0,}
\DoxyCodeLine{00534\ \ \ STBIR\_EDGE\_REFLECT\ =\ 1,}
\DoxyCodeLine{00535\ \ \ STBIR\_EDGE\_WRAP\ \ \ \ =\ 2,\ \ \textcolor{comment}{//\ this\ edge\ mode\ is\ slower\ and\ uses\ more\ memory}}
\DoxyCodeLine{00536\ \ \ STBIR\_EDGE\_ZERO\ \ \ \ =\ 3,}
\DoxyCodeLine{00537\ \}\ stbir\_edge;}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00540\ \{}
\DoxyCodeLine{00541\ \ \ STBIR\_FILTER\_DEFAULT\ \ \ \ \ \ =\ 0,\ \ \textcolor{comment}{//\ use\ same\ filter\ type\ that\ easy-\/to-\/use\ API\ chooses}}
\DoxyCodeLine{00542\ \ \ STBIR\_FILTER\_BOX\ \ \ \ \ \ \ \ \ \ =\ 1,\ \ \textcolor{comment}{//\ A\ trapezoid\ w/1-\/pixel\ wide\ ramps,\ same\ result\ as\ box\ for\ integer\ scale\ ratios}}
\DoxyCodeLine{00543\ \ \ STBIR\_FILTER\_TRIANGLE\ \ \ \ \ =\ 2,\ \ \textcolor{comment}{//\ On\ upsampling,\ produces\ same\ results\ as\ bilinear\ texture\ filtering}}
\DoxyCodeLine{00544\ \ \ STBIR\_FILTER\_CUBICBSPLINE\ =\ 3,\ \ \textcolor{comment}{//\ The\ cubic\ b-\/spline\ (aka\ Mitchell-\/Netrevalli\ with\ B=1,C=0),\ gaussian-\/esque}}
\DoxyCodeLine{00545\ \ \ STBIR\_FILTER\_CATMULLROM\ \ \ =\ 4,\ \ \textcolor{comment}{//\ An\ interpolating\ cubic\ spline}}
\DoxyCodeLine{00546\ \ \ STBIR\_FILTER\_MITCHELL\ \ \ \ \ =\ 5,\ \ \textcolor{comment}{//\ Mitchell-\/Netrevalli\ filter\ with\ B=1/3,\ C=1/3}}
\DoxyCodeLine{00547\ \ \ STBIR\_FILTER\_POINT\_SAMPLE\ =\ 6,\ \ \textcolor{comment}{//\ Simple\ point\ sampling}}
\DoxyCodeLine{00548\ \ \ STBIR\_FILTER\_OTHER\ \ \ \ \ \ \ \ =\ 7,\ \ \textcolor{comment}{//\ User\ callback\ specified}}
\DoxyCodeLine{00549\ \}\ stbir\_filter;}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00552\ \{}
\DoxyCodeLine{00553\ \ \ STBIR\_TYPE\_UINT8\ \ \ \ \ \ \ \ \ \ \ \ =\ 0,}
\DoxyCodeLine{00554\ \ \ STBIR\_TYPE\_UINT8\_SRGB\ \ \ \ \ \ \ =\ 1,}
\DoxyCodeLine{00555\ \ \ STBIR\_TYPE\_UINT8\_SRGB\_ALPHA\ =\ 2,\ \ \textcolor{comment}{//\ alpha\ channel,\ when\ present,\ should\ also\ be\ SRGB\ (this\ is\ very\ unusual)}}
\DoxyCodeLine{00556\ \ \ STBIR\_TYPE\_UINT16\ \ \ \ \ \ \ \ \ \ \ =\ 3,}
\DoxyCodeLine{00557\ \ \ STBIR\_TYPE\_FLOAT\ \ \ \ \ \ \ \ \ \ \ \ =\ 4,}
\DoxyCodeLine{00558\ \ \ STBIR\_TYPE\_HALF\_FLOAT\ \ \ \ \ \ \ =\ 5}
\DoxyCodeLine{00559\ \}\ stbir\_datatype;}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ \textcolor{comment}{//\ medium\ api}}
\DoxyCodeLine{00562\ STBIRDEF\ \textcolor{keywordtype}{void}\ *\ \ stbir\_resize(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout,\ stbir\_datatype\ data\_type,}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge,\ stbir\_filter\ filter\ );}
\DoxyCodeLine{00566\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ }
\DoxyCodeLine{00570\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00571\ \textcolor{comment}{//\ Extended-\/complexity\ API}}
\DoxyCodeLine{00572\ \textcolor{comment}{//}}
\DoxyCodeLine{00573\ \textcolor{comment}{//\ This\ API\ exposes\ all\ resize\ functionality.}}
\DoxyCodeLine{00574\ \textcolor{comment}{//}}
\DoxyCodeLine{00575\ \textcolor{comment}{//\ \ \ \ \ *\ Separate\ filter\ types\ for\ each\ axis}}
\DoxyCodeLine{00576\ \textcolor{comment}{//\ \ \ \ \ *\ Separate\ edge\ modes\ for\ each\ axis}}
\DoxyCodeLine{00577\ \textcolor{comment}{//\ \ \ \ \ *\ Separate\ input\ and\ output\ data\ types}}
\DoxyCodeLine{00578\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ specify\ regions\ with\ subpixel\ correctness}}
\DoxyCodeLine{00579\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ specify\ alpha\ flags}}
\DoxyCodeLine{00580\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ specify\ a\ memory\ callback}}
\DoxyCodeLine{00581\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ specify\ a\ callback\ data\ type\ for\ pixel\ input\ and\ output}}
\DoxyCodeLine{00582\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ be\ threaded\ for\ a\ single\ resize}}
\DoxyCodeLine{00583\ \textcolor{comment}{//\ \ \ \ \ *\ Can\ be\ used\ to\ resize\ many\ frames\ without\ recalculating\ the\ sampler\ info}}
\DoxyCodeLine{00584\ \textcolor{comment}{//}}
\DoxyCodeLine{00585\ \textcolor{comment}{//\ \ Use\ this\ API\ as\ follows:}}
\DoxyCodeLine{00586\ \textcolor{comment}{//\ \ \ \ \ 1)\ Call\ the\ stbir\_resize\_init\ function\ on\ a\ local\ STBIR\_RESIZE\ structure}}
\DoxyCodeLine{00587\ \textcolor{comment}{//\ \ \ \ \ 2)\ Call\ any\ of\ the\ stbir\_set\ functions}}
\DoxyCodeLine{00588\ \textcolor{comment}{//\ \ \ \ \ 3)\ Optionally\ call\ stbir\_build\_samplers()\ if\ you\ are\ going\ to\ resample\ multiple\ times}}
\DoxyCodeLine{00589\ \textcolor{comment}{//\ \ \ \ \ \ \ \ with\ the\ same\ input\ and\ output\ dimensions\ (like\ resizing\ video\ frames)}}
\DoxyCodeLine{00590\ \textcolor{comment}{//\ \ \ \ \ 4)\ Resample\ by\ calling\ stbir\_resize\_extended().}}
\DoxyCodeLine{00591\ \textcolor{comment}{//\ \ \ \ \ 5)\ Call\ stbir\_free\_samplers()\ if\ you\ called\ stbir\_build\_samplers()}}
\DoxyCodeLine{00592\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \textcolor{comment}{//\ Types:}}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \textcolor{comment}{//\ INPUT\ CALLBACK:\ this\ callback\ is\ used\ for\ input\ scanlines}}
\DoxyCodeLine{00598\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ stbir\_input\_callback(\ \textcolor{keywordtype}{void}\ *\ optional\_output,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ input\_ptr,\ \textcolor{keywordtype}{int}\ num\_pixels,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{void}\ *\ context\ );}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \textcolor{comment}{//\ OUTPUT\ CALLBACK:\ this\ callback\ is\ used\ for\ output\ scanlines}}
\DoxyCodeLine{00601\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_output\_callback(\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ output\_ptr,\ \textcolor{keywordtype}{int}\ num\_pixels,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{void}\ *\ context\ );}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \textcolor{comment}{//\ callbacks\ for\ user\ installed\ filters}}
\DoxyCodeLine{00604\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{float}\ stbir\_\_kernel\_callback(\ \textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{void}\ *\ user\_data\ );\ \textcolor{comment}{//\ centered\ at\ zero}}
\DoxyCodeLine{00605\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_callback(\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{void}\ *\ user\_data\ );}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \textcolor{comment}{//\ internal\ structure\ with\ precomputed\ scaling}}
\DoxyCodeLine{00608\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }stbir\_\_info\ stbir\_\_info;}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \ \textcolor{comment}{//\ use\ the\ stbir\_resize\_init\ and\ stbir\_override\ functions\ to\ set\ these\ values\ for\ future\ compatibility}}
\DoxyCodeLine{00611\ \{}
\DoxyCodeLine{00612\ \ \ \textcolor{keywordtype}{void}\ *\ user\_data;}
\DoxyCodeLine{00613\ \ \ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ input\_pixels;}
\DoxyCodeLine{00614\ \ \ \textcolor{keywordtype}{int}\ input\_w,\ input\_h;}
\DoxyCodeLine{00615\ \ \ \textcolor{keywordtype}{double}\ input\_s0,\ input\_t0,\ input\_s1,\ input\_t1;}
\DoxyCodeLine{00616\ \ \ stbir\_input\_callback\ *\ input\_cb;}
\DoxyCodeLine{00617\ \ \ \textcolor{keywordtype}{void}\ *\ output\_pixels;}
\DoxyCodeLine{00618\ \ \ \textcolor{keywordtype}{int}\ output\_w,\ output\_h;}
\DoxyCodeLine{00619\ \ \ \textcolor{keywordtype}{int}\ output\_subx,\ output\_suby,\ output\_subw,\ output\_subh;}
\DoxyCodeLine{00620\ \ \ stbir\_output\_callback\ *\ output\_cb;}
\DoxyCodeLine{00621\ \ \ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes;}
\DoxyCodeLine{00622\ \ \ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes;}
\DoxyCodeLine{00623\ \ \ \textcolor{keywordtype}{int}\ splits;}
\DoxyCodeLine{00624\ \ \ \textcolor{keywordtype}{int}\ fast\_alpha;}
\DoxyCodeLine{00625\ \ \ \textcolor{keywordtype}{int}\ needs\_rebuild;}
\DoxyCodeLine{00626\ \ \ \textcolor{keywordtype}{int}\ called\_alloc;}
\DoxyCodeLine{00627\ \ \ stbir\_pixel\_layout\ input\_pixel\_layout\_public;}
\DoxyCodeLine{00628\ \ \ stbir\_pixel\_layout\ output\_pixel\_layout\_public;}
\DoxyCodeLine{00629\ \ \ stbir\_datatype\ input\_data\_type;}
\DoxyCodeLine{00630\ \ \ stbir\_datatype\ output\_data\_type;}
\DoxyCodeLine{00631\ \ \ stbir\_filter\ horizontal\_filter,\ vertical\_filter;}
\DoxyCodeLine{00632\ \ \ stbir\_edge\ horizontal\_edge,\ vertical\_edge;}
\DoxyCodeLine{00633\ \ \ stbir\_\_kernel\_callback\ *\ horizontal\_filter\_kernel;\ stbir\_\_support\_callback\ *\ horizontal\_filter\_support;}
\DoxyCodeLine{00634\ \ \ stbir\_\_kernel\_callback\ *\ vertical\_filter\_kernel;\ stbir\_\_support\_callback\ *\ vertical\_filter\_support;}
\DoxyCodeLine{00635\ \ \ stbir\_\_info\ *\ samplers;}
\DoxyCodeLine{00636\ \}\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}};}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \textcolor{comment}{//\ extended\ complexity\ api}}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00641\ \textcolor{comment}{//\ First\ off,\ you\ must\ ALWAYS\ call\ stbir\_resize\_init\ on\ your\ resize\ structure\ before\ any\ of\ the\ other\ calls!}}
\DoxyCodeLine{00642\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_init(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels,\ \ \textcolor{keywordtype}{int}\ input\_w,\ \ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,\ \textcolor{comment}{//\ stride\ can\ be\ zero}}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,\ \textcolor{comment}{//\ stride\ can\ be\ zero}}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout,\ stbir\_datatype\ data\_type\ );}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00648\ \textcolor{comment}{//\ You\ can\ update\ these\ parameters\ any\ time\ after\ resize\_init\ and\ there\ is\ no\ cost}}
\DoxyCodeLine{00649\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_datatypes(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_datatype\ input\_type,\ stbir\_datatype\ output\_type\ );}
\DoxyCodeLine{00652\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_pixel\_callbacks(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_input\_callback\ *\ input\_cb,\ stbir\_output\_callback\ *\ output\_cb\ );\ \ \ \textcolor{comment}{//\ no\ callbacks\ by\ default}}
\DoxyCodeLine{00653\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_user\_data(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{void}\ *\ user\_data\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pass\ back\ STBIR\_RESIZE*\ by\ default}}
\DoxyCodeLine{00654\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_buffer\_ptrs(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *\ input\_pixels,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,\ \textcolor{keywordtype}{void}\ *\ output\_pixels,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes\ );}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00656\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00657\ }
\DoxyCodeLine{00658\ }
\DoxyCodeLine{00659\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00660\ \textcolor{comment}{//\ If\ you\ call\ any\ of\ these\ functions,\ you\ will\ trigger\ a\ sampler\ rebuild!}}
\DoxyCodeLine{00661\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00662\ }
\DoxyCodeLine{00663\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_pixel\_layouts(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_pixel\_layout\ input\_pixel\_layout,\ stbir\_pixel\_layout\ output\_pixel\_layout\ );\ \ \textcolor{comment}{//\ sets\ new\ buffer\ layouts}}
\DoxyCodeLine{00664\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_edgemodes(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_edge\ horizontal\_edge,\ stbir\_edge\ vertical\_edge\ );\ \ \ \ \ \ \ \textcolor{comment}{//\ CLAMP\ by\ default}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_filters(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_filter\ horizontal\_filter,\ stbir\_filter\ vertical\_filter\ );\ \textcolor{comment}{//\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE/DOWNSAMPLE\ by\ default}}
\DoxyCodeLine{00667\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_filter\_callbacks(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_\_kernel\_callback\ *\ horizontal\_filter,\ stbir\_\_support\_callback\ *\ horizontal\_support,\ stbir\_\_kernel\_callback\ *\ vertical\_filter,\ stbir\_\_support\_callback\ *\ vertical\_support\ );}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_pixel\_subrect(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ subx,\ \textcolor{keywordtype}{int}\ suby,\ \textcolor{keywordtype}{int}\ subw,\ \textcolor{keywordtype}{int}\ subh\ );\ \ \ \ \ \ \ \ \textcolor{comment}{//\ sets\ both\ sub-\/regions\ (full\ regions\ by\ default)}}
\DoxyCodeLine{00670\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_input\_subrect(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{double}\ s0,\ \textcolor{keywordtype}{double}\ t0,\ \textcolor{keywordtype}{double}\ s1,\ \textcolor{keywordtype}{double}\ t1\ );\ \ \ \ \textcolor{comment}{//\ sets\ input\ sub-\/region\ (full\ region\ by\ default)}}
\DoxyCodeLine{00671\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_output\_pixel\_subrect(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ subx,\ \textcolor{keywordtype}{int}\ suby,\ \textcolor{keywordtype}{int}\ subw,\ \textcolor{keywordtype}{int}\ subh\ );\ \textcolor{comment}{//\ sets\ output\ sub-\/region\ (full\ region\ by\ default)}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \textcolor{comment}{//\ when\ inputting\ AND\ outputting\ non-\/premultiplied\ alpha\ pixels,\ we\ use\ a\ slower\ but\ higher\ quality\ technique}}
\DoxyCodeLine{00674\ \textcolor{comment}{//\ \ \ that\ fills\ the\ zero\ alpha\ pixel's\ RGB\ values\ with\ something\ plausible.\ \ If\ you\ don't\ care\ about\ areas\ of}}
\DoxyCodeLine{00675\ \textcolor{comment}{//\ \ \ zero\ alpha,\ you\ can\ call\ this\ function\ to\ get\ about\ a\ 25\%\ speed\ improvement\ for\ STBIR\_RGBA\ to\ STBIR\_RGBA}}
\DoxyCodeLine{00676\ \textcolor{comment}{//\ \ \ types\ of\ resizes.}}
\DoxyCodeLine{00677\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_non\_pm\_alpha\_speed\_over\_quality(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ non\_pma\_alpha\_speed\_over\_quality\ );}
\DoxyCodeLine{00678\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00682\ \textcolor{comment}{//\ You\ can\ call\ build\_samplers\ to\ prebuild\ all\ the\ internal\ data\ we\ need\ to\ resample.}}
\DoxyCodeLine{00683\ \textcolor{comment}{//\ \ \ Then,\ if\ you\ call\ resize\_extended\ many\ times\ with\ the\ same\ resize,\ you\ only\ pay\ the}}
\DoxyCodeLine{00684\ \textcolor{comment}{//\ \ \ cost\ once.}}
\DoxyCodeLine{00685\ \textcolor{comment}{//\ If\ you\ do\ call\ build\_samplers,\ you\ MUST\ call\ free\_samplers\ eventually.}}
\DoxyCodeLine{00686\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00687\ }
\DoxyCodeLine{00688\ \textcolor{comment}{//\ This\ builds\ the\ samplers\ and\ does\ one\ allocation}}
\DoxyCodeLine{00689\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_build\_samplers(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ );}
\DoxyCodeLine{00690\ }
\DoxyCodeLine{00691\ \textcolor{comment}{//\ You\ MUST\ call\ this,\ if\ you\ call\ stbir\_build\_samplers\ or\ stbir\_build\_samplers\_with\_splits}}
\DoxyCodeLine{00692\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_free\_samplers(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ );}
\DoxyCodeLine{00693\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ }
\DoxyCodeLine{00696\ \textcolor{comment}{//\ And\ this\ is\ the\ main\ function\ to\ perform\ the\ resize\ synchronously\ on\ one\ thread.}}
\DoxyCodeLine{00697\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_extended(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ );}
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00701\ \textcolor{comment}{//\ Use\ these\ functions\ for\ multithreading.}}
\DoxyCodeLine{00702\ \textcolor{comment}{//\ \ \ 1)\ You\ call\ stbir\_build\_samplers\_with\_splits\ first\ on\ the\ main\ thread}}
\DoxyCodeLine{00703\ \textcolor{comment}{//\ \ \ 2)\ Then\ stbir\_resize\_with\_split\ on\ each\ thread}}
\DoxyCodeLine{00704\ \textcolor{comment}{//\ \ \ 3)\ stbir\_free\_samplers\ when\ done\ on\ the\ main\ thread}}
\DoxyCodeLine{00705\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \textcolor{comment}{//\ This\ will\ build\ samplers\ for\ threading.}}
\DoxyCodeLine{00708\ \textcolor{comment}{//\ \ \ You\ can\ pass\ in\ the\ number\ of\ threads\ you'd\ like\ to\ use\ (try\_splits).}}
\DoxyCodeLine{00709\ \textcolor{comment}{//\ \ \ It\ returns\ the\ number\ of\ splits\ (threads)\ that\ you\ can\ call\ it\ with.}}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_build\_samplers\_with\_splits(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ try\_splits\ );}
\DoxyCodeLine{00713\ }
\DoxyCodeLine{00714\ \textcolor{comment}{//\ This\ function\ does\ a\ split\ of\ the\ resizing\ (you\ call\ this\ fuction\ for\ each}}
\DoxyCodeLine{00715\ \textcolor{comment}{//\ split,\ on\ multiple\ threads).\ A\ split\ is\ a\ piece\ of\ the\ output\ resize\ pixel\ space.}}
\DoxyCodeLine{00716\ }
\DoxyCodeLine{00717\ \textcolor{comment}{//\ Note\ that\ you\ MUST\ call\ stbir\_build\_samplers\_with\_splits\ before\ stbir\_resize\_extended\_split!}}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00719\ \textcolor{comment}{//\ Usually,\ you\ will\ always\ call\ stbir\_resize\_split\ with\ split\_start\ as\ the\ thread\_index}}
\DoxyCodeLine{00720\ \textcolor{comment}{//\ \ \ and\ "{}1"{}\ for\ the\ split\_count.}}
\DoxyCodeLine{00721\ \textcolor{comment}{//\ But,\ if\ you\ have\ a\ weird\ situation\ where\ you\ MIGHT\ want\ 8\ threads,\ but\ sometimes}}
\DoxyCodeLine{00722\ \textcolor{comment}{//\ \ \ only\ 4\ threads,\ you\ can\ use\ 0,2,4,6\ for\ the\ split\_start's\ and\ use\ "{}2"{}\ for\ the}}
\DoxyCodeLine{00723\ \textcolor{comment}{//\ \ \ split\_count\ each\ time\ to\ turn\ in\ into\ a\ 4\ thread\ resize.\ (This\ is\ unusual).}}
\DoxyCodeLine{00724\ }
\DoxyCodeLine{00725\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_extended\_split(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ split\_start,\ \textcolor{keywordtype}{int}\ split\_count\ );}
\DoxyCodeLine{00726\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00730\ \textcolor{comment}{//\ Pixel\ Callbacks\ info:}}
\DoxyCodeLine{00731\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \textcolor{comment}{//\ \ \ The\ input\ callback\ is\ super\ flexible\ -\/\ it\ calls\ you\ with\ the\ input\ address}}
\DoxyCodeLine{00734\ \textcolor{comment}{//\ \ \ (based\ on\ the\ stride\ and\ base\ pointer),\ it\ gives\ you\ an\ optional\_output}}
\DoxyCodeLine{00735\ \textcolor{comment}{//\ \ \ pointer\ that\ you\ can\ fill,\ or\ you\ can\ just\ return\ your\ own\ pointer\ into}}
\DoxyCodeLine{00736\ \textcolor{comment}{//\ \ \ your\ own\ data.}}
\DoxyCodeLine{00737\ \textcolor{comment}{//}}
\DoxyCodeLine{00738\ \textcolor{comment}{//\ \ \ You\ can\ also\ do\ conversion\ from\ non-\/supported\ data\ types\ if\ necessary\ -\/\ in}}
\DoxyCodeLine{00739\ \textcolor{comment}{//\ \ \ this\ case,\ you\ ignore\ the\ input\_ptr\ and\ just\ use\ the\ x\ and\ y\ parameters\ to}}
\DoxyCodeLine{00740\ \textcolor{comment}{//\ \ \ calculate\ your\ own\ input\_ptr\ based\ on\ the\ size\ of\ each\ non-\/supported\ pixel.}}
\DoxyCodeLine{00741\ \textcolor{comment}{//\ \ \ (Something\ like\ the\ third\ example\ below.)}}
\DoxyCodeLine{00742\ \textcolor{comment}{//}}
\DoxyCodeLine{00743\ \textcolor{comment}{//\ \ \ You\ can\ also\ install\ just\ an\ input\ or\ just\ an\ output\ callback\ by\ setting\ the}}
\DoxyCodeLine{00744\ \textcolor{comment}{//\ \ \ callback\ that\ you\ don't\ want\ to\ zero.}}
\DoxyCodeLine{00745\ \textcolor{comment}{//}}
\DoxyCodeLine{00746\ \textcolor{comment}{//\ \ \ \ \ First\ example,\ progress:\ (getting\ a\ callback\ that\ you\ can\ monitor\ the\ progress):}}
\DoxyCodeLine{00747\ \textcolor{comment}{//\ \ \ \ \ \ \ \ void\ const\ *\ my\_callback(\ void\ *\ optional\_output,\ void\ const\ *\ input\_ptr,\ int\ num\_pixels,\ int\ x,\ int\ y,\ void\ *\ context\ )}}
\DoxyCodeLine{00748\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00749\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ percentage\_done\ =\ y\ /\ input\_height;}}
\DoxyCodeLine{00750\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ return\ input\_ptr;\ \ //\ use\ buffer\ from\ call}}
\DoxyCodeLine{00751\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00752\ \textcolor{comment}{//}}
\DoxyCodeLine{00753\ \textcolor{comment}{//\ \ \ \ \ Next\ example,\ copying:\ (copy\ from\ some\ other\ buffer\ or\ stream):}}
\DoxyCodeLine{00754\ \textcolor{comment}{//\ \ \ \ \ \ \ \ void\ const\ *\ my\_callback(\ void\ *\ optional\_output,\ void\ const\ *\ input\_ptr,\ int\ num\_pixels,\ int\ x,\ int\ y,\ void\ *\ context\ )}}
\DoxyCodeLine{00755\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00756\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ CopyOrStreamData(\ optional\_output,\ other\_data\_src,\ num\_pixels\ *\ pixel\_width\_in\_bytes\ );}}
\DoxyCodeLine{00757\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ return\ optional\_output;\ \ //\ return\ the\ optional\ buffer\ that\ we\ filled}}
\DoxyCodeLine{00758\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00759\ \textcolor{comment}{//}}
\DoxyCodeLine{00760\ \textcolor{comment}{//\ \ \ \ \ Third\ example,\ input\ another\ buffer\ without\ copying:\ (zero-\/copy\ from\ other\ buffer):}}
\DoxyCodeLine{00761\ \textcolor{comment}{//\ \ \ \ \ \ \ \ void\ const\ *\ my\_callback(\ void\ *\ optional\_output,\ void\ const\ *\ input\_ptr,\ int\ num\_pixels,\ int\ x,\ int\ y,\ void\ *\ context\ )}}
\DoxyCodeLine{00762\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00763\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ void\ *\ pixels\ =\ (\ (char*)\ other\_image\_base\ )\ +\ (\ y\ *\ other\_image\_stride\ )\ +\ (\ x\ *\ other\_pixel\_width\_in\_bytes\ );}}
\DoxyCodeLine{00764\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ return\ pixels;\ \ \ \ \ \ \ //\ return\ pointer\ to\ your\ data\ without\ copying}}
\DoxyCodeLine{00765\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00766\ \textcolor{comment}{//}}
\DoxyCodeLine{00767\ \textcolor{comment}{//}}
\DoxyCodeLine{00768\ \textcolor{comment}{//\ \ \ The\ output\ callback\ is\ considerably\ simpler\ -\/\ it\ just\ calls\ you\ so\ that\ you\ can\ dump}}
\DoxyCodeLine{00769\ \textcolor{comment}{//\ \ \ out\ each\ scanline.\ You\ could\ even\ directly\ copy\ out\ to\ disk\ if\ you\ have\ a\ simple\ format}}
\DoxyCodeLine{00770\ \textcolor{comment}{//\ \ \ like\ TGA\ or\ BMP.\ You\ can\ also\ convert\ to\ other\ output\ types\ here\ if\ you\ want.}}
\DoxyCodeLine{00771\ \textcolor{comment}{//}}
\DoxyCodeLine{00772\ \textcolor{comment}{//\ \ \ Simple\ example:}}
\DoxyCodeLine{00773\ \textcolor{comment}{//\ \ \ \ \ \ \ \ void\ const\ *\ my\_output(\ void\ *\ output\_ptr,\ int\ num\_pixels,\ int\ y,\ void\ *\ context\ )}}
\DoxyCodeLine{00774\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00775\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ percentage\_done\ =\ y\ /\ output\_height;}}
\DoxyCodeLine{00776\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ fwrite(\ output\_ptr,\ pixel\_width\_in\_bytes,\ num\_pixels,\ output\_file\ );}}
\DoxyCodeLine{00777\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00778\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00779\ }
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00784\ \textcolor{comment}{//\ optional\ built-\/in\ profiling\ API}}
\DoxyCodeLine{00785\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \textcolor{preprocessor}{\#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }STBIR\_PROFILE\_INFO}
\DoxyCodeLine{00790\ \{}
\DoxyCodeLine{00791\ \ \ stbir\_uint64\ total\_clocks;}
\DoxyCodeLine{00792\ }
\DoxyCodeLine{00793\ \ \ \textcolor{comment}{//\ how\ many\ clocks\ spent\ (of\ total\_clocks)\ in\ the\ various\ resize\ routines,\ along\ with\ a\ string\ description}}
\DoxyCodeLine{00794\ \ \ \textcolor{comment}{//\ \ \ \ there\ are\ "{}resize\_count"{}\ number\ of\ zones}}
\DoxyCodeLine{00795\ \ \ stbir\_uint64\ clocks[\ 8\ ];}
\DoxyCodeLine{00796\ \ \ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ **\ descriptions;}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ \textcolor{comment}{//\ count\ of\ clocks\ and\ descriptions}}
\DoxyCodeLine{00799\ \ \ stbir\_uint32\ count;}
\DoxyCodeLine{00800\ \}\ STBIR\_PROFILE\_INFO;}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \textcolor{comment}{//\ use\ after\ calling\ stbir\_resize\_extended\ (or\ stbir\_build\_samplers\ or\ stbir\_build\_samplers\_with\_splits)}}
\DoxyCodeLine{00803\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_build\_profile\_info(\ STBIR\_PROFILE\_INFO\ *\ out\_info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \textcolor{keyword}{const}\ *\ resize\ );}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00805\ \textcolor{comment}{//\ use\ after\ calling\ stbir\_resize\_extended}}
\DoxyCodeLine{00806\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_extended\_profile\_info(\ STBIR\_PROFILE\_INFO\ *\ out\_info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \textcolor{keyword}{const}\ *\ resize\ );}
\DoxyCodeLine{00807\ }
\DoxyCodeLine{00808\ \textcolor{comment}{//\ use\ after\ calling\ stbir\_resize\_extended\_split}}
\DoxyCodeLine{00809\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_split\_profile\_info(\ STBIR\_PROFILE\_INFO\ *\ out\_info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \textcolor{keyword}{const}\ *\ resize,\ \textcolor{keywordtype}{int}\ split\_start,\ \textcolor{keywordtype}{int}\ split\_num\ );}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \textcolor{comment}{//===============================================================}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ }
\DoxyCodeLine{00817\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STBIR\_INCLUDE\_STB\_IMAGE\_RESIZE2\_H}}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \textcolor{preprocessor}{\#if\ defined(STB\_IMAGE\_RESIZE\_IMPLEMENTATION)\ ||\ defined(STB\_IMAGE\_RESIZE2\_IMPLEMENTATION)}}
\DoxyCodeLine{00820\ }
\DoxyCodeLine{00821\ \textcolor{preprocessor}{\#ifndef\ STBIR\_ASSERT}}
\DoxyCodeLine{00822\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00823\ \textcolor{preprocessor}{\#define\ STBIR\_ASSERT(x)\ assert(x)}}
\DoxyCodeLine{00824\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00825\ }
\DoxyCodeLine{00826\ \textcolor{preprocessor}{\#ifndef\ STBIR\_MALLOC}}
\DoxyCodeLine{00827\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{00828\ \textcolor{preprocessor}{\#define\ STBIR\_MALLOC(size,user\_data)\ ((void)(user\_data),\ malloc(size))}}
\DoxyCodeLine{00829\ \textcolor{preprocessor}{\#define\ STBIR\_FREE(ptr,user\_data)\ \ \ \ ((void)(user\_data),\ free(ptr))}}
\DoxyCodeLine{00830\ \textcolor{comment}{//\ (we\ used\ the\ comma\ operator\ to\ evaluate\ user\_data,\ to\ avoid\ "{}unused\ parameter"{}\ warnings)}}
\DoxyCodeLine{00831\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00834\ }
\DoxyCodeLine{00835\ \textcolor{preprocessor}{\#define\ stbir\_\_inline\ \_\_forceinline}}
\DoxyCodeLine{00836\ }
\DoxyCodeLine{00837\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \textcolor{preprocessor}{\#define\ stbir\_\_inline\ \_\_inline\_\_}}
\DoxyCodeLine{00840\ }
\DoxyCodeLine{00841\ \textcolor{comment}{//\ Clang\ address\ sanitizer}}
\DoxyCodeLine{00842\ \textcolor{preprocessor}{\#if\ defined(\_\_has\_feature)}}
\DoxyCodeLine{00843\ \textcolor{preprocessor}{\ \ \#if\ \_\_has\_feature(address\_sanitizer)\ ||\ \_\_has\_feature(memory\_sanitizer)}}
\DoxyCodeLine{00844\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{00845\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{00846\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00847\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00848\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00849\ }
\DoxyCodeLine{00850\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00851\ }
\DoxyCodeLine{00852\ \textcolor{comment}{//\ GCC\ and\ MSVC}}
\DoxyCodeLine{00853\ \textcolor{preprocessor}{\#if\ defined(\_\_SANITIZE\_ADDRESS\_\_)}}
\DoxyCodeLine{00854\ \textcolor{preprocessor}{\ \ \#ifndef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{00855\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{00856\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00857\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00858\ }
\DoxyCodeLine{00859\ \textcolor{comment}{//\ Always\ turn\ off\ automatic\ FMA\ use\ -\/\ use\ STBIR\_USE\_FMA\ if\ you\ want.}}
\DoxyCodeLine{00860\ \textcolor{comment}{//\ Otherwise,\ this\ is\ a\ determinism\ disaster.}}
\DoxyCodeLine{00861\ \textcolor{preprocessor}{\#ifndef\ STBIR\_DONT\_CHANGE\_FP\_CONTRACT\ \ }\textcolor{comment}{//\ override\ in\ case\ you\ don't\ want\ this\ behavior}}
\DoxyCodeLine{00862\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{00863\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ >\ 1200}}
\DoxyCodeLine{00864\ \textcolor{preprocessor}{\#pragma\ fp\_contract(off)}}
\DoxyCodeLine{00865\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00866\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)\ \&\&\ \ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{00867\ \textcolor{preprocessor}{\#pragma\ GCC\ optimize("{}fp-\/contract=off"{})}}
\DoxyCodeLine{00868\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00869\ \textcolor{preprocessor}{\#pragma\ STDC\ FP\_CONTRACT\ OFF}}
\DoxyCodeLine{00870\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00871\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00873\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00874\ \textcolor{preprocessor}{\#define\ STBIR\_\_UNUSED(v)\ \ (void)(v)}}
\DoxyCodeLine{00875\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00876\ \textcolor{preprocessor}{\#define\ STBIR\_\_UNUSED(v)\ \ (void)sizeof(v)}}
\DoxyCodeLine{00877\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00878\ }
\DoxyCodeLine{00879\ \textcolor{preprocessor}{\#define\ STBIR\_\_ARRAY\_SIZE(a)\ (sizeof((a))/sizeof((a)[0]))}}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \textcolor{preprocessor}{\#ifndef\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE}}
\DoxyCodeLine{00883\ \textcolor{preprocessor}{\#define\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE\ \ \ \ STBIR\_FILTER\_CATMULLROM}}
\DoxyCodeLine{00884\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00885\ }
\DoxyCodeLine{00886\ \textcolor{preprocessor}{\#ifndef\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE}}
\DoxyCodeLine{00887\ \textcolor{preprocessor}{\#define\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE\ \ STBIR\_FILTER\_MITCHELL}}
\DoxyCodeLine{00888\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ }
\DoxyCodeLine{00891\ \textcolor{preprocessor}{\#ifndef\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{00892\ \textcolor{preprocessor}{\#define\ STBIR\_\_HEADER\_FILENAME\ "{}stb\_image\_resize2.h"{}}}
\DoxyCodeLine{00893\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00894\ }
\DoxyCodeLine{00895\ \textcolor{comment}{//\ the\ internal\ pixel\ layout\ enums\ are\ in\ a\ different\ order,\ so\ we\ can\ easily\ do\ range\ comparisons\ of\ types}}
\DoxyCodeLine{00896\ \textcolor{comment}{//\ \ \ the\ public\ pixel\ layout\ is\ ordered\ in\ a\ way\ that\ if\ you\ cast\ num\_channels\ (1-\/4)\ to\ the\ enum,\ you\ get\ something\ sensible}}
\DoxyCodeLine{00897\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00898\ \{}
\DoxyCodeLine{00899\ \ \ STBIRI\_1CHANNEL\ =\ 0,}
\DoxyCodeLine{00900\ \ \ STBIRI\_2CHANNEL\ =\ 1,}
\DoxyCodeLine{00901\ \ \ STBIRI\_RGB\ \ \ \ \ \ =\ 2,}
\DoxyCodeLine{00902\ \ \ STBIRI\_BGR\ \ \ \ \ \ =\ 3,}
\DoxyCodeLine{00903\ \ \ STBIRI\_4CHANNEL\ =\ 4,}
\DoxyCodeLine{00904\ }
\DoxyCodeLine{00905\ \ \ STBIRI\_RGBA\ =\ 5,}
\DoxyCodeLine{00906\ \ \ STBIRI\_BGRA\ =\ 6,}
\DoxyCodeLine{00907\ \ \ STBIRI\_ARGB\ =\ 7,}
\DoxyCodeLine{00908\ \ \ STBIRI\_ABGR\ =\ 8,}
\DoxyCodeLine{00909\ \ \ STBIRI\_RA\ \ \ =\ 9,}
\DoxyCodeLine{00910\ \ \ STBIRI\_AR\ \ \ =\ 10,}
\DoxyCodeLine{00911\ }
\DoxyCodeLine{00912\ \ \ STBIRI\_RGBA\_PM\ =\ 11,}
\DoxyCodeLine{00913\ \ \ STBIRI\_BGRA\_PM\ =\ 12,}
\DoxyCodeLine{00914\ \ \ STBIRI\_ARGB\_PM\ =\ 13,}
\DoxyCodeLine{00915\ \ \ STBIRI\_ABGR\_PM\ =\ 14,}
\DoxyCodeLine{00916\ \ \ STBIRI\_RA\_PM\ \ \ =\ 15,}
\DoxyCodeLine{00917\ \ \ STBIRI\_AR\_PM\ \ \ =\ 16,}
\DoxyCodeLine{00918\ \}\ stbir\_internal\_pixel\_layout;}
\DoxyCodeLine{00919\ }
\DoxyCodeLine{00920\ \textcolor{comment}{//\ define\ the\ public\ pixel\ layouts\ to\ not\ compile\ inside\ the\ implementation\ (to\ avoid\ accidental\ use)}}
\DoxyCodeLine{00921\ \textcolor{preprocessor}{\#define\ STBIR\_BGR\ bad\_dont\_use\_in\_implementation}}
\DoxyCodeLine{00922\ \textcolor{preprocessor}{\#define\ STBIR\_1CHANNEL\ STBIR\_BGR}}
\DoxyCodeLine{00923\ \textcolor{preprocessor}{\#define\ STBIR\_2CHANNEL\ STBIR\_BGR}}
\DoxyCodeLine{00924\ \textcolor{preprocessor}{\#define\ STBIR\_RGB\ STBIR\_BGR}}
\DoxyCodeLine{00925\ \textcolor{preprocessor}{\#define\ STBIR\_RGBA\ STBIR\_BGR}}
\DoxyCodeLine{00926\ \textcolor{preprocessor}{\#define\ STBIR\_4CHANNEL\ STBIR\_BGR}}
\DoxyCodeLine{00927\ \textcolor{preprocessor}{\#define\ STBIR\_BGRA\ STBIR\_BGR}}
\DoxyCodeLine{00928\ \textcolor{preprocessor}{\#define\ STBIR\_ARGB\ STBIR\_BGR}}
\DoxyCodeLine{00929\ \textcolor{preprocessor}{\#define\ STBIR\_ABGR\ STBIR\_BGR}}
\DoxyCodeLine{00930\ \textcolor{preprocessor}{\#define\ STBIR\_RA\ STBIR\_BGR}}
\DoxyCodeLine{00931\ \textcolor{preprocessor}{\#define\ STBIR\_AR\ STBIR\_BGR}}
\DoxyCodeLine{00932\ \textcolor{preprocessor}{\#define\ STBIR\_RGBA\_PM\ STBIR\_BGR}}
\DoxyCodeLine{00933\ \textcolor{preprocessor}{\#define\ STBIR\_BGRA\_PM\ STBIR\_BGR}}
\DoxyCodeLine{00934\ \textcolor{preprocessor}{\#define\ STBIR\_ARGB\_PM\ STBIR\_BGR}}
\DoxyCodeLine{00935\ \textcolor{preprocessor}{\#define\ STBIR\_ABGR\_PM\ STBIR\_BGR}}
\DoxyCodeLine{00936\ \textcolor{preprocessor}{\#define\ STBIR\_RA\_PM\ STBIR\_BGR}}
\DoxyCodeLine{00937\ \textcolor{preprocessor}{\#define\ STBIR\_AR\_PM\ STBIR\_BGR}}
\DoxyCodeLine{00938\ }
\DoxyCodeLine{00939\ \textcolor{comment}{//\ must\ match\ stbir\_datatype}}
\DoxyCodeLine{00940\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ stbir\_\_type\_size[]\ =\ \{}
\DoxyCodeLine{00941\ \ \ 1,1,1,2,4,2\ \textcolor{comment}{//\ STBIR\_TYPE\_UINT8,STBIR\_TYPE\_UINT8\_SRGB,STBIR\_TYPE\_UINT8\_SRGB\_ALPHA,STBIR\_TYPE\_UINT16,STBIR\_TYPE\_FLOAT,STBIR\_TYPE\_HALF\_FLOAT}}
\DoxyCodeLine{00942\ \};}
\DoxyCodeLine{00943\ }
\DoxyCodeLine{00944\ \textcolor{comment}{//\ When\ gathering,\ the\ contributors\ are\ which\ source\ pixels\ contribute.}}
\DoxyCodeLine{00945\ \textcolor{comment}{//\ When\ scattering,\ the\ contributors\ are\ which\ destination\ pixels\ are\ contributed\ to.}}
\DoxyCodeLine{00946\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00947\ \{}
\DoxyCodeLine{00948\ \ \ \textcolor{keywordtype}{int}\ n0;\ \textcolor{comment}{//\ First\ contributing\ pixel}}
\DoxyCodeLine{00949\ \ \ \textcolor{keywordtype}{int}\ n1;\ \textcolor{comment}{//\ Last\ contributing\ pixel}}
\DoxyCodeLine{00950\ \}\ stbir\_\_contributors;}
\DoxyCodeLine{00951\ }
\DoxyCodeLine{00952\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00953\ \{}
\DoxyCodeLine{00954\ \ \ \textcolor{keywordtype}{int}\ lowest;\ \ \ \ \textcolor{comment}{//\ First\ sample\ index\ for\ whole\ filter}}
\DoxyCodeLine{00955\ \ \ \textcolor{keywordtype}{int}\ highest;\ \ \ \textcolor{comment}{//\ Last\ sample\ index\ for\ whole\ filter}}
\DoxyCodeLine{00956\ \ \ \textcolor{keywordtype}{int}\ widest;\ \ \ \ \textcolor{comment}{//\ widest\ single\ set\ of\ samples\ for\ an\ output}}
\DoxyCodeLine{00957\ \}\ stbir\_\_filter\_extent\_info;}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00960\ \{}
\DoxyCodeLine{00961\ \ \ \textcolor{keywordtype}{int}\ n0;\ \textcolor{comment}{//\ First\ pixel\ of\ decode\ buffer\ to\ write\ to}}
\DoxyCodeLine{00962\ \ \ \textcolor{keywordtype}{int}\ n1;\ \textcolor{comment}{//\ Last\ pixel\ of\ decode\ that\ will\ be\ written\ to}}
\DoxyCodeLine{00963\ \ \ \textcolor{keywordtype}{int}\ pixel\_offset\_for\_input;\ \ \textcolor{comment}{//\ Pixel\ offset\ into\ input\_scanline}}
\DoxyCodeLine{00964\ \}\ stbir\_\_span;}
\DoxyCodeLine{00965\ }
\DoxyCodeLine{00966\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }stbir\_\_scale\_info}
\DoxyCodeLine{00967\ \{}
\DoxyCodeLine{00968\ \ \ \textcolor{keywordtype}{int}\ input\_full\_size;}
\DoxyCodeLine{00969\ \ \ \textcolor{keywordtype}{int}\ output\_sub\_size;}
\DoxyCodeLine{00970\ \ \ \textcolor{keywordtype}{float}\ scale;}
\DoxyCodeLine{00971\ \ \ \textcolor{keywordtype}{float}\ inv\_scale;}
\DoxyCodeLine{00972\ \ \ \textcolor{keywordtype}{float}\ pixel\_shift;\ \textcolor{comment}{//\ starting\ shift\ in\ output\ pixel\ space\ (in\ pixels)}}
\DoxyCodeLine{00973\ \ \ \textcolor{keywordtype}{int}\ scale\_is\_rational;}
\DoxyCodeLine{00974\ \ \ stbir\_uint32\ scale\_numerator,\ scale\_denominator;}
\DoxyCodeLine{00975\ \}\ stbir\_\_scale\_info;}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00978\ \{}
\DoxyCodeLine{00979\ \ \ stbir\_\_contributors\ *\ contributors;}
\DoxyCodeLine{00980\ \ \ \textcolor{keywordtype}{float}*\ coefficients;}
\DoxyCodeLine{00981\ \ \ stbir\_\_contributors\ *\ gather\_prescatter\_contributors;}
\DoxyCodeLine{00982\ \ \ \textcolor{keywordtype}{float}\ *\ gather\_prescatter\_coefficients;}
\DoxyCodeLine{00983\ \ \ stbir\_\_scale\_info\ scale\_info;}
\DoxyCodeLine{00984\ \ \ \textcolor{keywordtype}{float}\ support;}
\DoxyCodeLine{00985\ \ \ stbir\_filter\ filter\_enum;}
\DoxyCodeLine{00986\ \ \ stbir\_\_kernel\_callback\ *\ filter\_kernel;}
\DoxyCodeLine{00987\ \ \ stbir\_\_support\_callback\ *\ filter\_support;}
\DoxyCodeLine{00988\ \ \ stbir\_edge\ edge;}
\DoxyCodeLine{00989\ \ \ \textcolor{keywordtype}{int}\ coefficient\_width;}
\DoxyCodeLine{00990\ \ \ \textcolor{keywordtype}{int}\ filter\_pixel\_width;}
\DoxyCodeLine{00991\ \ \ \textcolor{keywordtype}{int}\ filter\_pixel\_margin;}
\DoxyCodeLine{00992\ \ \ \textcolor{keywordtype}{int}\ num\_contributors;}
\DoxyCodeLine{00993\ \ \ \textcolor{keywordtype}{int}\ contributors\_size;}
\DoxyCodeLine{00994\ \ \ \textcolor{keywordtype}{int}\ coefficients\_size;}
\DoxyCodeLine{00995\ \ \ stbir\_\_filter\_extent\_info\ extent\_info;}
\DoxyCodeLine{00996\ \ \ \textcolor{keywordtype}{int}\ is\_gather;\ \ \textcolor{comment}{//\ 0\ =\ scatter,\ 1\ =\ gather\ with\ scale\ >=\ 1,\ 2\ =\ gather\ with\ scale\ <\ 1}}
\DoxyCodeLine{00997\ \ \ \textcolor{keywordtype}{int}\ gather\_prescatter\_num\_contributors;}
\DoxyCodeLine{00998\ \ \ \textcolor{keywordtype}{int}\ gather\_prescatter\_coefficient\_width;}
\DoxyCodeLine{00999\ \ \ \textcolor{keywordtype}{int}\ gather\_prescatter\_contributors\_size;}
\DoxyCodeLine{01000\ \ \ \textcolor{keywordtype}{int}\ gather\_prescatter\_coefficients\_size;}
\DoxyCodeLine{01001\ \}\ stbir\_\_sampler;}
\DoxyCodeLine{01002\ }
\DoxyCodeLine{01003\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{01004\ \{}
\DoxyCodeLine{01005\ \ \ stbir\_\_contributors\ conservative;}
\DoxyCodeLine{01006\ \ \ \textcolor{keywordtype}{int}\ edge\_sizes[2];\ \ \ \ \textcolor{comment}{//\ this\ can\ be\ less\ than\ filter\_pixel\_margin,\ if\ the\ filter\ and\ scaling\ falls\ off}}
\DoxyCodeLine{01007\ \ \ stbir\_\_span\ spans[2];\ \textcolor{comment}{//\ can\ be\ two\ spans,\ if\ doing\ input\ subrect\ with\ clamp\ mode\ WRAP}}
\DoxyCodeLine{01008\ \}\ stbir\_\_extents;}
\DoxyCodeLine{01009\ }
\DoxyCodeLine{01010\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{01011\ \{}
\DoxyCodeLine{01012\ \textcolor{preprocessor}{\#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{01013\ \ \ \textcolor{keyword}{union}}
\DoxyCodeLine{01014\ \ \ \{}
\DoxyCodeLine{01015\ \ \ \ \ \textcolor{keyword}{struct\ }\{\ stbir\_uint64\ total,\ looping,\ vertical,\ horizontal,\ decode,\ encode,\ alpha,\ unalpha;\ \}\ named;}
\DoxyCodeLine{01016\ \ \ \ \ stbir\_uint64\ array[8];}
\DoxyCodeLine{01017\ \ \ \}\ profile;}
\DoxyCodeLine{01018\ \ \ stbir\_uint64\ *\ current\_zone\_excluded\_ptr;}
\DoxyCodeLine{01019\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01020\ \ \ \textcolor{keywordtype}{float}*\ decode\_buffer;}
\DoxyCodeLine{01021\ }
\DoxyCodeLine{01022\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_first\_scanline;}
\DoxyCodeLine{01023\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_last\_scanline;}
\DoxyCodeLine{01024\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_begin\_index;\ \ \ \ \textcolor{comment}{//\ first\_scanline\ is\ at\ this\ index\ in\ the\ ring\ buffer}}
\DoxyCodeLine{01025\ \ \ \textcolor{keywordtype}{int}\ start\_output\_y,\ end\_output\_y;}
\DoxyCodeLine{01026\ \ \ \textcolor{keywordtype}{int}\ start\_input\_y,\ end\_input\_y;\ \ \textcolor{comment}{//\ used\ in\ scatter\ only}}
\DoxyCodeLine{01027\ }
\DoxyCodeLine{01028\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{01029\ \ \ \ \ \textcolor{keywordtype}{float}**\ ring\_buffers;\ \textcolor{comment}{//\ one\ pointer\ for\ each\ ring\ buffer}}
\DoxyCodeLine{01030\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01031\ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer;\ \ \textcolor{comment}{//\ one\ big\ buffer\ that\ we\ index\ into}}
\DoxyCodeLine{01032\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01033\ }
\DoxyCodeLine{01034\ \ \ \textcolor{keywordtype}{float}*\ vertical\_buffer;}
\DoxyCodeLine{01035\ }
\DoxyCodeLine{01036\ \ \ \textcolor{keywordtype}{char}\ no\_cache\_straddle[64];}
\DoxyCodeLine{01037\ \}\ stbir\_\_per\_split\_info;}
\DoxyCodeLine{01038\ }
\DoxyCodeLine{01039\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_\_decode\_pixels\_func(\ \textcolor{keywordtype}{float}\ *\ decode,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ input\ );}
\DoxyCodeLine{01040\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_\_alpha\_weight\_func(\ \textcolor{keywordtype}{float}\ *\ decode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ );}
\DoxyCodeLine{01041\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_\_horizontal\_gather\_channels\_func(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,}
\DoxyCodeLine{01042\ \ \ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ );}
\DoxyCodeLine{01043\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_\_alpha\_unweight\_func(\textcolor{keywordtype}{float}\ *\ encode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ );}
\DoxyCodeLine{01044\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_\_encode\_pixels\_func(\ \textcolor{keywordtype}{void}\ *\ output,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ );}
\DoxyCodeLine{01045\ }
\DoxyCodeLine{01046\ \textcolor{keyword}{struct\ }stbir\_\_info}
\DoxyCodeLine{01047\ \{}
\DoxyCodeLine{01048\ \textcolor{preprocessor}{\#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{01049\ \ \ \textcolor{keyword}{union}}
\DoxyCodeLine{01050\ \ \ \{}
\DoxyCodeLine{01051\ \ \ \ \ \textcolor{keyword}{struct\ }\{\ stbir\_uint64\ total,\ build,\ alloc,\ horizontal,\ vertical,\ cleanup,\ pivot;\ \}\ named;}
\DoxyCodeLine{01052\ \ \ \ \ stbir\_uint64\ array[7];}
\DoxyCodeLine{01053\ \ \ \}\ profile;}
\DoxyCodeLine{01054\ \ \ stbir\_uint64\ *\ current\_zone\_excluded\_ptr;}
\DoxyCodeLine{01055\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01056\ \ \ stbir\_\_sampler\ horizontal;}
\DoxyCodeLine{01057\ \ \ stbir\_\_sampler\ vertical;}
\DoxyCodeLine{01058\ }
\DoxyCodeLine{01059\ \ \ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ input\_data;}
\DoxyCodeLine{01060\ \ \ \textcolor{keywordtype}{void}\ *\ output\_data;}
\DoxyCodeLine{01061\ }
\DoxyCodeLine{01062\ \ \ \textcolor{keywordtype}{int}\ input\_stride\_bytes;}
\DoxyCodeLine{01063\ \ \ \textcolor{keywordtype}{int}\ output\_stride\_bytes;}
\DoxyCodeLine{01064\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_length\_bytes;\ \ \ \textcolor{comment}{//\ The\ length\ of\ an\ individual\ entry\ in\ the\ ring\ buffer.\ The\ total\ number\ of\ ring\ buffers\ is\ stbir\_\_get\_filter\_pixel\_width(filter)}}
\DoxyCodeLine{01065\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_num\_entries;\ \ \ \ \textcolor{comment}{//\ Total\ number\ of\ entries\ in\ the\ ring\ buffer.}}
\DoxyCodeLine{01066\ }
\DoxyCodeLine{01067\ \ \ stbir\_datatype\ input\_type;}
\DoxyCodeLine{01068\ \ \ stbir\_datatype\ output\_type;}
\DoxyCodeLine{01069\ }
\DoxyCodeLine{01070\ \ \ stbir\_input\_callback\ *\ in\_pixels\_cb;}
\DoxyCodeLine{01071\ \ \ \textcolor{keywordtype}{void}\ *\ user\_data;}
\DoxyCodeLine{01072\ \ \ stbir\_output\_callback\ *\ out\_pixels\_cb;}
\DoxyCodeLine{01073\ }
\DoxyCodeLine{01074\ \ \ stbir\_\_extents\ scanline\_extents;}
\DoxyCodeLine{01075\ }
\DoxyCodeLine{01076\ \ \ \textcolor{keywordtype}{void}\ *\ alloced\_mem;}
\DoxyCodeLine{01077\ \ \ stbir\_\_per\_split\_info\ *\ split\_info;\ \ \textcolor{comment}{//\ by\ default\ 1,\ but\ there\ will\ be\ N\ of\ these\ allocated\ based\ on\ the\ thread\ init\ you\ did}}
\DoxyCodeLine{01078\ }
\DoxyCodeLine{01079\ \ \ stbir\_\_decode\_pixels\_func\ *\ decode\_pixels;}
\DoxyCodeLine{01080\ \ \ stbir\_\_alpha\_weight\_func\ *\ alpha\_weight;}
\DoxyCodeLine{01081\ \ \ stbir\_\_horizontal\_gather\_channels\_func\ *\ horizontal\_gather\_channels;}
\DoxyCodeLine{01082\ \ \ stbir\_\_alpha\_unweight\_func\ *\ alpha\_unweight;}
\DoxyCodeLine{01083\ \ \ stbir\_\_encode\_pixels\_func\ *\ encode\_pixels;}
\DoxyCodeLine{01084\ }
\DoxyCodeLine{01085\ \ \ \textcolor{keywordtype}{int}\ alloc\_ring\_buffer\_num\_entries;\ \ \ \ \textcolor{comment}{//\ Number\ of\ entries\ in\ the\ ring\ buffer\ that\ will\ be\ allocated}}
\DoxyCodeLine{01086\ \ \ \textcolor{keywordtype}{int}\ splits;\ \textcolor{comment}{//\ count\ of\ splits}}
\DoxyCodeLine{01087\ }
\DoxyCodeLine{01088\ \ \ stbir\_internal\_pixel\_layout\ input\_pixel\_layout\_internal;}
\DoxyCodeLine{01089\ \ \ stbir\_internal\_pixel\_layout\ output\_pixel\_layout\_internal;}
\DoxyCodeLine{01090\ }
\DoxyCodeLine{01091\ \ \ \textcolor{keywordtype}{int}\ input\_color\_and\_type;}
\DoxyCodeLine{01092\ \ \ \textcolor{keywordtype}{int}\ offset\_x,\ offset\_y;\ \textcolor{comment}{//\ offset\ within\ output\_data}}
\DoxyCodeLine{01093\ \ \ \textcolor{keywordtype}{int}\ vertical\_first;}
\DoxyCodeLine{01094\ \ \ \textcolor{keywordtype}{int}\ channels;}
\DoxyCodeLine{01095\ \ \ \textcolor{keywordtype}{int}\ effective\_channels;\ \textcolor{comment}{//\ same\ as\ channels,\ except\ on\ RGBA/ARGB\ (7),\ or\ XA/AX\ (3)}}
\DoxyCodeLine{01096\ \ \ \textcolor{keywordtype}{size\_t}\ alloced\_total;}
\DoxyCodeLine{01097\ \};}
\DoxyCodeLine{01098\ }
\DoxyCodeLine{01099\ }
\DoxyCodeLine{01100\ \textcolor{preprocessor}{\#define\ stbir\_\_max\_uint8\_as\_float\ \ \ \ \ \ \ \ \ \ \ \ \ 255.0f}}
\DoxyCodeLine{01101\ \textcolor{preprocessor}{\#define\ stbir\_\_max\_uint16\_as\_float\ \ \ \ \ \ \ \ \ \ \ \ 65535.0f}}
\DoxyCodeLine{01102\ \textcolor{preprocessor}{\#define\ stbir\_\_max\_uint8\_as\_float\_inverted\ \ \ \ (1.0f/255.0f)}}
\DoxyCodeLine{01103\ \textcolor{preprocessor}{\#define\ stbir\_\_max\_uint16\_as\_float\_inverted\ \ \ (1.0f/65535.0f)}}
\DoxyCodeLine{01104\ \textcolor{preprocessor}{\#define\ stbir\_\_small\_float\ ((float)1\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20))}}
\DoxyCodeLine{01105\ }
\DoxyCodeLine{01106\ \textcolor{comment}{//\ min/max\ friendly}}
\DoxyCodeLine{01107\ \textcolor{preprocessor}{\#define\ STBIR\_CLAMP(x,\ xmin,\ xmax)\ for(;;)\ \{\ \(\backslash\)}}
\DoxyCodeLine{01108\ \textcolor{preprocessor}{\ \ if\ (\ (x)\ <\ (xmin)\ )\ (x)\ =\ (xmin);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01109\ \textcolor{preprocessor}{\ \ if\ (\ (x)\ >\ (xmax)\ )\ (x)\ =\ (xmax);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01110\ \textcolor{preprocessor}{\ \ break;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01111\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{01112\ }
\DoxyCodeLine{01113\ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{int}\ stbir\_\_min(\textcolor{keywordtype}{int}\ a,\ \textcolor{keywordtype}{int}\ b)}
\DoxyCodeLine{01114\ \{}
\DoxyCodeLine{01115\ \ \ \textcolor{keywordflow}{return}\ a\ <\ b\ ?\ a\ :\ b;}
\DoxyCodeLine{01116\ \}}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{int}\ stbir\_\_max(\textcolor{keywordtype}{int}\ a,\ \textcolor{keywordtype}{int}\ b)}
\DoxyCodeLine{01119\ \{}
\DoxyCodeLine{01120\ \ \ \textcolor{keywordflow}{return}\ a\ >\ b\ ?\ a\ :\ b;}
\DoxyCodeLine{01121\ \}}
\DoxyCodeLine{01122\ }
\DoxyCodeLine{01123\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_srgb\_uchar\_to\_linear\_float[256]\ =\ \{}
\DoxyCodeLine{01124\ \ \ 0.000000f,\ 0.000304f,\ 0.000607f,\ 0.000911f,\ 0.001214f,\ 0.001518f,\ 0.001821f,\ 0.002125f,\ 0.002428f,\ 0.002732f,\ 0.003035f,}
\DoxyCodeLine{01125\ \ \ 0.003347f,\ 0.003677f,\ 0.004025f,\ 0.004391f,\ 0.004777f,\ 0.005182f,\ 0.005605f,\ 0.006049f,\ 0.006512f,\ 0.006995f,\ 0.007499f,}
\DoxyCodeLine{01126\ \ \ 0.008023f,\ 0.008568f,\ 0.009134f,\ 0.009721f,\ 0.010330f,\ 0.010960f,\ 0.011612f,\ 0.012286f,\ 0.012983f,\ 0.013702f,\ 0.014444f,}
\DoxyCodeLine{01127\ \ \ 0.015209f,\ 0.015996f,\ 0.016807f,\ 0.017642f,\ 0.018500f,\ 0.019382f,\ 0.020289f,\ 0.021219f,\ 0.022174f,\ 0.023153f,\ 0.024158f,}
\DoxyCodeLine{01128\ \ \ 0.025187f,\ 0.026241f,\ 0.027321f,\ 0.028426f,\ 0.029557f,\ 0.030713f,\ 0.031896f,\ 0.033105f,\ 0.034340f,\ 0.035601f,\ 0.036889f,}
\DoxyCodeLine{01129\ \ \ 0.038204f,\ 0.039546f,\ 0.040915f,\ 0.042311f,\ 0.043735f,\ 0.045186f,\ 0.046665f,\ 0.048172f,\ 0.049707f,\ 0.051269f,\ 0.052861f,}
\DoxyCodeLine{01130\ \ \ 0.054480f,\ 0.056128f,\ 0.057805f,\ 0.059511f,\ 0.061246f,\ 0.063010f,\ 0.064803f,\ 0.066626f,\ 0.068478f,\ 0.070360f,\ 0.072272f,}
\DoxyCodeLine{01131\ \ \ 0.074214f,\ 0.076185f,\ 0.078187f,\ 0.080220f,\ 0.082283f,\ 0.084376f,\ 0.086500f,\ 0.088656f,\ 0.090842f,\ 0.093059f,\ 0.095307f,}
\DoxyCodeLine{01132\ \ \ 0.097587f,\ 0.099899f,\ 0.102242f,\ 0.104616f,\ 0.107023f,\ 0.109462f,\ 0.111932f,\ 0.114435f,\ 0.116971f,\ 0.119538f,\ 0.122139f,}
\DoxyCodeLine{01133\ \ \ 0.124772f,\ 0.127438f,\ 0.130136f,\ 0.132868f,\ 0.135633f,\ 0.138432f,\ 0.141263f,\ 0.144128f,\ 0.147027f,\ 0.149960f,\ 0.152926f,}
\DoxyCodeLine{01134\ \ \ 0.155926f,\ 0.158961f,\ 0.162029f,\ 0.165132f,\ 0.168269f,\ 0.171441f,\ 0.174647f,\ 0.177888f,\ 0.181164f,\ 0.184475f,\ 0.187821f,}
\DoxyCodeLine{01135\ \ \ 0.191202f,\ 0.194618f,\ 0.198069f,\ 0.201556f,\ 0.205079f,\ 0.208637f,\ 0.212231f,\ 0.215861f,\ 0.219526f,\ 0.223228f,\ 0.226966f,}
\DoxyCodeLine{01136\ \ \ 0.230740f,\ 0.234551f,\ 0.238398f,\ 0.242281f,\ 0.246201f,\ 0.250158f,\ 0.254152f,\ 0.258183f,\ 0.262251f,\ 0.266356f,\ 0.270498f,}
\DoxyCodeLine{01137\ \ \ 0.274677f,\ 0.278894f,\ 0.283149f,\ 0.287441f,\ 0.291771f,\ 0.296138f,\ 0.300544f,\ 0.304987f,\ 0.309469f,\ 0.313989f,\ 0.318547f,}
\DoxyCodeLine{01138\ \ \ 0.323143f,\ 0.327778f,\ 0.332452f,\ 0.337164f,\ 0.341914f,\ 0.346704f,\ 0.351533f,\ 0.356400f,\ 0.361307f,\ 0.366253f,\ 0.371238f,}
\DoxyCodeLine{01139\ \ \ 0.376262f,\ 0.381326f,\ 0.386430f,\ 0.391573f,\ 0.396755f,\ 0.401978f,\ 0.407240f,\ 0.412543f,\ 0.417885f,\ 0.423268f,\ 0.428691f,}
\DoxyCodeLine{01140\ \ \ 0.434154f,\ 0.439657f,\ 0.445201f,\ 0.450786f,\ 0.456411f,\ 0.462077f,\ 0.467784f,\ 0.473532f,\ 0.479320f,\ 0.485150f,\ 0.491021f,}
\DoxyCodeLine{01141\ \ \ 0.496933f,\ 0.502887f,\ 0.508881f,\ 0.514918f,\ 0.520996f,\ 0.527115f,\ 0.533276f,\ 0.539480f,\ 0.545725f,\ 0.552011f,\ 0.558340f,}
\DoxyCodeLine{01142\ \ \ 0.564712f,\ 0.571125f,\ 0.577581f,\ 0.584078f,\ 0.590619f,\ 0.597202f,\ 0.603827f,\ 0.610496f,\ 0.617207f,\ 0.623960f,\ 0.630757f,}
\DoxyCodeLine{01143\ \ \ 0.637597f,\ 0.644480f,\ 0.651406f,\ 0.658375f,\ 0.665387f,\ 0.672443f,\ 0.679543f,\ 0.686685f,\ 0.693872f,\ 0.701102f,\ 0.708376f,}
\DoxyCodeLine{01144\ \ \ 0.715694f,\ 0.723055f,\ 0.730461f,\ 0.737911f,\ 0.745404f,\ 0.752942f,\ 0.760525f,\ 0.768151f,\ 0.775822f,\ 0.783538f,\ 0.791298f,}
\DoxyCodeLine{01145\ \ \ 0.799103f,\ 0.806952f,\ 0.814847f,\ 0.822786f,\ 0.830770f,\ 0.838799f,\ 0.846873f,\ 0.854993f,\ 0.863157f,\ 0.871367f,\ 0.879622f,}
\DoxyCodeLine{01146\ \ \ 0.887923f,\ 0.896269f,\ 0.904661f,\ 0.913099f,\ 0.921582f,\ 0.930111f,\ 0.938686f,\ 0.947307f,\ 0.955974f,\ 0.964686f,\ 0.973445f,}
\DoxyCodeLine{01147\ \ \ 0.982251f,\ 0.991102f,\ 1.0f}
\DoxyCodeLine{01148\ \};}
\DoxyCodeLine{01149\ }
\DoxyCodeLine{01150\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{union}}
\DoxyCodeLine{01151\ \{}
\DoxyCodeLine{01152\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ u;}
\DoxyCodeLine{01153\ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{01154\ \}\ stbir\_\_FP32;}
\DoxyCodeLine{01155\ }
\DoxyCodeLine{01156\ \textcolor{comment}{//\ From\ https://gist.github.com/rygorous/2203834}}
\DoxyCodeLine{01157\ }
\DoxyCodeLine{01158\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_uint32\ fp32\_to\_srgb8\_tab4[104]\ =\ \{}
\DoxyCodeLine{01159\ \ \ 0x0073000d,\ 0x007a000d,\ 0x0080000d,\ 0x0087000d,\ 0x008d000d,\ 0x0094000d,\ 0x009a000d,\ 0x00a1000d,}
\DoxyCodeLine{01160\ \ \ 0x00a7001a,\ 0x00b4001a,\ 0x00c1001a,\ 0x00ce001a,\ 0x00da001a,\ 0x00e7001a,\ 0x00f4001a,\ 0x0101001a,}
\DoxyCodeLine{01161\ \ \ 0x010e0033,\ 0x01280033,\ 0x01410033,\ 0x015b0033,\ 0x01750033,\ 0x018f0033,\ 0x01a80033,\ 0x01c20033,}
\DoxyCodeLine{01162\ \ \ 0x01dc0067,\ 0x020f0067,\ 0x02430067,\ 0x02760067,\ 0x02aa0067,\ 0x02dd0067,\ 0x03110067,\ 0x03440067,}
\DoxyCodeLine{01163\ \ \ 0x037800ce,\ 0x03df00ce,\ 0x044600ce,\ 0x04ad00ce,\ 0x051400ce,\ 0x057b00c5,\ 0x05dd00bc,\ 0x063b00b5,}
\DoxyCodeLine{01164\ \ \ 0x06970158,\ 0x07420142,\ 0x07e30130,\ 0x087b0120,\ 0x090b0112,\ 0x09940106,\ 0x0a1700fc,\ 0x0a9500f2,}
\DoxyCodeLine{01165\ \ \ 0x0b0f01cb,\ 0x0bf401ae,\ 0x0ccb0195,\ 0x0d950180,\ 0x0e56016e,\ 0x0f0d015e,\ 0x0fbc0150,\ 0x10630143,}
\DoxyCodeLine{01166\ \ \ 0x11070264,\ 0x1238023e,\ 0x1357021d,\ 0x14660201,\ 0x156601e9,\ 0x165a01d3,\ 0x174401c0,\ 0x182401af,}
\DoxyCodeLine{01167\ \ \ 0x18fe0331,\ 0x1a9602fe,\ 0x1c1502d2,\ 0x1d7e02ad,\ 0x1ed4028d,\ 0x201a0270,\ 0x21520256,\ 0x227d0240,}
\DoxyCodeLine{01168\ \ \ 0x239f0443,\ 0x25c003fe,\ 0x27bf03c4,\ 0x29a10392,\ 0x2b6a0367,\ 0x2d1d0341,\ 0x2ebe031f,\ 0x304d0300,}
\DoxyCodeLine{01169\ \ \ 0x31d105b0,\ 0x34a80555,\ 0x37520507,\ 0x39d504c5,\ 0x3c37048b,\ 0x3e7c0458,\ 0x40a8042a,\ 0x42bd0401,}
\DoxyCodeLine{01170\ \ \ 0x44c20798,\ 0x488e071e,\ 0x4c1c06b6,\ 0x4f76065d,\ 0x52a50610,\ 0x55ac05cc,\ 0x5892058f,\ 0x5b590559,}
\DoxyCodeLine{01171\ \ \ 0x5e0c0a23,\ 0x631c0980,\ 0x67db08f6,\ 0x6c55087f,\ 0x70940818,\ 0x74a007bd,\ 0x787d076c,\ 0x7c330723,}
\DoxyCodeLine{01172\ \};}
\DoxyCodeLine{01173\ }
\DoxyCodeLine{01174\ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_uint8\ stbir\_\_linear\_to\_srgb\_uchar(\textcolor{keywordtype}{float}\ in)}
\DoxyCodeLine{01175\ \{}
\DoxyCodeLine{01176\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_FP32\ almostone\ =\ \{\ 0x3f7fffff\ \};\ \textcolor{comment}{//\ 1-\/eps}}
\DoxyCodeLine{01177\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_FP32\ minval\ =\ \{\ (127-\/13)\ <<\ 23\ \};}
\DoxyCodeLine{01178\ \ \ stbir\_uint32\ tab,bias,scale,t;}
\DoxyCodeLine{01179\ \ \ stbir\_\_FP32\ f;}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \ \ \textcolor{comment}{//\ Clamp\ to\ [2\string^(-\/13),\ 1-\/eps];\ these\ two\ values\ map\ to\ 0\ and\ 1,\ respectively.}}
\DoxyCodeLine{01182\ \ \ \textcolor{comment}{//\ The\ tests\ are\ carefully\ written\ so\ that\ NaNs\ map\ to\ 0,\ same\ as\ in\ the\ reference}}
\DoxyCodeLine{01183\ \ \ \textcolor{comment}{//\ implementation.}}
\DoxyCodeLine{01184\ \ \ \textcolor{keywordflow}{if}\ (!(in\ >\ minval.f))\ \textcolor{comment}{//\ written\ this\ way\ to\ catch\ NaNs}}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01186\ \ \ \textcolor{keywordflow}{if}\ (in\ >\ almostone.f)}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 255;}
\DoxyCodeLine{01188\ }
\DoxyCodeLine{01189\ \ \ \textcolor{comment}{//\ Do\ the\ table\ lookup\ and\ unpack\ bias,\ scale}}
\DoxyCodeLine{01190\ \ \ f.f\ =\ in;}
\DoxyCodeLine{01191\ \ \ tab\ =\ fp32\_to\_srgb8\_tab4[(f.u\ -\/\ minval.u)\ >>\ 20];}
\DoxyCodeLine{01192\ \ \ bias\ =\ (tab\ >>\ 16)\ <<\ 9;}
\DoxyCodeLine{01193\ \ \ scale\ =\ tab\ \&\ 0xffff;}
\DoxyCodeLine{01194\ }
\DoxyCodeLine{01195\ \ \ \textcolor{comment}{//\ Grab\ next-\/highest\ mantissa\ bits\ and\ perform\ linear\ interpolation}}
\DoxyCodeLine{01196\ \ \ t\ =\ (f.u\ >>\ 12)\ \&\ 0xff;}
\DoxyCodeLine{01197\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})\ ((bias\ +\ scale*t)\ >>\ 16);}
\DoxyCodeLine{01198\ \}}
\DoxyCodeLine{01199\ }
\DoxyCodeLine{01200\ \textcolor{preprocessor}{\#ifndef\ STBIR\_FORCE\_GATHER\_FILTER\_SCANLINES\_AMOUNT}}
\DoxyCodeLine{01201\ \textcolor{preprocessor}{\#define\ STBIR\_FORCE\_GATHER\_FILTER\_SCANLINES\_AMOUNT\ 32\ }\textcolor{comment}{//\ when\ downsampling\ and\ <=\ 32\ scanlines\ of\ buffering,\ use\ gather.\ gather\ used\ down\ to\ 1/8th\ scaling\ for\ 25\%\ win.}}
\DoxyCodeLine{01202\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01203\ }
\DoxyCodeLine{01204\ \textcolor{preprocessor}{\#ifndef\ STBIR\_FORCE\_MINIMUM\_SCANLINES\_FOR\_SPLITS}}
\DoxyCodeLine{01205\ \textcolor{preprocessor}{\#define\ STBIR\_FORCE\_MINIMUM\_SCANLINES\_FOR\_SPLITS\ 4\ }\textcolor{comment}{//\ when\ threading,\ what\ is\ the\ minimum\ number\ of\ scanlines\ for\ a\ split?}}
\DoxyCodeLine{01206\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01207\ }
\DoxyCodeLine{01208\ \textcolor{comment}{//\ restrict\ pointers\ for\ the\ output\ pointers,\ other\ loop\ and\ unroll\ control}}
\DoxyCodeLine{01209\ \textcolor{preprocessor}{\#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01210\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_STREAMOUT\_PTR(\ star\ )\ star\ \_\_restrict}}
\DoxyCodeLine{01211\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_NO\_UNROLL(\ ptr\ )\ \_\_assume(ptr)\ }\textcolor{comment}{//\ this\ oddly\ keeps\ msvc\ from\ unrolling\ a\ loop}}
\DoxyCodeLine{01212\ \textcolor{preprocessor}{\ \ \#if\ \_MSC\_VER\ >=\ 1900}}
\DoxyCodeLine{01213\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START\ \_\_pragma(loop(\ no\_vector\ ))\ }}
\DoxyCodeLine{01214\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01215\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START\ }}
\DoxyCodeLine{01216\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01217\ \textcolor{preprocessor}{\#elif\ defined(\ \_\_clang\_\_\ )}}
\DoxyCodeLine{01218\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_STREAMOUT\_PTR(\ star\ )\ star\ \_\_restrict\_\_}}
\DoxyCodeLine{01219\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_NO\_UNROLL(\ ptr\ )\ \_\_asm\_\_\ ("{}"{}::"{}r"{}(ptr))\ }}
\DoxyCodeLine{01220\ \textcolor{preprocessor}{\ \ \#if\ (\ \_\_clang\_major\_\_\ >=\ 4\ )\ ||\ (\ (\ \_\_clang\_major\_\_\ >=\ 3\ )\ \&\&\ (\ \_\_clang\_minor\_\_\ >=\ 5\ )\ )}}
\DoxyCodeLine{01221\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START\ \_Pragma("{}clang\ loop\ unroll(disable)"{})\ \_Pragma("{}clang\ loop\ vectorize(disable)"{})}}
\DoxyCodeLine{01222\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01223\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START}}
\DoxyCodeLine{01224\ \textcolor{preprocessor}{\ \ \#endif\ }}
\DoxyCodeLine{01225\ \textcolor{preprocessor}{\#elif\ defined(\ \_\_GNUC\_\_\ )}}
\DoxyCodeLine{01226\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_STREAMOUT\_PTR(\ star\ )\ star\ \_\_restrict\_\_}}
\DoxyCodeLine{01227\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_NO\_UNROLL(\ ptr\ )\ \_\_asm\_\_\ ("{}"{}::"{}r"{}(ptr))}}
\DoxyCodeLine{01228\ \textcolor{preprocessor}{\ \ \#if\ \_\_GNUC\_\_\ >=\ 14}}
\DoxyCodeLine{01229\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START\ \_Pragma("{}GCC\ unroll\ 0"{})\ \_Pragma("{}GCC\ novector"{})}}
\DoxyCodeLine{01230\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01231\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START}}
\DoxyCodeLine{01232\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01233\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}}
\DoxyCodeLine{01234\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01235\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_STREAMOUT\_PTR(\ star\ )\ star}}
\DoxyCodeLine{01236\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_NO\_UNROLL(\ ptr\ )}}
\DoxyCodeLine{01237\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_NO\_UNROLL\_LOOP\_START}}
\DoxyCodeLine{01238\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01239\ }
\DoxyCodeLine{01240\ \textcolor{preprocessor}{\#ifndef\ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}}
\DoxyCodeLine{01241\ \textcolor{preprocessor}{\#define\ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR\ STBIR\_NO\_UNROLL\_LOOP\_START}}
\DoxyCodeLine{01242\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01243\ }
\DoxyCodeLine{01244\ \textcolor{preprocessor}{\#ifdef\ STBIR\_NO\_SIMD\ }\textcolor{comment}{//\ force\ simd\ off\ for\ whatever\ reason}}
\DoxyCodeLine{01245\ }
\DoxyCodeLine{01246\ \textcolor{comment}{//\ force\ simd\ off\ overrides\ everything\ else,\ so\ clear\ it\ all}}
\DoxyCodeLine{01247\ }
\DoxyCodeLine{01248\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SSE2}}
\DoxyCodeLine{01249\ \textcolor{preprocessor}{\#undef\ STBIR\_SSE2}}
\DoxyCodeLine{01250\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01251\ }
\DoxyCodeLine{01252\ \textcolor{preprocessor}{\#ifdef\ STBIR\_AVX}}
\DoxyCodeLine{01253\ \textcolor{preprocessor}{\#undef\ STBIR\_AVX}}
\DoxyCodeLine{01254\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01255\ }
\DoxyCodeLine{01256\ \textcolor{preprocessor}{\#ifdef\ STBIR\_NEON}}
\DoxyCodeLine{01257\ \textcolor{preprocessor}{\#undef\ STBIR\_NEON}}
\DoxyCodeLine{01258\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01259\ }
\DoxyCodeLine{01260\ \textcolor{preprocessor}{\#ifdef\ STBIR\_AVX2}}
\DoxyCodeLine{01261\ \textcolor{preprocessor}{\#undef\ STBIR\_AVX2}}
\DoxyCodeLine{01262\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01263\ }
\DoxyCodeLine{01264\ \textcolor{preprocessor}{\#ifdef\ STBIR\_FP16C}}
\DoxyCodeLine{01265\ \textcolor{preprocessor}{\#undef\ STBIR\_FP16C}}
\DoxyCodeLine{01266\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01267\ }
\DoxyCodeLine{01268\ \textcolor{preprocessor}{\#ifdef\ STBIR\_WASM}}
\DoxyCodeLine{01269\ \textcolor{preprocessor}{\#undef\ STBIR\_WASM}}
\DoxyCodeLine{01270\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01271\ }
\DoxyCodeLine{01272\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{01273\ \textcolor{preprocessor}{\#undef\ STBIR\_SIMD}}
\DoxyCodeLine{01274\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01275\ }
\DoxyCodeLine{01276\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ STBIR\_SIMD}}
\DoxyCodeLine{01277\ }
\DoxyCodeLine{01278\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SSE2}}
\DoxyCodeLine{01279\ \textcolor{preprocessor}{\ \ \#include\ <emmintrin.h>}}
\DoxyCodeLine{01280\ }
\DoxyCodeLine{01281\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\ \_\_m128}}
\DoxyCodeLine{01282\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\ \_\_m128i}}
\DoxyCodeLine{01283\ }
\DoxyCodeLine{01284\ \textcolor{preprocessor}{\ \ \#define\ stbir\_simdi\_castf(\ reg\ )\ \_mm\_castps\_si128(reg)}}
\DoxyCodeLine{01285\ \textcolor{preprocessor}{\ \ \#define\ stbir\_simdf\_casti(\ reg\ )\ \_mm\_castsi128\_ps(reg)}}
\DoxyCodeLine{01286\ }
\DoxyCodeLine{01287\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load(\ reg,\ ptr\ )\ (reg)\ =\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ )}}
\DoxyCodeLine{01288\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_load(\ reg,\ ptr\ )\ (reg)\ =\ \_mm\_loadu\_si128\ (\ (stbir\_\_simdi\ const*)(ptr)\ )}}
\DoxyCodeLine{01289\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1(\ out,\ ptr\ )\ (out)\ =\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ )\ \ }\textcolor{comment}{//\ top\ values\ can\ be\ random\ (not\ denormal\ or\ nan\ for\ perf)}}
\DoxyCodeLine{01290\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_load1(\ out,\ ptr\ )\ (out)\ =\ \_mm\_castps\_si128(\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ ))}}
\DoxyCodeLine{01291\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1z(\ out,\ ptr\ )\ (out)\ =\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ )\ \ }\textcolor{comment}{//\ top\ values\ must\ be\ zero}}
\DoxyCodeLine{01292\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_frep4(\ fvar\ )\ \_mm\_set\_ps1(\ fvar\ )}}
\DoxyCodeLine{01293\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1frep4(\ out,\ fvar\ )\ (out)\ =\ \_mm\_set\_ps1(\ fvar\ )}}
\DoxyCodeLine{01294\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2(\ out,\ ptr\ )\ (out)\ =\ \_mm\_castsi128\_ps(\ \_mm\_loadl\_epi64(\ (\_\_m128i*)(ptr))\ )\ }\textcolor{comment}{//\ top\ values\ can\ be\ random\ (not\ denormal\ or\ nan\ for\ perf)}}
\DoxyCodeLine{01295\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2z(\ out,\ ptr\ )\ (out)\ =\ \_mm\_castsi128\_ps(\ \_mm\_loadl\_epi64(\ (\_\_m128i*)(ptr))\ )\ }\textcolor{comment}{//\ top\ values\ must\ be\ zero}}
\DoxyCodeLine{01296\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2hmerge(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm\_castpd\_ps(\_mm\_loadh\_pd(\ \_mm\_castps\_pd(reg),\ (double*)(ptr)\ ))}}
\DoxyCodeLine{01297\ }
\DoxyCodeLine{01298\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_zeroP()\ \_mm\_setzero\_ps()}}
\DoxyCodeLine{01299\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_zero(\ reg\ )\ (reg)\ =\ \_mm\_setzero\_ps()}}
\DoxyCodeLine{01300\ }
\DoxyCodeLine{01301\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store(\ ptr,\ reg\ )\ \ \_mm\_storeu\_ps(\ (float*)(ptr),\ reg\ )}}
\DoxyCodeLine{01302\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store1(\ ptr,\ reg\ )\ \_mm\_store\_ss(\ (float*)(ptr),\ reg\ )}}
\DoxyCodeLine{01303\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store2(\ ptr,\ reg\ )\ \_mm\_storel\_epi64(\ (\_\_m128i*)(ptr),\ \_mm\_castps\_si128(reg)\ )}}
\DoxyCodeLine{01304\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store2h(\ ptr,\ reg\ )\ \_mm\_storeh\_pd(\ (double*)(ptr),\ \_mm\_castps\_pd(reg)\ )}}
\DoxyCodeLine{01305\ }
\DoxyCodeLine{01306\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store(\ ptr,\ reg\ )\ \ \_mm\_storeu\_si128(\ (\_\_m128i*)(ptr),\ reg\ )}}
\DoxyCodeLine{01307\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store1(\ ptr,\ reg\ )\ \_mm\_store\_ss(\ (float*)(ptr),\ \_mm\_castsi128\_ps(reg)\ )}}
\DoxyCodeLine{01308\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store2(\ ptr,\ reg\ )\ \_mm\_storel\_epi64(\ (\_\_m128i*)(ptr),\ (reg)\ )}}
\DoxyCodeLine{01309\ }
\DoxyCodeLine{01310\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_prefetch(\ ptr\ )\ \_mm\_prefetch((char*)(ptr),\ \_MM\_HINT\_T0\ )}}
\DoxyCodeLine{01311\ }
\DoxyCodeLine{01312\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u8\_to\_u32(out0,out1,out2,out3,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01313\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01314\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\ zero\ =\ \_mm\_setzero\_si128();\ \(\backslash\)}}
\DoxyCodeLine{01315\ \textcolor{preprocessor}{\ \ \ \ out2\ =\ \_mm\_unpacklo\_epi8(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01316\ \textcolor{preprocessor}{\ \ \ \ out3\ =\ \_mm\_unpackhi\_epi8(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01317\ \textcolor{preprocessor}{\ \ \ \ out0\ =\ \_mm\_unpacklo\_epi16(\ out2,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01318\ \textcolor{preprocessor}{\ \ \ \ out1\ =\ \_mm\_unpackhi\_epi16(\ out2,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01319\ \textcolor{preprocessor}{\ \ \ \ out2\ =\ \_mm\_unpacklo\_epi16(\ out3,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01320\ \textcolor{preprocessor}{\ \ \ \ out3\ =\ \_mm\_unpackhi\_epi16(\ out3,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01321\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01322\ }
\DoxyCodeLine{01323\ \textcolor{preprocessor}{\#define\ stbir\_\_simdi\_expand\_u8\_to\_1u32(out,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01324\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01325\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\ zero\ =\ \_mm\_setzero\_si128();\ \(\backslash\)}}
\DoxyCodeLine{01326\ \textcolor{preprocessor}{\ \ \ \ out\ =\ \_mm\_unpacklo\_epi8(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01327\ \textcolor{preprocessor}{\ \ \ \ out\ =\ \_mm\_unpacklo\_epi16(\ out,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01328\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01329\ }
\DoxyCodeLine{01330\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u16\_to\_u32(out0,out1,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01331\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01332\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\ zero\ =\ \_mm\_setzero\_si128();\ \(\backslash\)}}
\DoxyCodeLine{01333\ \textcolor{preprocessor}{\ \ \ \ out0\ =\ \_mm\_unpacklo\_epi16(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01334\ \textcolor{preprocessor}{\ \ \ \ out1\ =\ \_mm\_unpackhi\_epi16(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01335\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01336\ }
\DoxyCodeLine{01337\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_i32(\ i,\ f\ )\ (i)\ =\ \_mm\_cvttps\_epi32(f)}}
\DoxyCodeLine{01338\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_int(\ f\ )\ \_mm\_cvtt\_ss2si(f)}}
\DoxyCodeLine{01339\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_uint8(\ f\ )\ ((unsigned\ char)\_mm\_cvtsi128\_si32(\_mm\_cvttps\_epi32(\_mm\_max\_ps(\_mm\_min\_ps(f,STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float)),\_mm\_setzero\_ps()))))}}
\DoxyCodeLine{01340\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_short(\ f\ )\ ((unsigned\ short)\_mm\_cvtsi128\_si32(\_mm\_cvttps\_epi32(\_mm\_max\_ps(\_mm\_min\_ps(f,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)),\_mm\_setzero\_ps()))))}}
\DoxyCodeLine{01341\ }
\DoxyCodeLine{01342\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_to\_int(\ i\ )\ \_mm\_cvtsi128\_si32(i)}}
\DoxyCodeLine{01343\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_convert\_i32\_to\_float(out,\ ireg)\ (out)\ =\ \_mm\_cvtepi32\_ps(\ ireg\ )}}
\DoxyCodeLine{01344\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_add\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01345\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_mul\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01346\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm\_mul\_ps(\ reg,\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01347\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult1\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm\_mul\_ss(\ reg,\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01348\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm\_add\_ps(\ reg,\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01349\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add1\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm\_add\_ss(\ reg,\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01350\ }
\DoxyCodeLine{01351\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_USE\_FMA\ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{//\ not\ on\ by\ default\ to\ maintain\ bit\ identical\ simd\ to\ non-\/simd}}
\DoxyCodeLine{01352\ \textcolor{preprocessor}{\ \ \#include\ <immintrin.h>}}
\DoxyCodeLine{01353\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ \_mm\_fmadd\_ps(\ mul1,\ mul2,\ add\ )}}
\DoxyCodeLine{01354\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ \_mm\_fmadd\_ss(\ mul1,\ mul2,\ add\ )}}
\DoxyCodeLine{01355\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ \_mm\_fmadd\_ps(\ mul,\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ ),\ add\ )}}
\DoxyCodeLine{01356\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ \_mm\_fmadd\_ss(\ mul,\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ ),\ add\ )}}
\DoxyCodeLine{01357\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01358\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ \_mm\_add\_ps(\ add,\ \_mm\_mul\_ps(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{01359\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ \_mm\_add\_ss(\ add,\ \_mm\_mul\_ss(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{01360\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ \_mm\_add\_ps(\ add,\ \_mm\_mul\_ps(\ mul,\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{01361\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ \_mm\_add\_ss(\ add,\ \_mm\_mul\_ss(\ mul,\ \_mm\_load\_ss(\ (float\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{01362\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01363\ }
\DoxyCodeLine{01364\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_add\_ss(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01365\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_mul\_ss(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01366\ }
\DoxyCodeLine{01367\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_and(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_and\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01368\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_or(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_or\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01369\ }
\DoxyCodeLine{01370\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_min(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_min\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01371\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_max(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_max\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01372\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_min1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_min\_ss(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01373\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_max1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_max\_ss(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01374\ }
\DoxyCodeLine{01375\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_0123ABCDto3ABx(\ out,\ reg0,\ reg1\ )\ (out)=\_mm\_castsi128\_ps(\ \_mm\_shuffle\_epi32(\ \_mm\_castps\_si128(\ \_mm\_shuffle\_ps(\ reg1,reg0,\ (0<<0)\ +\ (1<<2)\ +\ (2<<4)\ +\ (3<<6)\ )),\ (3<<0)\ +\ (0<<2)\ +\ (1<<4)\ +\ (2<<6)\ )\ )}}
\DoxyCodeLine{01376\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_0123ABCDto23Ax(\ out,\ reg0,\ reg1\ )\ (out)=\_mm\_castsi128\_ps(\ \_mm\_shuffle\_epi32(\ \_mm\_castps\_si128(\ \_mm\_shuffle\_ps(\ reg1,reg0,\ (0<<0)\ +\ (1<<2)\ +\ (2<<4)\ +\ (3<<6)\ )),\ (2<<0)\ +\ (3<<2)\ +\ (0<<4)\ +\ (1<<6)\ )\ )}}
\DoxyCodeLine{01377\ }
\DoxyCodeLine{01378\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf\ STBIR\_zeroones\ =\ \{\ 0.0f,1.0f,0.0f,1.0f\ \};}
\DoxyCodeLine{01379\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf\ STBIR\_onezeros\ =\ \{\ 1.0f,0.0f,1.0f,0.0f\ \};}
\DoxyCodeLine{01380\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_aaa1(\ out,\ alp,\ ones\ )\ (out)=\_mm\_castsi128\_ps(\ \_mm\_shuffle\_epi32(\ \_mm\_castps\_si128(\ \_mm\_movehl\_ps(\ ones,\ alp\ )\ ),\ (1<<0)\ +\ (1<<2)\ +\ (1<<4)\ +\ (2<<6)\ )\ )}}
\DoxyCodeLine{01381\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_1aaa(\ out,\ alp,\ ones\ )\ (out)=\_mm\_castsi128\_ps(\ \_mm\_shuffle\_epi32(\ \_mm\_castps\_si128(\ \_mm\_movelh\_ps(\ ones,\ alp\ )\ ),\ (0<<0)\ +\ (2<<2)\ +\ (2<<4)\ +\ (2<<6)\ )\ )}}
\DoxyCodeLine{01382\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_a1a1(\ out,\ alp,\ ones)\ (out)\ =\ \_mm\_or\_ps(\ \_mm\_castsi128\_ps(\ \_mm\_srli\_epi64(\ \_mm\_castps\_si128(alp),\ 32\ )\ ),\ STBIR\_zeroones\ )}}
\DoxyCodeLine{01383\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_1a1a(\ out,\ alp,\ ones)\ (out)\ =\ \_mm\_or\_ps(\ \_mm\_castsi128\_ps(\ \_mm\_slli\_epi64(\ \_mm\_castps\_si128(alp),\ 32\ )\ ),\ STBIR\_onezeros\ )}}
\DoxyCodeLine{01384\ }
\DoxyCodeLine{01385\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_swiz(\ reg,\ one,\ two,\ three,\ four\ )\ \_mm\_castsi128\_ps(\ \_mm\_shuffle\_epi32(\ \_mm\_castps\_si128(\ reg\ ),\ (one<<0)\ +\ (two<<2)\ +\ (three<<4)\ +\ (four<<6)\ )\ )}}
\DoxyCodeLine{01386\ }
\DoxyCodeLine{01387\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_and(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_and\_si128(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01388\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_or(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_or\_si128(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01389\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_16madd(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm\_madd\_epi16(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01390\ }
\DoxyCodeLine{01391\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_pack\_to\_8bytes(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01392\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01393\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ af,bf;\ \(\backslash\)}}
\DoxyCodeLine{01394\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\ a,b;\ \(\backslash\)}}
\DoxyCodeLine{01395\ \textcolor{preprocessor}{\ \ \ \ af\ =\ \_mm\_min\_ps(\ aa,\ STBIR\_max\_uint8\_as\_float\ );\ \(\backslash\)}}
\DoxyCodeLine{01396\ \textcolor{preprocessor}{\ \ \ \ bf\ =\ \_mm\_min\_ps(\ bb,\ STBIR\_max\_uint8\_as\_float\ );\ \(\backslash\)}}
\DoxyCodeLine{01397\ \textcolor{preprocessor}{\ \ \ \ af\ =\ \_mm\_max\_ps(\ af,\ \_mm\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01398\ \textcolor{preprocessor}{\ \ \ \ bf\ =\ \_mm\_max\_ps(\ bf,\ \_mm\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01399\ \textcolor{preprocessor}{\ \ \ \ a\ =\ \_mm\_cvttps\_epi32(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{01400\ \textcolor{preprocessor}{\ \ \ \ b\ =\ \_mm\_cvttps\_epi32(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{01401\ \textcolor{preprocessor}{\ \ \ \ a\ =\ \_mm\_packs\_epi32(\ a,\ b\ );\ \(\backslash\)}}
\DoxyCodeLine{01402\ \textcolor{preprocessor}{\ \ \ \ out\ =\ \_mm\_packus\_epi16(\ a,\ a\ );\ \(\backslash\)}}
\DoxyCodeLine{01403\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01404\ }
\DoxyCodeLine{01405\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load4\_transposed(\ o0,\ o1,\ o2,\ o3,\ ptr\ )\ \(\backslash\)}}
\DoxyCodeLine{01406\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf\_load(\ o0,\ (ptr)\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01407\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf\_load(\ o1,\ (ptr)+4\ );\ \ \(\backslash\)}}
\DoxyCodeLine{01408\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf\_load(\ o2,\ (ptr)+8\ );\ \ \(\backslash\)}}
\DoxyCodeLine{01409\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf\_load(\ o3,\ (ptr)+12\ );\ \(\backslash\)}}
\DoxyCodeLine{01410\ \textcolor{preprocessor}{\ \ \ \ \ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01411\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \_\_m128\ tmp0,\ tmp1,\ tmp2,\ tmp3;\ \ \ \(\backslash\)}}
\DoxyCodeLine{01412\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp0\ =\ \_mm\_unpacklo\_ps(o0,\ o1);\ \ \(\backslash\)}}
\DoxyCodeLine{01413\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp2\ =\ \_mm\_unpacklo\_ps(o2,\ o3);\ \ \(\backslash\)}}
\DoxyCodeLine{01414\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp1\ =\ \_mm\_unpackhi\_ps(o0,\ o1);\ \ \(\backslash\)}}
\DoxyCodeLine{01415\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp3\ =\ \_mm\_unpackhi\_ps(o2,\ o3);\ \ \(\backslash\)}}
\DoxyCodeLine{01416\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ o0\ =\ \_mm\_movelh\_ps(tmp0,\ tmp2);\ \ \(\backslash\)}}
\DoxyCodeLine{01417\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ o1\ =\ \_mm\_movehl\_ps(tmp2,\ tmp0);\ \ \(\backslash\)}}
\DoxyCodeLine{01418\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ o2\ =\ \_mm\_movelh\_ps(tmp1,\ tmp3);\ \ \(\backslash\)}}
\DoxyCodeLine{01419\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ o3\ =\ \_mm\_movehl\_ps(tmp3,\ tmp1);\ \ \(\backslash\)}}
\DoxyCodeLine{01420\ \textcolor{preprocessor}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{01421\ }
\DoxyCodeLine{01422\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_interleave\_pack\_and\_store\_16\_u8(\ ptr,\ r0,\ r1,\ r2,\ r3\ )\ \(\backslash\)}}
\DoxyCodeLine{01423\ \textcolor{preprocessor}{\ \ \ \ \ \ r0\ =\ \_mm\_packs\_epi32(\ r0,\ r1\ );\ \(\backslash\)}}
\DoxyCodeLine{01424\ \textcolor{preprocessor}{\ \ \ \ \ \ r2\ =\ \_mm\_packs\_epi32(\ r2,\ r3\ );\ \(\backslash\)}}
\DoxyCodeLine{01425\ \textcolor{preprocessor}{\ \ \ \ \ \ r1\ =\ \_mm\_unpacklo\_epi16(\ r0,\ r2\ );\ \(\backslash\)}}
\DoxyCodeLine{01426\ \textcolor{preprocessor}{\ \ \ \ \ \ r3\ =\ \_mm\_unpackhi\_epi16(\ r0,\ r2\ );\ \(\backslash\)}}
\DoxyCodeLine{01427\ \textcolor{preprocessor}{\ \ \ \ \ \ r0\ =\ \_mm\_unpacklo\_epi16(\ r1,\ r3\ );\ \(\backslash\)}}
\DoxyCodeLine{01428\ \textcolor{preprocessor}{\ \ \ \ \ \ r2\ =\ \_mm\_unpackhi\_epi16(\ r1,\ r3\ );\ \(\backslash\)}}
\DoxyCodeLine{01429\ \textcolor{preprocessor}{\ \ \ \ \ \ r0\ =\ \_mm\_packus\_epi16(\ r0,\ r2\ );\ \(\backslash\)}}
\DoxyCodeLine{01430\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi\_store(\ ptr,\ r0\ );\ \(\backslash\)}}
\DoxyCodeLine{01431\ \textcolor{preprocessor}{}}
\DoxyCodeLine{01432\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_32shr(\ out,\ reg,\ imm\ )\ out\ =\ \_mm\_srli\_epi32(\ reg,\ imm\ )}}
\DoxyCodeLine{01433\ }
\DoxyCodeLine{01434\ \textcolor{preprocessor}{\ \ \#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01435\ \ \ \ \ \textcolor{comment}{//\ msvc\ inits\ with\ 8\ bytes}}
\DoxyCodeLine{01436\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONST\_32\_TO\_8(\ v\ )\ (char)(unsigned\ char)((v)\&255),(char)(unsigned\ char)(((v)>>8)\&255),(char)(unsigned\ char)(((v)>>16)\&255),(char)(unsigned\ char)(((v)>>24)\&255)}}
\DoxyCodeLine{01437\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONST\_4\_32i(\ v\ )\ STBIR\_\_CONST\_32\_TO\_8(\ v\ ),\ STBIR\_\_CONST\_32\_TO\_8(\ v\ ),\ STBIR\_\_CONST\_32\_TO\_8(\ v\ ),\ STBIR\_\_CONST\_32\_TO\_8(\ v\ )}}
\DoxyCodeLine{01438\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONST\_4d\_32i(\ v0,\ v1,\ v2,\ v3\ )\ STBIR\_\_CONST\_32\_TO\_8(\ v0\ ),\ STBIR\_\_CONST\_32\_TO\_8(\ v1\ ),\ STBIR\_\_CONST\_32\_TO\_8(\ v2\ ),\ STBIR\_\_CONST\_32\_TO\_8(\ v3\ )}}
\DoxyCodeLine{01439\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01440\ \ \ \ \ \textcolor{comment}{//\ everything\ else\ inits\ with\ long\ long's}}
\DoxyCodeLine{01441\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONST\_4\_32i(\ v\ )\ (long\ long)((((stbir\_uint64)(stbir\_uint32)(v))<<32)|((stbir\_uint64)(stbir\_uint32)(v))),(long\ long)((((stbir\_uint64)(stbir\_uint32)(v))<<32)|((stbir\_uint64)(stbir\_uint32)(v)))}}
\DoxyCodeLine{01442\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONST\_4d\_32i(\ v0,\ v1,\ v2,\ v3\ )\ (long\ long)((((stbir\_uint64)(stbir\_uint32)(v1))<<32)|((stbir\_uint64)(stbir\_uint32)(v0))),(long\ long)((((stbir\_uint64)(stbir\_uint32)(v3))<<32)|((stbir\_uint64)(stbir\_uint32)(v2)))}}
\DoxyCodeLine{01443\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01444\ }
\DoxyCodeLine{01445\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_SIMDF\_CONST(var,\ x)\ stbir\_\_simdf\ var\ =\ \{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{01446\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_SIMDI\_CONST(var,\ x)\ stbir\_\_simdi\ var\ =\ \{\ STBIR\_\_CONST\_4\_32i(x)\ \}}}
\DoxyCodeLine{01447\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_CONSTF(var)\ (var)}}
\DoxyCodeLine{01448\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_CONSTI(var)\ (var)}}
\DoxyCodeLine{01449\ }
\DoxyCodeLine{01450\ \textcolor{preprocessor}{\ \ \#if\ defined(STBIR\_AVX)\ ||\ defined(\_\_SSE4\_1\_\_)}}
\DoxyCodeLine{01451\ \textcolor{preprocessor}{\ \ \ \ \#include\ <smmintrin.h>}}
\DoxyCodeLine{01452\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_pack\_to\_8words(out,reg0,reg1)\ out\ =\ \_mm\_packus\_epi32(\_mm\_cvttps\_epi32(\_mm\_max\_ps(\_mm\_min\_ps(reg0,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)),\_mm\_setzero\_ps())),\ \_mm\_cvttps\_epi32(\_mm\_max\_ps(\_mm\_min\_ps(reg1,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)),\_mm\_setzero\_ps())))}}
\DoxyCodeLine{01453\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01454\ \ \ \ \ STBIR\_\_SIMDI\_CONST(stbir\_\_s32\_32768,\ 32768);}
\DoxyCodeLine{01455\ \ \ \ \ STBIR\_\_SIMDI\_CONST(stbir\_\_s16\_32768,\ ((32768<<16)|32768));}
\DoxyCodeLine{01456\ }
\DoxyCodeLine{01457\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_pack\_to\_8words(out,reg0,reg1)\ \(\backslash\)}}
\DoxyCodeLine{01458\ \textcolor{preprocessor}{\ \ \ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01459\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ stbir\_\_simdi\ tmp0,tmp1;\ \(\backslash\)}}
\DoxyCodeLine{01460\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp0\ =\ \_mm\_cvttps\_epi32(\_mm\_max\_ps(\_mm\_min\_ps(reg0,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)),\_mm\_setzero\_ps()));\ \(\backslash\)}}
\DoxyCodeLine{01461\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp1\ =\ \_mm\_cvttps\_epi32(\_mm\_max\_ps(\_mm\_min\_ps(reg1,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)),\_mm\_setzero\_ps()));\ \(\backslash\)}}
\DoxyCodeLine{01462\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp0\ =\ \_mm\_sub\_epi32(\ tmp0,\ stbir\_\_s32\_32768\ );\ \(\backslash\)}}
\DoxyCodeLine{01463\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ tmp1\ =\ \_mm\_sub\_epi32(\ tmp1,\ stbir\_\_s32\_32768\ );\ \(\backslash\)}}
\DoxyCodeLine{01464\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ out\ =\ \_mm\_packs\_epi32(\ tmp0,\ tmp1\ );\ \(\backslash\)}}
\DoxyCodeLine{01465\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ out\ =\ \_mm\_sub\_epi16(\ out,\ stbir\_\_s16\_32768\ );\ \(\backslash\)}}
\DoxyCodeLine{01466\ \textcolor{preprocessor}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{01467\ }
\DoxyCodeLine{01468\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01469\ }
\DoxyCodeLine{01470\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_SIMD}}
\DoxyCodeLine{01471\ }
\DoxyCodeLine{01472\ \ \ \textcolor{comment}{//\ if\ we\ detect\ AVX,\ set\ the\ simd8\ defines}}
\DoxyCodeLine{01473\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_AVX}}
\DoxyCodeLine{01474\ \textcolor{preprocessor}{\ \ \ \ \#include\ <immintrin.h>}}
\DoxyCodeLine{01475\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_SIMD8}}
\DoxyCodeLine{01476\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\ \_\_m256}}
\DoxyCodeLine{01477\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\ \_\_m256i}}
\DoxyCodeLine{01478\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_load(\ out,\ ptr\ )\ (out)\ =\ \_mm256\_loadu\_ps(\ (float\ const\ *)(ptr)\ )}}
\DoxyCodeLine{01479\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_load(\ out,\ ptr\ )\ (out)\ =\ \_mm256\_loadu\_si256(\ (\_\_m256i\ const\ *)(ptr)\ )}}
\DoxyCodeLine{01480\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_mult(\ out,\ a,\ b\ )\ (out)\ =\ \_mm256\_mul\_ps(\ (a),\ (b)\ )}}
\DoxyCodeLine{01481\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_store(\ ptr,\ out\ )\ \_mm256\_storeu\_ps(\ (float*)(ptr),\ out\ )}}
\DoxyCodeLine{01482\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_store(\ ptr,\ reg\ )\ \ \_mm256\_storeu\_si256(\ (\_\_m256i*)(ptr),\ reg\ )}}
\DoxyCodeLine{01483\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_frep8(\ fval\ )\ \_mm256\_set1\_ps(\ fval\ )}}
\DoxyCodeLine{01484\ }
\DoxyCodeLine{01485\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_min(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm256\_min\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01486\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_max(\ out,\ reg0,\ reg1\ )\ (out)\ =\ \_mm256\_max\_ps(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01487\ }
\DoxyCodeLine{01488\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_add4halves(\ out,\ bot4,\ top8\ )\ (out)\ =\ \_mm\_add\_ps(\ bot4,\ \_mm256\_extractf128\_ps(\ top8,\ 1\ )\ )}}
\DoxyCodeLine{01489\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_mult\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm256\_mul\_ps(\ reg,\ \_mm256\_loadu\_ps(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01490\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_add\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ \_mm256\_add\_ps(\ reg,\ \_mm256\_loadu\_ps(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01491\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_add(\ out,\ a,\ b\ )\ (out)\ =\ \_mm256\_add\_ps(\ a,\ b\ )}}
\DoxyCodeLine{01492\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_load1b(\ out,\ ptr\ )\ (out)\ =\ \_mm256\_broadcast\_ss(\ ptr\ )}}
\DoxyCodeLine{01493\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_load1rep4(\ out,\ ptr\ )\ (out)\ =\ \_mm\_broadcast\_ss(\ ptr\ )\ \ }\textcolor{comment}{//\ avx\ load\ instruction}}
\DoxyCodeLine{01494\ }
\DoxyCodeLine{01495\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_convert\_i32\_to\_float(out,\ ireg)\ (out)\ =\ \_mm256\_cvtepi32\_ps(\ ireg\ )}}
\DoxyCodeLine{01496\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_convert\_float\_to\_i32(\ i,\ f\ )\ (i)\ =\ \_mm256\_cvttps\_epi32(f)}}
\DoxyCodeLine{01497\ }
\DoxyCodeLine{01498\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_bot4s(\ out,\ a,\ b\ )\ (out)\ =\ \_mm256\_permute2f128\_ps(a,b,\ (0<<0)+(2<<4)\ )}}
\DoxyCodeLine{01499\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_top4s(\ out,\ a,\ b\ )\ (out)\ =\ \_mm256\_permute2f128\_ps(a,b,\ (1<<0)+(3<<4)\ )}}
\DoxyCodeLine{01500\ }
\DoxyCodeLine{01501\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_gettop4(\ reg\ )\ \_mm256\_extractf128\_ps(reg,1)}}
\DoxyCodeLine{01502\ }
\DoxyCodeLine{01503\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STBIR\_AVX2}}
\DoxyCodeLine{01504\ }
\DoxyCodeLine{01505\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_expand\_u8\_to\_u32(out0,out1,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01506\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01507\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi8\ a,\ zero\ \ =\_mm256\_setzero\_si256();\(\backslash\)}}
\DoxyCodeLine{01508\ \textcolor{preprocessor}{\ \ \ \ \ \ a\ =\ \_mm256\_permute4x64\_epi64(\ \_mm256\_unpacklo\_epi8(\ \_mm256\_permute4x64\_epi64(\_mm256\_castsi128\_si256(ireg),(0<<0)+(2<<2)+(1<<4)+(3<<6)),\ zero\ ),(0<<0)+(2<<2)+(1<<4)+(3<<6));\ \(\backslash\)}}
\DoxyCodeLine{01509\ \textcolor{preprocessor}{\ \ \ \ \ \ out0\ =\ \_mm256\_unpacklo\_epi16(\ a,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01510\ \textcolor{preprocessor}{\ \ \ \ \ \ out1\ =\ \_mm256\_unpackhi\_epi16(\ a,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01511\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01512\ }
\DoxyCodeLine{01513\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_pack\_to\_16bytes(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01514\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01515\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi8\ t;\ \(\backslash\)}}
\DoxyCodeLine{01516\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf8\ af,bf;\ \(\backslash\)}}
\DoxyCodeLine{01517\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi8\ a,b;\ \(\backslash\)}}
\DoxyCodeLine{01518\ \textcolor{preprocessor}{\ \ \ \ \ \ af\ =\ \_mm256\_min\_ps(\ aa,\ STBIR\_max\_uint8\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01519\ \textcolor{preprocessor}{\ \ \ \ \ \ bf\ =\ \_mm256\_min\_ps(\ bb,\ STBIR\_max\_uint8\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01520\ \textcolor{preprocessor}{\ \ \ \ \ \ af\ =\ \_mm256\_max\_ps(\ af,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01521\ \textcolor{preprocessor}{\ \ \ \ \ \ bf\ =\ \_mm256\_max\_ps(\ bf,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01522\ \textcolor{preprocessor}{\ \ \ \ \ \ a\ =\ \_mm256\_cvttps\_epi32(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{01523\ \textcolor{preprocessor}{\ \ \ \ \ \ b\ =\ \_mm256\_cvttps\_epi32(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{01524\ \textcolor{preprocessor}{\ \ \ \ \ \ t\ =\ \_mm256\_permute4x64\_epi64(\ \_mm256\_packs\_epi32(\ a,\ b\ ),\ (0<<0)+(2<<2)+(1<<4)+(3<<6)\ );\ \(\backslash\)}}
\DoxyCodeLine{01525\ \textcolor{preprocessor}{\ \ \ \ \ \ out\ =\ \_mm256\_castsi256\_si128(\ \_mm256\_permute4x64\_epi64(\ \_mm256\_packus\_epi16(\ t,\ t\ ),\ (0<<0)+(2<<2)+(1<<4)+(3<<6)\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01526\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01527\ }
\DoxyCodeLine{01528\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_expand\_u16\_to\_u32(out,ireg)\ out\ =\ \_mm256\_unpacklo\_epi16(\ \_mm256\_permute4x64\_epi64(\_mm256\_castsi128\_si256(ireg),(0<<0)+(2<<2)+(1<<4)+(3<<6)),\ \_mm256\_setzero\_si256()\ );}}
\DoxyCodeLine{01529\ }
\DoxyCodeLine{01530\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_pack\_to\_16words(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01531\ \textcolor{preprocessor}{\ \ \ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01532\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ stbir\_\_simdf8\ af,bf;\ \(\backslash\)}}
\DoxyCodeLine{01533\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ stbir\_\_simdi8\ a,b;\ \(\backslash\)}}
\DoxyCodeLine{01534\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ af\ =\ \_mm256\_min\_ps(\ aa,\ STBIR\_max\_uint16\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01535\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ bf\ =\ \_mm256\_min\_ps(\ bb,\ STBIR\_max\_uint16\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01536\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ af\ =\ \_mm256\_max\_ps(\ af,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01537\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ bf\ =\ \_mm256\_max\_ps(\ bf,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01538\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ a\ =\ \_mm256\_cvttps\_epi32(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{01539\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ b\ =\ \_mm256\_cvttps\_epi32(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{01540\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (out)\ =\ \_mm256\_permute4x64\_epi64(\ \_mm256\_packus\_epi32(a,\ b),\ (0<<0)+(2<<2)+(1<<4)+(3<<6)\ );\ \(\backslash\)}}
\DoxyCodeLine{01541\ \textcolor{preprocessor}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{01542\ }
\DoxyCodeLine{01543\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01544\ }
\DoxyCodeLine{01545\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_expand\_u8\_to\_u32(out0,out1,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01546\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01547\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi\ a,zero\ =\ \_mm\_setzero\_si128();\ \(\backslash\)}}
\DoxyCodeLine{01548\ \textcolor{preprocessor}{\ \ \ \ \ \ a\ =\ \_mm\_unpacklo\_epi8(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01549\ \textcolor{preprocessor}{\ \ \ \ \ \ out0\ =\ \_mm256\_setr\_m128i(\ \_mm\_unpacklo\_epi16(\ a,\ zero\ ),\ \_mm\_unpackhi\_epi16(\ a,\ zero\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01550\ \textcolor{preprocessor}{\ \ \ \ \ \ a\ =\ \_mm\_unpackhi\_epi8(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01551\ \textcolor{preprocessor}{\ \ \ \ \ \ out1\ =\ \_mm256\_setr\_m128i(\ \_mm\_unpacklo\_epi16(\ a,\ zero\ ),\ \_mm\_unpackhi\_epi16(\ a,\ zero\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01552\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01553\ }
\DoxyCodeLine{01554\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_pack\_to\_16bytes(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01555\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01556\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi\ t;\ \(\backslash\)}}
\DoxyCodeLine{01557\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf8\ af,bf;\ \(\backslash\)}}
\DoxyCodeLine{01558\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi8\ a,b;\ \(\backslash\)}}
\DoxyCodeLine{01559\ \textcolor{preprocessor}{\ \ \ \ \ \ af\ =\ \_mm256\_min\_ps(\ aa,\ STBIR\_max\_uint8\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01560\ \textcolor{preprocessor}{\ \ \ \ \ \ bf\ =\ \_mm256\_min\_ps(\ bb,\ STBIR\_max\_uint8\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01561\ \textcolor{preprocessor}{\ \ \ \ \ \ af\ =\ \_mm256\_max\_ps(\ af,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01562\ \textcolor{preprocessor}{\ \ \ \ \ \ bf\ =\ \_mm256\_max\_ps(\ bf,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01563\ \textcolor{preprocessor}{\ \ \ \ \ \ a\ =\ \_mm256\_cvttps\_epi32(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{01564\ \textcolor{preprocessor}{\ \ \ \ \ \ b\ =\ \_mm256\_cvttps\_epi32(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{01565\ \textcolor{preprocessor}{\ \ \ \ \ \ out\ =\ \_mm\_packs\_epi32(\ \_mm256\_castsi256\_si128(a),\ \_mm256\_extractf128\_si256(\ a,\ 1\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01566\ \textcolor{preprocessor}{\ \ \ \ \ \ out\ =\ \_mm\_packus\_epi16(\ out,\ out\ );\ \(\backslash\)}}
\DoxyCodeLine{01567\ \textcolor{preprocessor}{\ \ \ \ \ \ t\ =\ \_mm\_packs\_epi32(\ \_mm256\_castsi256\_si128(b),\ \_mm256\_extractf128\_si256(\ b,\ 1\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01568\ \textcolor{preprocessor}{\ \ \ \ \ \ t\ =\ \_mm\_packus\_epi16(\ t,\ t\ );\ \(\backslash\)}}
\DoxyCodeLine{01569\ \textcolor{preprocessor}{\ \ \ \ \ \ out\ =\ \_mm\_castps\_si128(\ \_mm\_shuffle\_ps(\ \_mm\_castsi128\_ps(out),\ \_mm\_castsi128\_ps(t),\ (0<<0)+(1<<2)+(0<<4)+(1<<6)\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01570\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01571\ }
\DoxyCodeLine{01572\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi8\_expand\_u16\_to\_u32(out,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01573\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01574\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdi\ a,b,zero\ =\ \_mm\_setzero\_si128();\ \(\backslash\)}}
\DoxyCodeLine{01575\ \textcolor{preprocessor}{\ \ \ \ \ \ a\ =\ \_mm\_unpacklo\_epi16(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01576\ \textcolor{preprocessor}{\ \ \ \ \ \ b\ =\ \_mm\_unpackhi\_epi16(\ ireg,\ zero\ );\ \(\backslash\)}}
\DoxyCodeLine{01577\ \textcolor{preprocessor}{\ \ \ \ \ \ out\ =\ \_mm256\_insertf128\_si256(\ \_mm256\_castsi128\_si256(\ a\ ),\ b,\ 1\ );\ \(\backslash\)}}
\DoxyCodeLine{01578\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01579\ }
\DoxyCodeLine{01580\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_pack\_to\_16words(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01581\ \textcolor{preprocessor}{\ \ \ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01582\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ stbir\_\_simdi\ t0,t1;\ \(\backslash\)}}
\DoxyCodeLine{01583\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ stbir\_\_simdf8\ af,bf;\ \(\backslash\)}}
\DoxyCodeLine{01584\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ stbir\_\_simdi8\ a,b;\ \(\backslash\)}}
\DoxyCodeLine{01585\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ af\ =\ \_mm256\_min\_ps(\ aa,\ STBIR\_max\_uint16\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01586\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ bf\ =\ \_mm256\_min\_ps(\ bb,\ STBIR\_max\_uint16\_as\_floatX\ );\ \(\backslash\)}}
\DoxyCodeLine{01587\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ af\ =\ \_mm256\_max\_ps(\ af,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01588\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ bf\ =\ \_mm256\_max\_ps(\ bf,\ \_mm256\_setzero\_ps()\ );\ \(\backslash\)}}
\DoxyCodeLine{01589\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ a\ =\ \_mm256\_cvttps\_epi32(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{01590\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ b\ =\ \_mm256\_cvttps\_epi32(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{01591\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ t0\ =\ \_mm\_packus\_epi32(\ \_mm256\_castsi256\_si128(a),\ \_mm256\_extractf128\_si256(\ a,\ 1\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01592\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ t1\ =\ \_mm\_packus\_epi32(\ \_mm256\_castsi256\_si128(b),\ \_mm256\_extractf128\_si256(\ b,\ 1\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01593\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ out\ =\ \_mm256\_setr\_m128i(\ t0,\ t1\ );\ \(\backslash\)}}
\DoxyCodeLine{01594\ \textcolor{preprocessor}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{01595\ }
\DoxyCodeLine{01596\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01597\ }
\DoxyCodeLine{01598\ \ \ \ \ \textcolor{keyword}{static}\ \_\_m256i\ stbir\_00001111\ =\ \{\ STBIR\_\_CONST\_4d\_32i(\ 0,\ 0,\ 0,\ 0\ ),\ STBIR\_\_CONST\_4d\_32i(\ 1,\ 1,\ 1,\ 1\ )\ \};}
\DoxyCodeLine{01599\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to00001111(\ out,\ in\ )\ (out)\ =\ \_mm256\_permutevar\_ps\ (\ in,\ stbir\_00001111\ )}}
\DoxyCodeLine{01600\ }
\DoxyCodeLine{01601\ \ \ \ \ \textcolor{keyword}{static}\ \_\_m256i\ stbir\_22223333\ =\ \{\ STBIR\_\_CONST\_4d\_32i(\ 2,\ 2,\ 2,\ 2\ ),\ STBIR\_\_CONST\_4d\_32i(\ 3,\ 3,\ 3,\ 3\ )\ \};}
\DoxyCodeLine{01602\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to22223333(\ out,\ in\ )\ (out)\ =\ \_mm256\_permutevar\_ps\ (\ in,\ stbir\_22223333\ )}}
\DoxyCodeLine{01603\ }
\DoxyCodeLine{01604\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to2222(\ out,\ in\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\_mm256\_castps256\_ps128(in),\ 2,2,2,2\ )}}
\DoxyCodeLine{01605\ }
\DoxyCodeLine{01606\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_load4b(\ out,\ ptr\ )\ (out)\ =\ \_mm256\_broadcast\_ps(\ (\_\_m128\ const\ *)(ptr)\ )}}
\DoxyCodeLine{01607\ }
\DoxyCodeLine{01608\ \ \ \ \ \textcolor{keyword}{static}\ \_\_m256i\ stbir\_00112233\ =\ \{\ STBIR\_\_CONST\_4d\_32i(\ 0,\ 0,\ 1,\ 1\ ),\ STBIR\_\_CONST\_4d\_32i(\ 2,\ 2,\ 3,\ 3\ )\ \};}
\DoxyCodeLine{01609\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to00112233(\ out,\ in\ )\ (out)\ =\ \_mm256\_permutevar\_ps\ (\ in,\ stbir\_00112233\ )}}
\DoxyCodeLine{01610\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_add4(\ out,\ a8,\ b\ )\ (out)\ =\ \_mm256\_add\_ps(\ a8,\ \ \_mm256\_castps128\_ps256(\ b\ )\ )}}
\DoxyCodeLine{01611\ }
\DoxyCodeLine{01612\ \ \ \ \ \textcolor{keyword}{static}\ \_\_m256i\ stbir\_load6\ =\ \{\ STBIR\_\_CONST\_4\_32i(\ 0x80000000\ ),\ STBIR\_\_CONST\_4d\_32i(\ \ 0x80000000,\ \ 0x80000000,\ 0,\ 0\ )\ \};}
\DoxyCodeLine{01613\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_load6z(\ out,\ ptr\ )\ (out)\ =\ \_mm256\_maskload\_ps(\ ptr,\ stbir\_load6\ )}}
\DoxyCodeLine{01614\ }
\DoxyCodeLine{01615\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to00000000(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (0<<0)+(0<<2)+(0<<4)+(0<<6)\ )}}
\DoxyCodeLine{01616\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to11111111(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (1<<0)+(1<<2)+(1<<4)+(1<<6)\ )}}
\DoxyCodeLine{01617\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to22222222(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (2<<0)+(2<<2)+(2<<4)+(2<<6)\ )}}
\DoxyCodeLine{01618\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to33333333(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (3<<0)+(3<<2)+(3<<4)+(3<<6)\ )}}
\DoxyCodeLine{01619\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to21032103(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (2<<0)+(1<<2)+(0<<4)+(3<<6)\ )}}
\DoxyCodeLine{01620\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to32103210(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (3<<0)+(2<<2)+(1<<4)+(0<<6)\ )}}
\DoxyCodeLine{01621\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to12301230(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (1<<0)+(2<<2)+(3<<4)+(0<<6)\ )}}
\DoxyCodeLine{01622\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to10321032(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (1<<0)+(0<<2)+(3<<4)+(2<<6)\ )}}
\DoxyCodeLine{01623\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to30123012(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (3<<0)+(0<<2)+(1<<4)+(2<<6)\ )}}
\DoxyCodeLine{01624\ }
\DoxyCodeLine{01625\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to11331133(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (1<<0)+(1<<2)+(3<<4)+(3<<6)\ )}}
\DoxyCodeLine{01626\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_0123to00220022(\ out,\ in\ )\ (out)\ =\ \ \_mm256\_shuffle\_ps\ (\ in,\ in,\ (0<<0)+(0<<2)+(2<<4)+(2<<6)\ )}}
\DoxyCodeLine{01627\ }
\DoxyCodeLine{01628\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_aaa1(\ out,\ alp,\ ones\ )\ (out)\ =\ \_mm256\_blend\_ps(\ alp,\ ones,\ (1<<0)+(1<<1)+(1<<2)+(0<<3)+(1<<4)+(1<<5)+(1<<6)+(0<<7));\ (out)=\_mm256\_shuffle\_ps(\ out,out,\ (3<<0)\ +\ (3<<2)\ +\ (3<<4)\ +\ (0<<6)\ )}}
\DoxyCodeLine{01629\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_1aaa(\ out,\ alp,\ ones\ )\ (out)\ =\ \_mm256\_blend\_ps(\ alp,\ ones,\ (0<<0)+(1<<1)+(1<<2)+(1<<3)+(0<<4)+(1<<5)+(1<<6)+(1<<7));\ (out)=\_mm256\_shuffle\_ps(\ out,out,\ (1<<0)\ +\ (0<<2)\ +\ (0<<4)\ +\ (0<<6)\ )}}
\DoxyCodeLine{01630\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_a1a1(\ out,\ alp,\ ones)\ (out)\ =\ \_mm256\_blend\_ps(\ alp,\ ones,\ (1<<0)+(0<<1)+(1<<2)+(0<<3)+(1<<4)+(0<<5)+(1<<6)+(0<<7));\ (out)=\_mm256\_shuffle\_ps(\ out,out,\ (1<<0)\ +\ (0<<2)\ +\ (3<<4)\ +\ (2<<6)\ )}}
\DoxyCodeLine{01631\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_1a1a(\ out,\ alp,\ ones)\ (out)\ =\ \_mm256\_blend\_ps(\ alp,\ ones,\ (0<<0)+(1<<1)+(0<<2)+(1<<3)+(0<<4)+(1<<5)+(0<<6)+(1<<7));\ (out)=\_mm256\_shuffle\_ps(\ out,out,\ (1<<0)\ +\ (0<<2)\ +\ (3<<4)\ +\ (2<<6)\ )}}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_zero(\ reg\ )\ (reg)\ =\ \_mm256\_setzero\_ps()}}
\DoxyCodeLine{01634\ }
\DoxyCodeLine{01635\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STBIR\_USE\_FMA\ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{//\ not\ on\ by\ default\ to\ maintain\ bit\ identical\ simd\ to\ non-\/simd}}
\DoxyCodeLine{01636\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_madd(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ \_mm256\_fmadd\_ps(\ mul1,\ mul2,\ add\ )}}
\DoxyCodeLine{01637\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ \_mm256\_fmadd\_ps(\ mul,\ \_mm256\_loadu\_ps(\ (float\ const*)(ptr)\ ),\ add\ )}}
\DoxyCodeLine{01638\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_madd\_mem4(\ out,\ add,\ mul,\ ptr\ )(out)\ =\ \_mm256\_fmadd\_ps(\ \_mm256\_setr\_m128(\ mul,\ \_mm\_setzero\_ps()\ ),\ \_mm256\_setr\_m128(\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ ),\ \_mm\_setzero\_ps()\ ),\ add\ )}}
\DoxyCodeLine{01639\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01640\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_madd(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ \_mm256\_add\_ps(\ add,\ \_mm256\_mul\_ps(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{01641\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ \_mm256\_add\_ps(\ add,\ \_mm256\_mul\_ps(\ mul,\ \_mm256\_loadu\_ps(\ (float\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{01642\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf8\_madd\_mem4(\ out,\ add,\ mul,\ ptr\ )\ \ (out)\ =\ \_mm256\_add\_ps(\ add,\ \_mm256\_setr\_m128(\ \_mm\_mul\_ps(\ mul,\ \_mm\_loadu\_ps(\ (float\ const*)(ptr)\ )\ ),\ \_mm\_setzero\_ps()\ )\ )}}
\DoxyCodeLine{01643\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01644\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ val\ )\ \_mm256\_castps256\_ps128(\ val\ )}}
\DoxyCodeLine{01645\ }
\DoxyCodeLine{01646\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01647\ }
\DoxyCodeLine{01648\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_FLOORF}}
\DoxyCodeLine{01649\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_FLOORF}}
\DoxyCodeLine{01650\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01651\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_FLOORF\ stbir\_simd\_floorf}}
\DoxyCodeLine{01652\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_simd\_floorf(\textcolor{keywordtype}{float}\ x)\ \ \textcolor{comment}{//\ martins\ floorf}}
\DoxyCodeLine{01653\ \ \ \{}
\DoxyCodeLine{01654\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(STBIR\_AVX)\ ||\ defined(\_\_SSE4\_1\_\_)\ ||\ defined(STBIR\_SSE41)}}
\DoxyCodeLine{01655\ \ \ \ \ \_\_m128\ t\ =\ \_mm\_set\_ss(x);}
\DoxyCodeLine{01656\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_cvtss\_f32(\ \_mm\_floor\_ss(t,\ t)\ );}
\DoxyCodeLine{01657\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01658\ \ \ \ \ \_\_m128\ f\ =\ \_mm\_set\_ss(x);}
\DoxyCodeLine{01659\ \ \ \ \ \_\_m128\ t\ =\ \_mm\_cvtepi32\_ps(\_mm\_cvttps\_epi32(f));}
\DoxyCodeLine{01660\ \ \ \ \ \_\_m128\ r\ =\ \_mm\_add\_ss(t,\ \_mm\_and\_ps(\_mm\_cmplt\_ss(f,\ t),\ \_mm\_set\_ss(-\/1.0f)));}
\DoxyCodeLine{01661\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_cvtss\_f32(r);}
\DoxyCodeLine{01662\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01663\ \ \ \}}
\DoxyCodeLine{01664\ }
\DoxyCodeLine{01665\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_CEILF}}
\DoxyCodeLine{01666\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_CEILF}}
\DoxyCodeLine{01667\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01668\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_CEILF\ stbir\_simd\_ceilf}}
\DoxyCodeLine{01669\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_simd\_ceilf(\textcolor{keywordtype}{float}\ x)\ \ \textcolor{comment}{//\ martins\ ceilf}}
\DoxyCodeLine{01670\ \ \ \{}
\DoxyCodeLine{01671\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(STBIR\_AVX)\ ||\ defined(\_\_SSE4\_1\_\_)\ ||\ defined(STBIR\_SSE41)}}
\DoxyCodeLine{01672\ \ \ \ \ \_\_m128\ t\ =\ \_mm\_set\_ss(x);}
\DoxyCodeLine{01673\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_cvtss\_f32(\ \_mm\_ceil\_ss(t,\ t)\ );}
\DoxyCodeLine{01674\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01675\ \ \ \ \ \_\_m128\ f\ =\ \_mm\_set\_ss(x);}
\DoxyCodeLine{01676\ \ \ \ \ \_\_m128\ t\ =\ \_mm\_cvtepi32\_ps(\_mm\_cvttps\_epi32(f));}
\DoxyCodeLine{01677\ \ \ \ \ \_\_m128\ r\ =\ \_mm\_add\_ss(t,\ \_mm\_and\_ps(\_mm\_cmplt\_ss(t,\ f),\ \_mm\_set\_ss(1.0f)));}
\DoxyCodeLine{01678\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_cvtss\_f32(r);}
\DoxyCodeLine{01679\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01680\ \ \ \}}
\DoxyCodeLine{01681\ }
\DoxyCodeLine{01682\ \textcolor{preprocessor}{\#elif\ defined(STBIR\_NEON)}}
\DoxyCodeLine{01683\ }
\DoxyCodeLine{01684\ \textcolor{preprocessor}{\ \ \#include\ <arm\_neon.h>}}
\DoxyCodeLine{01685\ }
\DoxyCodeLine{01686\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\ float32x4\_t}}
\DoxyCodeLine{01687\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\ uint32x4\_t}}
\DoxyCodeLine{01688\ }
\DoxyCodeLine{01689\ \textcolor{preprocessor}{\ \ \#define\ stbir\_simdi\_castf(\ reg\ )\ vreinterpretq\_u32\_f32(reg)}}
\DoxyCodeLine{01690\ \textcolor{preprocessor}{\ \ \#define\ stbir\_simdf\_casti(\ reg\ )\ vreinterpretq\_f32\_u32(reg)}}
\DoxyCodeLine{01691\ }
\DoxyCodeLine{01692\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load(\ reg,\ ptr\ )\ (reg)\ =\ vld1q\_f32(\ (float\ const*)(ptr)\ )}}
\DoxyCodeLine{01693\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_load(\ reg,\ ptr\ )\ (reg)\ =\ vld1q\_u32(\ (uint32\_t\ const*)(ptr)\ )}}
\DoxyCodeLine{01694\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1(\ out,\ ptr\ )\ (out)\ =\ vld1q\_dup\_f32(\ (float\ const*)(ptr)\ )\ }\textcolor{comment}{//\ top\ values\ can\ be\ random\ (not\ denormal\ or\ nan\ for\ perf)}}
\DoxyCodeLine{01695\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_load1(\ out,\ ptr\ )\ (out)\ =\ vld1q\_dup\_u32(\ (uint32\_t\ const*)(ptr)\ )}}
\DoxyCodeLine{01696\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1z(\ out,\ ptr\ )\ (out)\ =\ vld1q\_lane\_f32(\ (float\ const*)(ptr),\ vdupq\_n\_f32(0),\ 0\ )\ }\textcolor{comment}{//\ top\ values\ must\ be\ zero}}
\DoxyCodeLine{01697\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_frep4(\ fvar\ )\ vdupq\_n\_f32(\ fvar\ )}}
\DoxyCodeLine{01698\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1frep4(\ out,\ fvar\ )\ (out)\ =\ vdupq\_n\_f32(\ fvar\ )}}
\DoxyCodeLine{01699\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2(\ out,\ ptr\ )\ (out)\ =\ vcombine\_f32(\ vld1\_f32(\ (float\ const*)(ptr)\ ),\ vcreate\_f32(0)\ )\ }\textcolor{comment}{//\ top\ values\ can\ be\ random\ (not\ denormal\ or\ nan\ for\ perf)}}
\DoxyCodeLine{01700\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2z(\ out,\ ptr\ )\ (out)\ =\ vcombine\_f32(\ vld1\_f32(\ (float\ const*)(ptr)\ ),\ vcreate\_f32(0)\ )\ \ }\textcolor{comment}{//\ top\ values\ must\ be\ zero}}
\DoxyCodeLine{01701\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2hmerge(\ out,\ reg,\ ptr\ )\ (out)\ =\ vcombine\_f32(\ vget\_low\_f32(reg),\ vld1\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_zeroP()\ vdupq\_n\_f32(0)}}
\DoxyCodeLine{01704\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_zero(\ reg\ )\ (reg)\ =\ vdupq\_n\_f32(0)}}
\DoxyCodeLine{01705\ }
\DoxyCodeLine{01706\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store(\ ptr,\ reg\ )\ \ vst1q\_f32(\ (float*)(ptr),\ reg\ )}}
\DoxyCodeLine{01707\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store1(\ ptr,\ reg\ )\ vst1q\_lane\_f32(\ (float*)(ptr),\ reg,\ 0)}}
\DoxyCodeLine{01708\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store2(\ ptr,\ reg\ )\ vst1\_f32(\ (float*)(ptr),\ vget\_low\_f32(reg)\ )}}
\DoxyCodeLine{01709\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store2h(\ ptr,\ reg\ )\ vst1\_f32(\ (float*)(ptr),\ vget\_high\_f32(reg)\ )}}
\DoxyCodeLine{01710\ }
\DoxyCodeLine{01711\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store(\ ptr,\ reg\ )\ \ vst1q\_u32(\ (uint32\_t*)(ptr),\ reg\ )}}
\DoxyCodeLine{01712\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store1(\ ptr,\ reg\ )\ vst1q\_lane\_u32(\ (uint32\_t*)(ptr),\ reg,\ 0\ )}}
\DoxyCodeLine{01713\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store2(\ ptr,\ reg\ )\ vst1\_u32(\ (uint32\_t*)(ptr),\ vget\_low\_u32(reg)\ )}}
\DoxyCodeLine{01714\ }
\DoxyCodeLine{01715\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_prefetch(\ ptr\ )}}
\DoxyCodeLine{01716\ }
\DoxyCodeLine{01717\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u8\_to\_u32(out0,out1,out2,out3,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01718\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01719\ \textcolor{preprocessor}{\ \ \ \ uint16x8\_t\ l\ =\ vmovl\_u8(\ vget\_low\_u8\ (\ vreinterpretq\_u8\_u32(ireg)\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01720\ \textcolor{preprocessor}{\ \ \ \ uint16x8\_t\ h\ =\ vmovl\_u8(\ vget\_high\_u8(\ vreinterpretq\_u8\_u32(ireg)\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01721\ \textcolor{preprocessor}{\ \ \ \ out0\ =\ vmovl\_u16(\ vget\_low\_u16\ (\ l\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01722\ \textcolor{preprocessor}{\ \ \ \ out1\ =\ vmovl\_u16(\ vget\_high\_u16(\ l\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01723\ \textcolor{preprocessor}{\ \ \ \ out2\ =\ vmovl\_u16(\ vget\_low\_u16\ (\ h\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01724\ \textcolor{preprocessor}{\ \ \ \ out3\ =\ vmovl\_u16(\ vget\_high\_u16(\ h\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01725\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01726\ }
\DoxyCodeLine{01727\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u8\_to\_1u32(out,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01728\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01729\ \textcolor{preprocessor}{\ \ \ \ uint16x8\_t\ tmp\ =\ vmovl\_u8(\ vget\_low\_u8(\ vreinterpretq\_u8\_u32(ireg)\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01730\ \textcolor{preprocessor}{\ \ \ \ out\ =\ vmovl\_u16(\ vget\_low\_u16(\ tmp\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01731\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01732\ }
\DoxyCodeLine{01733\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u16\_to\_u32(out0,out1,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01734\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01735\ \textcolor{preprocessor}{\ \ \ \ uint16x8\_t\ tmp\ =\ vreinterpretq\_u16\_u32(ireg);\ \(\backslash\)}}
\DoxyCodeLine{01736\ \textcolor{preprocessor}{\ \ \ \ out0\ =\ vmovl\_u16(\ vget\_low\_u16\ (\ tmp\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01737\ \textcolor{preprocessor}{\ \ \ \ out1\ =\ vmovl\_u16(\ vget\_high\_u16(\ tmp\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01738\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01739\ }
\DoxyCodeLine{01740\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_i32(\ i,\ f\ )\ (i)\ =\ vreinterpretq\_u32\_s32(\ vcvtq\_s32\_f32(f)\ )}}
\DoxyCodeLine{01741\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_int(\ f\ )\ vgetq\_lane\_s32(vcvtq\_s32\_f32(f),\ 0)}}
\DoxyCodeLine{01742\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_to\_int(\ i\ )\ (int)vgetq\_lane\_u32(i,\ 0)}}
\DoxyCodeLine{01743\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_uint8(\ f\ )\ ((unsigned\ char)vgetq\_lane\_s32(vcvtq\_s32\_f32(vmaxq\_f32(vminq\_f32(f,STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float)),vdupq\_n\_f32(0))),\ 0))}}
\DoxyCodeLine{01744\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_short(\ f\ )\ ((unsigned\ short)vgetq\_lane\_s32(vcvtq\_s32\_f32(vmaxq\_f32(vminq\_f32(f,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)),vdupq\_n\_f32(0))),\ 0))}}
\DoxyCodeLine{01745\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_convert\_i32\_to\_float(out,\ ireg)\ (out)\ =\ vcvtq\_f32\_s32(\ vreinterpretq\_s32\_u32(ireg)\ )}}
\DoxyCodeLine{01746\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vaddq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01747\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vmulq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01748\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ vmulq\_f32(\ reg,\ vld1q\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01749\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult1\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ vmulq\_f32(\ reg,\ vld1q\_dup\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01750\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ vaddq\_f32(\ reg,\ vld1q\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01751\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add1\_mem(\ out,\ reg,\ ptr\ )\ (out)\ =\ vaddq\_f32(\ reg,\ vld1q\_dup\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01752\ }
\DoxyCodeLine{01753\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_USE\_FMA\ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{//\ not\ on\ by\ default\ to\ maintain\ bit\ identical\ simd\ to\ non-\/simd\ (and\ also\ x64\ no\ madd\ to\ arm\ madd)}}
\DoxyCodeLine{01754\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ vfmaq\_f32(\ add,\ mul1,\ mul2\ )}}
\DoxyCodeLine{01755\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ vfmaq\_f32(\ add,\ mul1,\ mul2\ )}}
\DoxyCodeLine{01756\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ vfmaq\_f32(\ add,\ mul,\ vld1q\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01757\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ vfmaq\_f32(\ add,\ mul,\ vld1q\_dup\_f32(\ (float\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{01758\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01759\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ vaddq\_f32(\ add,\ vmulq\_f32(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{01760\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1(\ out,\ add,\ mul1,\ mul2\ )\ (out)\ =\ vaddq\_f32(\ add,\ vmulq\_f32(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{01761\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ vaddq\_f32(\ add,\ vmulq\_f32(\ mul,\ vld1q\_f32(\ (float\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{01762\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ vaddq\_f32(\ add,\ vmulq\_f32(\ mul,\ vld1q\_dup\_f32(\ (float\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{01763\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01764\ }
\DoxyCodeLine{01765\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vaddq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01766\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vmulq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01767\ }
\DoxyCodeLine{01768\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_and(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vreinterpretq\_f32\_u32(\ vandq\_u32(\ vreinterpretq\_u32\_f32(reg0),\ vreinterpretq\_u32\_f32(reg1)\ )\ )}}
\DoxyCodeLine{01769\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_or(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vreinterpretq\_f32\_u32(\ vorrq\_u32(\ vreinterpretq\_u32\_f32(reg0),\ vreinterpretq\_u32\_f32(reg1)\ )\ )}}
\DoxyCodeLine{01770\ }
\DoxyCodeLine{01771\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_min(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vminq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01772\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_max(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vmaxq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01773\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_min1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vminq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01774\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_max1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vmaxq\_f32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01775\ }
\DoxyCodeLine{01776\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_0123ABCDto3ABx(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vextq\_f32(\ reg0,\ reg1,\ 3\ )}}
\DoxyCodeLine{01777\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_0123ABCDto23Ax(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vextq\_f32(\ reg0,\ reg1,\ 2\ )}}
\DoxyCodeLine{01778\ }
\DoxyCodeLine{01779\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_a1a1(\ out,\ alp,\ ones\ )\ (out)\ =\ vzipq\_f32(vuzpq\_f32(alp,\ alp).val[1],\ ones).val[0]}}
\DoxyCodeLine{01780\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_1a1a(\ out,\ alp,\ ones\ )\ (out)\ =\ vzipq\_f32(ones,\ vuzpq\_f32(alp,\ alp).val[0]).val[0]}}
\DoxyCodeLine{01781\ }
\DoxyCodeLine{01782\ \textcolor{preprocessor}{\ \ \#if\ defined(\ \_M\_ARM64\ )\ ||\ defined(\ \_\_aarch64\_\_\ )\ ||\ defined(\ \_\_arm64\_\_\ )}}
\DoxyCodeLine{01783\ }
\DoxyCodeLine{01784\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_aaa1(\ out,\ alp,\ ones\ )\ (out)\ =\ vcopyq\_laneq\_f32(vdupq\_n\_f32(vgetq\_lane\_f32(alp,\ 3)),\ 3,\ ones,\ 3)}}
\DoxyCodeLine{01785\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_1aaa(\ out,\ alp,\ ones\ )\ (out)\ =\ vcopyq\_laneq\_f32(vdupq\_n\_f32(vgetq\_lane\_f32(alp,\ 0)),\ 0,\ ones,\ 0)}}
\DoxyCodeLine{01786\ }
\DoxyCodeLine{01787\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01788\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ stbir\_make16(a,b,c,d)\ vcombine\_u8(\ \(\backslash\)}}
\DoxyCodeLine{01789\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ vcreate\_u8(\ (4*a+0)\ |\ ((4*a+1)<<8)\ |\ ((4*a+2)<<16)\ |\ ((4*a+3)<<24)\ |\ \(\backslash\)}}
\DoxyCodeLine{01790\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ ((stbir\_uint64)(4*b+0)<<32)\ |\ ((stbir\_uint64)(4*b+1)<<40)\ |\ ((stbir\_uint64)(4*b+2)<<48)\ |\ ((stbir\_uint64)(4*b+3)<<56)),\ \(\backslash\)}}
\DoxyCodeLine{01791\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ vcreate\_u8(\ (4*c+0)\ |\ ((4*c+1)<<8)\ |\ ((4*c+2)<<16)\ |\ ((4*c+3)<<24)\ |\ \(\backslash\)}}
\DoxyCodeLine{01792\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ ((stbir\_uint64)(4*d+0)<<32)\ |\ ((stbir\_uint64)(4*d+1)<<40)\ |\ ((stbir\_uint64)(4*d+2)<<48)\ |\ ((stbir\_uint64)(4*d+3)<<56)\ )\ )}}
\DoxyCodeLine{01793\ }
\DoxyCodeLine{01794\ \ \ \ \ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ uint8x16x2\_t\ stbir\_make16x2(float32x4\_t\ rega,float32x4\_t\ regb)}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ uint8x16x2\_t\ r\ =\ \{\ vreinterpretq\_u8\_f32(rega),\ vreinterpretq\_u8\_f32(regb)\ \};}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{01798\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01799\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01800\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ stbir\_make16(a,b,c,d)\ (uint8x16\_t)\{4*a+0,4*a+1,4*a+2,4*a+3,4*b+0,4*b+1,4*b+2,4*b+3,4*c+0,4*c+1,4*c+2,4*c+3,4*d+0,4*d+1,4*d+2,4*d+3\}}}
\DoxyCodeLine{01801\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ stbir\_make16x2(a,b)\ (uint8x16x2\_t)\{\{vreinterpretq\_u8\_f32(a),vreinterpretq\_u8\_f32(b)\}\}}}
\DoxyCodeLine{01802\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01803\ }
\DoxyCodeLine{01804\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_swiz(\ reg,\ one,\ two,\ three,\ four\ )\ vreinterpretq\_f32\_u8(\ vqtbl1q\_u8(\ vreinterpretq\_u8\_f32(reg),\ stbir\_make16(one,\ two,\ three,\ four)\ )\ )}}
\DoxyCodeLine{01805\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_swiz2(\ rega,\ regb,\ one,\ two,\ three,\ four\ )\ vreinterpretq\_f32\_u8(\ vqtbl2q\_u8(\ stbir\_make16x2(rega,regb),\ stbir\_make16(one,\ two,\ three,\ four)\ )\ )}}
\DoxyCodeLine{01806\ }
\DoxyCodeLine{01807\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi\_16madd(\ out,\ reg0,\ reg1\ )\ \(\backslash\)}}
\DoxyCodeLine{01808\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01809\ \textcolor{preprocessor}{\ \ \ \ \ \ int16x8\_t\ r0\ =\ vreinterpretq\_s16\_u32(reg0);\ \(\backslash\)}}
\DoxyCodeLine{01810\ \textcolor{preprocessor}{\ \ \ \ \ \ int16x8\_t\ r1\ =\ vreinterpretq\_s16\_u32(reg1);\ \(\backslash\)}}
\DoxyCodeLine{01811\ \textcolor{preprocessor}{\ \ \ \ \ \ int32x4\_t\ tmp0\ =\ vmull\_s16(\ vget\_low\_s16(r0),\ vget\_low\_s16(r1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01812\ \textcolor{preprocessor}{\ \ \ \ \ \ int32x4\_t\ tmp1\ =\ vmull\_s16(\ vget\_high\_s16(r0),\ vget\_high\_s16(r1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01813\ \textcolor{preprocessor}{\ \ \ \ \ \ (out)\ =\ vreinterpretq\_u32\_s32(\ vpaddq\_s32(tmp0,\ tmp1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01814\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01815\ }
\DoxyCodeLine{01816\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01817\ }
\DoxyCodeLine{01818\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_aaa1(\ out,\ alp,\ ones\ )\ (out)\ =\ vsetq\_lane\_f32(1.0f,\ vdupq\_n\_f32(vgetq\_lane\_f32(alp,\ 3)),\ 3)}}
\DoxyCodeLine{01819\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_1aaa(\ out,\ alp,\ ones\ )\ (out)\ =\ vsetq\_lane\_f32(1.0f,\ vdupq\_n\_f32(vgetq\_lane\_f32(alp,\ 0)),\ 0)}}
\DoxyCodeLine{01820\ }
\DoxyCodeLine{01821\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01822\ \ \ \ \ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ uint8x8x2\_t\ stbir\_make8x2(float32x4\_t\ reg)}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ uint8x8x2\_t\ r\ =\ \{\ \{\ vget\_low\_u8(vreinterpretq\_u8\_f32(reg)),\ vget\_high\_u8(vreinterpretq\_u8\_f32(reg))\ \}\ \};}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01827\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ stbir\_make8(a,b)\ vcreate\_u8(\ \(\backslash\)}}
\DoxyCodeLine{01828\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (4*a+0)\ |\ ((4*a+1)<<8)\ |\ ((4*a+2)<<16)\ |\ ((4*a+3)<<24)\ |\ \(\backslash\)}}
\DoxyCodeLine{01829\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ ((stbir\_uint64)(4*b+0)<<32)\ |\ ((stbir\_uint64)(4*b+1)<<40)\ |\ ((stbir\_uint64)(4*b+2)<<48)\ |\ ((stbir\_uint64)(4*b+3)<<56)\ )}}
\DoxyCodeLine{01830\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01831\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ stbir\_make8x2(reg)\ (uint8x8x2\_t)\{\ \{\ vget\_low\_u8(vreinterpretq\_u8\_f32(reg)),\ vget\_high\_u8(vreinterpretq\_u8\_f32(reg))\ \}\ \}}}
\DoxyCodeLine{01832\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ stbir\_make8(a,b)\ (uint8x8\_t)\{4*a+0,4*a+1,4*a+2,4*a+3,4*b+0,4*b+1,4*b+2,4*b+3\}}}
\DoxyCodeLine{01833\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01834\ }
\DoxyCodeLine{01835\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdf\_swiz(\ reg,\ one,\ two,\ three,\ four\ )\ vreinterpretq\_f32\_u8(\ vcombine\_u8(\ \(\backslash\)}}
\DoxyCodeLine{01836\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ vtbl2\_u8(\ stbir\_make8x2(\ reg\ ),\ stbir\_make8(\ one,\ two\ )\ ),\ \(\backslash\)}}
\DoxyCodeLine{01837\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ vtbl2\_u8(\ stbir\_make8x2(\ reg\ ),\ stbir\_make8(\ three,\ four\ )\ )\ )\ )}}
\DoxyCodeLine{01838\ }
\DoxyCodeLine{01839\ \textcolor{preprocessor}{\ \ \ \ \#define\ stbir\_\_simdi\_16madd(\ out,\ reg0,\ reg1\ )\ \(\backslash\)}}
\DoxyCodeLine{01840\ \textcolor{preprocessor}{\ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01841\ \textcolor{preprocessor}{\ \ \ \ \ \ int16x8\_t\ r0\ =\ vreinterpretq\_s16\_u32(reg0);\ \(\backslash\)}}
\DoxyCodeLine{01842\ \textcolor{preprocessor}{\ \ \ \ \ \ int16x8\_t\ r1\ =\ vreinterpretq\_s16\_u32(reg1);\ \(\backslash\)}}
\DoxyCodeLine{01843\ \textcolor{preprocessor}{\ \ \ \ \ \ int32x4\_t\ tmp0\ =\ vmull\_s16(\ vget\_low\_s16(r0),\ vget\_low\_s16(r1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01844\ \textcolor{preprocessor}{\ \ \ \ \ \ int32x4\_t\ tmp1\ =\ vmull\_s16(\ vget\_high\_s16(r0),\ vget\_high\_s16(r1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01845\ \textcolor{preprocessor}{\ \ \ \ \ \ int32x2\_t\ out0\ =\ vpadd\_s32(\ vget\_low\_s32(tmp0),\ vget\_high\_s32(tmp0)\ );\ \(\backslash\)}}
\DoxyCodeLine{01846\ \textcolor{preprocessor}{\ \ \ \ \ \ int32x2\_t\ out1\ =\ vpadd\_s32(\ vget\_low\_s32(tmp1),\ vget\_high\_s32(tmp1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01847\ \textcolor{preprocessor}{\ \ \ \ \ \ (out)\ =\ vreinterpretq\_u32\_s32(\ vcombine\_s32(out0,\ out1)\ );\ \(\backslash\)}}
\DoxyCodeLine{01848\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{01849\ }
\DoxyCodeLine{01850\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01851\ }
\DoxyCodeLine{01852\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_and(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vandq\_u32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01853\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_or(\ out,\ reg0,\ reg1\ )\ (out)\ =\ vorrq\_u32(\ reg0,\ reg1\ )}}
\DoxyCodeLine{01854\ }
\DoxyCodeLine{01855\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_pack\_to\_8bytes(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01856\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01857\ \textcolor{preprocessor}{\ \ \ \ float32x4\_t\ af\ =\ vmaxq\_f32(\ vminq\_f32(aa,STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float)\ ),\ vdupq\_n\_f32(0)\ );\ \(\backslash\)}}
\DoxyCodeLine{01858\ \textcolor{preprocessor}{\ \ \ \ float32x4\_t\ bf\ =\ vmaxq\_f32(\ vminq\_f32(bb,STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float)\ ),\ vdupq\_n\_f32(0)\ );\ \(\backslash\)}}
\DoxyCodeLine{01859\ \textcolor{preprocessor}{\ \ \ \ int16x4\_t\ ai\ =\ vqmovn\_s32(\ vcvtq\_s32\_f32(\ af\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01860\ \textcolor{preprocessor}{\ \ \ \ int16x4\_t\ bi\ =\ vqmovn\_s32(\ vcvtq\_s32\_f32(\ bf\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{01861\ \textcolor{preprocessor}{\ \ \ \ uint8x8\_t\ out8\ =\ vqmovun\_s16(\ vcombine\_s16(ai,\ bi)\ );\ \(\backslash\)}}
\DoxyCodeLine{01862\ \textcolor{preprocessor}{\ \ \ \ out\ =\ vreinterpretq\_u32\_u8(\ vcombine\_u8(out8,\ out8)\ );\ \(\backslash\)}}
\DoxyCodeLine{01863\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01864\ }
\DoxyCodeLine{01865\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_pack\_to\_8words(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{01866\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01867\ \textcolor{preprocessor}{\ \ \ \ float32x4\_t\ af\ =\ vmaxq\_f32(\ vminq\_f32(aa,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)\ ),\ vdupq\_n\_f32(0)\ );\ \(\backslash\)}}
\DoxyCodeLine{01868\ \textcolor{preprocessor}{\ \ \ \ float32x4\_t\ bf\ =\ vmaxq\_f32(\ vminq\_f32(bb,STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)\ ),\ vdupq\_n\_f32(0)\ );\ \(\backslash\)}}
\DoxyCodeLine{01869\ \textcolor{preprocessor}{\ \ \ \ int32x4\_t\ ai\ =\ vcvtq\_s32\_f32(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{01870\ \textcolor{preprocessor}{\ \ \ \ int32x4\_t\ bi\ =\ vcvtq\_s32\_f32(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{01871\ \textcolor{preprocessor}{\ \ \ \ out\ =\ vreinterpretq\_u32\_u16(\ vcombine\_u16(vqmovun\_s32(ai),\ vqmovun\_s32(bi))\ );\ \(\backslash\)}}
\DoxyCodeLine{01872\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01873\ }
\DoxyCodeLine{01874\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_interleave\_pack\_and\_store\_16\_u8(\ ptr,\ r0,\ r1,\ r2,\ r3\ )\ \(\backslash\)}}
\DoxyCodeLine{01875\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01876\ \textcolor{preprocessor}{\ \ \ \ int16x4x2\_t\ tmp0\ =\ vzip\_s16(\ vqmovn\_s32(vreinterpretq\_s32\_u32(r0)),\ vqmovn\_s32(vreinterpretq\_s32\_u32(r2))\ );\ \(\backslash\)}}
\DoxyCodeLine{01877\ \textcolor{preprocessor}{\ \ \ \ int16x4x2\_t\ tmp1\ =\ vzip\_s16(\ vqmovn\_s32(vreinterpretq\_s32\_u32(r1)),\ vqmovn\_s32(vreinterpretq\_s32\_u32(r3))\ );\ \(\backslash\)}}
\DoxyCodeLine{01878\ \textcolor{preprocessor}{\ \ \ \ uint8x8x2\_t\ out\ =\ \(\backslash\)}}
\DoxyCodeLine{01879\ \textcolor{preprocessor}{\ \ \ \ \{\ \{\ \(\backslash\)}}
\DoxyCodeLine{01880\ \textcolor{preprocessor}{\ \ \ \ \ \ vqmovun\_s16(\ vcombine\_s16(tmp0.val[0],\ tmp0.val[1])\ ),\ \(\backslash\)}}
\DoxyCodeLine{01881\ \textcolor{preprocessor}{\ \ \ \ \ \ vqmovun\_s16(\ vcombine\_s16(tmp1.val[0],\ tmp1.val[1])\ ),\ \(\backslash\)}}
\DoxyCodeLine{01882\ \textcolor{preprocessor}{\ \ \ \ \}\ \};\ \(\backslash\)}}
\DoxyCodeLine{01883\ \textcolor{preprocessor}{\ \ \ \ vst2\_u8(ptr,\ out);\ \(\backslash\)}}
\DoxyCodeLine{01884\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01885\ }
\DoxyCodeLine{01886\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load4\_transposed(\ o0,\ o1,\ o2,\ o3,\ ptr\ )\ \(\backslash\)}}
\DoxyCodeLine{01887\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01888\ \textcolor{preprocessor}{\ \ \ \ float32x4x4\_t\ tmp\ =\ vld4q\_f32(ptr);\ \(\backslash\)}}
\DoxyCodeLine{01889\ \textcolor{preprocessor}{\ \ \ \ o0\ =\ tmp.val[0];\ \(\backslash\)}}
\DoxyCodeLine{01890\ \textcolor{preprocessor}{\ \ \ \ o1\ =\ tmp.val[1];\ \(\backslash\)}}
\DoxyCodeLine{01891\ \textcolor{preprocessor}{\ \ \ \ o2\ =\ tmp.val[2];\ \(\backslash\)}}
\DoxyCodeLine{01892\ \textcolor{preprocessor}{\ \ \ \ o3\ =\ tmp.val[3];\ \(\backslash\)}}
\DoxyCodeLine{01893\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01894\ }
\DoxyCodeLine{01895\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_32shr(\ out,\ reg,\ imm\ )\ out\ =\ vshrq\_n\_u32(\ reg,\ imm\ )}}
\DoxyCodeLine{01896\ }
\DoxyCodeLine{01897\ \textcolor{preprocessor}{\ \ \#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01898\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_SIMDF\_CONST(var,\ x)\ \_\_declspec(align(8))\ float\ var[]\ =\ \{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{01899\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_SIMDI\_CONST(var,\ x)\ \_\_declspec(align(8))\ uint32\_t\ var[]\ =\ \{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{01900\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONSTF(var)\ (*(const\ float32x4\_t*)var)}}
\DoxyCodeLine{01901\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONSTI(var)\ (*(const\ uint32x4\_t*)var)}}
\DoxyCodeLine{01902\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{01903\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_SIMDF\_CONST(var,\ x)\ stbir\_\_simdf\ var\ =\ \{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{01904\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_SIMDI\_CONST(var,\ x)\ stbir\_\_simdi\ var\ =\ \{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{01905\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONSTF(var)\ (var)}}
\DoxyCodeLine{01906\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_CONSTI(var)\ (var)}}
\DoxyCodeLine{01907\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01908\ }
\DoxyCodeLine{01909\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_FLOORF}}
\DoxyCodeLine{01910\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_FLOORF}}
\DoxyCodeLine{01911\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01912\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_FLOORF\ stbir\_simd\_floorf}}
\DoxyCodeLine{01913\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_simd\_floorf(\textcolor{keywordtype}{float}\ x)}
\DoxyCodeLine{01914\ \ \ \{}
\DoxyCodeLine{01915\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\ \_M\_ARM64\ )\ ||\ defined(\ \_\_aarch64\_\_\ )\ ||\ defined(\ \_\_arm64\_\_\ )}}
\DoxyCodeLine{01916\ \ \ \ \ \textcolor{keywordflow}{return}\ vget\_lane\_f32(\ vrndm\_f32(\ vdup\_n\_f32(x)\ ),\ 0);}
\DoxyCodeLine{01917\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01918\ \ \ \ \ float32x2\_t\ f\ =\ vdup\_n\_f32(x);}
\DoxyCodeLine{01919\ \ \ \ \ float32x2\_t\ t\ =\ vcvt\_f32\_s32(vcvt\_s32\_f32(f));}
\DoxyCodeLine{01920\ \ \ \ \ uint32x2\_t\ a\ =\ vclt\_f32(f,\ t);}
\DoxyCodeLine{01921\ \ \ \ \ uint32x2\_t\ b\ =\ vreinterpret\_u32\_f32(vdup\_n\_f32(-\/1.0f));}
\DoxyCodeLine{01922\ \ \ \ \ float32x2\_t\ r\ =\ vadd\_f32(t,\ vreinterpret\_f32\_u32(vand\_u32(a,\ b)));}
\DoxyCodeLine{01923\ \ \ \ \ \textcolor{keywordflow}{return}\ vget\_lane\_f32(r,\ 0);}
\DoxyCodeLine{01924\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01925\ \ \ \}}
\DoxyCodeLine{01926\ }
\DoxyCodeLine{01927\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_CEILF}}
\DoxyCodeLine{01928\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_CEILF}}
\DoxyCodeLine{01929\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{01930\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_CEILF\ stbir\_simd\_ceilf}}
\DoxyCodeLine{01931\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_simd\_ceilf(\textcolor{keywordtype}{float}\ x)}
\DoxyCodeLine{01932\ \ \ \{}
\DoxyCodeLine{01933\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\ \_M\_ARM64\ )\ ||\ defined(\ \_\_aarch64\_\_\ )\ ||\ defined(\ \_\_arm64\_\_\ )}}
\DoxyCodeLine{01934\ \ \ \ \ \textcolor{keywordflow}{return}\ vget\_lane\_f32(\ vrndp\_f32(\ vdup\_n\_f32(x)\ ),\ 0);}
\DoxyCodeLine{01935\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01936\ \ \ \ \ float32x2\_t\ f\ =\ vdup\_n\_f32(x);}
\DoxyCodeLine{01937\ \ \ \ \ float32x2\_t\ t\ =\ vcvt\_f32\_s32(vcvt\_s32\_f32(f));}
\DoxyCodeLine{01938\ \ \ \ \ uint32x2\_t\ a\ =\ vclt\_f32(t,\ f);}
\DoxyCodeLine{01939\ \ \ \ \ uint32x2\_t\ b\ =\ vreinterpret\_u32\_f32(vdup\_n\_f32(1.0f));}
\DoxyCodeLine{01940\ \ \ \ \ float32x2\_t\ r\ =\ vadd\_f32(t,\ vreinterpret\_f32\_u32(vand\_u32(a,\ b)));}
\DoxyCodeLine{01941\ \ \ \ \ \textcolor{keywordflow}{return}\ vget\_lane\_f32(r,\ 0);}
\DoxyCodeLine{01942\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01943\ \ \ \}}
\DoxyCodeLine{01944\ }
\DoxyCodeLine{01945\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_SIMD}}
\DoxyCodeLine{01946\ }
\DoxyCodeLine{01947\ \textcolor{preprocessor}{\#elif\ defined(STBIR\_WASM)}}
\DoxyCodeLine{01948\ }
\DoxyCodeLine{01949\ \textcolor{preprocessor}{\ \ \#include\ <wasm\_simd128.h>}}
\DoxyCodeLine{01950\ }
\DoxyCodeLine{01951\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\ v128\_t}}
\DoxyCodeLine{01952\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\ v128\_t}}
\DoxyCodeLine{01953\ }
\DoxyCodeLine{01954\ \textcolor{preprocessor}{\ \ \#define\ stbir\_simdi\_castf(\ reg\ )\ (reg)}}
\DoxyCodeLine{01955\ \textcolor{preprocessor}{\ \ \#define\ stbir\_simdf\_casti(\ reg\ )\ (reg)}}
\DoxyCodeLine{01956\ }
\DoxyCodeLine{01957\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load(\ reg,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ \ \ (reg)\ =\ wasm\_v128\_load(\ (void\ const*)(ptr)\ )}}
\DoxyCodeLine{01958\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_load(\ reg,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ \ \ (reg)\ =\ wasm\_v128\_load(\ (void\ const*)(ptr)\ )}}
\DoxyCodeLine{01959\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1(\ out,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_v128\_load32\_splat(\ (void\ const*)(ptr)\ )\ }\textcolor{comment}{//\ top\ values\ can\ be\ random\ (not\ denormal\ or\ nan\ for\ perf)}}
\DoxyCodeLine{01960\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_load1(\ out,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_v128\_load32\_splat(\ (void\ const*)(ptr)\ )}}
\DoxyCodeLine{01961\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1z(\ out,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_v128\_load32\_zero(\ (void\ const*)(ptr)\ )\ }\textcolor{comment}{//\ top\ values\ must\ be\ zero}}
\DoxyCodeLine{01962\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_frep4(\ fvar\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wasm\_f32x4\_splat(\ fvar\ )}}
\DoxyCodeLine{01963\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load1frep4(\ out,\ fvar\ )\ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_splat(\ fvar\ )}}
\DoxyCodeLine{01964\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2(\ out,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_v128\_load64\_splat(\ (void\ const*)(ptr)\ )\ }\textcolor{comment}{//\ top\ values\ can\ be\ random\ (not\ denormal\ or\ nan\ for\ perf)}}
\DoxyCodeLine{01965\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2z(\ out,\ ptr\ )\ \ \ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_v128\_load64\_zero(\ (void\ const*)(ptr)\ )\ }\textcolor{comment}{//\ top\ values\ must\ be\ zero}}
\DoxyCodeLine{01966\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load2hmerge(\ out,\ reg,\ ptr\ )\ (out)\ =\ wasm\_v128\_load64\_lane(\ (void\ const*)(ptr),\ reg,\ 1\ )}}
\DoxyCodeLine{01967\ }
\DoxyCodeLine{01968\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_zeroP()\ wasm\_f32x4\_const\_splat(0)}}
\DoxyCodeLine{01969\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_zero(\ reg\ )\ (reg)\ =\ wasm\_f32x4\_const\_splat(0)}}
\DoxyCodeLine{01970\ }
\DoxyCodeLine{01971\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store(\ ptr,\ reg\ )\ \ \ wasm\_v128\_store(\ (void*)(ptr),\ reg\ )}}
\DoxyCodeLine{01972\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store1(\ ptr,\ reg\ )\ \ wasm\_v128\_store32\_lane(\ (void*)(ptr),\ reg,\ 0\ )}}
\DoxyCodeLine{01973\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store2(\ ptr,\ reg\ )\ \ wasm\_v128\_store64\_lane(\ (void*)(ptr),\ reg,\ 0\ )}}
\DoxyCodeLine{01974\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_store2h(\ ptr,\ reg\ )\ wasm\_v128\_store64\_lane(\ (void*)(ptr),\ reg,\ 1\ )}}
\DoxyCodeLine{01975\ }
\DoxyCodeLine{01976\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store(\ ptr,\ reg\ )\ \ wasm\_v128\_store(\ (void*)(ptr),\ reg\ )}}
\DoxyCodeLine{01977\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store1(\ ptr,\ reg\ )\ wasm\_v128\_store32\_lane(\ (void*)(ptr),\ reg,\ 0\ )}}
\DoxyCodeLine{01978\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_store2(\ ptr,\ reg\ )\ wasm\_v128\_store64\_lane(\ (void*)(ptr),\ reg,\ 0\ )}}
\DoxyCodeLine{01979\ }
\DoxyCodeLine{01980\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_prefetch(\ ptr\ )}}
\DoxyCodeLine{01981\ }
\DoxyCodeLine{01982\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u8\_to\_u32(out0,out1,out2,out3,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01983\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01984\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ l\ =\ wasm\_u16x8\_extend\_low\_u8x16\ (\ ireg\ );\ \(\backslash\)}}
\DoxyCodeLine{01985\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ h\ =\ wasm\_u16x8\_extend\_high\_u8x16(\ ireg\ );\ \(\backslash\)}}
\DoxyCodeLine{01986\ \textcolor{preprocessor}{\ \ \ \ out0\ =\ wasm\_u32x4\_extend\_low\_u16x8\ (\ l\ );\ \(\backslash\)}}
\DoxyCodeLine{01987\ \textcolor{preprocessor}{\ \ \ \ out1\ =\ wasm\_u32x4\_extend\_high\_u16x8(\ l\ );\ \(\backslash\)}}
\DoxyCodeLine{01988\ \textcolor{preprocessor}{\ \ \ \ out2\ =\ wasm\_u32x4\_extend\_low\_u16x8\ (\ h\ );\ \(\backslash\)}}
\DoxyCodeLine{01989\ \textcolor{preprocessor}{\ \ \ \ out3\ =\ wasm\_u32x4\_extend\_high\_u16x8(\ h\ );\ \(\backslash\)}}
\DoxyCodeLine{01990\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01991\ }
\DoxyCodeLine{01992\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u8\_to\_1u32(out,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01993\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{01994\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ tmp\ =\ wasm\_u16x8\_extend\_low\_u8x16(ireg);\ \(\backslash\)}}
\DoxyCodeLine{01995\ \textcolor{preprocessor}{\ \ \ \ out\ =\ wasm\_u32x4\_extend\_low\_u16x8(tmp);\ \(\backslash\)}}
\DoxyCodeLine{01996\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{01997\ }
\DoxyCodeLine{01998\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_expand\_u16\_to\_u32(out0,out1,ireg)\ \(\backslash\)}}
\DoxyCodeLine{01999\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{02000\ \textcolor{preprocessor}{\ \ \ \ out0\ =\ wasm\_u32x4\_extend\_low\_u16x8\ (\ ireg\ );\ \(\backslash\)}}
\DoxyCodeLine{02001\ \textcolor{preprocessor}{\ \ \ \ out1\ =\ wasm\_u32x4\_extend\_high\_u16x8(\ ireg\ );\ \(\backslash\)}}
\DoxyCodeLine{02002\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{02003\ }
\DoxyCodeLine{02004\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_i32(\ i,\ f\ )\ \ \ \ (i)\ =\ wasm\_i32x4\_trunc\_sat\_f32x4(f)}}
\DoxyCodeLine{02005\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_int(\ f\ )\ \ \ \ \ \ \ wasm\_i32x4\_extract\_lane(wasm\_i32x4\_trunc\_sat\_f32x4(f),\ 0)}}
\DoxyCodeLine{02006\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_to\_int(\ i\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wasm\_i32x4\_extract\_lane(i,\ 0)}}
\DoxyCodeLine{02007\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_uint8(\ f\ )\ \ \ \ \ ((unsigned\ char)wasm\_i32x4\_extract\_lane(wasm\_i32x4\_trunc\_sat\_f32x4(wasm\_f32x4\_max(wasm\_f32x4\_min(f,STBIR\_max\_uint8\_as\_float),wasm\_f32x4\_const\_splat(0))),\ 0))}}
\DoxyCodeLine{02008\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_convert\_float\_to\_short(\ f\ )\ \ \ \ \ ((unsigned\ short)wasm\_i32x4\_extract\_lane(wasm\_i32x4\_trunc\_sat\_f32x4(wasm\_f32x4\_max(wasm\_f32x4\_min(f,STBIR\_max\_uint16\_as\_float),wasm\_f32x4\_const\_splat(0))),\ 0))}}
\DoxyCodeLine{02009\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_convert\_i32\_to\_float(out,\ ireg)\ (out)\ =\ wasm\_f32x4\_convert\_i32x4(ireg)}}
\DoxyCodeLine{02010\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add(\ out,\ reg0,\ reg1\ )\ \ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_add(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02011\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult(\ out,\ reg0,\ reg1\ )\ \ \ \ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_mul(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02012\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult\_mem(\ out,\ reg,\ ptr\ )\ \ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_mul(\ reg,\ wasm\_v128\_load(\ (void\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{02013\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult1\_mem(\ out,\ reg,\ ptr\ )\ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_mul(\ reg,\ wasm\_v128\_load32\_splat(\ (void\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{02014\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add\_mem(\ out,\ reg,\ ptr\ )\ \ \ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_add(\ reg,\ wasm\_v128\_load(\ (void\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{02015\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add1\_mem(\ out,\ reg,\ ptr\ )\ \ \ \ \ \ \ (out)\ =\ wasm\_f32x4\_add(\ reg,\ wasm\_v128\_load32\_splat(\ (void\ const*)(ptr)\ )\ )}}
\DoxyCodeLine{02016\ }
\DoxyCodeLine{02017\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd(\ out,\ add,\ mul1,\ mul2\ )\ \ \ \ (out)\ =\ wasm\_f32x4\_add(\ add,\ wasm\_f32x4\_mul(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{02018\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1(\ out,\ add,\ mul1,\ mul2\ )\ \ \ (out)\ =\ wasm\_f32x4\_add(\ add,\ wasm\_f32x4\_mul(\ mul1,\ mul2\ )\ )}}
\DoxyCodeLine{02019\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd\_mem(\ out,\ add,\ mul,\ ptr\ )\ \ (out)\ =\ wasm\_f32x4\_add(\ add,\ wasm\_f32x4\_mul(\ mul,\ wasm\_v128\_load(\ (void\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{02020\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_madd1\_mem(\ out,\ add,\ mul,\ ptr\ )\ (out)\ =\ wasm\_f32x4\_add(\ add,\ wasm\_f32x4\_mul(\ mul,\ wasm\_v128\_load32\_splat(\ (void\ const*)(ptr)\ )\ )\ )}}
\DoxyCodeLine{02021\ }
\DoxyCodeLine{02022\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_add1(\ out,\ reg0,\ reg1\ )\ \ (out)\ =\ wasm\_f32x4\_add(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02023\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_mult1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_f32x4\_mul(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02024\ }
\DoxyCodeLine{02025\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_and(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_v128\_and(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02026\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_or(\ out,\ reg0,\ reg1\ )\ \ (out)\ =\ wasm\_v128\_or(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02027\ }
\DoxyCodeLine{02028\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_min(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_f32x4\_min(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02029\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_max(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_f32x4\_max(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02030\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_min1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_f32x4\_min(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02031\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_max1(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_f32x4\_max(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02032\ }
\DoxyCodeLine{02033\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_0123ABCDto3ABx(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_i32x4\_shuffle(\ reg0,\ reg1,\ 3,\ 4,\ 5,\ -\/1\ )}}
\DoxyCodeLine{02034\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_0123ABCDto23Ax(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_i32x4\_shuffle(\ reg0,\ reg1,\ 2,\ 3,\ 4,\ -\/1\ )}}
\DoxyCodeLine{02035\ }
\DoxyCodeLine{02036\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_aaa1(out,alp,ones)\ (out)\ =\ wasm\_i32x4\_shuffle(alp,\ ones,\ 3,\ 3,\ 3,\ 4)}}
\DoxyCodeLine{02037\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_1aaa(out,alp,ones)\ (out)\ =\ wasm\_i32x4\_shuffle(alp,\ ones,\ 4,\ 0,\ 0,\ 0)}}
\DoxyCodeLine{02038\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_a1a1(out,alp,ones)\ (out)\ =\ wasm\_i32x4\_shuffle(alp,\ ones,\ 1,\ 4,\ 3,\ 4)}}
\DoxyCodeLine{02039\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_1a1a(out,alp,ones)\ (out)\ =\ wasm\_i32x4\_shuffle(alp,\ ones,\ 4,\ 0,\ 4,\ 2)}}
\DoxyCodeLine{02040\ }
\DoxyCodeLine{02041\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_swiz(\ reg,\ one,\ two,\ three,\ four\ )\ wasm\_i32x4\_shuffle(reg,\ reg,\ one,\ two,\ three,\ four)}}
\DoxyCodeLine{02042\ }
\DoxyCodeLine{02043\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_and(\ out,\ reg0,\ reg1\ )\ \ \ \ (out)\ =\ wasm\_v128\_and(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02044\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_or(\ out,\ reg0,\ reg1\ )\ \ \ \ \ (out)\ =\ wasm\_v128\_or(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02045\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_16madd(\ out,\ reg0,\ reg1\ )\ (out)\ =\ wasm\_i32x4\_dot\_i16x8(\ reg0,\ reg1\ )}}
\DoxyCodeLine{02046\ }
\DoxyCodeLine{02047\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_pack\_to\_8bytes(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{02048\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{02049\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ af\ =\ wasm\_f32x4\_max(\ wasm\_f32x4\_min(aa,\ STBIR\_max\_uint8\_as\_float),\ wasm\_f32x4\_const\_splat(0)\ );\ \(\backslash\)}}
\DoxyCodeLine{02050\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ bf\ =\ wasm\_f32x4\_max(\ wasm\_f32x4\_min(bb,\ STBIR\_max\_uint8\_as\_float),\ wasm\_f32x4\_const\_splat(0)\ );\ \(\backslash\)}}
\DoxyCodeLine{02051\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ ai\ =\ wasm\_i32x4\_trunc\_sat\_f32x4(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{02052\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ bi\ =\ wasm\_i32x4\_trunc\_sat\_f32x4(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{02053\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ out16\ =\ wasm\_i16x8\_narrow\_i32x4(\ ai,\ bi\ );\ \(\backslash\)}}
\DoxyCodeLine{02054\ \textcolor{preprocessor}{\ \ \ \ out\ =\ wasm\_u8x16\_narrow\_i16x8(\ out16,\ out16\ );\ \(\backslash\)}}
\DoxyCodeLine{02055\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{02056\ }
\DoxyCodeLine{02057\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_pack\_to\_8words(out,aa,bb)\ \(\backslash\)}}
\DoxyCodeLine{02058\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{02059\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ af\ =\ wasm\_f32x4\_max(\ wasm\_f32x4\_min(aa,\ STBIR\_max\_uint16\_as\_float),\ wasm\_f32x4\_const\_splat(0));\ \(\backslash\)}}
\DoxyCodeLine{02060\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ bf\ =\ wasm\_f32x4\_max(\ wasm\_f32x4\_min(bb,\ STBIR\_max\_uint16\_as\_float),\ wasm\_f32x4\_const\_splat(0));\ \(\backslash\)}}
\DoxyCodeLine{02061\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ ai\ =\ wasm\_i32x4\_trunc\_sat\_f32x4(\ af\ );\ \(\backslash\)}}
\DoxyCodeLine{02062\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ bi\ =\ wasm\_i32x4\_trunc\_sat\_f32x4(\ bf\ );\ \(\backslash\)}}
\DoxyCodeLine{02063\ \textcolor{preprocessor}{\ \ \ \ out\ =\ wasm\_u16x8\_narrow\_i32x4(\ ai,\ bi\ );\ \(\backslash\)}}
\DoxyCodeLine{02064\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{02065\ }
\DoxyCodeLine{02066\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_interleave\_pack\_and\_store\_16\_u8(\ ptr,\ r0,\ r1,\ r2,\ r3\ )\ \(\backslash\)}}
\DoxyCodeLine{02067\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{02068\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ tmp0\ =\ wasm\_i16x8\_narrow\_i32x4(r0,\ r1);\ \(\backslash\)}}
\DoxyCodeLine{02069\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ tmp1\ =\ wasm\_i16x8\_narrow\_i32x4(r2,\ r3);\ \(\backslash\)}}
\DoxyCodeLine{02070\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ tmp\ =\ wasm\_u8x16\_narrow\_i16x8(tmp0,\ tmp1);\ \(\backslash\)}}
\DoxyCodeLine{02071\ \textcolor{preprocessor}{\ \ \ \ tmp\ =\ wasm\_i8x16\_shuffle(tmp,\ tmp,\ 0,\ 4,\ 8,\ 12,\ 1,\ 5,\ 9,\ 13,\ 2,\ 6,\ 10,\ 14,\ 3,\ 7,\ 11,\ 15);\ \(\backslash\)}}
\DoxyCodeLine{02072\ \textcolor{preprocessor}{\ \ \ \ wasm\_v128\_store(\ (void*)(ptr),\ tmp);\ \(\backslash\)}}
\DoxyCodeLine{02073\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{02074\ }
\DoxyCodeLine{02075\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_load4\_transposed(\ o0,\ o1,\ o2,\ o3,\ ptr\ )\ \(\backslash\)}}
\DoxyCodeLine{02076\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{02077\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ t0\ =\ wasm\_v128\_load(\ ptr\ \ \ \ );\ \(\backslash\)}}
\DoxyCodeLine{02078\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ t1\ =\ wasm\_v128\_load(\ ptr+4\ \ );\ \(\backslash\)}}
\DoxyCodeLine{02079\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ t2\ =\ wasm\_v128\_load(\ ptr+8\ \ );\ \(\backslash\)}}
\DoxyCodeLine{02080\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ t3\ =\ wasm\_v128\_load(\ ptr+12\ );\ \(\backslash\)}}
\DoxyCodeLine{02081\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ s0\ =\ wasm\_i32x4\_shuffle(t0,\ t1,\ 0,\ 4,\ 2,\ 6);\ \(\backslash\)}}
\DoxyCodeLine{02082\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ s1\ =\ wasm\_i32x4\_shuffle(t0,\ t1,\ 1,\ 5,\ 3,\ 7);\ \(\backslash\)}}
\DoxyCodeLine{02083\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ s2\ =\ wasm\_i32x4\_shuffle(t2,\ t3,\ 0,\ 4,\ 2,\ 6);\ \(\backslash\)}}
\DoxyCodeLine{02084\ \textcolor{preprocessor}{\ \ \ \ v128\_t\ s3\ =\ wasm\_i32x4\_shuffle(t2,\ t3,\ 1,\ 5,\ 3,\ 7);\ \(\backslash\)}}
\DoxyCodeLine{02085\ \textcolor{preprocessor}{\ \ \ \ o0\ =\ wasm\_i32x4\_shuffle(s0,\ s2,\ 0,\ 1,\ 4,\ 5);\ \(\backslash\)}}
\DoxyCodeLine{02086\ \textcolor{preprocessor}{\ \ \ \ o1\ =\ wasm\_i32x4\_shuffle(s1,\ s3,\ 0,\ 1,\ 4,\ 5);\ \(\backslash\)}}
\DoxyCodeLine{02087\ \textcolor{preprocessor}{\ \ \ \ o2\ =\ wasm\_i32x4\_shuffle(s0,\ s2,\ 2,\ 3,\ 6,\ 7);\ \(\backslash\)}}
\DoxyCodeLine{02088\ \textcolor{preprocessor}{\ \ \ \ o3\ =\ wasm\_i32x4\_shuffle(s1,\ s3,\ 2,\ 3,\ 6,\ 7);\ \(\backslash\)}}
\DoxyCodeLine{02089\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{02090\ }
\DoxyCodeLine{02091\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdi\_32shr(\ out,\ reg,\ imm\ )\ out\ =\ wasm\_u32x4\_shr(\ reg,\ imm\ )}}
\DoxyCodeLine{02092\ }
\DoxyCodeLine{02093\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{float}\ stbir\_\_f32x4\ \_\_attribute\_\_((\_\_vector\_size\_\_(16),\ \_\_aligned\_\_(16)));}
\DoxyCodeLine{02094\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_SIMDF\_CONST(var,\ x)\ stbir\_\_simdf\ var\ =\ (v128\_t)(stbir\_\_f32x4)\{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{02095\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_SIMDI\_CONST(var,\ x)\ stbir\_\_simdi\ var\ =\ \{\ x,\ x,\ x,\ x\ \}}}
\DoxyCodeLine{02096\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_CONSTF(var)\ (var)}}
\DoxyCodeLine{02097\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_CONSTI(var)\ (var)}}
\DoxyCodeLine{02098\ }
\DoxyCodeLine{02099\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_FLOORF}}
\DoxyCodeLine{02100\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_FLOORF}}
\DoxyCodeLine{02101\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{02102\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_FLOORF\ stbir\_simd\_floorf}}
\DoxyCodeLine{02103\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_simd\_floorf(\textcolor{keywordtype}{float}\ x)}
\DoxyCodeLine{02104\ \ \ \{}
\DoxyCodeLine{02105\ \ \ \ \ \textcolor{keywordflow}{return}\ wasm\_f32x4\_extract\_lane(\ wasm\_f32x4\_floor(\ wasm\_f32x4\_splat(x)\ ),\ 0);}
\DoxyCodeLine{02106\ \ \ \}}
\DoxyCodeLine{02107\ }
\DoxyCodeLine{02108\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_CEILF}}
\DoxyCodeLine{02109\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_CEILF}}
\DoxyCodeLine{02110\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{02111\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_CEILF\ stbir\_simd\_ceilf}}
\DoxyCodeLine{02112\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_simd\_ceilf(\textcolor{keywordtype}{float}\ x)}
\DoxyCodeLine{02113\ \ \ \{}
\DoxyCodeLine{02114\ \ \ \ \ \textcolor{keywordflow}{return}\ wasm\_f32x4\_extract\_lane(\ wasm\_f32x4\_ceil(\ wasm\_f32x4\_splat(x)\ ),\ 0);}
\DoxyCodeLine{02115\ \ \ \}}
\DoxyCodeLine{02116\ }
\DoxyCodeLine{02117\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_SIMD}}
\DoxyCodeLine{02118\ }
\DoxyCodeLine{02119\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ SSE2/NEON/WASM}}
\DoxyCodeLine{02120\ }
\DoxyCodeLine{02121\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ NO\ SIMD}}
\DoxyCodeLine{02122\ }
\DoxyCodeLine{02123\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{02124\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\ stbir\_\_simdf8}}
\DoxyCodeLine{02125\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdiX\ stbir\_\_simdi8}}
\DoxyCodeLine{02126\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_load\ stbir\_\_simdf8\_load}}
\DoxyCodeLine{02127\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdiX\_load\ stbir\_\_simdi8\_load}}
\DoxyCodeLine{02128\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_mult\ stbir\_\_simdf8\_mult}}
\DoxyCodeLine{02129\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_add\_mem\ stbir\_\_simdf8\_add\_mem}}
\DoxyCodeLine{02130\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_madd\_mem\ stbir\_\_simdf8\_madd\_mem}}
\DoxyCodeLine{02131\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_store\ stbir\_\_simdf8\_store}}
\DoxyCodeLine{02132\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdiX\_store\ stbir\_\_simdi8\_store}}
\DoxyCodeLine{02133\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_frepX\ \ stbir\_\_simdf8\_frep8}}
\DoxyCodeLine{02134\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_madd\ stbir\_\_simdf8\_madd}}
\DoxyCodeLine{02135\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_min\ stbir\_\_simdf8\_min}}
\DoxyCodeLine{02136\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_max\ stbir\_\_simdf8\_max}}
\DoxyCodeLine{02137\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_aaa1\ stbir\_\_simdf8\_aaa1}}
\DoxyCodeLine{02138\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_1aaa\ stbir\_\_simdf8\_1aaa}}
\DoxyCodeLine{02139\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_a1a1\ stbir\_\_simdf8\_a1a1}}
\DoxyCodeLine{02140\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_1a1a\ stbir\_\_simdf8\_1a1a}}
\DoxyCodeLine{02141\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_convert\_float\_to\_i32\ stbir\_\_simdf8\_convert\_float\_to\_i32}}
\DoxyCodeLine{02142\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_pack\_to\_words\ stbir\_\_simdf8\_pack\_to\_16words}}
\DoxyCodeLine{02143\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_zero\ stbir\_\_simdf8\_zero}}
\DoxyCodeLine{02144\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_onesX\ STBIR\_ones8}}
\DoxyCodeLine{02145\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_max\_uint8\_as\_floatX\ STBIR\_max\_uint8\_as\_float8}}
\DoxyCodeLine{02146\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_max\_uint16\_as\_floatX\ STBIR\_max\_uint16\_as\_float8}}
\DoxyCodeLine{02147\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_simd\_point5X\ STBIR\_simd\_point58}}
\DoxyCodeLine{02148\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_float\_count\ 8}}
\DoxyCodeLine{02149\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_0123to1230\ stbir\_\_simdf8\_0123to12301230}}
\DoxyCodeLine{02150\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_0123to2103\ stbir\_\_simdf8\_0123to21032103}}
\DoxyCodeLine{02151\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf8\ STBIR\_max\_uint16\_as\_float\_inverted8\ =\ \{\ stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted,stbir\_\_max\_uint16\_as\_float\_inverted\ \};}
\DoxyCodeLine{02152\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf8\ STBIR\_max\_uint8\_as\_float\_inverted8\ =\ \{\ stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted,stbir\_\_max\_uint8\_as\_float\_inverted\ \};}
\DoxyCodeLine{02153\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf8\ STBIR\_ones8\ =\ \{\ 1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0\ \};}
\DoxyCodeLine{02154\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf8\ STBIR\_simd\_point58\ =\ \{\ 0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5\ \};}
\DoxyCodeLine{02155\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf8\ STBIR\_max\_uint8\_as\_float8\ =\ \{\ stbir\_\_max\_uint8\_as\_float,stbir\_\_max\_uint8\_as\_float,stbir\_\_max\_uint8\_as\_float,stbir\_\_max\_uint8\_as\_float,\ stbir\_\_max\_uint8\_as\_float,stbir\_\_max\_uint8\_as\_float,stbir\_\_max\_uint8\_as\_float,stbir\_\_max\_uint8\_as\_float\ \};}
\DoxyCodeLine{02156\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_simdf8\ STBIR\_max\_uint16\_as\_float8\ =\ \{\ stbir\_\_max\_uint16\_as\_float,stbir\_\_max\_uint16\_as\_float,stbir\_\_max\_uint16\_as\_float,stbir\_\_max\_uint16\_as\_float,\ stbir\_\_max\_uint16\_as\_float,stbir\_\_max\_uint16\_as\_float,stbir\_\_max\_uint16\_as\_float,stbir\_\_max\_uint16\_as\_float\ \};}
\DoxyCodeLine{02157\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02158\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\ stbir\_\_simdf}}
\DoxyCodeLine{02159\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdiX\ stbir\_\_simdi}}
\DoxyCodeLine{02160\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_load\ stbir\_\_simdf\_load}}
\DoxyCodeLine{02161\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdiX\_load\ stbir\_\_simdi\_load}}
\DoxyCodeLine{02162\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_mult\ stbir\_\_simdf\_mult}}
\DoxyCodeLine{02163\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_add\_mem\ stbir\_\_simdf\_add\_mem}}
\DoxyCodeLine{02164\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_madd\_mem\ stbir\_\_simdf\_madd\_mem}}
\DoxyCodeLine{02165\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_store\ stbir\_\_simdf\_store}}
\DoxyCodeLine{02166\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdiX\_store\ stbir\_\_simdi\_store}}
\DoxyCodeLine{02167\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdf\_frepX\ \ stbir\_\_simdf\_frep4}}
\DoxyCodeLine{02168\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_madd\ stbir\_\_simdf\_madd}}
\DoxyCodeLine{02169\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_min\ stbir\_\_simdf\_min}}
\DoxyCodeLine{02170\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_max\ stbir\_\_simdf\_max}}
\DoxyCodeLine{02171\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_aaa1\ stbir\_\_simdf\_aaa1}}
\DoxyCodeLine{02172\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_1aaa\ stbir\_\_simdf\_1aaa}}
\DoxyCodeLine{02173\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_a1a1\ stbir\_\_simdf\_a1a1}}
\DoxyCodeLine{02174\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_1a1a\ stbir\_\_simdf\_1a1a}}
\DoxyCodeLine{02175\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_convert\_float\_to\_i32\ stbir\_\_simdf\_convert\_float\_to\_i32}}
\DoxyCodeLine{02176\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_pack\_to\_words\ stbir\_\_simdf\_pack\_to\_8words}}
\DoxyCodeLine{02177\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_zero\ stbir\_\_simdf\_zero}}
\DoxyCodeLine{02178\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_onesX\ STBIR\_\_CONSTF(STBIR\_ones)}}
\DoxyCodeLine{02179\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_simd\_point5X\ STBIR\_\_CONSTF(STBIR\_simd\_point5)}}
\DoxyCodeLine{02180\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_max\_uint8\_as\_floatX\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float)}}
\DoxyCodeLine{02181\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_max\_uint16\_as\_floatX\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float)}}
\DoxyCodeLine{02182\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_float\_count\ 4}}
\DoxyCodeLine{02183\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ val\ )\ (\ val\ )}}
\DoxyCodeLine{02184\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_0123to1230\ stbir\_\_simdf\_0123to1230}}
\DoxyCodeLine{02185\ \textcolor{preprocessor}{\ \ \#define\ stbir\_\_simdfX\_0123to2103\ stbir\_\_simdf\_0123to2103}}
\DoxyCodeLine{02186\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02187\ }
\DoxyCodeLine{02188\ }
\DoxyCodeLine{02189\ \textcolor{preprocessor}{\#if\ defined(STBIR\_NEON)\ \&\&\ !defined(\_M\_ARM)\ \&\&\ !defined(\_\_arm\_\_)}}
\DoxyCodeLine{02190\ }
\DoxyCodeLine{02191\ \textcolor{preprocessor}{\ \ \#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{02192\ \ \ \textcolor{keyword}{typedef}\ \_\_int16\ stbir\_\_FP16;}
\DoxyCodeLine{02193\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{02194\ \ \ \textcolor{keyword}{typedef}\ float16\_t\ stbir\_\_FP16;}
\DoxyCodeLine{02195\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{02196\ }
\DoxyCodeLine{02197\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ no\ NEON,\ or\ 32-\/bit\ ARM\ for\ MSVC}}
\DoxyCodeLine{02198\ }
\DoxyCodeLine{02199\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{union\ }stbir\_\_FP16}
\DoxyCodeLine{02200\ \ \ \{}
\DoxyCodeLine{02201\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ u;}
\DoxyCodeLine{02202\ \ \ \}\ stbir\_\_FP16;}
\DoxyCodeLine{02203\ }
\DoxyCodeLine{02204\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02205\ }
\DoxyCodeLine{02206\ \textcolor{preprocessor}{\#if\ (!defined(STBIR\_NEON)\ \&\&\ !defined(STBIR\_FP16C))\ ||\ (defined(STBIR\_NEON)\ \&\&\ defined(\_M\_ARM))\ ||\ (defined(STBIR\_NEON)\ \&\&\ defined(\_\_arm\_\_))}}
\DoxyCodeLine{02207\ }
\DoxyCodeLine{02208\ \ \ \textcolor{comment}{//\ Fabian's\ half\ float\ routines,\ see:\ https://gist.github.com/rygorous/2156668}}
\DoxyCodeLine{02209\ }
\DoxyCodeLine{02210\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_\_half\_to\_float(\ stbir\_\_FP16\ h\ )}
\DoxyCodeLine{02211\ \ \ \{}
\DoxyCodeLine{02212\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_FP32\ magic\ =\ \{\ (254\ -\/\ 15)\ <<\ 23\ \};}
\DoxyCodeLine{02213\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_FP32\ was\_infnan\ =\ \{\ (127\ +\ 16)\ <<\ 23\ \};}
\DoxyCodeLine{02214\ \ \ \ \ stbir\_\_FP32\ o;}
\DoxyCodeLine{02215\ }
\DoxyCodeLine{02216\ \ \ \ \ o.u\ =\ (h.u\ \&\ 0x7fff)\ <<\ 13;\ \ \ \ \ \textcolor{comment}{//\ exponent/mantissa\ bits}}
\DoxyCodeLine{02217\ \ \ \ \ o.f\ *=\ magic.f;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ exponent\ adjust}}
\DoxyCodeLine{02218\ \ \ \ \ \textcolor{keywordflow}{if}\ (o.f\ >=\ was\_infnan.f)\ \ \ \ \ \ \ \ \textcolor{comment}{//\ make\ sure\ Inf/NaN\ survive}}
\DoxyCodeLine{02219\ \ \ \ \ \ \ o.u\ |=\ 255\ <<\ 23;}
\DoxyCodeLine{02220\ \ \ \ \ o.u\ |=\ (h.u\ \&\ 0x8000)\ <<\ 16;\ \ \ \ \textcolor{comment}{//\ sign\ bit}}
\DoxyCodeLine{02221\ \ \ \ \ \textcolor{keywordflow}{return}\ o.f;}
\DoxyCodeLine{02222\ \ \ \}}
\DoxyCodeLine{02223\ }
\DoxyCodeLine{02224\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_\_FP16\ stbir\_\_float\_to\_half(\textcolor{keywordtype}{float}\ val)}
\DoxyCodeLine{02225\ \ \ \{}
\DoxyCodeLine{02226\ \ \ \ \ stbir\_\_FP32\ f32infty\ =\ \{\ 255\ <<\ 23\ \};}
\DoxyCodeLine{02227\ \ \ \ \ stbir\_\_FP32\ f16max\ \ \ =\ \{\ (127\ +\ 16)\ <<\ 23\ \};}
\DoxyCodeLine{02228\ \ \ \ \ stbir\_\_FP32\ denorm\_magic\ =\ \{\ ((127\ -\/\ 15)\ +\ (23\ -\/\ 10)\ +\ 1)\ <<\ 23\ \};}
\DoxyCodeLine{02229\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sign\_mask\ =\ 0x80000000u;}
\DoxyCodeLine{02230\ \ \ \ \ stbir\_\_FP16\ o\ =\ \{\ 0\ \};}
\DoxyCodeLine{02231\ \ \ \ \ stbir\_\_FP32\ f;}
\DoxyCodeLine{02232\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sign;}
\DoxyCodeLine{02233\ }
\DoxyCodeLine{02234\ \ \ \ \ f.f\ =\ val;}
\DoxyCodeLine{02235\ \ \ \ \ sign\ =\ f.u\ \&\ sign\_mask;}
\DoxyCodeLine{02236\ \ \ \ \ f.u\ \string^=\ sign;}
\DoxyCodeLine{02237\ }
\DoxyCodeLine{02238\ \ \ \ \ \textcolor{keywordflow}{if}\ (f.u\ >=\ f16max.u)\ \textcolor{comment}{//\ result\ is\ Inf\ or\ NaN\ (all\ exponent\ bits\ set)}}
\DoxyCodeLine{02239\ \ \ \ \ \ \ o.u\ =\ (f.u\ >\ f32infty.u)\ ?\ 0x7e00\ :\ 0x7c00;\ \textcolor{comment}{//\ NaN-\/>qNaN\ and\ Inf-\/>Inf}}
\DoxyCodeLine{02240\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ (De)normalized\ number\ or\ zero}}
\DoxyCodeLine{02241\ \ \ \ \ \{}
\DoxyCodeLine{02242\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (f.u\ <\ (113\ <<\ 23))\ \textcolor{comment}{//\ resulting\ FP16\ is\ subnormal\ or\ zero}}
\DoxyCodeLine{02243\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ use\ a\ magic\ value\ to\ align\ our\ 10\ mantissa\ bits\ at\ the\ bottom\ of}}
\DoxyCodeLine{02245\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ float.\ as\ long\ as\ FP\ addition\ is\ round-\/to-\/nearest-\/even\ this}}
\DoxyCodeLine{02246\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ works.}}
\DoxyCodeLine{02247\ \ \ \ \ \ \ \ \ f.f\ +=\ denorm\_magic.f;}
\DoxyCodeLine{02248\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ one\ integer\ subtract\ of\ the\ bias\ later,\ we\ have\ our\ final\ float!}}
\DoxyCodeLine{02249\ \ \ \ \ \ \ \ \ o.u\ =\ (\textcolor{keywordtype}{unsigned}\ short)\ (\ f.u\ -\/\ denorm\_magic.u\ );}
\DoxyCodeLine{02250\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02251\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02252\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02253\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mant\_odd\ =\ (f.u\ >>\ 13)\ \&\ 1;\ \textcolor{comment}{//\ resulting\ mantissa\ is\ odd}}
\DoxyCodeLine{02254\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ update\ exponent,\ rounding\ bias\ part\ 1}}
\DoxyCodeLine{02255\ \ \ \ \ \ \ \ \ f.u\ =\ f.u\ +\ ((15u\ -\/\ 127)\ <<\ 23)\ +\ 0xfff;}
\DoxyCodeLine{02256\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ rounding\ bias\ part\ 2}}
\DoxyCodeLine{02257\ \ \ \ \ \ \ \ \ f.u\ +=\ mant\_odd;}
\DoxyCodeLine{02258\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ take\ the\ bits!}}
\DoxyCodeLine{02259\ \ \ \ \ \ \ \ \ o.u\ =\ (\textcolor{keywordtype}{unsigned}\ short)\ (\ f.u\ >>\ 13\ );}
\DoxyCodeLine{02260\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02261\ \ \ \ \ \}}
\DoxyCodeLine{02262\ }
\DoxyCodeLine{02263\ \ \ \ \ o.u\ |=\ sign\ >>\ 16;}
\DoxyCodeLine{02264\ \ \ \ \ \textcolor{keywordflow}{return}\ o;}
\DoxyCodeLine{02265\ \ \ \}}
\DoxyCodeLine{02266\ }
\DoxyCodeLine{02267\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02268\ }
\DoxyCodeLine{02269\ }
\DoxyCodeLine{02270\ \textcolor{preprocessor}{\#if\ defined(STBIR\_FP16C)}}
\DoxyCodeLine{02271\ }
\DoxyCodeLine{02272\ \textcolor{preprocessor}{\ \ \#include\ <immintrin.h>}}
\DoxyCodeLine{02273\ }
\DoxyCodeLine{02274\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_half\_to\_float\_SIMD(\textcolor{keywordtype}{float}\ *\ output,\ stbir\_\_FP16\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02275\ \ \ \{}
\DoxyCodeLine{02276\ \ \ \ \ \_mm256\_storeu\_ps(\ (\textcolor{keywordtype}{float}*)output,\ \_mm256\_cvtph\_ps(\ \_mm\_loadu\_si128(\ (\_\_m128i\ \textcolor{keyword}{const}*\ )input\ )\ )\ );}
\DoxyCodeLine{02277\ \ \ \}}
\DoxyCodeLine{02278\ }
\DoxyCodeLine{02279\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_float\_to\_half\_SIMD(stbir\_\_FP16\ *\ output,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02280\ \ \ \{}
\DoxyCodeLine{02281\ \ \ \ \ \_mm\_storeu\_si128(\ (\_\_m128i*)output,\ \_mm256\_cvtps\_ph(\ \_mm256\_loadu\_ps(\ input\ ),\ 0\ )\ );}
\DoxyCodeLine{02282\ \ \ \}}
\DoxyCodeLine{02283\ }
\DoxyCodeLine{02284\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_\_half\_to\_float(\ stbir\_\_FP16\ h\ )}
\DoxyCodeLine{02285\ \ \ \{}
\DoxyCodeLine{02286\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_cvtss\_f32(\ \_mm\_cvtph\_ps(\ \_mm\_cvtsi32\_si128(\ (\textcolor{keywordtype}{int})h.u\ )\ )\ );}
\DoxyCodeLine{02287\ \ \ \}}
\DoxyCodeLine{02288\ }
\DoxyCodeLine{02289\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_\_FP16\ stbir\_\_float\_to\_half(\ \textcolor{keywordtype}{float}\ f\ )}
\DoxyCodeLine{02290\ \ \ \{}
\DoxyCodeLine{02291\ \ \ \ \ stbir\_\_FP16\ h;}
\DoxyCodeLine{02292\ \ \ \ \ h.u\ =\ (\textcolor{keywordtype}{unsigned}\ short)\ \_mm\_cvtsi128\_si32(\ \_mm\_cvtps\_ph(\ \_mm\_set\_ss(\ f\ ),\ 0\ )\ );}
\DoxyCodeLine{02293\ \ \ \ \ \textcolor{keywordflow}{return}\ h;}
\DoxyCodeLine{02294\ \ \ \}}
\DoxyCodeLine{02295\ }
\DoxyCodeLine{02296\ \textcolor{preprocessor}{\#elif\ defined(STBIR\_SSE2)}}
\DoxyCodeLine{02297\ }
\DoxyCodeLine{02298\ \ \ \textcolor{comment}{//\ Fabian's\ half\ float\ routines,\ see:\ https://gist.github.com/rygorous/2156668}}
\DoxyCodeLine{02299\ \ \ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_half\_to\_float\_SIMD(\textcolor{keywordtype}{float}\ *\ output,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02300\ \ \ \{}
\DoxyCodeLine{02301\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(mask\_nosign,\ \ \ \ \ \ 0x7fff);}
\DoxyCodeLine{02302\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(smallest\_normal,\ \ 0x0400);}
\DoxyCodeLine{02303\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(infinity,\ \ \ \ \ \ \ \ \ 0x7c00);}
\DoxyCodeLine{02304\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(expadjust\_normal,\ (127\ -\/\ 15)\ <<\ 23);}
\DoxyCodeLine{02305\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(magic\_denorm,\ \ \ \ \ 113\ <<\ 23);}
\DoxyCodeLine{02306\ }
\DoxyCodeLine{02307\ \ \ \ \ \_\_m128i\ i\ =\ \_mm\_loadu\_si128\ (\ (\_\_m128i\ \textcolor{keyword}{const}*)(input)\ );}
\DoxyCodeLine{02308\ \ \ \ \ \_\_m128i\ h\ =\ \_mm\_unpacklo\_epi16\ (\ i,\ \_mm\_setzero\_si128()\ );}
\DoxyCodeLine{02309\ \ \ \ \ \_\_m128i\ mnosign\ \ \ \ \ =\ STBIR\_\_CONSTI(mask\_nosign);}
\DoxyCodeLine{02310\ \ \ \ \ \_\_m128i\ eadjust\ \ \ \ \ =\ STBIR\_\_CONSTI(expadjust\_normal);}
\DoxyCodeLine{02311\ \ \ \ \ \_\_m128i\ smallest\ \ \ \ =\ STBIR\_\_CONSTI(smallest\_normal);}
\DoxyCodeLine{02312\ \ \ \ \ \_\_m128i\ infty\ \ \ \ \ \ \ =\ STBIR\_\_CONSTI(infinity);}
\DoxyCodeLine{02313\ \ \ \ \ \_\_m128i\ expmant\ \ \ \ \ =\ \_mm\_and\_si128(mnosign,\ h);}
\DoxyCodeLine{02314\ \ \ \ \ \_\_m128i\ justsign\ \ \ \ =\ \_mm\_xor\_si128(h,\ expmant);}
\DoxyCodeLine{02315\ \ \ \ \ \_\_m128i\ b\_notinfnan\ =\ \_mm\_cmpgt\_epi32(infty,\ expmant);}
\DoxyCodeLine{02316\ \ \ \ \ \_\_m128i\ b\_isdenorm\ \ =\ \_mm\_cmpgt\_epi32(smallest,\ expmant);}
\DoxyCodeLine{02317\ \ \ \ \ \_\_m128i\ shifted\ \ \ \ \ =\ \_mm\_slli\_epi32(expmant,\ 13);}
\DoxyCodeLine{02318\ \ \ \ \ \_\_m128i\ adj\_infnan\ \ =\ \_mm\_andnot\_si128(b\_notinfnan,\ eadjust);}
\DoxyCodeLine{02319\ \ \ \ \ \_\_m128i\ adjusted\ \ \ \ =\ \_mm\_add\_epi32(eadjust,\ shifted);}
\DoxyCodeLine{02320\ \ \ \ \ \_\_m128i\ den1\ \ \ \ \ \ \ \ =\ \_mm\_add\_epi32(shifted,\ STBIR\_\_CONSTI(magic\_denorm));}
\DoxyCodeLine{02321\ \ \ \ \ \_\_m128i\ adjusted2\ \ \ =\ \_mm\_add\_epi32(adjusted,\ adj\_infnan);}
\DoxyCodeLine{02322\ \ \ \ \ \_\_m128\ \ den2\ \ \ \ \ \ \ \ =\ \_mm\_sub\_ps(\_mm\_castsi128\_ps(den1),\ *(\textcolor{keyword}{const}\ \_\_m128\ *)\&magic\_denorm);}
\DoxyCodeLine{02323\ \ \ \ \ \_\_m128\ \ adjusted3\ \ \ =\ \_mm\_and\_ps(den2,\ \_mm\_castsi128\_ps(b\_isdenorm));}
\DoxyCodeLine{02324\ \ \ \ \ \_\_m128\ \ adjusted4\ \ \ =\ \_mm\_andnot\_ps(\_mm\_castsi128\_ps(b\_isdenorm),\ \_mm\_castsi128\_ps(adjusted2));}
\DoxyCodeLine{02325\ \ \ \ \ \_\_m128\ \ adjusted5\ \ \ =\ \_mm\_or\_ps(adjusted3,\ adjusted4);}
\DoxyCodeLine{02326\ \ \ \ \ \_\_m128i\ sign\ \ \ \ \ \ \ \ =\ \_mm\_slli\_epi32(justsign,\ 16);}
\DoxyCodeLine{02327\ \ \ \ \ \_\_m128\ \ \textcolor{keyword}{final}\ \ \ \ \ \ \ =\ \_mm\_or\_ps(adjusted5,\ \_mm\_castsi128\_ps(sign));}
\DoxyCodeLine{02328\ \ \ \ \ stbir\_\_simdf\_store(\ output\ +\ 0,\ \ \textcolor{keyword}{final}\ );}
\DoxyCodeLine{02329\ }
\DoxyCodeLine{02330\ \ \ \ \ h\ =\ \_mm\_unpackhi\_epi16\ (\ i,\ \_mm\_setzero\_si128()\ );}
\DoxyCodeLine{02331\ \ \ \ \ expmant\ \ \ \ \ =\ \_mm\_and\_si128(mnosign,\ h);}
\DoxyCodeLine{02332\ \ \ \ \ justsign\ \ \ \ =\ \_mm\_xor\_si128(h,\ expmant);}
\DoxyCodeLine{02333\ \ \ \ \ b\_notinfnan\ =\ \_mm\_cmpgt\_epi32(infty,\ expmant);}
\DoxyCodeLine{02334\ \ \ \ \ b\_isdenorm\ \ =\ \_mm\_cmpgt\_epi32(smallest,\ expmant);}
\DoxyCodeLine{02335\ \ \ \ \ shifted\ \ \ \ \ =\ \_mm\_slli\_epi32(expmant,\ 13);}
\DoxyCodeLine{02336\ \ \ \ \ adj\_infnan\ \ =\ \_mm\_andnot\_si128(b\_notinfnan,\ eadjust);}
\DoxyCodeLine{02337\ \ \ \ \ adjusted\ \ \ \ =\ \_mm\_add\_epi32(eadjust,\ shifted);}
\DoxyCodeLine{02338\ \ \ \ \ den1\ \ \ \ \ \ \ \ =\ \_mm\_add\_epi32(shifted,\ STBIR\_\_CONSTI(magic\_denorm));}
\DoxyCodeLine{02339\ \ \ \ \ adjusted2\ \ \ =\ \_mm\_add\_epi32(adjusted,\ adj\_infnan);}
\DoxyCodeLine{02340\ \ \ \ \ den2\ \ \ \ \ \ \ \ =\ \_mm\_sub\_ps(\_mm\_castsi128\_ps(den1),\ *(\textcolor{keyword}{const}\ \_\_m128\ *)\&magic\_denorm);}
\DoxyCodeLine{02341\ \ \ \ \ adjusted3\ \ \ =\ \_mm\_and\_ps(den2,\ \_mm\_castsi128\_ps(b\_isdenorm));}
\DoxyCodeLine{02342\ \ \ \ \ adjusted4\ \ \ =\ \_mm\_andnot\_ps(\_mm\_castsi128\_ps(b\_isdenorm),\ \_mm\_castsi128\_ps(adjusted2));}
\DoxyCodeLine{02343\ \ \ \ \ adjusted5\ \ \ =\ \_mm\_or\_ps(adjusted3,\ adjusted4);}
\DoxyCodeLine{02344\ \ \ \ \ sign\ \ \ \ \ \ \ \ =\ \_mm\_slli\_epi32(justsign,\ 16);}
\DoxyCodeLine{02345\ \ \ \ \ \textcolor{keyword}{final}\ \ \ \ \ \ \ =\ \_mm\_or\_ps(adjusted5,\ \_mm\_castsi128\_ps(sign));}
\DoxyCodeLine{02346\ \ \ \ \ stbir\_\_simdf\_store(\ output\ +\ 4,\ \ \textcolor{keyword}{final}\ );}
\DoxyCodeLine{02347\ }
\DoxyCodeLine{02348\ \ \ \ \ \textcolor{comment}{//\ \string~38\ SSE2\ ops\ for\ 8\ values}}
\DoxyCodeLine{02349\ \ \ \}}
\DoxyCodeLine{02350\ }
\DoxyCodeLine{02351\ \ \ \textcolor{comment}{//\ Fabian's\ round-\/to-\/nearest-\/even\ float\ to\ half}}
\DoxyCodeLine{02352\ \ \ \textcolor{comment}{//\ \string~48\ SSE2\ ops\ for\ 8\ output}}
\DoxyCodeLine{02353\ \ \ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_float\_to\_half\_SIMD(\textcolor{keywordtype}{void}\ *\ output,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02354\ \ \ \{}
\DoxyCodeLine{02355\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(mask\_sign,\ \ \ \ \ \ 0x80000000u);}
\DoxyCodeLine{02356\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(c\_f16max,\ \ \ \ \ \ \ (127\ +\ 16)\ <<\ 23);\ \textcolor{comment}{//\ all\ FP32\ values\ >=this\ round\ to\ +inf}}
\DoxyCodeLine{02357\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(c\_nanbit,\ \ \ \ \ \ \ \ 0x200);}
\DoxyCodeLine{02358\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(c\_infty\_as\_fp16,\ 0x7c00);}
\DoxyCodeLine{02359\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(c\_min\_normal,\ \ \ \ (127\ -\/\ 14)\ <<\ 23);\ \textcolor{comment}{//\ smallest\ FP32\ that\ yields\ a\ normalized\ FP16}}
\DoxyCodeLine{02360\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(c\_subnorm\_magic,\ ((127\ -\/\ 15)\ +\ (23\ -\/\ 10)\ +\ 1)\ <<\ 23);}
\DoxyCodeLine{02361\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(c\_normal\_bias,\ \ \ \ 0xfff\ -\/\ ((127\ -\/\ 15)\ <<\ 23));\ \textcolor{comment}{//\ adjust\ exponent\ and\ add\ mantissa\ rounding}}
\DoxyCodeLine{02362\ }
\DoxyCodeLine{02363\ \ \ \ \ \_\_m128\ \ f\ \ \ \ \ \ \ \ \ \ \ =\ \ \_mm\_loadu\_ps(input);}
\DoxyCodeLine{02364\ \ \ \ \ \_\_m128\ \ msign\ \ \ \ \ \ \ =\ \_mm\_castsi128\_ps(STBIR\_\_CONSTI(mask\_sign));}
\DoxyCodeLine{02365\ \ \ \ \ \_\_m128\ \ justsign\ \ \ \ =\ \_mm\_and\_ps(msign,\ f);}
\DoxyCodeLine{02366\ \ \ \ \ \_\_m128\ \ absf\ \ \ \ \ \ \ \ =\ \_mm\_xor\_ps(f,\ justsign);}
\DoxyCodeLine{02367\ \ \ \ \ \_\_m128i\ absf\_int\ \ \ \ =\ \_mm\_castps\_si128(absf);\ \textcolor{comment}{//\ the\ cast\ is\ "{}free"{}\ (extra\ bypass\ latency,\ but\ no\ thruput\ hit)}}
\DoxyCodeLine{02368\ \ \ \ \ \_\_m128i\ f16max\ \ \ \ \ \ =\ STBIR\_\_CONSTI(c\_f16max);}
\DoxyCodeLine{02369\ \ \ \ \ \_\_m128\ \ b\_isnan\ \ \ \ \ =\ \_mm\_cmpunord\_ps(absf,\ absf);\ \textcolor{comment}{//\ is\ this\ a\ NaN?}}
\DoxyCodeLine{02370\ \ \ \ \ \_\_m128i\ b\_isregular\ =\ \_mm\_cmpgt\_epi32(f16max,\ absf\_int);\ \textcolor{comment}{//\ (sub)normalized\ or\ special?}}
\DoxyCodeLine{02371\ \ \ \ \ \_\_m128i\ nanbit\ \ \ \ \ \ =\ \_mm\_and\_si128(\_mm\_castps\_si128(b\_isnan),\ STBIR\_\_CONSTI(c\_nanbit));}
\DoxyCodeLine{02372\ \ \ \ \ \_\_m128i\ inf\_or\_nan\ \ =\ \_mm\_or\_si128(nanbit,\ STBIR\_\_CONSTI(c\_infty\_as\_fp16));\ \textcolor{comment}{//\ output\ for\ specials}}
\DoxyCodeLine{02373\ }
\DoxyCodeLine{02374\ \ \ \ \ \_\_m128i\ min\_normal\ \ =\ STBIR\_\_CONSTI(c\_min\_normal);}
\DoxyCodeLine{02375\ \ \ \ \ \_\_m128i\ b\_issub\ \ \ \ \ =\ \_mm\_cmpgt\_epi32(min\_normal,\ absf\_int);}
\DoxyCodeLine{02376\ }
\DoxyCodeLine{02377\ \ \ \ \ \textcolor{comment}{//\ "{}result\ is\ subnormal"{}\ path}}
\DoxyCodeLine{02378\ \ \ \ \ \_\_m128\ \ subnorm1\ \ \ \ =\ \_mm\_add\_ps(absf,\ \_mm\_castsi128\_ps(STBIR\_\_CONSTI(c\_subnorm\_magic)));\ \textcolor{comment}{//\ magic\ value\ to\ round\ output\ mantissa}}
\DoxyCodeLine{02379\ \ \ \ \ \_\_m128i\ subnorm2\ \ \ \ =\ \_mm\_sub\_epi32(\_mm\_castps\_si128(subnorm1),\ STBIR\_\_CONSTI(c\_subnorm\_magic));\ \textcolor{comment}{//\ subtract\ out\ bias}}
\DoxyCodeLine{02380\ }
\DoxyCodeLine{02381\ \ \ \ \ \textcolor{comment}{//\ "{}result\ is\ normal"{}\ path}}
\DoxyCodeLine{02382\ \ \ \ \ \_\_m128i\ mantoddbit\ \ =\ \_mm\_slli\_epi32(absf\_int,\ 31\ -\/\ 13);\ \textcolor{comment}{//\ shift\ bit\ 13\ (mantissa\ LSB)\ to\ sign}}
\DoxyCodeLine{02383\ \ \ \ \ \_\_m128i\ mantodd\ \ \ \ \ =\ \_mm\_srai\_epi32(mantoddbit,\ 31);\ \textcolor{comment}{//\ -\/1\ if\ FP16\ mantissa\ odd,\ else\ 0}}
\DoxyCodeLine{02384\ }
\DoxyCodeLine{02385\ \ \ \ \ \_\_m128i\ round1\ \ \ \ \ \ =\ \_mm\_add\_epi32(absf\_int,\ STBIR\_\_CONSTI(c\_normal\_bias));}
\DoxyCodeLine{02386\ \ \ \ \ \_\_m128i\ round2\ \ \ \ \ \ =\ \_mm\_sub\_epi32(round1,\ mantodd);\ \textcolor{comment}{//\ if\ mantissa\ LSB\ odd,\ bias\ towards\ rounding\ up\ (RTNE)}}
\DoxyCodeLine{02387\ \ \ \ \ \_\_m128i\ normal\ \ \ \ \ \ =\ \_mm\_srli\_epi32(round2,\ 13);\ \textcolor{comment}{//\ rounded\ result}}
\DoxyCodeLine{02388\ }
\DoxyCodeLine{02389\ \ \ \ \ \textcolor{comment}{//\ combine\ the\ two\ non-\/specials}}
\DoxyCodeLine{02390\ \ \ \ \ \_\_m128i\ nonspecial\ \ =\ \_mm\_or\_si128(\_mm\_and\_si128(subnorm2,\ b\_issub),\ \_mm\_andnot\_si128(b\_issub,\ normal));}
\DoxyCodeLine{02391\ }
\DoxyCodeLine{02392\ \ \ \ \ \textcolor{comment}{//\ merge\ in\ specials\ as\ well}}
\DoxyCodeLine{02393\ \ \ \ \ \_\_m128i\ joined\ \ \ \ \ \ =\ \_mm\_or\_si128(\_mm\_and\_si128(nonspecial,\ b\_isregular),\ \_mm\_andnot\_si128(b\_isregular,\ inf\_or\_nan));}
\DoxyCodeLine{02394\ }
\DoxyCodeLine{02395\ \ \ \ \ \_\_m128i\ sign\_shift\ \ =\ \_mm\_srai\_epi32(\_mm\_castps\_si128(justsign),\ 16);}
\DoxyCodeLine{02396\ \ \ \ \ \_\_m128i\ final2,\ \textcolor{keyword}{final}=\ \_mm\_or\_si128(joined,\ sign\_shift);}
\DoxyCodeLine{02397\ }
\DoxyCodeLine{02398\ \ \ \ \ f\ \ \ \ \ \ \ \ \ \ \ =\ \ \_mm\_loadu\_ps(input+4);}
\DoxyCodeLine{02399\ \ \ \ \ justsign\ \ \ \ =\ \_mm\_and\_ps(msign,\ f);}
\DoxyCodeLine{02400\ \ \ \ \ absf\ \ \ \ \ \ \ \ =\ \_mm\_xor\_ps(f,\ justsign);}
\DoxyCodeLine{02401\ \ \ \ \ absf\_int\ \ \ \ =\ \_mm\_castps\_si128(absf);\ \textcolor{comment}{//\ the\ cast\ is\ "{}free"{}\ (extra\ bypass\ latency,\ but\ no\ thruput\ hit)}}
\DoxyCodeLine{02402\ \ \ \ \ b\_isnan\ \ \ \ \ =\ \_mm\_cmpunord\_ps(absf,\ absf);\ \textcolor{comment}{//\ is\ this\ a\ NaN?}}
\DoxyCodeLine{02403\ \ \ \ \ b\_isregular\ =\ \_mm\_cmpgt\_epi32(f16max,\ absf\_int);\ \textcolor{comment}{//\ (sub)normalized\ or\ special?}}
\DoxyCodeLine{02404\ \ \ \ \ nanbit\ \ \ \ \ \ =\ \_mm\_and\_si128(\_mm\_castps\_si128(b\_isnan),\ c\_nanbit);}
\DoxyCodeLine{02405\ \ \ \ \ inf\_or\_nan\ \ =\ \_mm\_or\_si128(nanbit,\ STBIR\_\_CONSTI(c\_infty\_as\_fp16));\ \textcolor{comment}{//\ output\ for\ specials}}
\DoxyCodeLine{02406\ }
\DoxyCodeLine{02407\ \ \ \ \ b\_issub\ \ \ \ \ =\ \_mm\_cmpgt\_epi32(min\_normal,\ absf\_int);}
\DoxyCodeLine{02408\ }
\DoxyCodeLine{02409\ \ \ \ \ \textcolor{comment}{//\ "{}result\ is\ subnormal"{}\ path}}
\DoxyCodeLine{02410\ \ \ \ \ subnorm1\ \ \ \ =\ \_mm\_add\_ps(absf,\ \_mm\_castsi128\_ps(STBIR\_\_CONSTI(c\_subnorm\_magic)));\ \textcolor{comment}{//\ magic\ value\ to\ round\ output\ mantissa}}
\DoxyCodeLine{02411\ \ \ \ \ subnorm2\ \ \ \ =\ \_mm\_sub\_epi32(\_mm\_castps\_si128(subnorm1),\ STBIR\_\_CONSTI(c\_subnorm\_magic));\ \textcolor{comment}{//\ subtract\ out\ bias}}
\DoxyCodeLine{02412\ }
\DoxyCodeLine{02413\ \ \ \ \ \textcolor{comment}{//\ "{}result\ is\ normal"{}\ path}}
\DoxyCodeLine{02414\ \ \ \ \ mantoddbit\ \ =\ \_mm\_slli\_epi32(absf\_int,\ 31\ -\/\ 13);\ \textcolor{comment}{//\ shift\ bit\ 13\ (mantissa\ LSB)\ to\ sign}}
\DoxyCodeLine{02415\ \ \ \ \ mantodd\ \ \ \ \ =\ \_mm\_srai\_epi32(mantoddbit,\ 31);\ \textcolor{comment}{//\ -\/1\ if\ FP16\ mantissa\ odd,\ else\ 0}}
\DoxyCodeLine{02416\ }
\DoxyCodeLine{02417\ \ \ \ \ round1\ \ \ \ \ \ =\ \_mm\_add\_epi32(absf\_int,\ STBIR\_\_CONSTI(c\_normal\_bias));}
\DoxyCodeLine{02418\ \ \ \ \ round2\ \ \ \ \ \ =\ \_mm\_sub\_epi32(round1,\ mantodd);\ \textcolor{comment}{//\ if\ mantissa\ LSB\ odd,\ bias\ towards\ rounding\ up\ (RTNE)}}
\DoxyCodeLine{02419\ \ \ \ \ normal\ \ \ \ \ \ =\ \_mm\_srli\_epi32(round2,\ 13);\ \textcolor{comment}{//\ rounded\ result}}
\DoxyCodeLine{02420\ }
\DoxyCodeLine{02421\ \ \ \ \ \textcolor{comment}{//\ combine\ the\ two\ non-\/specials}}
\DoxyCodeLine{02422\ \ \ \ \ nonspecial\ \ =\ \_mm\_or\_si128(\_mm\_and\_si128(subnorm2,\ b\_issub),\ \_mm\_andnot\_si128(b\_issub,\ normal));}
\DoxyCodeLine{02423\ }
\DoxyCodeLine{02424\ \ \ \ \ \textcolor{comment}{//\ merge\ in\ specials\ as\ well}}
\DoxyCodeLine{02425\ \ \ \ \ joined\ \ \ \ \ \ =\ \_mm\_or\_si128(\_mm\_and\_si128(nonspecial,\ b\_isregular),\ \_mm\_andnot\_si128(b\_isregular,\ inf\_or\_nan));}
\DoxyCodeLine{02426\ }
\DoxyCodeLine{02427\ \ \ \ \ sign\_shift\ \ =\ \_mm\_srai\_epi32(\_mm\_castps\_si128(justsign),\ 16);}
\DoxyCodeLine{02428\ \ \ \ \ final2\ \ \ \ \ \ =\ \_mm\_or\_si128(joined,\ sign\_shift);}
\DoxyCodeLine{02429\ \ \ \ \ \textcolor{keyword}{final}\ \ \ \ \ \ \ =\ \_mm\_packs\_epi32(\textcolor{keyword}{final},\ final2);}
\DoxyCodeLine{02430\ \ \ \ \ stbir\_\_simdi\_store(\ output,\textcolor{keyword}{final}\ );}
\DoxyCodeLine{02431\ \ \ \}}
\DoxyCodeLine{02432\ }
\DoxyCodeLine{02433\ \textcolor{preprocessor}{\#elif\ defined(STBIR\_NEON)\ \&\&\ defined(\_MSC\_VER)\ \&\&\ defined(\_M\_ARM64)\ \&\&\ !defined(\_\_clang\_\_)\ }\textcolor{comment}{//\ 64-\/bit\ ARM\ on\ MSVC\ (not\ clang)}}
\DoxyCodeLine{02434\ }
\DoxyCodeLine{02435\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_half\_to\_float\_SIMD(\textcolor{keywordtype}{float}\ *\ output,\ stbir\_\_FP16\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02436\ \ \ \{}
\DoxyCodeLine{02437\ \ \ \ \ float16x4\_t\ in0\ =\ vld1\_f16(input\ +\ 0);}
\DoxyCodeLine{02438\ \ \ \ \ float16x4\_t\ in1\ =\ vld1\_f16(input\ +\ 4);}
\DoxyCodeLine{02439\ \ \ \ \ vst1q\_f32(output\ +\ 0,\ vcvt\_f32\_f16(in0));}
\DoxyCodeLine{02440\ \ \ \ \ vst1q\_f32(output\ +\ 4,\ vcvt\_f32\_f16(in1));}
\DoxyCodeLine{02441\ \ \ \}}
\DoxyCodeLine{02442\ }
\DoxyCodeLine{02443\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_float\_to\_half\_SIMD(stbir\_\_FP16\ *\ output,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02444\ \ \ \{}
\DoxyCodeLine{02445\ \ \ \ \ float16x4\_t\ out0\ =\ vcvt\_f16\_f32(vld1q\_f32(input\ +\ 0));}
\DoxyCodeLine{02446\ \ \ \ \ float16x4\_t\ out1\ =\ vcvt\_f16\_f32(vld1q\_f32(input\ +\ 4));}
\DoxyCodeLine{02447\ \ \ \ \ vst1\_f16(output+0,\ out0);}
\DoxyCodeLine{02448\ \ \ \ \ vst1\_f16(output+4,\ out1);}
\DoxyCodeLine{02449\ \ \ \}}
\DoxyCodeLine{02450\ }
\DoxyCodeLine{02451\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_\_half\_to\_float(\ stbir\_\_FP16\ h\ )}
\DoxyCodeLine{02452\ \ \ \{}
\DoxyCodeLine{02453\ \ \ \ \ \textcolor{keywordflow}{return}\ vgetq\_lane\_f32(vcvt\_f32\_f16(vld1\_dup\_f16(\&h)),\ 0);}
\DoxyCodeLine{02454\ \ \ \}}
\DoxyCodeLine{02455\ }
\DoxyCodeLine{02456\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_\_FP16\ stbir\_\_float\_to\_half(\ \textcolor{keywordtype}{float}\ f\ )}
\DoxyCodeLine{02457\ \ \ \{}
\DoxyCodeLine{02458\ \ \ \ \ \textcolor{keywordflow}{return}\ vget\_lane\_f16(vcvt\_f16\_f32(vdupq\_n\_f32(f)),\ 0).n16\_u16[0];}
\DoxyCodeLine{02459\ \ \ \}}
\DoxyCodeLine{02460\ }
\DoxyCodeLine{02461\ \textcolor{preprocessor}{\#elif\ defined(STBIR\_NEON)\ \&\&\ (\ defined(\ \_M\_ARM64\ )\ ||\ defined(\ \_\_aarch64\_\_\ )\ ||\ defined(\ \_\_arm64\_\_\ )\ )\ }\textcolor{comment}{//\ 64-\/bit\ ARM}}
\DoxyCodeLine{02462\ }
\DoxyCodeLine{02463\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_half\_to\_float\_SIMD(\textcolor{keywordtype}{float}\ *\ output,\ stbir\_\_FP16\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02464\ \ \ \{}
\DoxyCodeLine{02465\ \ \ \ \ float16x8\_t\ in\ =\ vld1q\_f16(input);}
\DoxyCodeLine{02466\ \ \ \ \ vst1q\_f32(output\ +\ 0,\ vcvt\_f32\_f16(vget\_low\_f16(in)));}
\DoxyCodeLine{02467\ \ \ \ \ vst1q\_f32(output\ +\ 4,\ vcvt\_f32\_f16(vget\_high\_f16(in)));}
\DoxyCodeLine{02468\ \ \ \}}
\DoxyCodeLine{02469\ }
\DoxyCodeLine{02470\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_float\_to\_half\_SIMD(stbir\_\_FP16\ *\ output,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02471\ \ \ \{}
\DoxyCodeLine{02472\ \ \ \ \ float16x4\_t\ out0\ =\ vcvt\_f16\_f32(vld1q\_f32(input\ +\ 0));}
\DoxyCodeLine{02473\ \ \ \ \ float16x4\_t\ out1\ =\ vcvt\_f16\_f32(vld1q\_f32(input\ +\ 4));}
\DoxyCodeLine{02474\ \ \ \ \ vst1q\_f16(output,\ vcombine\_f16(out0,\ out1));}
\DoxyCodeLine{02475\ \ \ \}}
\DoxyCodeLine{02476\ }
\DoxyCodeLine{02477\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_\_half\_to\_float(\ stbir\_\_FP16\ h\ )}
\DoxyCodeLine{02478\ \ \ \{}
\DoxyCodeLine{02479\ \ \ \ \ \textcolor{keywordflow}{return}\ vgetq\_lane\_f32(vcvt\_f32\_f16(vdup\_n\_f16(h)),\ 0);}
\DoxyCodeLine{02480\ \ \ \}}
\DoxyCodeLine{02481\ }
\DoxyCodeLine{02482\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_\_FP16\ stbir\_\_float\_to\_half(\ \textcolor{keywordtype}{float}\ f\ )}
\DoxyCodeLine{02483\ \ \ \{}
\DoxyCodeLine{02484\ \ \ \ \ \textcolor{keywordflow}{return}\ vget\_lane\_f16(vcvt\_f16\_f32(vdupq\_n\_f32(f)),\ 0);}
\DoxyCodeLine{02485\ \ \ \}}
\DoxyCodeLine{02486\ }
\DoxyCodeLine{02487\ \textcolor{preprocessor}{\#elif\ defined(STBIR\_WASM)\ ||\ (defined(STBIR\_NEON)\ \&\&\ (defined(\_MSC\_VER)\ ||\ defined(\_M\_ARM)\ ||\ defined(\_\_arm\_\_)))\ }\textcolor{comment}{//\ WASM\ or\ 32-\/bit\ ARM\ on\ MSVC/clang}}
\DoxyCodeLine{02488\ }
\DoxyCodeLine{02489\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_half\_to\_float\_SIMD(\textcolor{keywordtype}{float}\ *\ output,\ stbir\_\_FP16\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02490\ \ \ \{}
\DoxyCodeLine{02491\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<8;\ i++)}
\DoxyCodeLine{02492\ \ \ \ \ \{}
\DoxyCodeLine{02493\ \ \ \ \ \ \ output[i]\ =\ stbir\_\_half\_to\_float(input[i]);}
\DoxyCodeLine{02494\ \ \ \ \ \}}
\DoxyCodeLine{02495\ \ \ \}}
\DoxyCodeLine{02496\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{void}\ stbir\_\_float\_to\_half\_SIMD(stbir\_\_FP16\ *\ output,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input)}
\DoxyCodeLine{02497\ \ \ \{}
\DoxyCodeLine{02498\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<8;\ i++)}
\DoxyCodeLine{02499\ \ \ \ \ \{}
\DoxyCodeLine{02500\ \ \ \ \ \ \ output[i]\ =\ stbir\_\_float\_to\_half(input[i]);}
\DoxyCodeLine{02501\ \ \ \ \ \}}
\DoxyCodeLine{02502\ \ \ \}}
\DoxyCodeLine{02503\ }
\DoxyCodeLine{02504\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02505\ }
\DoxyCodeLine{02506\ }
\DoxyCodeLine{02507\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{02508\ }
\DoxyCodeLine{02509\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to3333(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 3,3,3,3\ )}}
\DoxyCodeLine{02510\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to2222(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 2,2,2,2\ )}}
\DoxyCodeLine{02511\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to1111(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 1,1,1,1\ )}}
\DoxyCodeLine{02512\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to0000(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 0,0,0,0\ )}}
\DoxyCodeLine{02513\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to0003(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 0,0,0,3\ )}}
\DoxyCodeLine{02514\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to0001(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 0,0,0,1\ )}}
\DoxyCodeLine{02515\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to1122(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 1,1,2,2\ )}}
\DoxyCodeLine{02516\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to2333(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 2,3,3,3\ )}}
\DoxyCodeLine{02517\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to0023(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 0,0,2,3\ )}}
\DoxyCodeLine{02518\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to1230(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 1,2,3,0\ )}}
\DoxyCodeLine{02519\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to2103(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 2,1,0,3\ )}}
\DoxyCodeLine{02520\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to3210(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 3,2,1,0\ )}}
\DoxyCodeLine{02521\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to2301(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 2,3,0,1\ )}}
\DoxyCodeLine{02522\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to3012(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 3,0,1,2\ )}}
\DoxyCodeLine{02523\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to0011(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 0,0,1,1\ )}}
\DoxyCodeLine{02524\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to1100(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 1,1,0,0\ )}}
\DoxyCodeLine{02525\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to2233(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 2,2,3,3\ )}}
\DoxyCodeLine{02526\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to1133(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 1,1,3,3\ )}}
\DoxyCodeLine{02527\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to0022(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 0,0,2,2\ )}}
\DoxyCodeLine{02528\ \textcolor{preprocessor}{\#define\ stbir\_\_simdf\_0123to1032(\ out,\ reg\ )\ (out)\ =\ stbir\_\_simdf\_swiz(\ reg,\ 1,0,3,2\ )}}
\DoxyCodeLine{02529\ }
\DoxyCodeLine{02530\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{union\ }stbir\_\_simdi\_u32}
\DoxyCodeLine{02531\ \{}
\DoxyCodeLine{02532\ \ \ stbir\_uint32\ m128i\_u32[4];}
\DoxyCodeLine{02533\ \ \ \textcolor{keywordtype}{int}\ m128i\_i32[4];}
\DoxyCodeLine{02534\ \ \ stbir\_\_simdi\ m128i\_i128;}
\DoxyCodeLine{02535\ \}\ stbir\_\_simdi\_u32;}
\DoxyCodeLine{02536\ }
\DoxyCodeLine{02537\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ STBIR\_mask[9]\ =\ \{\ 0,0,0,-\/1,-\/1,-\/1,0,0,0\ \};}
\DoxyCodeLine{02538\ }
\DoxyCodeLine{02539\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDF\_CONST(STBIR\_max\_uint8\_as\_float,\ \ \ \ \ \ \ \ \ \ \ stbir\_\_max\_uint8\_as\_float);}
\DoxyCodeLine{02540\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDF\_CONST(STBIR\_max\_uint16\_as\_float,\ \ \ \ \ \ \ \ \ \ stbir\_\_max\_uint16\_as\_float);}
\DoxyCodeLine{02541\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDF\_CONST(STBIR\_max\_uint8\_as\_float\_inverted,\ \ stbir\_\_max\_uint8\_as\_float\_inverted);}
\DoxyCodeLine{02542\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDF\_CONST(STBIR\_max\_uint16\_as\_float\_inverted,\ stbir\_\_max\_uint16\_as\_float\_inverted);}
\DoxyCodeLine{02543\ }
\DoxyCodeLine{02544\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDF\_CONST(STBIR\_simd\_point5,\ \ \ 0.5f);}
\DoxyCodeLine{02545\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDF\_CONST(STBIR\_ones,\ \ \ \ \ \ \ \ \ \ 1.0f);}
\DoxyCodeLine{02546\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(STBIR\_almost\_zero,\ \ \ (127\ -\/\ 13)\ <<\ 23);}
\DoxyCodeLine{02547\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(STBIR\_almost\_one,\ \ \ \ 0x3f7fffff);}
\DoxyCodeLine{02548\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(STBIR\_mastissa\_mask,\ 0xff);}
\DoxyCodeLine{02549\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ STBIR\_\_SIMDI\_CONST(STBIR\_topscale,\ \ \ \ \ \ 0x02000000);}
\DoxyCodeLine{02550\ }
\DoxyCodeLine{02551\ \textcolor{comment}{//\ \ \ Basically,\ in\ simd\ mode,\ we\ unroll\ the\ proper\ amount,\ and\ we\ don't\ want}}
\DoxyCodeLine{02552\ \textcolor{comment}{//\ \ \ the\ non-\/simd\ remnant\ loops\ to\ be\ unroll\ because\ they\ only\ run\ a\ few\ times}}
\DoxyCodeLine{02553\ \textcolor{comment}{//\ \ \ Adding\ this\ switch\ saves\ about\ 5K\ on\ clang\ which\ is\ Captain\ Unroll\ the\ 3rd.}}
\DoxyCodeLine{02554\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_STREAMOUT\_PTR(\ star\ )\ \ STBIR\_STREAMOUT\_PTR(\ star\ )}}
\DoxyCodeLine{02555\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_NO\_UNROLL(ptr)\ STBIR\_NO\_UNROLL(ptr)}}
\DoxyCodeLine{02556\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\ STBIR\_NO\_UNROLL\_LOOP\_START}}
\DoxyCodeLine{02557\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR\ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}}
\DoxyCodeLine{02558\ }
\DoxyCodeLine{02559\ \textcolor{preprocessor}{\#ifdef\ STBIR\_MEMCPY}}
\DoxyCodeLine{02560\ \textcolor{preprocessor}{\#undef\ STBIR\_MEMCPY}}
\DoxyCodeLine{02561\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02562\ \textcolor{preprocessor}{\#define\ STBIR\_MEMCPY\ stbir\_simd\_memcpy}}
\DoxyCodeLine{02563\ }
\DoxyCodeLine{02564\ \textcolor{comment}{//\ override\ normal\ use\ of\ memcpy\ with\ much\ simpler\ copy\ (faster\ and\ smaller\ with\ our\ sized\ copies)}}
\DoxyCodeLine{02565\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_simd\_memcpy(\ \textcolor{keywordtype}{void}\ *\ dest,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ src,\ \textcolor{keywordtype}{size\_t}\ bytes\ )}
\DoxyCodeLine{02566\ \{}
\DoxyCodeLine{02567\ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR\ (*)\ d\ =\ (\textcolor{keywordtype}{char}*)\ dest;}
\DoxyCodeLine{02568\ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ d\_end\ =\ ((\textcolor{keywordtype}{char}*)\ dest)\ +\ bytes;}
\DoxyCodeLine{02569\ \ \ ptrdiff\_t\ ofs\_to\_src\ =\ (\textcolor{keywordtype}{char}*)src\ -\/\ (\textcolor{keywordtype}{char}*)dest;}
\DoxyCodeLine{02570\ }
\DoxyCodeLine{02571\ \ \ \textcolor{comment}{//\ check\ overlaps}}
\DoxyCodeLine{02572\ \ \ STBIR\_ASSERT(\ (\ (\ d\ >=\ (\ (\textcolor{keywordtype}{char}*)src)\ +\ bytes\ )\ )\ ||\ (\ (\ d\ +\ bytes\ )\ <=\ (\textcolor{keywordtype}{char}*)src\ )\ );}
\DoxyCodeLine{02573\ }
\DoxyCodeLine{02574\ \ \ if\ (\ bytes\ <\ (16*stbir\_\_simdfX\_float\_count)\ )}
\DoxyCodeLine{02575\ \ \ \{}
\DoxyCodeLine{02576\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ bytes\ <\ 16\ )}
\DoxyCodeLine{02577\ \ \ \ \ \{}
\DoxyCodeLine{02578\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ bytes\ )}
\DoxyCodeLine{02579\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02580\ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{02581\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{02582\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02583\ \ \ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(d);}
\DoxyCodeLine{02584\ \ \ \ \ \ \ \ \ \ \ d[\ 0\ ]\ =\ d[\ ofs\_to\_src\ ];}
\DoxyCodeLine{02585\ \ \ \ \ \ \ \ \ \ \ ++d;}
\DoxyCodeLine{02586\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ d\ <\ d\_end\ );}
\DoxyCodeLine{02587\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02588\ \ \ \ \ \}}
\DoxyCodeLine{02589\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02590\ \ \ \ \ \{}
\DoxyCodeLine{02591\ \ \ \ \ \ \ stbir\_\_simdf\ x;}
\DoxyCodeLine{02592\ \ \ \ \ \ \ \textcolor{comment}{//\ do\ one\ unaligned\ to\ get\ us\ aligned\ for\ the\ stream\ out\ below}}
\DoxyCodeLine{02593\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ x,\ (\ d\ +\ ofs\_to\_src\ )\ );}
\DoxyCodeLine{02594\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ d,\ x\ );}
\DoxyCodeLine{02595\ \ \ \ \ \ \ d\ =\ (\textcolor{keywordtype}{char}*)(\ (\ (\ (\textcolor{keywordtype}{size\_t})d\ )\ +\ 16\ )\ \&\ \string~15\ );}
\DoxyCodeLine{02596\ }
\DoxyCodeLine{02597\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{02598\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{02599\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02600\ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(d);}
\DoxyCodeLine{02601\ }
\DoxyCodeLine{02602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ d\ >\ (\ d\_end\ -\/\ 16\ )\ )}
\DoxyCodeLine{02603\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02604\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ d\ ==\ d\_end\ )}
\DoxyCodeLine{02605\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02606\ \ \ \ \ \ \ \ \ \ \ d\ =\ d\_end\ -\/\ 16;}
\DoxyCodeLine{02607\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02608\ }
\DoxyCodeLine{02609\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ x,\ (\ d\ +\ ofs\_to\_src\ )\ );}
\DoxyCodeLine{02610\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ d,\ x\ );}
\DoxyCodeLine{02611\ \ \ \ \ \ \ \ \ d\ +=\ 16;}
\DoxyCodeLine{02612\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02613\ \ \ \ \ \}}
\DoxyCodeLine{02614\ \ \ \}}
\DoxyCodeLine{02615\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02616\ \ \ \{}
\DoxyCodeLine{02617\ \ \ \ \ stbir\_\_simdfX\ x0,x1,x2,x3;}
\DoxyCodeLine{02618\ }
\DoxyCodeLine{02619\ \ \ \ \ \textcolor{comment}{//\ do\ one\ unaligned\ to\ get\ us\ aligned\ for\ the\ stream\ out\ below}}
\DoxyCodeLine{02620\ \ \ \ \ stbir\_\_simdfX\_load(\ x0,\ (\ d\ +\ ofs\_to\_src\ )\ +\ \ 0*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02621\ \ \ \ \ stbir\_\_simdfX\_load(\ x1,\ (\ d\ +\ ofs\_to\_src\ )\ +\ \ 4*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02622\ \ \ \ \ stbir\_\_simdfX\_load(\ x2,\ (\ d\ +\ ofs\_to\_src\ )\ +\ \ 8*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02623\ \ \ \ \ stbir\_\_simdfX\_load(\ x3,\ (\ d\ +\ ofs\_to\_src\ )\ +\ 12*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02624\ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ \ 0*stbir\_\_simdfX\_float\_count,\ x0\ );}
\DoxyCodeLine{02625\ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ \ 4*stbir\_\_simdfX\_float\_count,\ x1\ );}
\DoxyCodeLine{02626\ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ \ 8*stbir\_\_simdfX\_float\_count,\ x2\ );}
\DoxyCodeLine{02627\ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ 12*stbir\_\_simdfX\_float\_count,\ x3\ );}
\DoxyCodeLine{02628\ \ \ \ \ d\ =\ (\textcolor{keywordtype}{char}*)(\ (\ (\ (\textcolor{keywordtype}{size\_t})d\ )\ +\ (16*stbir\_\_simdfX\_float\_count)\ )\ \&\ \string~((16*stbir\_\_simdfX\_float\_count)-\/1)\ );}
\DoxyCodeLine{02629\ }
\DoxyCodeLine{02630\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{02631\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{02632\ \ \ \ \ \{}
\DoxyCodeLine{02633\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(d);}
\DoxyCodeLine{02634\ }
\DoxyCodeLine{02635\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ d\ >\ (\ d\_end\ -\/\ (16*stbir\_\_simdfX\_float\_count)\ )\ )}
\DoxyCodeLine{02636\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02637\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ d\ ==\ d\_end\ )}
\DoxyCodeLine{02638\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02639\ \ \ \ \ \ \ \ \ d\ =\ d\_end\ -\/\ (16*stbir\_\_simdfX\_float\_count);}
\DoxyCodeLine{02640\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02641\ }
\DoxyCodeLine{02642\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ x0,\ (\ d\ +\ ofs\_to\_src\ )\ +\ \ 0*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02643\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ x1,\ (\ d\ +\ ofs\_to\_src\ )\ +\ \ 4*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02644\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ x2,\ (\ d\ +\ ofs\_to\_src\ )\ +\ \ 8*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02645\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ x3,\ (\ d\ +\ ofs\_to\_src\ )\ +\ 12*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{02646\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ \ 0*stbir\_\_simdfX\_float\_count,\ x0\ );}
\DoxyCodeLine{02647\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ \ 4*stbir\_\_simdfX\_float\_count,\ x1\ );}
\DoxyCodeLine{02648\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ \ 8*stbir\_\_simdfX\_float\_count,\ x2\ );}
\DoxyCodeLine{02649\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ d\ +\ 12*stbir\_\_simdfX\_float\_count,\ x3\ );}
\DoxyCodeLine{02650\ \ \ \ \ \ \ d\ +=\ (16*stbir\_\_simdfX\_float\_count);}
\DoxyCodeLine{02651\ \ \ \ \ \}}
\DoxyCodeLine{02652\ \ \ \}}
\DoxyCodeLine{02653\ \}}
\DoxyCodeLine{02654\ }
\DoxyCodeLine{02655\ \textcolor{comment}{//\ memcpy\ that\ is\ specically\ intentionally\ overlapping\ (src\ is\ smaller\ then\ dest,\ so\ can\ be}}
\DoxyCodeLine{02656\ \textcolor{comment}{//\ \ \ a\ normal\ forward\ copy,\ bytes\ is\ divisible\ by\ 4\ and\ bytes\ is\ greater\ than\ or\ equal\ to}}
\DoxyCodeLine{02657\ \textcolor{comment}{//\ \ \ the\ diff\ between\ dest\ and\ src)}}
\DoxyCodeLine{02658\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_overlapping\_memcpy(\ \textcolor{keywordtype}{void}\ *\ dest,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ src,\ \textcolor{keywordtype}{size\_t}\ bytes\ )}
\DoxyCodeLine{02659\ \{}
\DoxyCodeLine{02660\ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR\ (*)\ sd\ =\ (\textcolor{keywordtype}{char}*)\ src;}
\DoxyCodeLine{02661\ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ s\_end\ =\ ((\textcolor{keywordtype}{char}*)\ src)\ +\ bytes;}
\DoxyCodeLine{02662\ \ \ ptrdiff\_t\ ofs\_to\_dest\ =\ (\textcolor{keywordtype}{char}*)dest\ -\/\ (\textcolor{keywordtype}{char}*)src;}
\DoxyCodeLine{02663\ }
\DoxyCodeLine{02664\ \ \ if\ (\ ofs\_to\_dest\ >=\ 16\ )\ \textcolor{comment}{//\ is\ the\ overlap\ more\ than\ 16\ away?}}
\DoxyCodeLine{02665\ \ \ \{}
\DoxyCodeLine{02666\ \ \ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ s\_end16\ =\ ((\textcolor{keywordtype}{char}*)\ src)\ +\ (bytes\&\string~15);}
\DoxyCodeLine{02667\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{02668\ \ \ \ \ do}
\DoxyCodeLine{02669\ \ \ \ \ \{}
\DoxyCodeLine{02670\ \ \ \ \ \ \ stbir\_\_simdf\ x;}
\DoxyCodeLine{02671\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(sd);}
\DoxyCodeLine{02672\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ x,\ sd\ );}
\DoxyCodeLine{02673\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ \ (\ sd\ +\ ofs\_to\_dest\ ),\ x\ );}
\DoxyCodeLine{02674\ \ \ \ \ \ \ sd\ +=\ 16;}
\DoxyCodeLine{02675\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ sd\ <\ s\_end16\ );}
\DoxyCodeLine{02676\ }
\DoxyCodeLine{02677\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ sd\ ==\ s\_end\ )}
\DoxyCodeLine{02678\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02679\ \ \ \}}
\DoxyCodeLine{02680\ }
\DoxyCodeLine{02681\ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{02682\ \ \ \{}
\DoxyCodeLine{02683\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(sd);}
\DoxyCodeLine{02684\ \ \ \ \ *(\textcolor{keywordtype}{int}*)(\ sd\ +\ ofs\_to\_dest\ )\ =\ *(\textcolor{keywordtype}{int}*)\ sd;}
\DoxyCodeLine{02685\ \ \ \ \ sd\ +=\ 4;}
\DoxyCodeLine{02686\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ sd\ <\ s\_end\ );}
\DoxyCodeLine{02687\ \}}
\DoxyCodeLine{02688\ }
\DoxyCodeLine{02689\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ no\ SSE2}}
\DoxyCodeLine{02690\ }
\DoxyCodeLine{02691\ \textcolor{comment}{//\ when\ in\ scalar\ mode,\ we\ let\ unrolling\ happen,\ so\ this\ macro\ just\ does\ the\ \_\_restrict}}
\DoxyCodeLine{02692\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_STREAMOUT\_PTR(\ star\ )\ STBIR\_STREAMOUT\_PTR(\ star\ )}}
\DoxyCodeLine{02693\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_NO\_UNROLL(ptr)}}
\DoxyCodeLine{02694\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}}
\DoxyCodeLine{02695\ \textcolor{preprocessor}{\#define\ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}}
\DoxyCodeLine{02696\ }
\DoxyCodeLine{02697\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ SSE2}}
\DoxyCodeLine{02698\ }
\DoxyCodeLine{02699\ }
\DoxyCodeLine{02700\ \textcolor{preprocessor}{\#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{02701\ }
\DoxyCodeLine{02702\ \textcolor{preprocessor}{\#ifndef\ STBIR\_PROFILE\_FUNC}}
\DoxyCodeLine{02703\ }
\DoxyCodeLine{02704\ \textcolor{preprocessor}{\#if\ defined(\_x86\_64)\ ||\ defined(\ \_\_x86\_64\_\_\ )\ ||\ defined(\ \_M\_X64\ )\ ||\ defined(\_\_x86\_64)\ ||\ defined(\_\_SSE2\_\_)\ ||\ defined(STBIR\_SSE)\ ||\ defined(\ \_M\_IX86\_FP\ )\ ||\ defined(\_\_i386)\ ||\ defined(\ \_\_i386\_\_\ )\ ||\ defined(\ \_M\_IX86\ )\ ||\ defined(\ \_X86\_\ )}}
\DoxyCodeLine{02705\ }
\DoxyCodeLine{02706\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{02707\ }
\DoxyCodeLine{02708\ \ \ STBIRDEF\ stbir\_uint64\ \_\_rdtsc();}
\DoxyCodeLine{02709\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_PROFILE\_FUNC()\ \_\_rdtsc()}}
\DoxyCodeLine{02710\ }
\DoxyCodeLine{02711\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ non\ msvc}}
\DoxyCodeLine{02712\ }
\DoxyCodeLine{02713\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_uint64\ STBIR\_PROFILE\_FUNC()}
\DoxyCodeLine{02714\ \ \ \{}
\DoxyCodeLine{02715\ \ \ \ \ stbir\_uint32\ lo,\ hi;}
\DoxyCodeLine{02716\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}\ (\textcolor{stringliteral}{"{}rdtsc"{}}\ :\ \textcolor{stringliteral}{"{}=a"{}}\ (lo),\ \textcolor{stringliteral}{"{}=d"{}}\ (hi)\ );}
\DoxyCodeLine{02717\ \ \ \ \ \textcolor{keywordflow}{return}\ (\ (\ (stbir\_uint64)\ hi\ )\ <<\ 32\ )\ |\ (\ (stbir\_uint64)\ lo\ );}
\DoxyCodeLine{02718\ \ \ \}}
\DoxyCodeLine{02719\ }
\DoxyCodeLine{02720\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ msvc}}
\DoxyCodeLine{02721\ }
\DoxyCodeLine{02722\ \textcolor{preprocessor}{\#elif\ defined(\ \_M\_ARM64\ )\ ||\ defined(\ \_\_aarch64\_\_\ )\ ||\ defined(\ \_\_arm64\_\_\ )\ ||\ defined(\_\_ARM\_NEON\_\_)}}
\DoxyCodeLine{02723\ }
\DoxyCodeLine{02724\ \textcolor{preprocessor}{\#if\ defined(\ \_MSC\_VER\ )\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{02725\ }
\DoxyCodeLine{02726\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_PROFILE\_FUNC()\ \_ReadStatusReg(ARM64\_CNTVCT)}}
\DoxyCodeLine{02727\ }
\DoxyCodeLine{02728\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02729\ }
\DoxyCodeLine{02730\ \ \ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_uint64\ STBIR\_PROFILE\_FUNC()}
\DoxyCodeLine{02731\ \ \ \{}
\DoxyCodeLine{02732\ \ \ \ \ stbir\_uint64\ tsc;}
\DoxyCodeLine{02733\ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}mrs\ \%0,\ cntvct\_el0"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}\ (tsc));}
\DoxyCodeLine{02734\ \ \ \ \ \textcolor{keywordflow}{return}\ tsc;}
\DoxyCodeLine{02735\ \ \ \}}
\DoxyCodeLine{02736\ }
\DoxyCodeLine{02737\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02738\ }
\DoxyCodeLine{02739\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ x64,\ arm}}
\DoxyCodeLine{02740\ }
\DoxyCodeLine{02741\ \textcolor{preprocessor}{\#error\ Unknown\ platform\ for\ profiling.}}
\DoxyCodeLine{02742\ }
\DoxyCodeLine{02743\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ x64,\ arm}}
\DoxyCodeLine{02744\ }
\DoxyCodeLine{02745\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STBIR\_PROFILE\_FUNC}}
\DoxyCodeLine{02746\ }
\DoxyCodeLine{02747\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_GET\_SPLIT\_INFO\ ,stbir\_\_per\_split\_info\ *\ split\_info}}
\DoxyCodeLine{02748\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ ,split\_info}}
\DoxyCodeLine{02749\ }
\DoxyCodeLine{02750\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_BUILD\_GET\_INFO\ ,stbir\_\_info\ *\ profile\_info}}
\DoxyCodeLine{02751\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_BUILD\_SET\_INFO\ ,profile\_info}}
\DoxyCodeLine{02752\ }
\DoxyCodeLine{02753\ \textcolor{comment}{//\ super\ light-\/weight\ micro\ profiler}}
\DoxyCodeLine{02754\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_START\_ll(\ info,\ wh\ )\ \{\ stbir\_uint64\ wh\#\#thiszonetime\ =\ STBIR\_PROFILE\_FUNC();\ stbir\_uint64\ *\ wh\#\#save\_parent\_excluded\_ptr\ =\ info-\/>current\_zone\_excluded\_ptr;\ stbir\_uint64\ wh\#\#current\_zone\_excluded\ =\ 0;\ info-\/>current\_zone\_excluded\_ptr\ =\ \&wh\#\#current\_zone\_excluded;}}
\DoxyCodeLine{02755\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_END\_ll(\ info,\ wh\ )\ wh\#\#thiszonetime\ =\ STBIR\_PROFILE\_FUNC()\ -\/\ wh\#\#thiszonetime;\ info-\/>profile.named.wh\ +=\ wh\#\#thiszonetime\ -\/\ wh\#\#current\_zone\_excluded;\ *wh\#\#save\_parent\_excluded\_ptr\ +=\ wh\#\#thiszonetime;\ info-\/>current\_zone\_excluded\_ptr\ =\ wh\#\#save\_parent\_excluded\_ptr;\ \}}}
\DoxyCodeLine{02756\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_FIRST\_START\_ll(\ info,\ wh\ )\ \{\ int\ i;\ info-\/>current\_zone\_excluded\_ptr\ =\ \&info-\/>profile.named.total;\ for(i=0;i<STBIR\_\_ARRAY\_SIZE(info-\/>profile.array);i++)\ info-\/>profile.array[i]=0;\ \}\ STBIR\_PROFILE\_START\_ll(\ info,\ wh\ );}}
\DoxyCodeLine{02757\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_CLEAR\_EXTRAS\_ll(\ info,\ num\ )\ \{\ int\ extra;\ for(extra=1;extra<(num);extra++)\ \{\ int\ i;\ for(i=0;i<STBIR\_\_ARRAY\_SIZE((info)-\/>profile.array);i++)\ (info)[extra].profile.array[i]=0;\ \}\ \}}}
\DoxyCodeLine{02758\ }
\DoxyCodeLine{02759\ \textcolor{comment}{//\ for\ thread\ data}}
\DoxyCodeLine{02760\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_START(\ wh\ )\ STBIR\_PROFILE\_START\_ll(\ split\_info,\ wh\ )}}
\DoxyCodeLine{02761\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_END(\ wh\ )\ STBIR\_PROFILE\_END\_ll(\ split\_info,\ wh\ )}}
\DoxyCodeLine{02762\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_FIRST\_START(\ wh\ )\ STBIR\_PROFILE\_FIRST\_START\_ll(\ split\_info,\ wh\ )}}
\DoxyCodeLine{02763\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_CLEAR\_EXTRAS()\ STBIR\_PROFILE\_CLEAR\_EXTRAS\_ll(\ split\_info,\ split\_count\ )}}
\DoxyCodeLine{02764\ }
\DoxyCodeLine{02765\ \textcolor{comment}{//\ for\ build\ data}}
\DoxyCodeLine{02766\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_START(\ wh\ )\ STBIR\_PROFILE\_START\_ll(\ profile\_info,\ wh\ )}}
\DoxyCodeLine{02767\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_END(\ wh\ )\ STBIR\_PROFILE\_END\_ll(\ profile\_info,\ wh\ )}}
\DoxyCodeLine{02768\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_FIRST\_START(\ wh\ )\ STBIR\_PROFILE\_FIRST\_START\_ll(\ profile\_info,\ wh\ )}}
\DoxyCodeLine{02769\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_CLEAR(\ info\ )\ \{\ int\ i;\ for(i=0;i<STBIR\_\_ARRAY\_SIZE(info-\/>profile.array);i++)\ info-\/>profile.array[i]=0;\ \}}}
\DoxyCodeLine{02770\ }
\DoxyCodeLine{02771\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{//\ no\ profile}}
\DoxyCodeLine{02772\ }
\DoxyCodeLine{02773\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_GET\_SPLIT\_INFO}}
\DoxyCodeLine{02774\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO}}
\DoxyCodeLine{02775\ }
\DoxyCodeLine{02776\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_BUILD\_GET\_INFO}}
\DoxyCodeLine{02777\ \textcolor{preprocessor}{\#define\ STBIR\_ONLY\_PROFILE\_BUILD\_SET\_INFO}}
\DoxyCodeLine{02778\ }
\DoxyCodeLine{02779\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_START(\ wh\ )}}
\DoxyCodeLine{02780\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_END(\ wh\ )}}
\DoxyCodeLine{02781\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_FIRST\_START(\ wh\ )}}
\DoxyCodeLine{02782\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_CLEAR\_EXTRAS(\ )}}
\DoxyCodeLine{02783\ }
\DoxyCodeLine{02784\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_START(\ wh\ )}}
\DoxyCodeLine{02785\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_END(\ wh\ )}}
\DoxyCodeLine{02786\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_FIRST\_START(\ wh\ )}}
\DoxyCodeLine{02787\ \textcolor{preprocessor}{\#define\ STBIR\_PROFILE\_BUILD\_CLEAR(\ info\ )}}
\DoxyCodeLine{02788\ }
\DoxyCodeLine{02789\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ stbir\_profile}}
\DoxyCodeLine{02790\ }
\DoxyCodeLine{02791\ \textcolor{preprocessor}{\#ifndef\ STBIR\_CEILF}}
\DoxyCodeLine{02792\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{02793\ \textcolor{preprocessor}{\#if\ \_MSC\_VER\ <=\ 1200\ }\textcolor{comment}{//\ support\ VC6\ for\ Sean}}
\DoxyCodeLine{02794\ \textcolor{preprocessor}{\#define\ STBIR\_CEILF(x)\ ((float)ceil((float)(x)))}}
\DoxyCodeLine{02795\ \textcolor{preprocessor}{\#define\ STBIR\_FLOORF(x)\ ((float)floor((float)(x)))}}
\DoxyCodeLine{02796\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02797\ \textcolor{preprocessor}{\#define\ STBIR\_CEILF(x)\ ceilf(x)}}
\DoxyCodeLine{02798\ \textcolor{preprocessor}{\#define\ STBIR\_FLOORF(x)\ floorf(x)}}
\DoxyCodeLine{02799\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02800\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02801\ }
\DoxyCodeLine{02802\ \textcolor{preprocessor}{\#ifndef\ STBIR\_MEMCPY}}
\DoxyCodeLine{02803\ \textcolor{comment}{//\ For\ memcpy}}
\DoxyCodeLine{02804\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{02805\ \textcolor{preprocessor}{\#define\ STBIR\_MEMCPY(\ dest,\ src,\ len\ )\ memcpy(\ dest,\ src,\ len\ )}}
\DoxyCodeLine{02806\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02807\ }
\DoxyCodeLine{02808\ \textcolor{preprocessor}{\#ifndef\ STBIR\_SIMD}}
\DoxyCodeLine{02809\ }
\DoxyCodeLine{02810\ \textcolor{comment}{//\ memcpy\ that\ is\ specifically\ intentionally\ overlapping\ (src\ is\ smaller\ then\ dest,\ so\ can\ be}}
\DoxyCodeLine{02811\ \textcolor{comment}{//\ \ \ a\ normal\ forward\ copy,\ bytes\ is\ divisible\ by\ 4\ and\ bytes\ is\ greater\ than\ or\ equal\ to}}
\DoxyCodeLine{02812\ \textcolor{comment}{//\ \ \ the\ diff\ between\ dest\ and\ src)}}
\DoxyCodeLine{02813\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_overlapping\_memcpy(\ \textcolor{keywordtype}{void}\ *\ dest,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ src,\ \textcolor{keywordtype}{size\_t}\ bytes\ )}
\DoxyCodeLine{02814\ \{}
\DoxyCodeLine{02815\ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR\ (*)\ sd\ =\ (\textcolor{keywordtype}{char}*)\ src;}
\DoxyCodeLine{02816\ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ s\_end\ =\ ((\textcolor{keywordtype}{char}*)\ src)\ +\ bytes;}
\DoxyCodeLine{02817\ \ \ ptrdiff\_t\ ofs\_to\_dest\ =\ (\textcolor{keywordtype}{char}*)dest\ -\/\ (\textcolor{keywordtype}{char}*)src;}
\DoxyCodeLine{02818\ }
\DoxyCodeLine{02819\ \ \ if\ (\ ofs\_to\_dest\ >=\ 8\ )\ \textcolor{comment}{//\ is\ the\ overlap\ more\ than\ 8\ away?}}
\DoxyCodeLine{02820\ \ \ \{}
\DoxyCodeLine{02821\ \ \ \ \ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ s\_end8\ =\ ((\textcolor{keywordtype}{char}*)\ src)\ +\ (bytes\&\string~7);}
\DoxyCodeLine{02822\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{02823\ \ \ \ \ do}
\DoxyCodeLine{02824\ \ \ \ \ \{}
\DoxyCodeLine{02825\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(sd);}
\DoxyCodeLine{02826\ \ \ \ \ \ \ *(stbir\_uint64*)(\ sd\ +\ ofs\_to\_dest\ )\ =\ *(stbir\_uint64*)\ sd;}
\DoxyCodeLine{02827\ \ \ \ \ \ \ sd\ +=\ 8;}
\DoxyCodeLine{02828\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ sd\ <\ s\_end8\ );}
\DoxyCodeLine{02829\ }
\DoxyCodeLine{02830\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ sd\ ==\ s\_end\ )}
\DoxyCodeLine{02831\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02832\ \ \ \}}
\DoxyCodeLine{02833\ }
\DoxyCodeLine{02834\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{02835\ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{02836\ \ \ \{}
\DoxyCodeLine{02837\ \ \ \ \ STBIR\_NO\_UNROLL(sd);}
\DoxyCodeLine{02838\ \ \ \ \ *(\textcolor{keywordtype}{int}*)(\ sd\ +\ ofs\_to\_dest\ )\ =\ *(\textcolor{keywordtype}{int}*)\ sd;}
\DoxyCodeLine{02839\ \ \ \ \ sd\ +=\ 4;}
\DoxyCodeLine{02840\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ sd\ <\ s\_end\ );}
\DoxyCodeLine{02841\ \}}
\DoxyCodeLine{02842\ }
\DoxyCodeLine{02843\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02844\ }
\DoxyCodeLine{02845\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_trapezoid(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02846\ \{}
\DoxyCodeLine{02847\ \ \ \textcolor{keywordtype}{float}\ halfscale\ =\ scale\ /\ 2;}
\DoxyCodeLine{02848\ \ \ \textcolor{keywordtype}{float}\ t\ =\ 0.5f\ +\ halfscale;}
\DoxyCodeLine{02849\ \ \ STBIR\_ASSERT(scale\ <=\ 1);}
\DoxyCodeLine{02850\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02851\ }
\DoxyCodeLine{02852\ \ \ \textcolor{keywordflow}{if}\ (\ x\ <\ 0.0f\ )\ x\ =\ -\/x;}
\DoxyCodeLine{02853\ }
\DoxyCodeLine{02854\ \ \ \textcolor{keywordflow}{if}\ (x\ >=\ t)}
\DoxyCodeLine{02855\ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0f;}
\DoxyCodeLine{02856\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02857\ \ \ \{}
\DoxyCodeLine{02858\ \ \ \ \ \textcolor{keywordtype}{float}\ r\ =\ 0.5f\ -\/\ halfscale;}
\DoxyCodeLine{02859\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <=\ r)}
\DoxyCodeLine{02860\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1.0f;}
\DoxyCodeLine{02861\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02862\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (t\ -\/\ x)\ /\ scale;}
\DoxyCodeLine{02863\ \ \ \}}
\DoxyCodeLine{02864\ \}}
\DoxyCodeLine{02865\ }
\DoxyCodeLine{02866\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_trapezoid(\textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02867\ \{}
\DoxyCodeLine{02868\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02869\ \ \ \textcolor{keywordflow}{return}\ 0.5f\ +\ scale\ /\ 2.0f;}
\DoxyCodeLine{02870\ \}}
\DoxyCodeLine{02871\ }
\DoxyCodeLine{02872\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_triangle(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02873\ \{}
\DoxyCodeLine{02874\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02875\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02876\ }
\DoxyCodeLine{02877\ \ \ \textcolor{keywordflow}{if}\ (\ x\ <\ 0.0f\ )\ x\ =\ -\/x;}
\DoxyCodeLine{02878\ }
\DoxyCodeLine{02879\ \ \ \textcolor{keywordflow}{if}\ (x\ <=\ 1.0f)}
\DoxyCodeLine{02880\ \ \ \ \ \textcolor{keywordflow}{return}\ 1.0f\ -\/\ x;}
\DoxyCodeLine{02881\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02882\ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0f;}
\DoxyCodeLine{02883\ \}}
\DoxyCodeLine{02884\ }
\DoxyCodeLine{02885\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_point(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02886\ \{}
\DoxyCodeLine{02887\ \ \ STBIR\_\_UNUSED(x);}
\DoxyCodeLine{02888\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02889\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02890\ }
\DoxyCodeLine{02891\ \ \ \textcolor{keywordflow}{return}\ 1.0f;}
\DoxyCodeLine{02892\ \}}
\DoxyCodeLine{02893\ }
\DoxyCodeLine{02894\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_cubic(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02895\ \{}
\DoxyCodeLine{02896\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02897\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02898\ }
\DoxyCodeLine{02899\ \ \ \textcolor{keywordflow}{if}\ (\ x\ <\ 0.0f\ )\ x\ =\ -\/x;}
\DoxyCodeLine{02900\ }
\DoxyCodeLine{02901\ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 1.0f)}
\DoxyCodeLine{02902\ \ \ \ \ \textcolor{keywordflow}{return}\ (4.0f\ +\ x*x*(3.0f*x\ -\/\ 6.0f))/6.0f;}
\DoxyCodeLine{02903\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (x\ <\ 2.0f)}
\DoxyCodeLine{02904\ \ \ \ \ \textcolor{keywordflow}{return}\ (8.0f\ +\ x*(-\/12.0f\ +\ x*(6.0f\ -\/\ x)))/6.0f;}
\DoxyCodeLine{02905\ }
\DoxyCodeLine{02906\ \ \ \textcolor{keywordflow}{return}\ (0.0f);}
\DoxyCodeLine{02907\ \}}
\DoxyCodeLine{02908\ }
\DoxyCodeLine{02909\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_catmullrom(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02910\ \{}
\DoxyCodeLine{02911\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02912\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02913\ }
\DoxyCodeLine{02914\ \ \ \textcolor{keywordflow}{if}\ (\ x\ <\ 0.0f\ )\ x\ =\ -\/x;}
\DoxyCodeLine{02915\ }
\DoxyCodeLine{02916\ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 1.0f)}
\DoxyCodeLine{02917\ \ \ \ \ \textcolor{keywordflow}{return}\ 1.0f\ -\/\ x*x*(2.5f\ -\/\ 1.5f*x);}
\DoxyCodeLine{02918\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (x\ <\ 2.0f)}
\DoxyCodeLine{02919\ \ \ \ \ \textcolor{keywordflow}{return}\ 2.0f\ -\/\ x*(4.0f\ +\ x*(0.5f*x\ -\/\ 2.5f));}
\DoxyCodeLine{02920\ }
\DoxyCodeLine{02921\ \ \ \textcolor{keywordflow}{return}\ (0.0f);}
\DoxyCodeLine{02922\ \}}
\DoxyCodeLine{02923\ }
\DoxyCodeLine{02924\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_mitchell(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02925\ \{}
\DoxyCodeLine{02926\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02927\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02928\ }
\DoxyCodeLine{02929\ \ \ \textcolor{keywordflow}{if}\ (\ x\ <\ 0.0f\ )\ x\ =\ -\/x;}
\DoxyCodeLine{02930\ }
\DoxyCodeLine{02931\ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 1.0f)}
\DoxyCodeLine{02932\ \ \ \ \ \textcolor{keywordflow}{return}\ (16.0f\ +\ x*x*(21.0f\ *\ x\ -\/\ 36.0f))/18.0f;}
\DoxyCodeLine{02933\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (x\ <\ 2.0f)}
\DoxyCodeLine{02934\ \ \ \ \ \textcolor{keywordflow}{return}\ (32.0f\ +\ x*(-\/60.0f\ +\ x*(36.0f\ -\/\ 7.0f*x)))/18.0f;}
\DoxyCodeLine{02935\ }
\DoxyCodeLine{02936\ \ \ \textcolor{keywordflow}{return}\ (0.0f);}
\DoxyCodeLine{02937\ \}}
\DoxyCodeLine{02938\ }
\DoxyCodeLine{02939\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_zeropoint5(\textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02940\ \{}
\DoxyCodeLine{02941\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02942\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02943\ \ \ \textcolor{keywordflow}{return}\ 0.5f;}
\DoxyCodeLine{02944\ \}}
\DoxyCodeLine{02945\ }
\DoxyCodeLine{02946\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_one(\textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02947\ \{}
\DoxyCodeLine{02948\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02949\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02950\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02951\ \}}
\DoxyCodeLine{02952\ }
\DoxyCodeLine{02953\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_two(\textcolor{keywordtype}{float}\ s,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02954\ \{}
\DoxyCodeLine{02955\ \ \ STBIR\_\_UNUSED(s);}
\DoxyCodeLine{02956\ \ \ STBIR\_\_UNUSED(user\_data);}
\DoxyCodeLine{02957\ \ \ \textcolor{keywordflow}{return}\ 2;}
\DoxyCodeLine{02958\ \}}
\DoxyCodeLine{02959\ }
\DoxyCodeLine{02960\ \textcolor{comment}{//\ This\ is\ the\ maximum\ number\ of\ input\ samples\ that\ can\ affect\ an\ output\ sample}}
\DoxyCodeLine{02961\ \textcolor{comment}{//\ with\ the\ given\ filter\ from\ the\ output\ pixel's\ perspective}}
\DoxyCodeLine{02962\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_filter\_pixel\_width(stbir\_\_support\_callback\ *\ support,\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02963\ \{}
\DoxyCodeLine{02964\ \ \ STBIR\_ASSERT(support\ !=\ 0);}
\DoxyCodeLine{02965\ }
\DoxyCodeLine{02966\ \ \ \textcolor{keywordflow}{if}\ (\ scale\ >=\ (\ 1.0f-\/stbir\_\_small\_float\ )\ )\ \textcolor{comment}{//\ upscale}}
\DoxyCodeLine{02967\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})STBIR\_CEILF(support(1.0f/scale,user\_data)\ *\ 2.0f);}
\DoxyCodeLine{02968\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02969\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})STBIR\_CEILF(support(scale,user\_data)\ *\ 2.0f\ /\ scale);}
\DoxyCodeLine{02970\ \}}
\DoxyCodeLine{02971\ }
\DoxyCodeLine{02972\ \textcolor{comment}{//\ this\ is\ how\ many\ coefficents\ per\ run\ of\ the\ filter\ (which\ is\ different}}
\DoxyCodeLine{02973\ \textcolor{comment}{//\ \ \ from\ the\ filter\_pixel\_width\ depending\ on\ if\ we\ are\ scattering\ or\ gathering)}}
\DoxyCodeLine{02974\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_coefficient\_width(stbir\_\_sampler\ *\ samp,\ \textcolor{keywordtype}{int}\ is\_gather,\ \textcolor{keywordtype}{void}\ *\ user\_data)}
\DoxyCodeLine{02975\ \{}
\DoxyCodeLine{02976\ \ \ \textcolor{keywordtype}{float}\ scale\ =\ samp-\/>scale\_info.scale;}
\DoxyCodeLine{02977\ \ \ stbir\_\_support\_callback\ *\ support\ =\ samp-\/>filter\_support;}
\DoxyCodeLine{02978\ }
\DoxyCodeLine{02979\ \ \ \textcolor{keywordflow}{switch}(\ is\_gather\ )}
\DoxyCodeLine{02980\ \ \ \{}
\DoxyCodeLine{02981\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{02982\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})STBIR\_CEILF(support(1.0f\ /\ scale,\ user\_data)\ *\ 2.0f);}
\DoxyCodeLine{02983\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{02984\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})STBIR\_CEILF(support(scale,\ user\_data)\ *\ 2.0f\ /\ scale);}
\DoxyCodeLine{02985\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{02986\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})STBIR\_CEILF(support(scale,\ user\_data)\ *\ 2.0f);}
\DoxyCodeLine{02987\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02988\ \ \ \ \ \ \ STBIR\_ASSERT(\ (is\_gather\ >=\ 0\ )\ \&\&\ (is\_gather\ <=\ 2\ )\ );}
\DoxyCodeLine{02989\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02990\ \ \ \}}
\DoxyCodeLine{02991\ \}}
\DoxyCodeLine{02992\ }
\DoxyCodeLine{02993\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_contributors(stbir\_\_sampler\ *\ samp,\ \textcolor{keywordtype}{int}\ is\_gather)}
\DoxyCodeLine{02994\ \{}
\DoxyCodeLine{02995\ \ \ \textcolor{keywordflow}{if}\ (is\_gather)}
\DoxyCodeLine{02996\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ samp-\/>scale\_info.output\_sub\_size;}
\DoxyCodeLine{02997\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02998\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (samp-\/>scale\_info.input\_full\_size\ +\ samp-\/>filter\_pixel\_margin\ *\ 2);}
\DoxyCodeLine{02999\ \}}
\DoxyCodeLine{03000\ }
\DoxyCodeLine{03001\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_zero\_full(\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max\ )}
\DoxyCodeLine{03002\ \{}
\DoxyCodeLine{03003\ \ \ STBIR\_\_UNUSED(n);}
\DoxyCodeLine{03004\ \ \ STBIR\_\_UNUSED(max);}
\DoxyCodeLine{03005\ \ \ \textcolor{keywordflow}{return}\ 0;\ \textcolor{comment}{//\ NOTREACHED}}
\DoxyCodeLine{03006\ \}}
\DoxyCodeLine{03007\ }
\DoxyCodeLine{03008\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_clamp\_full(\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max\ )}
\DoxyCodeLine{03009\ \{}
\DoxyCodeLine{03010\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)}
\DoxyCodeLine{03011\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{03012\ }
\DoxyCodeLine{03013\ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ max)}
\DoxyCodeLine{03014\ \ \ \ \ \textcolor{keywordflow}{return}\ max\ -\/\ 1;}
\DoxyCodeLine{03015\ }
\DoxyCodeLine{03016\ \ \ \textcolor{keywordflow}{return}\ n;\ \textcolor{comment}{//\ NOTREACHED}}
\DoxyCodeLine{03017\ \}}
\DoxyCodeLine{03018\ }
\DoxyCodeLine{03019\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_reflect\_full(\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max\ )}
\DoxyCodeLine{03020\ \{}
\DoxyCodeLine{03021\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)}
\DoxyCodeLine{03022\ \ \ \{}
\DoxyCodeLine{03023\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >\ -\/max)}
\DoxyCodeLine{03024\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/n;}
\DoxyCodeLine{03025\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03026\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max\ -\/\ 1;}
\DoxyCodeLine{03027\ \ \ \}}
\DoxyCodeLine{03028\ }
\DoxyCodeLine{03029\ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ max)}
\DoxyCodeLine{03030\ \ \ \{}
\DoxyCodeLine{03031\ \ \ \ \ \textcolor{keywordtype}{int}\ max2\ =\ max\ *\ 2;}
\DoxyCodeLine{03032\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ max2)}
\DoxyCodeLine{03033\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{03034\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03035\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max2\ -\/\ n\ -\/\ 1;}
\DoxyCodeLine{03036\ \ \ \}}
\DoxyCodeLine{03037\ }
\DoxyCodeLine{03038\ \ \ \textcolor{keywordflow}{return}\ n;\ \textcolor{comment}{//\ NOTREACHED}}
\DoxyCodeLine{03039\ \}}
\DoxyCodeLine{03040\ }
\DoxyCodeLine{03041\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_wrap\_full(\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max\ )}
\DoxyCodeLine{03042\ \{}
\DoxyCodeLine{03043\ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ 0)}
\DoxyCodeLine{03044\ \ \ \ \ \textcolor{keywordflow}{return}\ (n\ \%\ max);}
\DoxyCodeLine{03045\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03046\ \ \ \{}
\DoxyCodeLine{03047\ \ \ \ \ \textcolor{keywordtype}{int}\ m\ =\ (-\/n)\ \%\ max;}
\DoxyCodeLine{03048\ }
\DoxyCodeLine{03049\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\ !=\ 0)}
\DoxyCodeLine{03050\ \ \ \ \ \ \ m\ =\ max\ -\/\ m;}
\DoxyCodeLine{03051\ }
\DoxyCodeLine{03052\ \ \ \ \ \textcolor{keywordflow}{return}\ (m);}
\DoxyCodeLine{03053\ \ \ \}}
\DoxyCodeLine{03054\ \}}
\DoxyCodeLine{03055\ }
\DoxyCodeLine{03056\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_wrap\_func(\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max\ );}
\DoxyCodeLine{03057\ \textcolor{keyword}{static}\ stbir\_\_edge\_wrap\_func\ *\ stbir\_\_edge\_wrap\_slow[]\ =}
\DoxyCodeLine{03058\ \{}
\DoxyCodeLine{03059\ \ \ stbir\_\_edge\_clamp\_full,\ \ \ \ \textcolor{comment}{//\ STBIR\_EDGE\_CLAMP}}
\DoxyCodeLine{03060\ \ \ stbir\_\_edge\_reflect\_full,\ \ \textcolor{comment}{//\ STBIR\_EDGE\_REFLECT}}
\DoxyCodeLine{03061\ \ \ stbir\_\_edge\_wrap\_full,\ \ \ \ \ \textcolor{comment}{//\ STBIR\_EDGE\_WRAP}}
\DoxyCodeLine{03062\ \ \ stbir\_\_edge\_zero\_full,\ \ \ \ \ \textcolor{comment}{//\ STBIR\_EDGE\_ZERO}}
\DoxyCodeLine{03063\ \};}
\DoxyCodeLine{03064\ }
\DoxyCodeLine{03065\ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_wrap(stbir\_edge\ edge,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max)}
\DoxyCodeLine{03066\ \{}
\DoxyCodeLine{03067\ \ \ \textcolor{comment}{//\ avoid\ per-\/pixel\ switch}}
\DoxyCodeLine{03068\ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ 0\ \&\&\ n\ <\ max)}
\DoxyCodeLine{03069\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ n;}
\DoxyCodeLine{03070\ \ \ \textcolor{keywordflow}{return}\ stbir\_\_edge\_wrap\_slow[edge](\ n,\ max\ );}
\DoxyCodeLine{03071\ \}}
\DoxyCodeLine{03072\ }
\DoxyCodeLine{03073\ \textcolor{preprocessor}{\#define\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ 16}}
\DoxyCodeLine{03074\ }
\DoxyCodeLine{03075\ \textcolor{comment}{//\ get\ information\ on\ the\ extents\ of\ a\ sampler}}
\DoxyCodeLine{03076\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_get\_extents(\ stbir\_\_sampler\ *\ samp,\ stbir\_\_extents\ *\ scanline\_extents\ )}
\DoxyCodeLine{03077\ \{}
\DoxyCodeLine{03078\ \ \ \textcolor{keywordtype}{int}\ j,\ stop;}
\DoxyCodeLine{03079\ \ \ \textcolor{keywordtype}{int}\ left\_margin,\ right\_margin;}
\DoxyCodeLine{03080\ \ \ \textcolor{keywordtype}{int}\ min\_n\ =\ 0x7fffffff,\ max\_n\ =\ -\/0x7fffffff;}
\DoxyCodeLine{03081\ \ \ \textcolor{keywordtype}{int}\ min\_left\ =\ 0x7fffffff,\ max\_left\ =\ -\/0x7fffffff;}
\DoxyCodeLine{03082\ \ \ \textcolor{keywordtype}{int}\ min\_right\ =\ 0x7fffffff,\ max\_right\ =\ -\/0x7fffffff;}
\DoxyCodeLine{03083\ \ \ stbir\_edge\ edge\ =\ samp-\/>edge;}
\DoxyCodeLine{03084\ \ \ stbir\_\_contributors*\ contributors\ =\ samp-\/>contributors;}
\DoxyCodeLine{03085\ \ \ \textcolor{keywordtype}{int}\ output\_sub\_size\ =\ samp-\/>scale\_info.output\_sub\_size;}
\DoxyCodeLine{03086\ \ \ \textcolor{keywordtype}{int}\ input\_full\_size\ =\ samp-\/>scale\_info.input\_full\_size;}
\DoxyCodeLine{03087\ \ \ \textcolor{keywordtype}{int}\ filter\_pixel\_margin\ =\ samp-\/>filter\_pixel\_margin;}
\DoxyCodeLine{03088\ }
\DoxyCodeLine{03089\ \ \ STBIR\_ASSERT(\ samp-\/>is\_gather\ );}
\DoxyCodeLine{03090\ }
\DoxyCodeLine{03091\ \ \ stop\ =\ output\_sub\_size;}
\DoxyCodeLine{03092\ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ stop;\ j++\ )}
\DoxyCodeLine{03093\ \ \ \{}
\DoxyCodeLine{03094\ \ \ \ \ STBIR\_ASSERT(\ contributors[j].n1\ >=\ contributors[j].n0\ );}
\DoxyCodeLine{03095\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contributors[j].n0\ <\ min\_n\ )}
\DoxyCodeLine{03096\ \ \ \ \ \{}
\DoxyCodeLine{03097\ \ \ \ \ \ \ min\_n\ =\ contributors[j].n0;}
\DoxyCodeLine{03098\ \ \ \ \ \ \ stop\ =\ j\ +\ filter\_pixel\_margin;\ \ \textcolor{comment}{//\ if\ we\ find\ a\ new\ min,\ only\ scan\ another\ filter\ width}}
\DoxyCodeLine{03099\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ stop\ >\ output\_sub\_size\ )\ stop\ =\ output\_sub\_size;}
\DoxyCodeLine{03100\ \ \ \ \ \}}
\DoxyCodeLine{03101\ \ \ \}}
\DoxyCodeLine{03102\ }
\DoxyCodeLine{03103\ \ \ stop\ =\ 0;}
\DoxyCodeLine{03104\ \ \ \textcolor{keywordflow}{for}\ (j\ =\ output\_sub\_size\ -\/\ 1;\ j\ >=\ stop;\ j-\/-\/\ )}
\DoxyCodeLine{03105\ \ \ \{}
\DoxyCodeLine{03106\ \ \ \ \ STBIR\_ASSERT(\ contributors[j].n1\ >=\ contributors[j].n0\ );}
\DoxyCodeLine{03107\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contributors[j].n1\ >\ max\_n\ )}
\DoxyCodeLine{03108\ \ \ \ \ \{}
\DoxyCodeLine{03109\ \ \ \ \ \ \ max\_n\ =\ contributors[j].n1;}
\DoxyCodeLine{03110\ \ \ \ \ \ \ stop\ =\ j\ -\/\ filter\_pixel\_margin;\ \ \textcolor{comment}{//\ if\ we\ find\ a\ new\ max,\ only\ scan\ another\ filter\ width}}
\DoxyCodeLine{03111\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stop<0)\ stop\ =\ 0;}
\DoxyCodeLine{03112\ \ \ \ \ \}}
\DoxyCodeLine{03113\ \ \ \}}
\DoxyCodeLine{03114\ }
\DoxyCodeLine{03115\ \ \ STBIR\_ASSERT(\ scanline\_extents-\/>conservative.n0\ <=\ min\_n\ );}
\DoxyCodeLine{03116\ \ \ STBIR\_ASSERT(\ scanline\_extents-\/>conservative.n1\ >=\ max\_n\ );}
\DoxyCodeLine{03117\ }
\DoxyCodeLine{03118\ \ \ \textcolor{comment}{//\ now\ calculate\ how\ much\ into\ the\ margins\ we\ really\ read}}
\DoxyCodeLine{03119\ \ \ left\_margin\ =\ 0;}
\DoxyCodeLine{03120\ \ \ \textcolor{keywordflow}{if}\ (\ min\_n\ <\ 0\ )}
\DoxyCodeLine{03121\ \ \ \{}
\DoxyCodeLine{03122\ \ \ \ \ left\_margin\ =\ -\/min\_n;}
\DoxyCodeLine{03123\ \ \ \ \ min\_n\ =\ 0;}
\DoxyCodeLine{03124\ \ \ \}}
\DoxyCodeLine{03125\ }
\DoxyCodeLine{03126\ \ \ right\_margin\ =\ 0;}
\DoxyCodeLine{03127\ \ \ \textcolor{keywordflow}{if}\ (\ max\_n\ >=\ input\_full\_size\ )}
\DoxyCodeLine{03128\ \ \ \{}
\DoxyCodeLine{03129\ \ \ \ \ right\_margin\ =\ max\_n\ -\/\ input\_full\_size\ +\ 1;}
\DoxyCodeLine{03130\ \ \ \ \ max\_n\ =\ input\_full\_size\ -\/\ 1;}
\DoxyCodeLine{03131\ \ \ \}}
\DoxyCodeLine{03132\ }
\DoxyCodeLine{03133\ \ \ \textcolor{comment}{//\ index\ 1\ is\ margin\ pixel\ extents\ (how\ many\ pixels\ we\ hang\ over\ the\ edge)}}
\DoxyCodeLine{03134\ \ \ scanline\_extents-\/>edge\_sizes[0]\ =\ left\_margin;}
\DoxyCodeLine{03135\ \ \ scanline\_extents-\/>edge\_sizes[1]\ =\ right\_margin;}
\DoxyCodeLine{03136\ }
\DoxyCodeLine{03137\ \ \ \textcolor{comment}{//\ index\ 2\ is\ pixels\ read\ from\ the\ input}}
\DoxyCodeLine{03138\ \ \ scanline\_extents-\/>spans[0].n0\ =\ min\_n;}
\DoxyCodeLine{03139\ \ \ scanline\_extents-\/>spans[0].n1\ =\ max\_n;}
\DoxyCodeLine{03140\ \ \ scanline\_extents-\/>spans[0].pixel\_offset\_for\_input\ =\ min\_n;}
\DoxyCodeLine{03141\ }
\DoxyCodeLine{03142\ \ \ \textcolor{comment}{//\ default\ to\ no\ other\ input\ range}}
\DoxyCodeLine{03143\ \ \ scanline\_extents-\/>spans[1].n0\ =\ 0;}
\DoxyCodeLine{03144\ \ \ scanline\_extents-\/>spans[1].n1\ =\ -\/1;}
\DoxyCodeLine{03145\ \ \ scanline\_extents-\/>spans[1].pixel\_offset\_for\_input\ =\ 0;}
\DoxyCodeLine{03146\ }
\DoxyCodeLine{03147\ \ \ \textcolor{comment}{//\ don't\ have\ to\ do\ edge\ calc\ for\ zero\ clamp}}
\DoxyCodeLine{03148\ \ \ \textcolor{keywordflow}{if}\ (\ edge\ ==\ STBIR\_EDGE\_ZERO\ )}
\DoxyCodeLine{03149\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03150\ }
\DoxyCodeLine{03151\ \ \ \textcolor{comment}{//\ convert\ margin\ pixels\ to\ the\ pixels\ within\ the\ input\ (min\ and\ max)}}
\DoxyCodeLine{03152\ \ \ \textcolor{keywordflow}{for}(\ j\ =\ -\/left\_margin\ ;\ j\ <\ 0\ ;\ j++\ )}
\DoxyCodeLine{03153\ \ \ \{}
\DoxyCodeLine{03154\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ p\ =\ stbir\_\_edge\_wrap(\ edge,\ j,\ input\_full\_size\ );}
\DoxyCodeLine{03155\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ p\ <\ min\_left\ )}
\DoxyCodeLine{03156\ \ \ \ \ \ \ \ \ min\_left\ =\ p;}
\DoxyCodeLine{03157\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ p\ >\ max\_left\ )}
\DoxyCodeLine{03158\ \ \ \ \ \ \ \ \ max\_left\ =\ p;}
\DoxyCodeLine{03159\ \ \ \}}
\DoxyCodeLine{03160\ }
\DoxyCodeLine{03161\ \ \ \textcolor{keywordflow}{for}(\ j\ =\ input\_full\_size\ ;\ j\ <\ (input\_full\_size\ +\ right\_margin)\ ;\ j++\ )}
\DoxyCodeLine{03162\ \ \ \{}
\DoxyCodeLine{03163\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ p\ =\ stbir\_\_edge\_wrap(\ edge,\ j,\ input\_full\_size\ );}
\DoxyCodeLine{03164\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ p\ <\ min\_right\ )}
\DoxyCodeLine{03165\ \ \ \ \ \ \ \ \ min\_right\ =\ p;}
\DoxyCodeLine{03166\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ p\ >\ max\_right\ )}
\DoxyCodeLine{03167\ \ \ \ \ \ \ \ \ max\_right\ =\ p;}
\DoxyCodeLine{03168\ \ \ \}}
\DoxyCodeLine{03169\ }
\DoxyCodeLine{03170\ \ \ \textcolor{comment}{//\ merge\ the\ left\ margin\ pixel\ region\ if\ it\ connects\ within\ 4\ pixels\ of\ main\ pixel\ region}}
\DoxyCodeLine{03171\ \ \ \textcolor{keywordflow}{if}\ (\ min\_left\ !=\ 0x7fffffff\ )}
\DoxyCodeLine{03172\ \ \ \{}
\DoxyCodeLine{03173\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ min\_left\ <=\ min\_n\ )\ \&\&\ (\ (\ max\_left\ \ +\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ )\ >=\ min\_n\ )\ )\ ||}
\DoxyCodeLine{03174\ \ \ \ \ \ \ \ \ \ (\ (\ min\_n\ <=\ min\_left\ )\ \&\&\ (\ (\ max\_n\ \ +\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ )\ >=\ max\_left\ )\ )\ )}
\DoxyCodeLine{03175\ \ \ \ \ \{}
\DoxyCodeLine{03176\ \ \ \ \ \ \ scanline\_extents-\/>spans[0].n0\ =\ min\_n\ =\ stbir\_\_min(\ min\_n,\ min\_left\ );}
\DoxyCodeLine{03177\ \ \ \ \ \ \ scanline\_extents-\/>spans[0].n1\ =\ max\_n\ =\ stbir\_\_max(\ max\_n,\ max\_left\ );}
\DoxyCodeLine{03178\ \ \ \ \ \ \ scanline\_extents-\/>spans[0].pixel\_offset\_for\_input\ =\ min\_n;}
\DoxyCodeLine{03179\ \ \ \ \ \ \ left\_margin\ =\ 0;}
\DoxyCodeLine{03180\ \ \ \ \ \}}
\DoxyCodeLine{03181\ \ \ \}}
\DoxyCodeLine{03182\ }
\DoxyCodeLine{03183\ \ \ \textcolor{comment}{//\ merge\ the\ right\ margin\ pixel\ region\ if\ it\ connects\ within\ 4\ pixels\ of\ main\ pixel\ region}}
\DoxyCodeLine{03184\ \ \ \textcolor{keywordflow}{if}\ (\ min\_right\ !=\ 0x7fffffff\ )}
\DoxyCodeLine{03185\ \ \ \{}
\DoxyCodeLine{03186\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ min\_right\ <=\ min\_n\ )\ \&\&\ (\ (\ max\_right\ \ +\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ )\ >=\ min\_n\ )\ )\ ||}
\DoxyCodeLine{03187\ \ \ \ \ \ \ \ \ \ (\ (\ min\_n\ <=\ min\_right\ )\ \&\&\ (\ (\ max\_n\ \ +\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ )\ >=\ max\_right\ )\ )\ )}
\DoxyCodeLine{03188\ \ \ \ \ \{}
\DoxyCodeLine{03189\ \ \ \ \ \ \ scanline\_extents-\/>spans[0].n0\ =\ min\_n\ =\ stbir\_\_min(\ min\_n,\ min\_right\ );}
\DoxyCodeLine{03190\ \ \ \ \ \ \ scanline\_extents-\/>spans[0].n1\ =\ max\_n\ =\ stbir\_\_max(\ max\_n,\ max\_right\ );}
\DoxyCodeLine{03191\ \ \ \ \ \ \ scanline\_extents-\/>spans[0].pixel\_offset\_for\_input\ =\ min\_n;}
\DoxyCodeLine{03192\ \ \ \ \ \ \ right\_margin\ =\ 0;}
\DoxyCodeLine{03193\ \ \ \ \ \}}
\DoxyCodeLine{03194\ \ \ \}}
\DoxyCodeLine{03195\ }
\DoxyCodeLine{03196\ \ \ STBIR\_ASSERT(\ scanline\_extents-\/>conservative.n0\ <=\ min\_n\ );}
\DoxyCodeLine{03197\ \ \ STBIR\_ASSERT(\ scanline\_extents-\/>conservative.n1\ >=\ max\_n\ );}
\DoxyCodeLine{03198\ }
\DoxyCodeLine{03199\ \ \ \textcolor{comment}{//\ you\ get\ two\ ranges\ when\ you\ have\ the\ WRAP\ edge\ mode\ and\ you\ are\ doing\ just\ the\ a\ piece\ of\ the\ resize}}
\DoxyCodeLine{03200\ \ \ \textcolor{comment}{//\ \ \ so\ you\ need\ to\ get\ a\ second\ run\ of\ pixels\ from\ the\ opposite\ side\ of\ the\ scanline\ (which\ you}}
\DoxyCodeLine{03201\ \ \ \textcolor{comment}{//\ \ \ wouldn't\ need\ except\ for\ WRAP)}}
\DoxyCodeLine{03202\ }
\DoxyCodeLine{03203\ }
\DoxyCodeLine{03204\ \ \ \textcolor{comment}{//\ if\ we\ can't\ merge\ the\ min\_left\ range,\ add\ it\ as\ a\ second\ range}}
\DoxyCodeLine{03205\ \ \ \textcolor{keywordflow}{if}\ (\ (\ left\_margin\ )\ \&\&\ (\ min\_left\ !=\ 0x7fffffff\ )\ )}
\DoxyCodeLine{03206\ \ \ \{}
\DoxyCodeLine{03207\ \ \ \ \ stbir\_\_span\ *\ newspan\ =\ scanline\_extents-\/>spans\ +\ 1;}
\DoxyCodeLine{03208\ \ \ \ \ STBIR\_ASSERT(\ right\_margin\ ==\ 0\ );}
\DoxyCodeLine{03209\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ min\_left\ <\ scanline\_extents-\/>spans[0].n0\ )}
\DoxyCodeLine{03210\ \ \ \ \ \{}
\DoxyCodeLine{03211\ \ \ \ \ \ \ scanline\_extents-\/>spans[1].pixel\_offset\_for\_input\ =\ scanline\_extents-\/>spans[0].n0;}
\DoxyCodeLine{03212\ \ \ \ \ \ \ scanline\_extents-\/>spans[1].n0\ =\ scanline\_extents-\/>spans[0].n0;}
\DoxyCodeLine{03213\ \ \ \ \ \ \ scanline\_extents-\/>spans[1].n1\ =\ scanline\_extents-\/>spans[0].n1;}
\DoxyCodeLine{03214\ \ \ \ \ \ \ -\/-\/newspan;}
\DoxyCodeLine{03215\ \ \ \ \ \}}
\DoxyCodeLine{03216\ \ \ \ \ newspan-\/>pixel\_offset\_for\_input\ =\ min\_left;}
\DoxyCodeLine{03217\ \ \ \ \ newspan-\/>n0\ =\ -\/left\_margin;}
\DoxyCodeLine{03218\ \ \ \ \ newspan-\/>n1\ =\ (\ max\_left\ -\/\ min\_left\ )\ -\/\ left\_margin;}
\DoxyCodeLine{03219\ \ \ \ \ scanline\_extents-\/>edge\_sizes[0]\ =\ 0;\ \ \textcolor{comment}{//\ don't\ need\ to\ copy\ the\ left\ margin,\ since\ we\ are\ directly\ decoding\ into\ the\ margin}}
\DoxyCodeLine{03220\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03221\ \ \ \}}
\DoxyCodeLine{03222\ }
\DoxyCodeLine{03223\ \ \ \textcolor{comment}{//\ if\ we\ can't\ merge\ the\ min\_left\ range,\ add\ it\ as\ a\ second\ range}}
\DoxyCodeLine{03224\ \ \ \textcolor{keywordflow}{if}\ (\ (\ right\_margin\ )\ \&\&\ (\ min\_right\ !=\ 0x7fffffff\ )\ )}
\DoxyCodeLine{03225\ \ \ \{}
\DoxyCodeLine{03226\ \ \ \ \ stbir\_\_span\ *\ newspan\ =\ scanline\_extents-\/>spans\ +\ 1;}
\DoxyCodeLine{03227\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ min\_right\ <\ scanline\_extents-\/>spans[0].n0\ )}
\DoxyCodeLine{03228\ \ \ \ \ \{}
\DoxyCodeLine{03229\ \ \ \ \ \ \ scanline\_extents-\/>spans[1].pixel\_offset\_for\_input\ =\ scanline\_extents-\/>spans[0].n0;}
\DoxyCodeLine{03230\ \ \ \ \ \ \ scanline\_extents-\/>spans[1].n0\ =\ scanline\_extents-\/>spans[0].n0;}
\DoxyCodeLine{03231\ \ \ \ \ \ \ scanline\_extents-\/>spans[1].n1\ =\ scanline\_extents-\/>spans[0].n1;}
\DoxyCodeLine{03232\ \ \ \ \ \ \ -\/-\/newspan;}
\DoxyCodeLine{03233\ \ \ \ \ \}}
\DoxyCodeLine{03234\ \ \ \ \ newspan-\/>pixel\_offset\_for\_input\ =\ min\_right;}
\DoxyCodeLine{03235\ \ \ \ \ newspan-\/>n0\ =\ scanline\_extents-\/>spans[1].n1\ +\ 1;}
\DoxyCodeLine{03236\ \ \ \ \ newspan-\/>n1\ =\ scanline\_extents-\/>spans[1].n1\ +\ 1\ +\ (\ max\_right\ -\/\ min\_right\ );}
\DoxyCodeLine{03237\ \ \ \ \ scanline\_extents-\/>edge\_sizes[1]\ =\ 0;\ \ \textcolor{comment}{//\ don't\ need\ to\ copy\ the\ right\ margin,\ since\ we\ are\ directly\ decoding\ into\ the\ margin}}
\DoxyCodeLine{03238\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03239\ \ \ \}}
\DoxyCodeLine{03240\ \}}
\DoxyCodeLine{03241\ }
\DoxyCodeLine{03242\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_in\_pixel\_range(\ \textcolor{keywordtype}{int}\ *\ first\_pixel,\ \textcolor{keywordtype}{int}\ *\ last\_pixel,\ \textcolor{keywordtype}{float}\ out\_pixel\_center,\ \textcolor{keywordtype}{float}\ out\_filter\_radius,\ \textcolor{keywordtype}{float}\ inv\_scale,\ \textcolor{keywordtype}{float}\ out\_shift,\ \textcolor{keywordtype}{int}\ input\_size,\ stbir\_edge\ edge\ )}
\DoxyCodeLine{03243\ \{}
\DoxyCodeLine{03244\ \ \ \textcolor{keywordtype}{int}\ first,\ last;}
\DoxyCodeLine{03245\ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_lowerbound\ =\ out\_pixel\_center\ -\/\ out\_filter\_radius;}
\DoxyCodeLine{03246\ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_upperbound\ =\ out\_pixel\_center\ +\ out\_filter\_radius;}
\DoxyCodeLine{03247\ }
\DoxyCodeLine{03248\ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_lowerbound\ =\ (out\_pixel\_influence\_lowerbound\ +\ out\_shift)\ *\ inv\_scale;}
\DoxyCodeLine{03249\ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_upperbound\ =\ (out\_pixel\_influence\_upperbound\ +\ out\_shift)\ *\ inv\_scale;}
\DoxyCodeLine{03250\ }
\DoxyCodeLine{03251\ \ \ first\ =\ (int)(STBIR\_FLOORF(in\_pixel\_influence\_lowerbound\ +\ 0.5f));}
\DoxyCodeLine{03252\ \ \ last\ =\ (int)(STBIR\_FLOORF(in\_pixel\_influence\_upperbound\ -\/\ 0.5f));}
\DoxyCodeLine{03253\ \ \ \textcolor{keywordflow}{if}\ (\ last\ <\ first\ )\ last\ =\ first;\ \textcolor{comment}{//\ point\ sample\ mode\ can\ span\ a\ value\ *right*\ at\ 0.5,\ and\ cause\ these\ to\ cross}}
\DoxyCodeLine{03254\ }
\DoxyCodeLine{03255\ \ \ \textcolor{keywordflow}{if}\ (\ edge\ ==\ STBIR\_EDGE\_WRAP\ )}
\DoxyCodeLine{03256\ \ \ \{}
\DoxyCodeLine{03257\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ first\ <\ -\/input\_size\ )}
\DoxyCodeLine{03258\ \ \ \ \ \ \ first\ =\ -\/input\_size;}
\DoxyCodeLine{03259\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ last\ >=\ (input\_size*2))}
\DoxyCodeLine{03260\ \ \ \ \ \ \ last\ =\ (input\_size*2)\ -\/\ 1;}
\DoxyCodeLine{03261\ \ \ \}}
\DoxyCodeLine{03262\ }
\DoxyCodeLine{03263\ \ \ *first\_pixel\ =\ first;}
\DoxyCodeLine{03264\ \ \ *last\_pixel\ =\ last;}
\DoxyCodeLine{03265\ \}}
\DoxyCodeLine{03266\ }
\DoxyCodeLine{03267\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_coefficients\_for\_gather\_upsample(\ \textcolor{keywordtype}{float}\ out\_filter\_radius,\ stbir\_\_kernel\_callback\ *\ kernel,\ stbir\_\_scale\_info\ *\ scale\_info,\ \textcolor{keywordtype}{int}\ num\_contributors,\ stbir\_\_contributors*\ contributors,\ \textcolor{keywordtype}{float}*\ coefficient\_group,\ \textcolor{keywordtype}{int}\ coefficient\_width,\ stbir\_edge\ edge,\ \textcolor{keywordtype}{void}\ *\ user\_data\ )}
\DoxyCodeLine{03268\ \{}
\DoxyCodeLine{03269\ \ \ \textcolor{keywordtype}{int}\ n,\ end;}
\DoxyCodeLine{03270\ \ \ \textcolor{keywordtype}{float}\ inv\_scale\ =\ scale\_info-\/>inv\_scale;}
\DoxyCodeLine{03271\ \ \ \textcolor{keywordtype}{float}\ out\_shift\ =\ scale\_info-\/>pixel\_shift;}
\DoxyCodeLine{03272\ \ \ \textcolor{keywordtype}{int}\ input\_size\ \ =\ scale\_info-\/>input\_full\_size;}
\DoxyCodeLine{03273\ \ \ \textcolor{keywordtype}{int}\ numerator\ =\ scale\_info-\/>scale\_numerator;}
\DoxyCodeLine{03274\ \ \ \textcolor{keywordtype}{int}\ polyphase\ =\ (\ (\ scale\_info-\/>scale\_is\_rational\ )\ \&\&\ (\ numerator\ <\ num\_contributors\ )\ );}
\DoxyCodeLine{03275\ }
\DoxyCodeLine{03276\ \ \ \textcolor{comment}{//\ Looping\ through\ out\ pixels}}
\DoxyCodeLine{03277\ \ \ end\ =\ num\_contributors;\ \textcolor{keywordflow}{if}\ (\ polyphase\ )\ end\ =\ numerator;}
\DoxyCodeLine{03278\ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ end;\ n++)}
\DoxyCodeLine{03279\ \ \ \{}
\DoxyCodeLine{03280\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{03281\ \ \ \ \ \textcolor{keywordtype}{int}\ last\_non\_zero;}
\DoxyCodeLine{03282\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_center\ =\ (float)n\ +\ 0.5f;}
\DoxyCodeLine{03283\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_center\_of\_out\ =\ (out\_pixel\_center\ +\ out\_shift)\ *\ inv\_scale;}
\DoxyCodeLine{03284\ }
\DoxyCodeLine{03285\ \ \ \ \ \textcolor{keywordtype}{int}\ in\_first\_pixel,\ in\_last\_pixel;}
\DoxyCodeLine{03286\ }
\DoxyCodeLine{03287\ \ \ \ \ stbir\_\_calculate\_in\_pixel\_range(\ \&in\_first\_pixel,\ \&in\_last\_pixel,\ out\_pixel\_center,\ out\_filter\_radius,\ inv\_scale,\ out\_shift,\ input\_size,\ edge\ );}
\DoxyCodeLine{03288\ }
\DoxyCodeLine{03289\ \ \ \ \ \textcolor{comment}{//\ make\ sure\ we\ never\ generate\ a\ range\ larger\ than\ our\ precalculated\ coeff\ width}}
\DoxyCodeLine{03290\ \ \ \ \ \textcolor{comment}{//\ \ \ this\ only\ happens\ in\ point\ sample\ mode,\ but\ it's\ a\ good\ safe\ thing\ to\ do\ anyway}}
\DoxyCodeLine{03291\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ in\_last\_pixel\ -\/\ in\_first\_pixel\ +\ 1\ )\ >\ coefficient\_width\ )}
\DoxyCodeLine{03292\ \ \ \ \ \ \ in\_last\_pixel\ =\ in\_first\_pixel\ +\ coefficient\_width\ -\/\ 1;}
\DoxyCodeLine{03293\ }
\DoxyCodeLine{03294\ \ \ \ \ last\_non\_zero\ =\ -\/1;}
\DoxyCodeLine{03295\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <=\ in\_last\_pixel\ -\/\ in\_first\_pixel;\ i++)}
\DoxyCodeLine{03296\ \ \ \ \ \{}
\DoxyCodeLine{03297\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_center\ =\ (float)(i\ +\ in\_first\_pixel)\ +\ 0.5f;}
\DoxyCodeLine{03298\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coeff\ =\ kernel(in\_center\_of\_out\ -\/\ in\_pixel\_center,\ inv\_scale,\ user\_data);}
\DoxyCodeLine{03299\ }
\DoxyCodeLine{03300\ \ \ \ \ \ \ \textcolor{comment}{//\ kill\ denormals}}
\DoxyCodeLine{03301\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ coeff\ <\ stbir\_\_small\_float\ )\ \&\&\ (\ coeff\ >\ -\/stbir\_\_small\_float\ )\ )\ )}
\DoxyCodeLine{03302\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ i\ ==\ 0\ )\ \ \textcolor{comment}{//\ if\ we're\ at\ the\ front,\ just\ eat\ zero\ contributors}}
\DoxyCodeLine{03304\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03305\ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT\ (\ (\ in\_last\_pixel\ -\/\ in\_first\_pixel\ )\ !=\ 0\ );\ \textcolor{comment}{//\ there\ should\ be\ at\ least\ one\ contrib}}
\DoxyCodeLine{03306\ \ \ \ \ \ \ \ \ \ \ ++in\_first\_pixel;}
\DoxyCodeLine{03307\ \ \ \ \ \ \ \ \ \ \ i-\/-\/;}
\DoxyCodeLine{03308\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03309\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03310\ \ \ \ \ \ \ \ \ coeff\ =\ 0;\ \ \textcolor{comment}{//\ make\ sure\ is\ fully\ zero\ (should\ keep\ denormals\ away)}}
\DoxyCodeLine{03311\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03312\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03313\ \ \ \ \ \ \ \ \ last\_non\_zero\ =\ i;}
\DoxyCodeLine{03314\ }
\DoxyCodeLine{03315\ \ \ \ \ \ \ coefficient\_group[i]\ =\ coeff;}
\DoxyCodeLine{03316\ \ \ \ \ \}}
\DoxyCodeLine{03317\ }
\DoxyCodeLine{03318\ \ \ \ \ in\_last\_pixel\ =\ last\_non\_zero+in\_first\_pixel;\ \textcolor{comment}{//\ kills\ trailing\ zeros}}
\DoxyCodeLine{03319\ \ \ \ \ contributors-\/>n0\ =\ in\_first\_pixel;}
\DoxyCodeLine{03320\ \ \ \ \ contributors-\/>n1\ =\ in\_last\_pixel;}
\DoxyCodeLine{03321\ }
\DoxyCodeLine{03322\ \ \ \ \ STBIR\_ASSERT(contributors-\/>n1\ >=\ contributors-\/>n0);}
\DoxyCodeLine{03323\ }
\DoxyCodeLine{03324\ \ \ \ \ ++contributors;}
\DoxyCodeLine{03325\ \ \ \ \ coefficient\_group\ +=\ coefficient\_width;}
\DoxyCodeLine{03326\ \ \ \}}
\DoxyCodeLine{03327\ \}}
\DoxyCodeLine{03328\ }
\DoxyCodeLine{03329\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_insert\_coeff(\ stbir\_\_contributors\ *\ contribs,\ \textcolor{keywordtype}{float}\ *\ coeffs,\ \textcolor{keywordtype}{int}\ new\_pixel,\ \textcolor{keywordtype}{float}\ new\_coeff,\ \textcolor{keywordtype}{int}\ max\_width\ )}
\DoxyCodeLine{03330\ \{}
\DoxyCodeLine{03331\ \ \ \textcolor{keywordflow}{if}\ (\ new\_pixel\ <=\ contribs-\/>n1\ )\ \ \textcolor{comment}{//\ before\ the\ end}}
\DoxyCodeLine{03332\ \ \ \{}
\DoxyCodeLine{03333\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ new\_pixel\ <\ contribs-\/>n0\ )\ \textcolor{comment}{//\ before\ the\ front?}}
\DoxyCodeLine{03334\ \ \ \ \ \{}
\DoxyCodeLine{03335\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ contribs-\/>n1\ -\/\ new\_pixel\ +\ 1\ )\ <=\ max\_width\ )}
\DoxyCodeLine{03336\ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{03337\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ j,\ o\ =\ contribs-\/>n0\ -\/\ new\_pixel;}
\DoxyCodeLine{03338\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ j\ =\ contribs-\/>n1\ -\/\ contribs-\/>n0\ ;\ j\ <=\ 0\ ;\ j-\/-\/\ )}
\DoxyCodeLine{03339\ \ \ \ \ \ \ \ \ \ \ coeffs[\ j\ +\ o\ ]\ =\ coeffs[\ j\ ];}
\DoxyCodeLine{03340\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ j\ =\ 1\ ;\ j\ <\ o\ ;\ j-\/-\/\ )}
\DoxyCodeLine{03341\ \ \ \ \ \ \ \ \ \ \ coeffs[\ j\ ]\ =\ coeffs[\ 0\ ];}
\DoxyCodeLine{03342\ \ \ \ \ \ \ \ \ coeffs[\ 0\ ]\ =\ new\_coeff;}
\DoxyCodeLine{03343\ \ \ \ \ \ \ \ \ contribs-\/>n0\ =\ new\_pixel;}
\DoxyCodeLine{03344\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03345\ \ \ \ \ \}}
\DoxyCodeLine{03346\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03347\ \ \ \ \ \{}
\DoxyCodeLine{03348\ \ \ \ \ \ \ coeffs[\ new\_pixel\ -\/\ contribs-\/>n0\ ]\ +=\ new\_coeff;}
\DoxyCodeLine{03349\ \ \ \ \ \}}
\DoxyCodeLine{03350\ \ \ \}}
\DoxyCodeLine{03351\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03352\ \ \ \{}
\DoxyCodeLine{03353\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ new\_pixel\ -\/\ contribs-\/>n0\ +\ 1\ )\ <=\ max\_width\ )}
\DoxyCodeLine{03354\ \ \ \ \ \{}
\DoxyCodeLine{03355\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ j,\ e\ =\ new\_pixel\ -\/\ contribs-\/>n0;}
\DoxyCodeLine{03356\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ j\ =\ (\ contribs-\/>n1\ -\/\ contribs-\/>n0\ )\ +\ 1\ ;\ j\ <\ e\ ;\ j++\ )\ \textcolor{comment}{//\ clear\ in-\/betweens\ coeffs\ if\ there\ are\ any}}
\DoxyCodeLine{03357\ \ \ \ \ \ \ \ \ coeffs[j]\ =\ 0;}
\DoxyCodeLine{03358\ }
\DoxyCodeLine{03359\ \ \ \ \ \ \ coeffs[\ e\ ]\ =\ new\_coeff;}
\DoxyCodeLine{03360\ \ \ \ \ \ \ contribs-\/>n1\ =\ new\_pixel;}
\DoxyCodeLine{03361\ \ \ \ \ \}}
\DoxyCodeLine{03362\ \ \ \}}
\DoxyCodeLine{03363\ \}}
\DoxyCodeLine{03364\ }
\DoxyCodeLine{03365\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_out\_pixel\_range(\ \textcolor{keywordtype}{int}\ *\ first\_pixel,\ \textcolor{keywordtype}{int}\ *\ last\_pixel,\ \textcolor{keywordtype}{float}\ in\_pixel\_center,\ \textcolor{keywordtype}{float}\ in\_pixels\_radius,\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{float}\ out\_shift,\ \textcolor{keywordtype}{int}\ out\_size\ )}
\DoxyCodeLine{03366\ \{}
\DoxyCodeLine{03367\ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_lowerbound\ =\ in\_pixel\_center\ -\/\ in\_pixels\_radius;}
\DoxyCodeLine{03368\ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_upperbound\ =\ in\_pixel\_center\ +\ in\_pixels\_radius;}
\DoxyCodeLine{03369\ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_lowerbound\ =\ in\_pixel\_influence\_lowerbound\ *\ scale\ -\/\ out\_shift;}
\DoxyCodeLine{03370\ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_upperbound\ =\ in\_pixel\_influence\_upperbound\ *\ scale\ -\/\ out\_shift;}
\DoxyCodeLine{03371\ \ \ \textcolor{keywordtype}{int}\ out\_first\_pixel\ =\ (int)(STBIR\_FLOORF(out\_pixel\_influence\_lowerbound\ +\ 0.5f));}
\DoxyCodeLine{03372\ \ \ \textcolor{keywordtype}{int}\ out\_last\_pixel\ =\ (int)(STBIR\_FLOORF(out\_pixel\_influence\_upperbound\ -\/\ 0.5f));}
\DoxyCodeLine{03373\ }
\DoxyCodeLine{03374\ \ \ \textcolor{keywordflow}{if}\ (\ out\_first\_pixel\ <\ 0\ )}
\DoxyCodeLine{03375\ \ \ \ \ out\_first\_pixel\ =\ 0;}
\DoxyCodeLine{03376\ \ \ \textcolor{keywordflow}{if}\ (\ out\_last\_pixel\ >=\ out\_size\ )}
\DoxyCodeLine{03377\ \ \ \ \ out\_last\_pixel\ =\ out\_size\ -\/\ 1;}
\DoxyCodeLine{03378\ \ \ *first\_pixel\ =\ out\_first\_pixel;}
\DoxyCodeLine{03379\ \ \ *last\_pixel\ =\ out\_last\_pixel;}
\DoxyCodeLine{03380\ \}}
\DoxyCodeLine{03381\ }
\DoxyCodeLine{03382\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_coefficients\_for\_gather\_downsample(\ \textcolor{keywordtype}{int}\ start,\ \textcolor{keywordtype}{int}\ end,\ \textcolor{keywordtype}{float}\ in\_pixels\_radius,\ stbir\_\_kernel\_callback\ *\ kernel,\ stbir\_\_scale\_info\ *\ scale\_info,\ \textcolor{keywordtype}{int}\ coefficient\_width,\ \textcolor{keywordtype}{int}\ num\_contributors,\ stbir\_\_contributors\ *\ contributors,\ \textcolor{keywordtype}{float}\ *\ coefficient\_group,\ \textcolor{keywordtype}{void}\ *\ user\_data\ )}
\DoxyCodeLine{03383\ \{}
\DoxyCodeLine{03384\ \ \ \textcolor{keywordtype}{int}\ in\_pixel;}
\DoxyCodeLine{03385\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{03386\ \ \ \textcolor{keywordtype}{int}\ first\_out\_inited\ =\ -\/1;}
\DoxyCodeLine{03387\ \ \ \textcolor{keywordtype}{float}\ scale\ =\ scale\_info-\/>scale;}
\DoxyCodeLine{03388\ \ \ \textcolor{keywordtype}{float}\ out\_shift\ =\ scale\_info-\/>pixel\_shift;}
\DoxyCodeLine{03389\ \ \ \textcolor{keywordtype}{int}\ out\_size\ =\ scale\_info-\/>output\_sub\_size;}
\DoxyCodeLine{03390\ \ \ \textcolor{keywordtype}{int}\ numerator\ =\ scale\_info-\/>scale\_numerator;}
\DoxyCodeLine{03391\ \ \ \textcolor{keywordtype}{int}\ polyphase\ =\ (\ (\ scale\_info-\/>scale\_is\_rational\ )\ \&\&\ (\ numerator\ <\ out\_size\ )\ );}
\DoxyCodeLine{03392\ }
\DoxyCodeLine{03393\ \ \ STBIR\_\_UNUSED(num\_contributors);}
\DoxyCodeLine{03394\ }
\DoxyCodeLine{03395\ \ \ \textcolor{comment}{//\ Loop\ through\ the\ input\ pixels}}
\DoxyCodeLine{03396\ \ \ \textcolor{keywordflow}{for}\ (in\_pixel\ =\ start;\ in\_pixel\ <\ end;\ in\_pixel++)}
\DoxyCodeLine{03397\ \ \ \{}
\DoxyCodeLine{03398\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_center\ =\ (float)in\_pixel\ +\ 0.5f;}
\DoxyCodeLine{03399\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_center\_of\_in\ =\ in\_pixel\_center\ *\ scale\ -\/\ out\_shift;}
\DoxyCodeLine{03400\ \ \ \ \ \textcolor{keywordtype}{int}\ out\_first\_pixel,\ out\_last\_pixel;}
\DoxyCodeLine{03401\ }
\DoxyCodeLine{03402\ \ \ \ \ stbir\_\_calculate\_out\_pixel\_range(\ \&out\_first\_pixel,\ \&out\_last\_pixel,\ in\_pixel\_center,\ in\_pixels\_radius,\ scale,\ out\_shift,\ out\_size\ );}
\DoxyCodeLine{03403\ }
\DoxyCodeLine{03404\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_first\_pixel\ >\ out\_last\_pixel\ )}
\DoxyCodeLine{03405\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03406\ }
\DoxyCodeLine{03407\ \ \ \ \ \textcolor{comment}{//\ clamp\ or\ exit\ if\ we\ are\ using\ polyphase\ filtering,\ and\ the\ limit\ is\ up}}
\DoxyCodeLine{03408\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ polyphase\ )}
\DoxyCodeLine{03409\ \ \ \ \ \{}
\DoxyCodeLine{03410\ \ \ \ \ \ \ \textcolor{comment}{//\ when\ polyphase,\ you\ only\ have\ to\ do\ coeffs\ up\ to\ the\ numerator\ count}}
\DoxyCodeLine{03411\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_first\_pixel\ ==\ numerator\ )}
\DoxyCodeLine{03412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03413\ }
\DoxyCodeLine{03414\ \ \ \ \ \ \ \textcolor{comment}{//\ don't\ do\ any\ extra\ work,\ clamp\ last\ pixel\ at\ numerator\ too}}
\DoxyCodeLine{03415\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_last\_pixel\ >=\ numerator\ )}
\DoxyCodeLine{03416\ \ \ \ \ \ \ \ \ out\_last\_pixel\ =\ numerator\ -\/\ 1;}
\DoxyCodeLine{03417\ \ \ \ \ \}}
\DoxyCodeLine{03418\ }
\DoxyCodeLine{03419\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <=\ out\_last\_pixel\ -\/\ out\_first\_pixel;\ i++)}
\DoxyCodeLine{03420\ \ \ \ \ \{}
\DoxyCodeLine{03421\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_center\ =\ (float)(i\ +\ out\_first\_pixel)\ +\ 0.5f;}
\DoxyCodeLine{03422\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\ =\ out\_pixel\_center\ -\/\ out\_center\_of\_in;}
\DoxyCodeLine{03423\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coeff\ =\ kernel(x,\ scale,\ user\_data)\ *\ scale;}
\DoxyCodeLine{03424\ }
\DoxyCodeLine{03425\ \ \ \ \ \ \ \textcolor{comment}{//\ kill\ the\ coeff\ if\ it's\ too\ small\ (avoid\ denormals)}}
\DoxyCodeLine{03426\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ coeff\ <\ stbir\_\_small\_float\ )\ \&\&\ (\ coeff\ >\ -\/stbir\_\_small\_float\ )\ )\ )}
\DoxyCodeLine{03427\ \ \ \ \ \ \ \ \ coeff\ =\ 0.0f;}
\DoxyCodeLine{03428\ }
\DoxyCodeLine{03429\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03430\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\ =\ i\ +\ out\_first\_pixel;}
\DoxyCodeLine{03431\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ coeffs\ =\ coefficient\_group\ +\ out\ *\ coefficient\_width;}
\DoxyCodeLine{03432\ \ \ \ \ \ \ \ \ stbir\_\_contributors\ *\ contribs\ =\ contributors\ +\ out;}
\DoxyCodeLine{03433\ }
\DoxyCodeLine{03434\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ this\ the\ first\ time\ this\ output\ pixel\ has\ been\ seen?\ \ Init\ it.}}
\DoxyCodeLine{03435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\ >\ first\_out\_inited\ )}
\DoxyCodeLine{03436\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03437\ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(\ out\ ==\ (\ first\_out\_inited\ +\ 1\ )\ );\ \textcolor{comment}{//\ ensure\ we\ have\ only\ advanced\ one\ at\ time}}
\DoxyCodeLine{03438\ \ \ \ \ \ \ \ \ \ \ first\_out\_inited\ =\ out;}
\DoxyCodeLine{03439\ \ \ \ \ \ \ \ \ \ \ contribs-\/>n0\ =\ in\_pixel;}
\DoxyCodeLine{03440\ \ \ \ \ \ \ \ \ \ \ contribs-\/>n1\ =\ in\_pixel;}
\DoxyCodeLine{03441\ \ \ \ \ \ \ \ \ \ \ coeffs[0]\ \ =\ coeff;}
\DoxyCodeLine{03442\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03443\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03444\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03445\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ insert\ on\ end\ (always\ in\ order)}}
\DoxyCodeLine{03446\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ coeffs[0]\ ==\ 0.0f\ )\ \ \textcolor{comment}{//\ if\ the\ first\ coefficent\ is\ zero,\ then\ zap\ it\ for\ this\ coeffs}}
\DoxyCodeLine{03447\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03448\ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(\ (\ in\_pixel\ -\/\ contribs-\/>n0\ )\ ==\ 1\ );\ \textcolor{comment}{//\ ensure\ that\ when\ we\ zap,\ we're\ at\ the\ 2nd\ pos}}
\DoxyCodeLine{03449\ \ \ \ \ \ \ \ \ \ \ \ \ contribs-\/>n0\ =\ in\_pixel;}
\DoxyCodeLine{03450\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03451\ \ \ \ \ \ \ \ \ \ \ contribs-\/>n1\ =\ in\_pixel;}
\DoxyCodeLine{03452\ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(\ (\ in\_pixel\ -\/\ contribs-\/>n0\ )\ <\ coefficient\_width\ );}
\DoxyCodeLine{03453\ \ \ \ \ \ \ \ \ \ \ coeffs[in\_pixel\ -\/\ contribs-\/>n0]\ \ =\ coeff;}
\DoxyCodeLine{03454\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03455\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03456\ \ \ \ \ \}}
\DoxyCodeLine{03457\ \ \ \}}
\DoxyCodeLine{03458\ \}}
\DoxyCodeLine{03459\ }
\DoxyCodeLine{03460\ \textcolor{preprocessor}{\#ifdef\ STBIR\_RENORMALIZE\_IN\_FLOAT}}
\DoxyCodeLine{03461\ \textcolor{preprocessor}{\#define\ STBIR\_RENORM\_TYPE\ float}}
\DoxyCodeLine{03462\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03463\ \textcolor{preprocessor}{\#define\ STBIR\_RENORM\_TYPE\ double}}
\DoxyCodeLine{03464\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03465\ }
\DoxyCodeLine{03466\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_cleanup\_gathered\_coefficients(\ stbir\_edge\ edge,\ stbir\_\_filter\_extent\_info*\ filter\_info,\ stbir\_\_scale\_info\ *\ scale\_info,\ \textcolor{keywordtype}{int}\ num\_contributors,\ stbir\_\_contributors*\ contributors,\ \textcolor{keywordtype}{float}\ *\ coefficient\_group,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{03467\ \{}
\DoxyCodeLine{03468\ \ \ \textcolor{keywordtype}{int}\ input\_size\ =\ scale\_info-\/>input\_full\_size;}
\DoxyCodeLine{03469\ \ \ \textcolor{keywordtype}{int}\ input\_last\_n1\ =\ input\_size\ -\/\ 1;}
\DoxyCodeLine{03470\ \ \ \textcolor{keywordtype}{int}\ n,\ end;}
\DoxyCodeLine{03471\ \ \ \textcolor{keywordtype}{int}\ lowest\ =\ 0x7fffffff;}
\DoxyCodeLine{03472\ \ \ \textcolor{keywordtype}{int}\ highest\ =\ -\/0x7fffffff;}
\DoxyCodeLine{03473\ \ \ \textcolor{keywordtype}{int}\ widest\ =\ -\/1;}
\DoxyCodeLine{03474\ \ \ \textcolor{keywordtype}{int}\ numerator\ =\ scale\_info-\/>scale\_numerator;}
\DoxyCodeLine{03475\ \ \ \textcolor{keywordtype}{int}\ denominator\ =\ scale\_info-\/>scale\_denominator;}
\DoxyCodeLine{03476\ \ \ \textcolor{keywordtype}{int}\ polyphase\ =\ (\ (\ scale\_info-\/>scale\_is\_rational\ )\ \&\&\ (\ numerator\ <\ num\_contributors\ )\ );}
\DoxyCodeLine{03477\ \ \ \textcolor{keywordtype}{float}\ *\ coeffs;}
\DoxyCodeLine{03478\ \ \ stbir\_\_contributors\ *\ contribs;}
\DoxyCodeLine{03479\ }
\DoxyCodeLine{03480\ \ \ \textcolor{comment}{//\ weight\ all\ the\ coeffs\ for\ each\ sample}}
\DoxyCodeLine{03481\ \ \ coeffs\ =\ coefficient\_group;}
\DoxyCodeLine{03482\ \ \ contribs\ =\ contributors;}
\DoxyCodeLine{03483\ \ \ end\ =\ num\_contributors;\ \textcolor{keywordflow}{if}\ (\ polyphase\ )\ end\ =\ numerator;}
\DoxyCodeLine{03484\ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ end;\ n++)}
\DoxyCodeLine{03485\ \ \ \{}
\DoxyCodeLine{03486\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{03487\ \ \ \ \ STBIR\_RENORM\_TYPE\ filter\_scale,\ total\_filter\ =\ 0;}
\DoxyCodeLine{03488\ \ \ \ \ \textcolor{keywordtype}{int}\ e;}
\DoxyCodeLine{03489\ }
\DoxyCodeLine{03490\ \ \ \ \ \textcolor{comment}{//\ add\ all\ contribs}}
\DoxyCodeLine{03491\ \ \ \ \ e\ =\ contribs-\/>n1\ -\/\ contribs-\/>n0;}
\DoxyCodeLine{03492\ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <=\ e\ ;\ i++\ )}
\DoxyCodeLine{03493\ \ \ \ \ \{}
\DoxyCodeLine{03494\ \ \ \ \ \ \ total\_filter\ +=\ (STBIR\_RENORM\_TYPE)\ coeffs[i];}
\DoxyCodeLine{03495\ \ \ \ \ \ \ STBIR\_ASSERT(\ (\ coeffs[i]\ >=\ -\/2.0f\ )\ \&\&\ (\ coeffs[i]\ <=\ 2.0f\ )\ \ );\ \textcolor{comment}{//\ check\ for\ wonky\ weights}}
\DoxyCodeLine{03496\ \ \ \ \ \}}
\DoxyCodeLine{03497\ }
\DoxyCodeLine{03498\ \ \ \ \ \textcolor{comment}{//\ rescale}}
\DoxyCodeLine{03499\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ total\_filter\ <\ stbir\_\_small\_float\ )\ \&\&\ (\ total\_filter\ >\ -\/stbir\_\_small\_float\ )\ )}
\DoxyCodeLine{03500\ \ \ \ \ \{}
\DoxyCodeLine{03501\ \ \ \ \ \ \ \textcolor{comment}{//\ all\ coeffs\ are\ extremely\ small,\ just\ zero\ it}}
\DoxyCodeLine{03502\ \ \ \ \ \ \ contribs-\/>n1\ =\ contribs-\/>n0;}
\DoxyCodeLine{03503\ \ \ \ \ \ \ coeffs[0]\ =\ 0.0f;}
\DoxyCodeLine{03504\ \ \ \ \ \}}
\DoxyCodeLine{03505\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03506\ \ \ \ \ \{}
\DoxyCodeLine{03507\ \ \ \ \ \ \ \textcolor{comment}{//\ if\ the\ total\ isn't\ 1.0,\ rescale\ everything}}
\DoxyCodeLine{03508\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ total\_filter\ <\ (1.0f-\/stbir\_\_small\_float)\ )\ ||\ (\ total\_filter\ >\ (1.0f+stbir\_\_small\_float)\ )\ )}
\DoxyCodeLine{03509\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03510\ \ \ \ \ \ \ \ \ filter\_scale\ =\ ((STBIR\_RENORM\_TYPE)1.0)\ /\ total\_filter;}
\DoxyCodeLine{03511\ }
\DoxyCodeLine{03512\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ scale\ them\ all}}
\DoxyCodeLine{03513\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <=\ e;\ i++)}
\DoxyCodeLine{03514\ \ \ \ \ \ \ \ \ \ \ coeffs[i]\ =\ (\textcolor{keywordtype}{float})\ (\ coeffs[i]\ *\ filter\_scale\ );}
\DoxyCodeLine{03515\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03516\ \ \ \ \ \}}
\DoxyCodeLine{03517\ \ \ \ \ ++contribs;}
\DoxyCodeLine{03518\ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03519\ \ \ \}}
\DoxyCodeLine{03520\ }
\DoxyCodeLine{03521\ \ \ \textcolor{comment}{//\ if\ we\ have\ a\ rational\ for\ the\ scale,\ we\ can\ exploit\ the\ polyphaseness\ to\ not\ calculate}}
\DoxyCodeLine{03522\ \ \ \textcolor{comment}{//\ \ \ most\ of\ the\ coefficients,\ so\ we\ copy\ them\ here}}
\DoxyCodeLine{03523\ \ \ \textcolor{keywordflow}{if}\ (\ polyphase\ )}
\DoxyCodeLine{03524\ \ \ \{}
\DoxyCodeLine{03525\ \ \ \ \ stbir\_\_contributors\ *\ prev\_contribs\ =\ contributors;}
\DoxyCodeLine{03526\ \ \ \ \ stbir\_\_contributors\ *\ cur\_contribs\ =\ contributors\ +\ numerator;}
\DoxyCodeLine{03527\ }
\DoxyCodeLine{03528\ \ \ \ \ \textcolor{keywordflow}{for}(\ n\ =\ numerator\ ;\ n\ <\ num\_contributors\ ;\ n++\ )}
\DoxyCodeLine{03529\ \ \ \ \ \{}
\DoxyCodeLine{03530\ \ \ \ \ \ \ cur\_contribs-\/>n0\ =\ prev\_contribs-\/>n0\ +\ denominator;}
\DoxyCodeLine{03531\ \ \ \ \ \ \ cur\_contribs-\/>n1\ =\ prev\_contribs-\/>n1\ +\ denominator;}
\DoxyCodeLine{03532\ \ \ \ \ \ \ ++cur\_contribs;}
\DoxyCodeLine{03533\ \ \ \ \ \ \ ++prev\_contribs;}
\DoxyCodeLine{03534\ \ \ \ \ \}}
\DoxyCodeLine{03535\ \ \ \ \ stbir\_overlapping\_memcpy(\ coefficient\_group\ +\ numerator\ *\ coefficient\_width,\ coefficient\_group,\ (\ num\_contributors\ -\/\ numerator\ )\ *\ coefficient\_width\ *\ \textcolor{keyword}{sizeof}(\ coeffs[\ 0\ ]\ )\ );}
\DoxyCodeLine{03536\ \ \ \}}
\DoxyCodeLine{03537\ }
\DoxyCodeLine{03538\ \ \ coeffs\ =\ coefficient\_group;}
\DoxyCodeLine{03539\ \ \ contribs\ =\ contributors;}
\DoxyCodeLine{03540\ }
\DoxyCodeLine{03541\ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ num\_contributors;\ n++)}
\DoxyCodeLine{03542\ \ \ \{}
\DoxyCodeLine{03543\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{03544\ }
\DoxyCodeLine{03545\ \ \ \ \ \textcolor{comment}{//\ in\ zero\ edge\ mode,\ just\ remove\ out\ of\ bounds\ contribs\ completely\ (since\ their\ weights\ are\ accounted\ for\ now)}}
\DoxyCodeLine{03546\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ edge\ ==\ STBIR\_EDGE\_ZERO\ )}
\DoxyCodeLine{03547\ \ \ \ \ \{}
\DoxyCodeLine{03548\ \ \ \ \ \ \ \textcolor{comment}{//\ shrink\ the\ right\ side\ if\ necessary}}
\DoxyCodeLine{03549\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n1\ >\ input\_last\_n1\ )}
\DoxyCodeLine{03550\ \ \ \ \ \ \ \ \ contribs-\/>n1\ =\ input\_last\_n1;}
\DoxyCodeLine{03551\ }
\DoxyCodeLine{03552\ \ \ \ \ \ \ \textcolor{comment}{//\ shrink\ the\ left\ side}}
\DoxyCodeLine{03553\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n0\ <\ 0\ )}
\DoxyCodeLine{03554\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03555\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ j,\ left,\ skips\ =\ 0;}
\DoxyCodeLine{03556\ }
\DoxyCodeLine{03557\ \ \ \ \ \ \ \ \ skips\ =\ -\/contribs-\/>n0;}
\DoxyCodeLine{03558\ \ \ \ \ \ \ \ \ contribs-\/>n0\ =\ 0;}
\DoxyCodeLine{03559\ }
\DoxyCodeLine{03560\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ move\ down\ the\ weights}}
\DoxyCodeLine{03561\ \ \ \ \ \ \ \ \ left\ =\ contribs-\/>n1\ -\/\ contribs-\/>n0\ +\ 1;}
\DoxyCodeLine{03562\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ left\ >\ 0\ )}
\DoxyCodeLine{03563\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03564\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ j\ =\ 0\ ;\ j\ <\ left\ ;\ j++\ )}
\DoxyCodeLine{03565\ \ \ \ \ \ \ \ \ \ \ \ \ coeffs[\ j\ ]\ =\ coeffs[\ j\ +\ skips\ ];}
\DoxyCodeLine{03566\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03567\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03568\ \ \ \ \ \}}
\DoxyCodeLine{03569\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ (\ edge\ ==\ STBIR\_EDGE\_CLAMP\ )\ ||\ (\ edge\ ==\ STBIR\_EDGE\_REFLECT\ )\ )}
\DoxyCodeLine{03570\ \ \ \ \ \{}
\DoxyCodeLine{03571\ \ \ \ \ \ \ \textcolor{comment}{//\ for\ clamp\ and\ reflect,\ calculate\ the\ true\ inbounds\ position\ (based\ on\ edge\ type)\ and\ just\ add\ that\ to\ the\ existing\ weight}}
\DoxyCodeLine{03572\ }
\DoxyCodeLine{03573\ \ \ \ \ \ \ \textcolor{comment}{//\ right\ hand\ side\ first}}
\DoxyCodeLine{03574\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n1\ >\ input\_last\_n1\ )}
\DoxyCodeLine{03575\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03576\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ start\ =\ contribs-\/>n0;}
\DoxyCodeLine{03577\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ endi\ =\ contribs-\/>n1;}
\DoxyCodeLine{03578\ \ \ \ \ \ \ \ \ contribs-\/>n1\ =\ input\_last\_n1;}
\DoxyCodeLine{03579\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ input\_size;\ i\ <=\ endi;\ i++\ )}
\DoxyCodeLine{03580\ \ \ \ \ \ \ \ \ \ \ stbir\_\_insert\_coeff(\ contribs,\ coeffs,\ stbir\_\_edge\_wrap\_slow[edge](\ i,\ input\_size\ ),\ coeffs[i-\/start],\ coefficient\_width\ );}
\DoxyCodeLine{03581\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03582\ }
\DoxyCodeLine{03583\ \ \ \ \ \ \ \textcolor{comment}{//\ now\ check\ left\ hand\ edge}}
\DoxyCodeLine{03584\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n0\ <\ 0\ )}
\DoxyCodeLine{03585\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03586\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ save\_n0;}
\DoxyCodeLine{03587\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ save\_n0\_coeff;}
\DoxyCodeLine{03588\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ c\ =\ coeffs\ -\/\ (\ contribs-\/>n0\ +\ 1\ );}
\DoxyCodeLine{03589\ }
\DoxyCodeLine{03590\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reinsert\ the\ coeffs\ with\ it\ reflected\ or\ clamped\ (insert\ accumulates,\ if\ the\ coeffs\ exist)}}
\DoxyCodeLine{03591\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ -\/1\ ;\ i\ >\ contribs-\/>n0\ ;\ i-\/-\/\ )}
\DoxyCodeLine{03592\ \ \ \ \ \ \ \ \ \ \ stbir\_\_insert\_coeff(\ contribs,\ coeffs,\ stbir\_\_edge\_wrap\_slow[edge](\ i,\ input\_size\ ),\ *c-\/-\/,\ coefficient\_width\ );}
\DoxyCodeLine{03593\ \ \ \ \ \ \ \ \ save\_n0\ =\ contribs-\/>n0;}
\DoxyCodeLine{03594\ \ \ \ \ \ \ \ \ save\_n0\_coeff\ =\ c[0];\ \textcolor{comment}{//\ save\ it,\ since\ we\ didn't\ do\ the\ final\ one\ (i==n0),\ because\ there\ might\ be\ too\ many\ coeffs\ to\ hold\ (before\ we\ resize)!}}
\DoxyCodeLine{03595\ }
\DoxyCodeLine{03596\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ slide\ all\ the\ coeffs\ down\ (since\ we\ have\ accumulated\ them\ in\ the\ positive\ contribs)\ and\ reset\ the\ first\ contrib}}
\DoxyCodeLine{03597\ \ \ \ \ \ \ \ \ contribs-\/>n0\ =\ 0;}
\DoxyCodeLine{03598\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(i\ =\ 0\ ;\ i\ <=\ contribs-\/>n1\ ;\ i++\ )}
\DoxyCodeLine{03599\ \ \ \ \ \ \ \ \ \ \ coeffs[i]\ =\ coeffs[i-\/save\_n0];}
\DoxyCodeLine{03600\ }
\DoxyCodeLine{03601\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ that\ we\ have\ shrunk\ down\ the\ contribs,\ we\ insert\ the\ first\ one\ safely}}
\DoxyCodeLine{03602\ \ \ \ \ \ \ \ \ stbir\_\_insert\_coeff(\ contribs,\ coeffs,\ stbir\_\_edge\_wrap\_slow[edge](\ save\_n0,\ input\_size\ ),\ save\_n0\_coeff,\ coefficient\_width\ );}
\DoxyCodeLine{03603\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03604\ \ \ \ \ \}}
\DoxyCodeLine{03605\ }
\DoxyCodeLine{03606\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n0\ <=\ contribs-\/>n1\ )}
\DoxyCodeLine{03607\ \ \ \ \ \{}
\DoxyCodeLine{03608\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ diff\ =\ contribs-\/>n1\ -\/\ contribs-\/>n0\ +\ 1;}
\DoxyCodeLine{03609\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ diff\ \&\&\ (\ coeffs[\ diff-\/1\ ]\ ==\ 0.0f\ )\ )}
\DoxyCodeLine{03610\ \ \ \ \ \ \ \ \ -\/-\/diff;}
\DoxyCodeLine{03611\ }
\DoxyCodeLine{03612\ \ \ \ \ \ \ contribs-\/>n1\ =\ contribs-\/>n0\ +\ diff\ -\/\ 1;}
\DoxyCodeLine{03613\ }
\DoxyCodeLine{03614\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n0\ <=\ contribs-\/>n1\ )}
\DoxyCodeLine{03615\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03616\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n0\ <\ lowest\ )}
\DoxyCodeLine{03617\ \ \ \ \ \ \ \ \ \ \ lowest\ =\ contribs-\/>n0;}
\DoxyCodeLine{03618\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ contribs-\/>n1\ >\ highest\ )}
\DoxyCodeLine{03619\ \ \ \ \ \ \ \ \ \ \ highest\ =\ contribs-\/>n1;}
\DoxyCodeLine{03620\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ diff\ >\ widest\ )}
\DoxyCodeLine{03621\ \ \ \ \ \ \ \ \ \ \ widest\ =\ diff;}
\DoxyCodeLine{03622\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03623\ }
\DoxyCodeLine{03624\ \ \ \ \ \ \ \textcolor{comment}{//\ re-\/zero\ out\ unused\ coefficients\ (if\ any)}}
\DoxyCodeLine{03625\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ diff\ ;\ i\ <\ coefficient\_width\ ;\ i++\ )}
\DoxyCodeLine{03626\ \ \ \ \ \ \ \ \ coeffs[i]\ =\ 0.0f;}
\DoxyCodeLine{03627\ \ \ \ \ \}}
\DoxyCodeLine{03628\ }
\DoxyCodeLine{03629\ \ \ \ \ ++contribs;}
\DoxyCodeLine{03630\ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03631\ \ \ \}}
\DoxyCodeLine{03632\ \ \ filter\_info-\/>lowest\ =\ lowest;}
\DoxyCodeLine{03633\ \ \ filter\_info-\/>highest\ =\ highest;}
\DoxyCodeLine{03634\ \ \ filter\_info-\/>widest\ =\ widest;}
\DoxyCodeLine{03635\ \}}
\DoxyCodeLine{03636\ }
\DoxyCodeLine{03637\ \textcolor{preprocessor}{\#undef\ STBIR\_RENORM\_TYPE\ }}
\DoxyCodeLine{03638\ }
\DoxyCodeLine{03639\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_pack\_coefficients(\ \textcolor{keywordtype}{int}\ num\_contributors,\ stbir\_\_contributors*\ contributors,\ \textcolor{keywordtype}{float}\ *\ coefficents,\ \textcolor{keywordtype}{int}\ coefficient\_width,\ \textcolor{keywordtype}{int}\ widest,\ \textcolor{keywordtype}{int}\ row0,\ \textcolor{keywordtype}{int}\ row1\ )\ }
\DoxyCodeLine{03640\ \{}
\DoxyCodeLine{03641\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_MOVE\_1(\ dest,\ src\ )\ \{\ STBIR\_NO\_UNROLL(dest);\ ((stbir\_uint32*)(dest))[0]\ =\ ((stbir\_uint32*)(src))[0];\ \}}}
\DoxyCodeLine{03642\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_MOVE\_2(\ dest,\ src\ )\ \{\ STBIR\_NO\_UNROLL(dest);\ ((stbir\_uint64*)(dest))[0]\ =\ ((stbir\_uint64*)(src))[0];\ \}}}
\DoxyCodeLine{03643\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{03644\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_MOVE\_4(\ dest,\ src\ )\ \{\ stbir\_\_simdf\ t;\ STBIR\_NO\_UNROLL(dest);\ stbir\_\_simdf\_load(\ t,\ src\ );\ stbir\_\_simdf\_store(\ dest,\ t\ );\ \}}}
\DoxyCodeLine{03645\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{03646\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_MOVE\_4(\ dest,\ src\ )\ \{\ STBIR\_NO\_UNROLL(dest);\ ((stbir\_uint64*)(dest))[0]\ =\ ((stbir\_uint64*)(src))[0];\ ((stbir\_uint64*)(dest))[1]\ =\ ((stbir\_uint64*)(src))[1];\ \}}}
\DoxyCodeLine{03647\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{03648\ }
\DoxyCodeLine{03649\ \ \ \textcolor{keywordtype}{int}\ row\_end\ =\ row1\ +\ 1;}
\DoxyCodeLine{03650\ \ \ STBIR\_\_UNUSED(\ row0\ );\ \textcolor{comment}{//\ only\ used\ in\ an\ assert}}
\DoxyCodeLine{03651\ }
\DoxyCodeLine{03652\ \ \ \textcolor{keywordflow}{if}\ (\ coefficient\_width\ !=\ widest\ )}
\DoxyCodeLine{03653\ \ \ \{}
\DoxyCodeLine{03654\ \ \ \ \ \textcolor{keywordtype}{float}\ *\ pc\ =\ coefficents;}
\DoxyCodeLine{03655\ \ \ \ \ \textcolor{keywordtype}{float}\ *\ coeffs\ =\ coefficents;}
\DoxyCodeLine{03656\ \ \ \ \ \textcolor{keywordtype}{float}\ *\ pc\_end\ =\ coefficents\ +\ num\_contributors\ *\ widest;}
\DoxyCodeLine{03657\ \ \ \ \ \textcolor{keywordflow}{switch}(\ widest\ )}
\DoxyCodeLine{03658\ \ \ \ \ \{}
\DoxyCodeLine{03659\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{03660\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03661\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03662\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc,\ coeffs\ );}
\DoxyCodeLine{03663\ \ \ \ \ \ \ \ \ \ \ ++pc;}
\DoxyCodeLine{03664\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03665\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03666\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03667\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{03668\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03669\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03670\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_2(\ pc,\ coeffs\ );}
\DoxyCodeLine{03671\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 2;}
\DoxyCodeLine{03672\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03673\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03674\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03675\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{03676\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03677\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03678\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_2(\ pc,\ coeffs\ );}
\DoxyCodeLine{03679\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc+2,\ coeffs+2\ );}
\DoxyCodeLine{03680\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 3;}
\DoxyCodeLine{03681\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03682\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03683\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03684\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{03685\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03686\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03687\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03688\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 4;}
\DoxyCodeLine{03689\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03690\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03691\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03692\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{03693\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03694\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03695\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03696\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03697\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 5;}
\DoxyCodeLine{03698\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03699\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03700\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03701\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{03702\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03703\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03704\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03705\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_2(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03706\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 6;}
\DoxyCodeLine{03707\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03708\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03709\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03710\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{03711\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03712\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03713\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03714\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_2(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03715\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc+6,\ coeffs+6\ );}
\DoxyCodeLine{03716\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 7;}
\DoxyCodeLine{03717\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03718\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03719\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03720\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 8:}
\DoxyCodeLine{03721\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03722\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03723\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03724\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03725\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 8;}
\DoxyCodeLine{03726\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03727\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03728\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03729\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 9:}
\DoxyCodeLine{03730\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03731\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03732\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03733\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03734\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc+8,\ coeffs+8\ );}
\DoxyCodeLine{03735\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 9;}
\DoxyCodeLine{03736\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03737\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03738\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03739\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 10:}
\DoxyCodeLine{03740\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03741\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03742\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03743\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03744\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_2(\ pc+8,\ coeffs+8\ );}
\DoxyCodeLine{03745\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 10;}
\DoxyCodeLine{03746\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03747\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03748\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03749\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 11:}
\DoxyCodeLine{03750\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03751\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03752\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03753\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03754\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_2(\ pc+8,\ coeffs+8\ );}
\DoxyCodeLine{03755\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc+10,\ coeffs+10\ );}
\DoxyCodeLine{03756\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 11;}
\DoxyCodeLine{03757\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03758\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03759\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03760\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 12:}
\DoxyCodeLine{03761\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03762\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03763\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ coeffs\ );}
\DoxyCodeLine{03764\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc+4,\ coeffs+4\ );}
\DoxyCodeLine{03765\ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc+8,\ coeffs+8\ );}
\DoxyCodeLine{03766\ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 12;}
\DoxyCodeLine{03767\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03768\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03769\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03770\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{03771\ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03772\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03773\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ copy\_end\ =\ pc\ +\ widest\ -\/\ 4;}
\DoxyCodeLine{03774\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ c\ =\ coeffs;}
\DoxyCodeLine{03775\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{03776\ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL(\ pc\ );}
\DoxyCodeLine{03777\ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_4(\ pc,\ c\ );}
\DoxyCodeLine{03778\ \ \ \ \ \ \ \ \ \ \ \ \ pc\ +=\ 4;}
\DoxyCodeLine{03779\ \ \ \ \ \ \ \ \ \ \ \ \ c\ +=\ 4;}
\DoxyCodeLine{03780\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <=\ copy\_end\ );}
\DoxyCodeLine{03781\ \ \ \ \ \ \ \ \ \ \ copy\_end\ +=\ 4;}
\DoxyCodeLine{03782\ \ \ \ \ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{03783\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ pc\ <\ copy\_end\ )}
\DoxyCodeLine{03784\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03785\ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_MOVE\_1(\ pc,\ c\ );}
\DoxyCodeLine{03786\ \ \ \ \ \ \ \ \ \ \ \ \ ++pc;\ ++c;}
\DoxyCodeLine{03787\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03788\ \ \ \ \ \ \ \ \ \ \ coeffs\ +=\ coefficient\_width;}
\DoxyCodeLine{03789\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ pc\ <\ pc\_end\ );}
\DoxyCodeLine{03790\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03791\ \ \ \ \ \}}
\DoxyCodeLine{03792\ \ \ \}}
\DoxyCodeLine{03793\ }
\DoxyCodeLine{03794\ \ \ \textcolor{comment}{//\ some\ horizontal\ routines\ read\ one\ float\ off\ the\ end\ (which\ is\ then\ masked\ off),\ so\ put\ in\ a\ sentinal\ so\ we\ don't\ read\ an\ snan\ or\ denormal}}
\DoxyCodeLine{03795\ \ \ coefficents[\ widest\ *\ num\_contributors\ ]\ =\ 8888.0f;}
\DoxyCodeLine{03796\ }
\DoxyCodeLine{03797\ \ \ \textcolor{comment}{//\ the\ minimum\ we\ might\ read\ for\ unrolled\ filters\ widths\ is\ 12.\ So,\ we\ need\ to}}
\DoxyCodeLine{03798\ \ \ \textcolor{comment}{//\ \ \ make\ sure\ we\ never\ read\ outside\ the\ decode\ buffer,\ by\ possibly\ moving}}
\DoxyCodeLine{03799\ \ \ \textcolor{comment}{//\ \ \ the\ sample\ area\ back\ into\ the\ scanline,\ and\ putting\ zeros\ weights\ first.}}
\DoxyCodeLine{03800\ \ \ \textcolor{comment}{//\ we\ start\ on\ the\ right\ edge\ and\ check\ until\ we're\ well\ past\ the\ possible}}
\DoxyCodeLine{03801\ \ \ \textcolor{comment}{//\ \ \ clip\ area\ (2*widest).}}
\DoxyCodeLine{03802\ \ \ \{}
\DoxyCodeLine{03803\ \ \ \ \ stbir\_\_contributors\ *\ contribs\ =\ contributors\ +\ num\_contributors\ -\/\ 1;}
\DoxyCodeLine{03804\ \ \ \ \ \textcolor{keywordtype}{float}\ *\ coeffs\ =\ coefficents\ +\ widest\ *\ (\ num\_contributors\ -\/\ 1\ );}
\DoxyCodeLine{03805\ }
\DoxyCodeLine{03806\ \ \ \ \ \textcolor{comment}{//\ go\ until\ no\ chance\ of\ clipping\ (this\ is\ usually\ less\ than\ 8\ lops)}}
\DoxyCodeLine{03807\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ (\ contribs\ >=\ contributors\ )\ \&\&\ (\ (\ contribs-\/>n0\ +\ widest*2\ )\ >=\ row\_end\ )\ )}
\DoxyCodeLine{03808\ \ \ \ \ \{}
\DoxyCodeLine{03809\ \ \ \ \ \ \ \textcolor{comment}{//\ might\ we\ clip??}}
\DoxyCodeLine{03810\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ contribs-\/>n0\ +\ widest\ )\ >\ row\_end\ )}
\DoxyCodeLine{03811\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03812\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ stop\_range\ =\ widest;}
\DoxyCodeLine{03813\ }
\DoxyCodeLine{03814\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ range\ is\ larger\ than\ 12,\ it\ will\ be\ handled\ by\ generic\ loops\ that\ can\ terminate\ on\ the\ exact\ length}}
\DoxyCodeLine{03815\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ of\ this\ contrib\ n1,\ instead\ of\ a\ fixed\ widest\ amount\ -\/\ so\ calculate\ this}}
\DoxyCodeLine{03816\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ widest\ >\ 12\ )}
\DoxyCodeLine{03817\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03818\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ mod;}
\DoxyCodeLine{03819\ }
\DoxyCodeLine{03820\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ how\ far\ will\ be\ read\ in\ the\ n\_coeff\ loop\ (which\ depends\ on\ the\ widest\ count\ mod4);}}
\DoxyCodeLine{03821\ \ \ \ \ \ \ \ \ \ \ mod\ =\ widest\ \&\ 3;}
\DoxyCodeLine{03822\ \ \ \ \ \ \ \ \ \ \ stop\_range\ =\ (\ (\ (\ contribs-\/>n1\ -\/\ contribs-\/>n0\ +\ 1\ )\ -\/\ mod\ +\ 3\ )\ \&\ \string~3\ )\ +\ mod;}
\DoxyCodeLine{03823\ }
\DoxyCodeLine{03824\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ n\_coeff\ loops\ do\ a\ minimum\ amount\ of\ coeffs,\ so\ factor\ that\ in!}}
\DoxyCodeLine{03825\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ stop\_range\ <\ (\ 8\ +\ mod\ )\ )\ stop\_range\ =\ 8\ +\ mod;}
\DoxyCodeLine{03826\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03827\ }
\DoxyCodeLine{03828\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ see\ if\ we\ still\ clip\ with\ the\ refined\ range}}
\DoxyCodeLine{03829\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ contribs-\/>n0\ +\ stop\_range\ )\ >\ row\_end\ )}
\DoxyCodeLine{03830\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03831\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ new\_n0\ =\ row\_end\ -\/\ stop\_range;}
\DoxyCodeLine{03832\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ contribs-\/>n1\ -\/\ contribs-\/>n0\ +\ 1;}
\DoxyCodeLine{03833\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ backup\ =\ contribs-\/>n0\ -\/\ new\_n0;}
\DoxyCodeLine{03834\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ from\_co\ =\ coeffs\ +\ num\ -\/\ 1;}
\DoxyCodeLine{03835\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ to\_co\ =\ from\_co\ +\ backup;}
\DoxyCodeLine{03836\ }
\DoxyCodeLine{03837\ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(\ (\ new\_n0\ >=\ row0\ )\ \&\&\ (\ new\_n0\ <\ contribs-\/>n0\ )\ );}
\DoxyCodeLine{03838\ }
\DoxyCodeLine{03839\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ move\ the\ coeffs\ over}}
\DoxyCodeLine{03840\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ num\ )}
\DoxyCodeLine{03841\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03842\ \ \ \ \ \ \ \ \ \ \ \ \ *to\_co-\/-\/\ =\ *from\_co-\/-\/;}
\DoxyCodeLine{03843\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/num;}
\DoxyCodeLine{03844\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03845\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ zero\ new\ positions}}
\DoxyCodeLine{03846\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ to\_co\ >=\ coeffs\ )}
\DoxyCodeLine{03847\ \ \ \ \ \ \ \ \ \ \ \ \ *to\_co-\/-\/\ =\ 0;}
\DoxyCodeLine{03848\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ set\ new\ start\ point}}
\DoxyCodeLine{03849\ \ \ \ \ \ \ \ \ \ \ contribs-\/>n0\ =\ new\_n0;}
\DoxyCodeLine{03850\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ widest\ >\ 12\ )}
\DoxyCodeLine{03851\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03852\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ mod;}
\DoxyCodeLine{03853\ }
\DoxyCodeLine{03854\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ how\ far\ will\ be\ read\ in\ the\ n\_coeff\ loop\ (which\ depends\ on\ the\ widest\ count\ mod4);}}
\DoxyCodeLine{03855\ \ \ \ \ \ \ \ \ \ \ \ \ mod\ =\ widest\ \&\ 3;}
\DoxyCodeLine{03856\ \ \ \ \ \ \ \ \ \ \ \ \ stop\_range\ =\ (\ (\ (\ contribs-\/>n1\ -\/\ contribs-\/>n0\ +\ 1\ )\ -\/\ mod\ +\ 3\ )\ \&\ \string~3\ )\ +\ mod;}
\DoxyCodeLine{03857\ }
\DoxyCodeLine{03858\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ n\_coeff\ loops\ do\ a\ minimum\ amount\ of\ coeffs,\ so\ factor\ that\ in!}}
\DoxyCodeLine{03859\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ stop\_range\ <\ (\ 8\ +\ mod\ )\ )\ stop\_range\ =\ 8\ +\ mod;}
\DoxyCodeLine{03860\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03861\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03862\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03863\ \ \ \ \ \ \ -\/-\/contribs;}
\DoxyCodeLine{03864\ \ \ \ \ \ \ coeffs\ -\/=\ widest;}
\DoxyCodeLine{03865\ \ \ \ \ \}}
\DoxyCodeLine{03866\ \ \ \}}
\DoxyCodeLine{03867\ }
\DoxyCodeLine{03868\ \ \ \textcolor{keywordflow}{return}\ widest;}
\DoxyCodeLine{03869\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_MOVE\_1}}
\DoxyCodeLine{03870\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_MOVE\_2}}
\DoxyCodeLine{03871\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_MOVE\_4}}
\DoxyCodeLine{03872\ \}}
\DoxyCodeLine{03873\ }
\DoxyCodeLine{03874\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_filters(\ stbir\_\_sampler\ *\ samp,\ stbir\_\_sampler\ *\ other\_axis\_for\_pivot,\ \textcolor{keywordtype}{void}\ *\ user\_data\ STBIR\_ONLY\_PROFILE\_BUILD\_GET\_INFO\ )}
\DoxyCodeLine{03875\ \{}
\DoxyCodeLine{03876\ \ \ \textcolor{keywordtype}{int}\ n;}
\DoxyCodeLine{03877\ \ \ \textcolor{keywordtype}{float}\ scale\ =\ samp-\/>scale\_info.scale;}
\DoxyCodeLine{03878\ \ \ stbir\_\_kernel\_callback\ *\ kernel\ =\ samp-\/>filter\_kernel;}
\DoxyCodeLine{03879\ \ \ stbir\_\_support\_callback\ *\ support\ =\ samp-\/>filter\_support;}
\DoxyCodeLine{03880\ \ \ \textcolor{keywordtype}{float}\ inv\_scale\ =\ samp-\/>scale\_info.inv\_scale;}
\DoxyCodeLine{03881\ \ \ \textcolor{keywordtype}{int}\ input\_full\_size\ =\ samp-\/>scale\_info.input\_full\_size;}
\DoxyCodeLine{03882\ \ \ \textcolor{keywordtype}{int}\ gather\_num\_contributors\ =\ samp-\/>num\_contributors;}
\DoxyCodeLine{03883\ \ \ stbir\_\_contributors*\ gather\_contributors\ =\ samp-\/>contributors;}
\DoxyCodeLine{03884\ \ \ \textcolor{keywordtype}{float}\ *\ gather\_coeffs\ =\ samp-\/>coefficients;}
\DoxyCodeLine{03885\ \ \ \textcolor{keywordtype}{int}\ gather\_coefficient\_width\ =\ samp-\/>coefficient\_width;}
\DoxyCodeLine{03886\ }
\DoxyCodeLine{03887\ \ \ \textcolor{keywordflow}{switch}\ (\ samp-\/>is\_gather\ )}
\DoxyCodeLine{03888\ \ \ \{}
\DoxyCodeLine{03889\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{comment}{//\ gather\ upsample}}
\DoxyCodeLine{03890\ \ \ \ \ \{}
\DoxyCodeLine{03891\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixels\_radius\ =\ support(inv\_scale,user\_data)\ *\ scale;}
\DoxyCodeLine{03892\ }
\DoxyCodeLine{03893\ \ \ \ \ \ \ stbir\_\_calculate\_coefficients\_for\_gather\_upsample(\ out\_pixels\_radius,\ kernel,\ \&samp-\/>scale\_info,\ gather\_num\_contributors,\ gather\_contributors,\ gather\_coeffs,\ gather\_coefficient\_width,\ samp-\/>edge,\ user\_data\ );}
\DoxyCodeLine{03894\ }
\DoxyCodeLine{03895\ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_START(\ cleanup\ );}
\DoxyCodeLine{03896\ \ \ \ \ \ \ stbir\_\_cleanup\_gathered\_coefficients(\ samp-\/>edge,\ \&samp-\/>extent\_info,\ \&samp-\/>scale\_info,\ gather\_num\_contributors,\ gather\_contributors,\ gather\_coeffs,\ gather\_coefficient\_width\ );}
\DoxyCodeLine{03897\ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_END(\ cleanup\ );}
\DoxyCodeLine{03898\ \ \ \ \ \}}
\DoxyCodeLine{03899\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03900\ }
\DoxyCodeLine{03901\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{comment}{//\ scatter\ downsample\ (only\ on\ vertical)}}
\DoxyCodeLine{03902\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \textcolor{comment}{//\ gather\ downsample}}
\DoxyCodeLine{03903\ \ \ \ \ \{}
\DoxyCodeLine{03904\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixels\_radius\ =\ support(scale,user\_data)\ *\ inv\_scale;}
\DoxyCodeLine{03905\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ filter\_pixel\_margin\ =\ samp-\/>filter\_pixel\_margin;}
\DoxyCodeLine{03906\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_end\ =\ input\_full\_size\ +\ filter\_pixel\_margin;}
\DoxyCodeLine{03907\ }
\DoxyCodeLine{03908\ \ \ \ \ \ \ \textcolor{comment}{//\ if\ this\ is\ a\ scatter,\ we\ do\ a\ downsample\ gather\ to\ get\ the\ coeffs,\ and\ then\ pivot\ after}}
\DoxyCodeLine{03909\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !samp-\/>is\_gather\ )}
\DoxyCodeLine{03910\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03911\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ we\ are\ using\ the\ same\ gather\ downsample\ on\ the\ horizontal\ as\ this\ vertical,}}
\DoxyCodeLine{03912\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ if\ so,\ then\ we\ don't\ have\ to\ generate\ them,\ we\ can\ just\ pivot\ from\ the\ horizontal.}}
\DoxyCodeLine{03913\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ other\_axis\_for\_pivot\ )}
\DoxyCodeLine{03914\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03915\ \ \ \ \ \ \ \ \ \ \ gather\_contributors\ =\ other\_axis\_for\_pivot-\/>contributors;}
\DoxyCodeLine{03916\ \ \ \ \ \ \ \ \ \ \ gather\_coeffs\ =\ other\_axis\_for\_pivot-\/>coefficients;}
\DoxyCodeLine{03917\ \ \ \ \ \ \ \ \ \ \ gather\_coefficient\_width\ =\ other\_axis\_for\_pivot-\/>coefficient\_width;}
\DoxyCodeLine{03918\ \ \ \ \ \ \ \ \ \ \ gather\_num\_contributors\ =\ other\_axis\_for\_pivot-\/>num\_contributors;}
\DoxyCodeLine{03919\ \ \ \ \ \ \ \ \ \ \ samp-\/>extent\_info.lowest\ =\ other\_axis\_for\_pivot-\/>extent\_info.lowest;}
\DoxyCodeLine{03920\ \ \ \ \ \ \ \ \ \ \ samp-\/>extent\_info.highest\ =\ other\_axis\_for\_pivot-\/>extent\_info.highest;}
\DoxyCodeLine{03921\ \ \ \ \ \ \ \ \ \ \ samp-\/>extent\_info.widest\ =\ other\_axis\_for\_pivot-\/>extent\_info.widest;}
\DoxyCodeLine{03922\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ jump\_right\_to\_pivot;}
\DoxyCodeLine{03923\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03924\ }
\DoxyCodeLine{03925\ \ \ \ \ \ \ \ \ gather\_contributors\ =\ samp-\/>gather\_prescatter\_contributors;}
\DoxyCodeLine{03926\ \ \ \ \ \ \ \ \ gather\_coeffs\ =\ samp-\/>gather\_prescatter\_coefficients;}
\DoxyCodeLine{03927\ \ \ \ \ \ \ \ \ gather\_coefficient\_width\ =\ samp-\/>gather\_prescatter\_coefficient\_width;}
\DoxyCodeLine{03928\ \ \ \ \ \ \ \ \ gather\_num\_contributors\ =\ samp-\/>gather\_prescatter\_num\_contributors;}
\DoxyCodeLine{03929\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03930\ }
\DoxyCodeLine{03931\ \ \ \ \ \ \ stbir\_\_calculate\_coefficients\_for\_gather\_downsample(\ -\/filter\_pixel\_margin,\ input\_end,\ in\_pixels\_radius,\ kernel,\ \&samp-\/>scale\_info,\ gather\_coefficient\_width,\ gather\_num\_contributors,\ gather\_contributors,\ gather\_coeffs,\ user\_data\ );}
\DoxyCodeLine{03932\ }
\DoxyCodeLine{03933\ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_START(\ cleanup\ );}
\DoxyCodeLine{03934\ \ \ \ \ \ \ stbir\_\_cleanup\_gathered\_coefficients(\ samp-\/>edge,\ \&samp-\/>extent\_info,\ \&samp-\/>scale\_info,\ gather\_num\_contributors,\ gather\_contributors,\ gather\_coeffs,\ gather\_coefficient\_width\ );}
\DoxyCodeLine{03935\ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_END(\ cleanup\ );}
\DoxyCodeLine{03936\ }
\DoxyCodeLine{03937\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !samp-\/>is\_gather\ )}
\DoxyCodeLine{03938\ \ \ \ \ \ \ \{}
\DoxyCodeLine{03939\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ this\ is\ a\ scatter\ (vertical\ only),\ then\ we\ need\ to\ pivot\ the\ coeffs}}
\DoxyCodeLine{03940\ \ \ \ \ \ \ \ \ stbir\_\_contributors\ *\ scatter\_contributors;}
\DoxyCodeLine{03941\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ highest\_set;}
\DoxyCodeLine{03942\ }
\DoxyCodeLine{03943\ \ \ \ \ \ \ \ \ jump\_right\_to\_pivot:}
\DoxyCodeLine{03944\ }
\DoxyCodeLine{03945\ \ \ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_START(\ pivot\ );}
\DoxyCodeLine{03946\ }
\DoxyCodeLine{03947\ \ \ \ \ \ \ \ \ highest\_set\ =\ (-\/filter\_pixel\_margin)\ -\/\ 1;}
\DoxyCodeLine{03948\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ gather\_num\_contributors;\ n++)}
\DoxyCodeLine{03949\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03950\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ k;}
\DoxyCodeLine{03951\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ gn0\ =\ gather\_contributors-\/>n0,\ gn1\ =\ gather\_contributors-\/>n1;}
\DoxyCodeLine{03952\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ scatter\_coefficient\_width\ =\ samp-\/>coefficient\_width;}
\DoxyCodeLine{03953\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ scatter\_coeffs\ =\ samp-\/>coefficients\ +\ (\ gn0\ +\ filter\_pixel\_margin\ )\ *\ scatter\_coefficient\_width;}
\DoxyCodeLine{03954\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ g\_coeffs\ =\ gather\_coeffs;}
\DoxyCodeLine{03955\ \ \ \ \ \ \ \ \ \ \ scatter\_contributors\ =\ samp-\/>contributors\ +\ (\ gn0\ +\ filter\_pixel\_margin\ );}
\DoxyCodeLine{03956\ }
\DoxyCodeLine{03957\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ gn0\ ;\ k\ <=\ gn1\ ;\ k++\ )}
\DoxyCodeLine{03958\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03959\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ gc\ =\ *g\_coeffs++;}
\DoxyCodeLine{03960\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{03961\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ zero\ and\ denormals\ -\/\ must\ skip\ zeros\ to\ avoid\ adding\ coeffs\ beyond\ scatter\_coefficient\_width}}
\DoxyCodeLine{03962\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ (which\ happens\ when\ pivoting\ from\ horizontal,\ which\ might\ have\ dummy\ zeros)}}
\DoxyCodeLine{03963\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ gc\ >=\ stbir\_\_small\_float\ )\ ||\ (\ gc\ <=\ -\/stbir\_\_small\_float\ )\ )\ )}
\DoxyCodeLine{03964\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ k\ >\ highest\_set\ )\ ||\ (\ scatter\_contributors-\/>n0\ >\ scatter\_contributors-\/>n1\ )\ )}
\DoxyCodeLine{03966\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ we\ are\ skipping\ over\ several\ contributors,\ we\ need\ to\ clear\ the\ skipped\ ones}}
\DoxyCodeLine{03969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_contributors\ *\ clear\_contributors\ =\ samp-\/>contributors\ +\ (\ highest\_set\ +\ filter\_pixel\_margin\ +\ 1);}
\DoxyCodeLine{03970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ clear\_contributors\ <\ scatter\_contributors\ )}
\DoxyCodeLine{03971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clear\_contributors-\/>n0\ =\ 0;}
\DoxyCodeLine{03973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clear\_contributors-\/>n1\ =\ -\/1;}
\DoxyCodeLine{03974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++clear\_contributors;}
\DoxyCodeLine{03975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scatter\_contributors-\/>n0\ =\ n;}
\DoxyCodeLine{03978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scatter\_contributors-\/>n1\ =\ n;}
\DoxyCodeLine{03979\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scatter\_coeffs[0]\ \ =\ gc;}
\DoxyCodeLine{03980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ highest\_set\ =\ k;}
\DoxyCodeLine{03981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03982\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_insert\_coeff(\ scatter\_contributors,\ scatter\_coeffs,\ n,\ gc,\ scatter\_coefficient\_width\ );}
\DoxyCodeLine{03985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(\ (\ scatter\_contributors-\/>n1\ -\/\ scatter\_contributors-\/>n0\ +\ 1\ )\ <=\ scatter\_coefficient\_width\ );}
\DoxyCodeLine{03987\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03988\ \ \ \ \ \ \ \ \ \ \ \ \ ++scatter\_contributors;}
\DoxyCodeLine{03989\ \ \ \ \ \ \ \ \ \ \ \ \ scatter\_coeffs\ +=\ scatter\_coefficient\_width;}
\DoxyCodeLine{03990\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03991\ }
\DoxyCodeLine{03992\ \ \ \ \ \ \ \ \ \ \ ++gather\_contributors;}
\DoxyCodeLine{03993\ \ \ \ \ \ \ \ \ \ \ gather\_coeffs\ +=\ gather\_coefficient\_width;}
\DoxyCodeLine{03994\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03995\ }
\DoxyCodeLine{03996\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ clear\ any\ unset\ contribs}}
\DoxyCodeLine{03997\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{03998\ \ \ \ \ \ \ \ \ \ \ stbir\_\_contributors\ *\ clear\_contributors\ =\ samp-\/>contributors\ +\ (\ highest\_set\ +\ filter\_pixel\_margin\ +\ 1);}
\DoxyCodeLine{03999\ \ \ \ \ \ \ \ \ \ \ stbir\_\_contributors\ *\ end\_contributors\ =\ samp-\/>contributors\ +\ samp-\/>num\_contributors;}
\DoxyCodeLine{04000\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ clear\_contributors\ <\ end\_contributors\ )}
\DoxyCodeLine{04001\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{04002\ \ \ \ \ \ \ \ \ \ \ \ \ clear\_contributors-\/>n0\ =\ 0;}
\DoxyCodeLine{04003\ \ \ \ \ \ \ \ \ \ \ \ \ clear\_contributors-\/>n1\ =\ -\/1;}
\DoxyCodeLine{04004\ \ \ \ \ \ \ \ \ \ \ \ \ ++clear\_contributors;}
\DoxyCodeLine{04005\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04006\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04007\ }
\DoxyCodeLine{04008\ \ \ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_END(\ pivot\ );}
\DoxyCodeLine{04009\ \ \ \ \ \ \ \}}
\DoxyCodeLine{04010\ \ \ \ \ \}}
\DoxyCodeLine{04011\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04012\ \ \ \}}
\DoxyCodeLine{04013\ \}}
\DoxyCodeLine{04014\ }
\DoxyCodeLine{04015\ }
\DoxyCodeLine{04016\ \textcolor{comment}{//========================================================================================================}}
\DoxyCodeLine{04017\ \textcolor{comment}{//\ scanline\ decoders\ and\ encoders}}
\DoxyCodeLine{04018\ }
\DoxyCodeLine{04019\ \textcolor{preprocessor}{\#define\ stbir\_\_coder\_min\_num\ 1}}
\DoxyCodeLine{04020\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{04021\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{04022\ }
\DoxyCodeLine{04023\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_suffix\ BGRA}}
\DoxyCodeLine{04024\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{04025\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order0\ \ 2}}
\DoxyCodeLine{04026\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order1\ \ 1}}
\DoxyCodeLine{04027\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order2\ \ 0}}
\DoxyCodeLine{04028\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order3\ \ 3}}
\DoxyCodeLine{04029\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order0\ \ 2}}
\DoxyCodeLine{04030\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order1\ \ 1}}
\DoxyCodeLine{04031\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order2\ \ 0}}
\DoxyCodeLine{04032\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order3\ \ 3}}
\DoxyCodeLine{04033\ \textcolor{preprocessor}{\#define\ stbir\_\_coder\_min\_num\ 4}}
\DoxyCodeLine{04034\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{04035\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{04036\ }
\DoxyCodeLine{04037\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_suffix\ ARGB}}
\DoxyCodeLine{04038\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{04039\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order0\ \ 1}}
\DoxyCodeLine{04040\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order1\ \ 2}}
\DoxyCodeLine{04041\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order2\ \ 3}}
\DoxyCodeLine{04042\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order3\ \ 0}}
\DoxyCodeLine{04043\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order0\ \ 3}}
\DoxyCodeLine{04044\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order1\ \ 0}}
\DoxyCodeLine{04045\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order2\ \ 1}}
\DoxyCodeLine{04046\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order3\ \ 2}}
\DoxyCodeLine{04047\ \textcolor{preprocessor}{\#define\ stbir\_\_coder\_min\_num\ 4}}
\DoxyCodeLine{04048\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{04049\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{04050\ }
\DoxyCodeLine{04051\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_suffix\ ABGR}}
\DoxyCodeLine{04052\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{04053\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order0\ \ 3}}
\DoxyCodeLine{04054\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order1\ \ 2}}
\DoxyCodeLine{04055\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order2\ \ 1}}
\DoxyCodeLine{04056\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order3\ \ 0}}
\DoxyCodeLine{04057\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order0\ \ 3}}
\DoxyCodeLine{04058\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order1\ \ 2}}
\DoxyCodeLine{04059\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order2\ \ 1}}
\DoxyCodeLine{04060\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order3\ \ 0}}
\DoxyCodeLine{04061\ \textcolor{preprocessor}{\#define\ stbir\_\_coder\_min\_num\ 4}}
\DoxyCodeLine{04062\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{04063\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{04064\ }
\DoxyCodeLine{04065\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_suffix\ AR}}
\DoxyCodeLine{04066\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{04067\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order0\ \ 1}}
\DoxyCodeLine{04068\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order1\ \ 0}}
\DoxyCodeLine{04069\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order2\ \ 3}}
\DoxyCodeLine{04070\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order3\ \ 2}}
\DoxyCodeLine{04071\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order0\ \ 1}}
\DoxyCodeLine{04072\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order1\ \ 0}}
\DoxyCodeLine{04073\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order2\ \ 3}}
\DoxyCodeLine{04074\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order3\ \ 2}}
\DoxyCodeLine{04075\ \textcolor{preprocessor}{\#define\ stbir\_\_coder\_min\_num\ 2}}
\DoxyCodeLine{04076\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{04077\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{04078\ }
\DoxyCodeLine{04079\ }
\DoxyCodeLine{04080\ \textcolor{comment}{//\ fancy\ alpha\ means\ we\ expand\ to\ keep\ both\ premultipied\ and\ non-\/premultiplied\ color\ channels}}
\DoxyCodeLine{04081\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_fancy\_alpha\_weight\_4ch(\ \textcolor{keywordtype}{float}\ *\ out\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04082\ \{}
\DoxyCodeLine{04083\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ out\ =\ out\_buffer;}
\DoxyCodeLine{04084\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_decode\ =\ out\_buffer\ +\ (\ width\_times\_channels\ /\ 4\ )\ *\ 7;\ \ \textcolor{comment}{//\ decode\ buffer\ aligned\ to\ end\ of\ out\_buffer}}
\DoxyCodeLine{04085\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ decode\ =\ (\textcolor{keywordtype}{float}*)end\_decode\ -\/\ width\_times\_channels;}
\DoxyCodeLine{04086\ }
\DoxyCodeLine{04087\ \ \ \textcolor{comment}{//\ fancy\ alpha\ is\ stored\ internally\ as\ R\ G\ B\ A\ Rpm\ Gpm\ Bpm}}
\DoxyCodeLine{04088\ }
\DoxyCodeLine{04089\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04090\ }
\DoxyCodeLine{04091\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{04092\ \ \ decode\ +=\ 16;}
\DoxyCodeLine{04093\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04094\ \ \ \textcolor{keywordflow}{while}\ (\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04095\ \ \ \{}
\DoxyCodeLine{04096\ \ \ \ \ stbir\_\_simdf8\ d0,d1,a0,a1,p0,p1;}
\DoxyCodeLine{04097\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04098\ \ \ \ \ stbir\_\_simdf8\_load(\ d0,\ decode-\/16\ );}
\DoxyCodeLine{04099\ \ \ \ \ stbir\_\_simdf8\_load(\ d1,\ decode-\/16+8\ );}
\DoxyCodeLine{04100\ \ \ \ \ stbir\_\_simdf8\_0123to33333333(\ a0,\ d0\ );}
\DoxyCodeLine{04101\ \ \ \ \ stbir\_\_simdf8\_0123to33333333(\ a1,\ d1\ );}
\DoxyCodeLine{04102\ \ \ \ \ stbir\_\_simdf8\_mult(\ p0,\ a0,\ d0\ );}
\DoxyCodeLine{04103\ \ \ \ \ stbir\_\_simdf8\_mult(\ p1,\ a1,\ d1\ );}
\DoxyCodeLine{04104\ \ \ \ \ stbir\_\_simdf8\_bot4s(\ a0,\ d0,\ p0\ );}
\DoxyCodeLine{04105\ \ \ \ \ stbir\_\_simdf8\_bot4s(\ a1,\ d1,\ p1\ );}
\DoxyCodeLine{04106\ \ \ \ \ stbir\_\_simdf8\_top4s(\ d0,\ d0,\ p0\ );}
\DoxyCodeLine{04107\ \ \ \ \ stbir\_\_simdf8\_top4s(\ d1,\ d1,\ p1\ );}
\DoxyCodeLine{04108\ \ \ \ \ stbir\_\_simdf8\_store\ (\ out,\ a0\ );}
\DoxyCodeLine{04109\ \ \ \ \ stbir\_\_simdf8\_store\ (\ out+7,\ d0\ );}
\DoxyCodeLine{04110\ \ \ \ \ stbir\_\_simdf8\_store\ (\ out+14,\ a1\ );}
\DoxyCodeLine{04111\ \ \ \ \ stbir\_\_simdf8\_store\ (\ out+21,\ d1\ );}
\DoxyCodeLine{04112\ \ \ \ \ decode\ +=\ 16;}
\DoxyCodeLine{04113\ \ \ \ \ out\ +=\ 28;}
\DoxyCodeLine{04114\ \ \ \}}
\DoxyCodeLine{04115\ \ \ decode\ -\/=\ 16;}
\DoxyCodeLine{04116\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{04117\ \ \ decode\ +=\ 8;}
\DoxyCodeLine{04118\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04119\ \ \ \textcolor{keywordflow}{while}\ (\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04120\ \ \ \{}
\DoxyCodeLine{04121\ \ \ \ \ stbir\_\_simdf\ d0,a0,d1,a1,p0,p1;}
\DoxyCodeLine{04122\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04123\ \ \ \ \ stbir\_\_simdf\_load(\ d0,\ decode-\/8\ );}
\DoxyCodeLine{04124\ \ \ \ \ stbir\_\_simdf\_load(\ d1,\ decode-\/8+4\ );}
\DoxyCodeLine{04125\ \ \ \ \ stbir\_\_simdf\_0123to3333(\ a0,\ d0\ );}
\DoxyCodeLine{04126\ \ \ \ \ stbir\_\_simdf\_0123to3333(\ a1,\ d1\ );}
\DoxyCodeLine{04127\ \ \ \ \ stbir\_\_simdf\_mult(\ p0,\ a0,\ d0\ );}
\DoxyCodeLine{04128\ \ \ \ \ stbir\_\_simdf\_mult(\ p1,\ a1,\ d1\ );}
\DoxyCodeLine{04129\ \ \ \ \ stbir\_\_simdf\_store\ (\ out,\ d0\ );}
\DoxyCodeLine{04130\ \ \ \ \ stbir\_\_simdf\_store\ (\ out+4,\ p0\ );}
\DoxyCodeLine{04131\ \ \ \ \ stbir\_\_simdf\_store\ (\ out+7,\ d1\ );}
\DoxyCodeLine{04132\ \ \ \ \ stbir\_\_simdf\_store\ (\ out+7+4,\ p1\ );}
\DoxyCodeLine{04133\ \ \ \ \ decode\ +=\ 8;}
\DoxyCodeLine{04134\ \ \ \ \ out\ +=\ 14;}
\DoxyCodeLine{04135\ \ \ \}}
\DoxyCodeLine{04136\ \ \ decode\ -\/=\ 8;}
\DoxyCodeLine{04137\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{04138\ }
\DoxyCodeLine{04139\ \ \ \textcolor{comment}{//\ might\ be\ one\ last\ odd\ pixel}}
\DoxyCodeLine{04140\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{04141\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04142\ \ \ \textcolor{keywordflow}{while}\ (\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04143\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{04144\ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04145\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{04146\ \ \ \{}
\DoxyCodeLine{04147\ \ \ \ \ stbir\_\_simdf\ d,a,p;}
\DoxyCodeLine{04148\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04149\ \ \ \ \ stbir\_\_simdf\_load(\ d,\ decode\ );}
\DoxyCodeLine{04150\ \ \ \ \ stbir\_\_simdf\_0123to3333(\ a,\ d\ );}
\DoxyCodeLine{04151\ \ \ \ \ stbir\_\_simdf\_mult(\ p,\ a,\ d\ );}
\DoxyCodeLine{04152\ \ \ \ \ stbir\_\_simdf\_store\ (\ out,\ d\ );}
\DoxyCodeLine{04153\ \ \ \ \ stbir\_\_simdf\_store\ (\ out+4,\ p\ );}
\DoxyCodeLine{04154\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{04155\ \ \ \ \ out\ +=\ 7;}
\DoxyCodeLine{04156\ \ \ \}}
\DoxyCodeLine{04157\ }
\DoxyCodeLine{04158\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{04159\ }
\DoxyCodeLine{04160\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04161\ \ \ \{}
\DoxyCodeLine{04162\ \ \ \ \ \textcolor{keywordtype}{float}\ r\ =\ decode[0],\ g\ =\ decode[1],\ b\ =\ decode[2],\ alpha\ =\ decode[3];}
\DoxyCodeLine{04163\ \ \ \ \ out[0]\ =\ r;}
\DoxyCodeLine{04164\ \ \ \ \ out[1]\ =\ g;}
\DoxyCodeLine{04165\ \ \ \ \ out[2]\ =\ b;}
\DoxyCodeLine{04166\ \ \ \ \ out[3]\ =\ alpha;}
\DoxyCodeLine{04167\ \ \ \ \ out[4]\ =\ r\ *\ alpha;}
\DoxyCodeLine{04168\ \ \ \ \ out[5]\ =\ g\ *\ alpha;}
\DoxyCodeLine{04169\ \ \ \ \ out[6]\ =\ b\ *\ alpha;}
\DoxyCodeLine{04170\ \ \ \ \ out\ +=\ 7;}
\DoxyCodeLine{04171\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{04172\ \ \ \}}
\DoxyCodeLine{04173\ }
\DoxyCodeLine{04174\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{04175\ \}}
\DoxyCodeLine{04176\ }
\DoxyCodeLine{04177\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_fancy\_alpha\_weight\_2ch(\ \textcolor{keywordtype}{float}\ *\ out\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04178\ \{}
\DoxyCodeLine{04179\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ out\ =\ out\_buffer;}
\DoxyCodeLine{04180\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_decode\ =\ out\_buffer\ +\ (\ width\_times\_channels\ /\ 2\ )\ *\ 3;}
\DoxyCodeLine{04181\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ decode\ =\ (\textcolor{keywordtype}{float}*)end\_decode\ -\/\ width\_times\_channels;}
\DoxyCodeLine{04182\ }
\DoxyCodeLine{04183\ \ \ \textcolor{comment}{//\ \ for\ fancy\ alpha,\ turns\ into:\ [X\ A\ Xpm][X\ A\ Xpm],etc}}
\DoxyCodeLine{04184\ }
\DoxyCodeLine{04185\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04186\ }
\DoxyCodeLine{04187\ \ \ decode\ +=\ 8;}
\DoxyCodeLine{04188\ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04189\ \ \ \{}
\DoxyCodeLine{04190\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04191\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{04192\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{04193\ \ \ \ \ \ \ stbir\_\_simdf8\ d0,a0,p0;}
\DoxyCodeLine{04194\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04195\ \ \ \ \ \ \ stbir\_\_simdf8\_load(\ d0,\ decode-\/8\ );}
\DoxyCodeLine{04196\ \ \ \ \ \ \ stbir\_\_simdf8\_0123to11331133(\ p0,\ d0\ );}
\DoxyCodeLine{04197\ \ \ \ \ \ \ stbir\_\_simdf8\_0123to00220022(\ a0,\ d0\ );}
\DoxyCodeLine{04198\ \ \ \ \ \ \ stbir\_\_simdf8\_mult(\ p0,\ p0,\ a0\ );}
\DoxyCodeLine{04199\ }
\DoxyCodeLine{04200\ \ \ \ \ \ \ stbir\_\_simdf\_store2(\ out,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ d0\ )\ );}
\DoxyCodeLine{04201\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ out+2,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ p0\ )\ );}
\DoxyCodeLine{04202\ \ \ \ \ \ \ stbir\_\_simdf\_store2h(\ out+3,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ d0\ )\ );}
\DoxyCodeLine{04203\ }
\DoxyCodeLine{04204\ \ \ \ \ \ \ stbir\_\_simdf\_store2(\ out+6,\ stbir\_\_simdf8\_gettop4(\ d0\ )\ );}
\DoxyCodeLine{04205\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ out+8,\ stbir\_\_simdf8\_gettop4(\ p0\ )\ );}
\DoxyCodeLine{04206\ \ \ \ \ \ \ stbir\_\_simdf\_store2h(\ out+9,\ stbir\_\_simdf8\_gettop4(\ d0\ )\ );}
\DoxyCodeLine{04207\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{04208\ \ \ \ \ \ \ stbir\_\_simdf\ d0,a0,d1,a1,p0,p1;}
\DoxyCodeLine{04209\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04210\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ d0,\ decode-\/8\ );}
\DoxyCodeLine{04211\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ d1,\ decode-\/8+4\ );}
\DoxyCodeLine{04212\ \ \ \ \ \ \ stbir\_\_simdf\_0123to1133(\ p0,\ d0\ );}
\DoxyCodeLine{04213\ \ \ \ \ \ \ stbir\_\_simdf\_0123to1133(\ p1,\ d1\ );}
\DoxyCodeLine{04214\ \ \ \ \ \ \ stbir\_\_simdf\_0123to0022(\ a0,\ d0\ );}
\DoxyCodeLine{04215\ \ \ \ \ \ \ stbir\_\_simdf\_0123to0022(\ a1,\ d1\ );}
\DoxyCodeLine{04216\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ p0,\ p0,\ a0\ );}
\DoxyCodeLine{04217\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ p1,\ p1,\ a1\ );}
\DoxyCodeLine{04218\ }
\DoxyCodeLine{04219\ \ \ \ \ \ \ stbir\_\_simdf\_store2(\ out,\ d0\ );}
\DoxyCodeLine{04220\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ out+2,\ p0\ );}
\DoxyCodeLine{04221\ \ \ \ \ \ \ stbir\_\_simdf\_store2h(\ out+3,\ d0\ );}
\DoxyCodeLine{04222\ }
\DoxyCodeLine{04223\ \ \ \ \ \ \ stbir\_\_simdf\_store2(\ out+6,\ d1\ );}
\DoxyCodeLine{04224\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ out+8,\ p1\ );}
\DoxyCodeLine{04225\ \ \ \ \ \ \ stbir\_\_simdf\_store2h(\ out+9,\ d1\ );}
\DoxyCodeLine{04226\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{04227\ \ \ \ \ \ \ decode\ +=\ 8;}
\DoxyCodeLine{04228\ \ \ \ \ \ \ out\ +=\ 12;}
\DoxyCodeLine{04229\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ decode\ <=\ end\_decode\ );}
\DoxyCodeLine{04230\ \ \ \}}
\DoxyCodeLine{04231\ \ \ decode\ -\/=\ 8;}
\DoxyCodeLine{04232\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{04233\ }
\DoxyCodeLine{04234\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04235\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04236\ \ \ \{}
\DoxyCodeLine{04237\ \ \ \ \ \textcolor{keywordtype}{float}\ x\ =\ decode[0],\ y\ =\ decode[1];}
\DoxyCodeLine{04238\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{04239\ \ \ \ \ out[0]\ =\ x;}
\DoxyCodeLine{04240\ \ \ \ \ out[1]\ =\ y;}
\DoxyCodeLine{04241\ \ \ \ \ out[2]\ =\ x\ *\ y;}
\DoxyCodeLine{04242\ \ \ \ \ out\ +=\ 3;}
\DoxyCodeLine{04243\ \ \ \ \ decode\ +=\ 2;}
\DoxyCodeLine{04244\ \ \ \}}
\DoxyCodeLine{04245\ \}}
\DoxyCodeLine{04246\ }
\DoxyCodeLine{04247\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_fancy\_alpha\_unweight\_4ch(\ \textcolor{keywordtype}{float}\ *\ encode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04248\ \{}
\DoxyCodeLine{04249\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(*)\ encode\ =\ encode\_buffer;}
\DoxyCodeLine{04250\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(*)\ input\ =\ encode\_buffer;}
\DoxyCodeLine{04251\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_output\ =\ encode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04252\ }
\DoxyCodeLine{04253\ \ \ \textcolor{comment}{//\ fancy\ RGBA\ is\ stored\ internally\ as\ R\ G\ B\ A\ Rpm\ Gpm\ Bpm}}
\DoxyCodeLine{04254\ }
\DoxyCodeLine{04255\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04256\ \ \ do\ \{}
\DoxyCodeLine{04257\ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ input[3];}
\DoxyCodeLine{04258\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04259\ \ \ \ \ stbir\_\_simdf\ i,ia;}
\DoxyCodeLine{04260\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{04261\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\ <\ stbir\_\_small\_float\ )}
\DoxyCodeLine{04262\ \ \ \ \ \{}
\DoxyCodeLine{04263\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ i,\ input\ );}
\DoxyCodeLine{04264\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ encode,\ i\ );}
\DoxyCodeLine{04265\ \ \ \ \ \}}
\DoxyCodeLine{04266\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{04267\ \ \ \ \ \{}
\DoxyCodeLine{04268\ \ \ \ \ \ \ stbir\_\_simdf\_load1frep4(\ ia,\ 1.0f\ /\ alpha\ );}
\DoxyCodeLine{04269\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ i,\ input+4\ );}
\DoxyCodeLine{04270\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ i,\ i,\ ia\ );}
\DoxyCodeLine{04271\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ encode,\ i\ );}
\DoxyCodeLine{04272\ \ \ \ \ \ \ encode[3]\ =\ alpha;}
\DoxyCodeLine{04273\ \ \ \ \ \}}
\DoxyCodeLine{04274\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04275\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\ <\ stbir\_\_small\_float\ )}
\DoxyCodeLine{04276\ \ \ \ \ \{}
\DoxyCodeLine{04277\ \ \ \ \ \ \ encode[0]\ =\ input[0];}
\DoxyCodeLine{04278\ \ \ \ \ \ \ encode[1]\ =\ input[1];}
\DoxyCodeLine{04279\ \ \ \ \ \ \ encode[2]\ =\ input[2];}
\DoxyCodeLine{04280\ \ \ \ \ \}}
\DoxyCodeLine{04281\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{04282\ \ \ \ \ \{}
\DoxyCodeLine{04283\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ ialpha\ =\ 1.0f\ /\ alpha;}
\DoxyCodeLine{04284\ \ \ \ \ \ \ encode[0]\ =\ input[4]\ *\ ialpha;}
\DoxyCodeLine{04285\ \ \ \ \ \ \ encode[1]\ =\ input[5]\ *\ ialpha;}
\DoxyCodeLine{04286\ \ \ \ \ \ \ encode[2]\ =\ input[6]\ *\ ialpha;}
\DoxyCodeLine{04287\ \ \ \ \ \}}
\DoxyCodeLine{04288\ \ \ \ \ encode[3]\ =\ alpha;}
\DoxyCodeLine{04289\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04290\ }
\DoxyCodeLine{04291\ \ \ \ \ input\ +=\ 7;}
\DoxyCodeLine{04292\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{04293\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ encode\ <\ end\_output\ );}
\DoxyCodeLine{04294\ \}}
\DoxyCodeLine{04295\ }
\DoxyCodeLine{04296\ \textcolor{comment}{//\ \ format:\ [X\ A\ Xpm][X\ A\ Xpm]\ etc}}
\DoxyCodeLine{04297\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_fancy\_alpha\_unweight\_2ch(\ \textcolor{keywordtype}{float}\ *\ encode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04298\ \{}
\DoxyCodeLine{04299\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(*)\ encode\ =\ encode\_buffer;}
\DoxyCodeLine{04300\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(*)\ input\ =\ encode\_buffer;}
\DoxyCodeLine{04301\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_output\ =\ encode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04302\ }
\DoxyCodeLine{04303\ \ \ do\ \{}
\DoxyCodeLine{04304\ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ input[1];}
\DoxyCodeLine{04305\ \ \ \ \ encode[0]\ =\ input[0];}
\DoxyCodeLine{04306\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\ >=\ stbir\_\_small\_float\ )}
\DoxyCodeLine{04307\ \ \ \ \ \ \ encode[0]\ =\ input[2]\ /\ alpha;}
\DoxyCodeLine{04308\ \ \ \ \ encode[1]\ =\ alpha;}
\DoxyCodeLine{04309\ }
\DoxyCodeLine{04310\ \ \ \ \ input\ +=\ 3;}
\DoxyCodeLine{04311\ \ \ \ \ encode\ +=\ 2;}
\DoxyCodeLine{04312\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ encode\ <\ end\_output\ );}
\DoxyCodeLine{04313\ \}}
\DoxyCodeLine{04314\ }
\DoxyCodeLine{04315\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_simple\_alpha\_weight\_4ch(\ \textcolor{keywordtype}{float}\ *\ decode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04316\ \{}
\DoxyCodeLine{04317\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ decode\ =\ decode\_buffer;}
\DoxyCodeLine{04318\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_decode\ =\ decode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04319\ }
\DoxyCodeLine{04320\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04321\ \ \ \{}
\DoxyCodeLine{04322\ \ \ \ \ decode\ +=\ 2\ *\ stbir\_\_simdfX\_float\_count;}
\DoxyCodeLine{04323\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04324\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04325\ \ \ \ \ \{}
\DoxyCodeLine{04326\ \ \ \ \ \ \ stbir\_\_simdfX\ d0,a0,d1,a1;}
\DoxyCodeLine{04327\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04328\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ d0,\ decode-\/2*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{04329\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ d1,\ decode-\/2*stbir\_\_simdfX\_float\_count+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{04330\ \ \ \ \ \ \ stbir\_\_simdfX\_aaa1(\ a0,\ d0,\ STBIR\_onesX\ );}
\DoxyCodeLine{04331\ \ \ \ \ \ \ stbir\_\_simdfX\_aaa1(\ a1,\ d1,\ STBIR\_onesX\ );}
\DoxyCodeLine{04332\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ d0,\ d0,\ a0\ );}
\DoxyCodeLine{04333\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ d1,\ d1,\ a1\ );}
\DoxyCodeLine{04334\ \ \ \ \ \ \ stbir\_\_simdfX\_store\ (\ decode-\/2*stbir\_\_simdfX\_float\_count,\ d0\ );}
\DoxyCodeLine{04335\ \ \ \ \ \ \ stbir\_\_simdfX\_store\ (\ decode-\/2*stbir\_\_simdfX\_float\_count+stbir\_\_simdfX\_float\_count,\ d1\ );}
\DoxyCodeLine{04336\ \ \ \ \ \ \ decode\ +=\ 2\ *\ stbir\_\_simdfX\_float\_count;}
\DoxyCodeLine{04337\ \ \ \ \ \}}
\DoxyCodeLine{04338\ \ \ \ \ decode\ -\/=\ 2\ *\ stbir\_\_simdfX\_float\_count;}
\DoxyCodeLine{04339\ }
\DoxyCodeLine{04340\ \ \ \ \ \textcolor{comment}{//\ few\ last\ pixels\ remnants}}
\DoxyCodeLine{04341\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{04342\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04343\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04344\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{04345\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04346\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{04347\ \ \ \ \ \{}
\DoxyCodeLine{04348\ \ \ \ \ \ \ stbir\_\_simdf\ d,a;}
\DoxyCodeLine{04349\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ d,\ decode\ );}
\DoxyCodeLine{04350\ \ \ \ \ \ \ stbir\_\_simdf\_aaa1(\ a,\ d,\ STBIR\_\_CONSTF(STBIR\_ones)\ );}
\DoxyCodeLine{04351\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ d,\ d,\ a\ );}
\DoxyCodeLine{04352\ \ \ \ \ \ \ stbir\_\_simdf\_store\ (\ decode,\ d\ );}
\DoxyCodeLine{04353\ \ \ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{04354\ \ \ \ \ \}}
\DoxyCodeLine{04355\ \ \ \}}
\DoxyCodeLine{04356\ }
\DoxyCodeLine{04357\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{04358\ }
\DoxyCodeLine{04359\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04360\ \ \ \{}
\DoxyCodeLine{04361\ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ decode[3];}
\DoxyCodeLine{04362\ \ \ \ \ decode[0]\ *=\ alpha;}
\DoxyCodeLine{04363\ \ \ \ \ decode[1]\ *=\ alpha;}
\DoxyCodeLine{04364\ \ \ \ \ decode[2]\ *=\ alpha;}
\DoxyCodeLine{04365\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{04366\ \ \ \}}
\DoxyCodeLine{04367\ }
\DoxyCodeLine{04368\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{04369\ \}}
\DoxyCodeLine{04370\ }
\DoxyCodeLine{04371\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_simple\_alpha\_weight\_2ch(\ \textcolor{keywordtype}{float}\ *\ decode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04372\ \{}
\DoxyCodeLine{04373\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ decode\ =\ decode\_buffer;}
\DoxyCodeLine{04374\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_decode\ =\ decode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04375\ }
\DoxyCodeLine{04376\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04377\ \ \ decode\ +=\ 2\ *\ stbir\_\_simdfX\_float\_count;}
\DoxyCodeLine{04378\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04379\ \ \ \textcolor{keywordflow}{while}\ (\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04380\ \ \ \{}
\DoxyCodeLine{04381\ \ \ \ \ stbir\_\_simdfX\ d0,a0,d1,a1;}
\DoxyCodeLine{04382\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04383\ \ \ \ \ stbir\_\_simdfX\_load(\ d0,\ decode-\/2*stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{04384\ \ \ \ \ stbir\_\_simdfX\_load(\ d1,\ decode-\/2*stbir\_\_simdfX\_float\_count+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{04385\ \ \ \ \ stbir\_\_simdfX\_a1a1(\ a0,\ d0,\ STBIR\_onesX\ );}
\DoxyCodeLine{04386\ \ \ \ \ stbir\_\_simdfX\_a1a1(\ a1,\ d1,\ STBIR\_onesX\ );}
\DoxyCodeLine{04387\ \ \ \ \ stbir\_\_simdfX\_mult(\ d0,\ d0,\ a0\ );}
\DoxyCodeLine{04388\ \ \ \ \ stbir\_\_simdfX\_mult(\ d1,\ d1,\ a1\ );}
\DoxyCodeLine{04389\ \ \ \ \ stbir\_\_simdfX\_store\ (\ decode-\/2*stbir\_\_simdfX\_float\_count,\ d0\ );}
\DoxyCodeLine{04390\ \ \ \ \ stbir\_\_simdfX\_store\ (\ decode-\/2*stbir\_\_simdfX\_float\_count+stbir\_\_simdfX\_float\_count,\ d1\ );}
\DoxyCodeLine{04391\ \ \ \ \ decode\ +=\ 2\ *\ stbir\_\_simdfX\_float\_count;}
\DoxyCodeLine{04392\ \ \ \}}
\DoxyCodeLine{04393\ \ \ decode\ -\/=\ 2\ *\ stbir\_\_simdfX\_float\_count;}
\DoxyCodeLine{04394\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{04395\ }
\DoxyCodeLine{04396\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04397\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04398\ \ \ \{}
\DoxyCodeLine{04399\ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ decode[1];}
\DoxyCodeLine{04400\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{04401\ \ \ \ \ decode[0]\ *=\ alpha;}
\DoxyCodeLine{04402\ \ \ \ \ decode\ +=\ 2;}
\DoxyCodeLine{04403\ \ \ \}}
\DoxyCodeLine{04404\ \}}
\DoxyCodeLine{04405\ }
\DoxyCodeLine{04406\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_simple\_alpha\_unweight\_4ch(\ \textcolor{keywordtype}{float}\ *\ encode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04407\ \{}
\DoxyCodeLine{04408\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(*)\ encode\ =\ encode\_buffer;}
\DoxyCodeLine{04409\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_output\ =\ encode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04410\ }
\DoxyCodeLine{04411\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04412\ \ \ do\ \{}
\DoxyCodeLine{04413\ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ encode[3];}
\DoxyCodeLine{04414\ }
\DoxyCodeLine{04415\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04416\ \ \ \ \ stbir\_\_simdf\ i,ia;}
\DoxyCodeLine{04417\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{04418\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\ >=\ stbir\_\_small\_float\ )}
\DoxyCodeLine{04419\ \ \ \ \ \{}
\DoxyCodeLine{04420\ \ \ \ \ \ \ stbir\_\_simdf\_load1frep4(\ ia,\ 1.0f\ /\ alpha\ );}
\DoxyCodeLine{04421\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ i,\ encode\ );}
\DoxyCodeLine{04422\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ i,\ i,\ ia\ );}
\DoxyCodeLine{04423\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ encode,\ i\ );}
\DoxyCodeLine{04424\ \ \ \ \ \ \ encode[3]\ =\ alpha;}
\DoxyCodeLine{04425\ \ \ \ \ \}}
\DoxyCodeLine{04426\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04427\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\ >=\ stbir\_\_small\_float\ )}
\DoxyCodeLine{04428\ \ \ \ \ \{}
\DoxyCodeLine{04429\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ ialpha\ =\ 1.0f\ /\ alpha;}
\DoxyCodeLine{04430\ \ \ \ \ \ \ encode[0]\ *=\ ialpha;}
\DoxyCodeLine{04431\ \ \ \ \ \ \ encode[1]\ *=\ ialpha;}
\DoxyCodeLine{04432\ \ \ \ \ \ \ encode[2]\ *=\ ialpha;}
\DoxyCodeLine{04433\ \ \ \ \ \}}
\DoxyCodeLine{04434\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04435\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{04436\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ encode\ <\ end\_output\ );}
\DoxyCodeLine{04437\ \}}
\DoxyCodeLine{04438\ }
\DoxyCodeLine{04439\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_simple\_alpha\_unweight\_2ch(\ \textcolor{keywordtype}{float}\ *\ encode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04440\ \{}
\DoxyCodeLine{04441\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(*)\ encode\ =\ encode\_buffer;}
\DoxyCodeLine{04442\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_output\ =\ encode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04443\ }
\DoxyCodeLine{04444\ \ \ do\ \{}
\DoxyCodeLine{04445\ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ encode[1];}
\DoxyCodeLine{04446\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\ >=\ stbir\_\_small\_float\ )}
\DoxyCodeLine{04447\ \ \ \ \ \ \ encode[0]\ /=\ alpha;}
\DoxyCodeLine{04448\ \ \ \ \ encode\ +=\ 2;}
\DoxyCodeLine{04449\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ encode\ <\ end\_output\ );}
\DoxyCodeLine{04450\ \}}
\DoxyCodeLine{04451\ }
\DoxyCodeLine{04452\ }
\DoxyCodeLine{04453\ \textcolor{comment}{//\ only\ used\ in\ RGB-\/>BGR\ or\ BGR-\/>RGB}}
\DoxyCodeLine{04454\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_simple\_flip\_3ch(\ \textcolor{keywordtype}{float}\ *\ decode\_buffer,\ \textcolor{keywordtype}{int}\ width\_times\_channels\ )}
\DoxyCodeLine{04455\ \{}
\DoxyCodeLine{04456\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(*)\ decode\ =\ decode\_buffer;}
\DoxyCodeLine{04457\ \ \ \textcolor{keywordtype}{float}\ const\ *\ end\_decode\ =\ decode\_buffer\ +\ width\_times\_channels;}
\DoxyCodeLine{04458\ }
\DoxyCodeLine{04459\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04460\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ stbir\_\_simdf\_swiz2\ }\textcolor{comment}{//\ do\ we\ have\ two\ argument\ swizzles?}}
\DoxyCodeLine{04461\ \ \ \ \ \ \ end\_decode\ -\/=\ 12;\ }
\DoxyCodeLine{04462\ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04463\ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04464\ \ \ \ \ \ \ \{}
\DoxyCodeLine{04465\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ on\ arm64\ 8\ instructions,\ no\ overlapping\ stores}}
\DoxyCodeLine{04466\ \ \ \ \ \ \ \ \ stbir\_\_simdf\ a,b,c,na,nb;}
\DoxyCodeLine{04467\ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{04468\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ a,\ decode\ );}
\DoxyCodeLine{04469\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ b,\ decode+4\ );}
\DoxyCodeLine{04470\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ c,\ decode+8\ );}
\DoxyCodeLine{04471\ }
\DoxyCodeLine{04472\ \ \ \ \ \ \ \ \ na\ =\ stbir\_\_simdf\_swiz2(\ a,\ b,\ 2,\ 1,\ 0,\ 5\ );\ \ \ }
\DoxyCodeLine{04473\ \ \ \ \ \ \ \ \ b\ \ =\ stbir\_\_simdf\_swiz2(\ a,\ b,\ 4,\ 3,\ 6,\ 7\ );\ \ \ }
\DoxyCodeLine{04474\ \ \ \ \ \ \ \ \ nb\ =\ stbir\_\_simdf\_swiz2(\ b,\ c,\ 0,\ 1,\ 4,\ 3\ );\ \ \ }
\DoxyCodeLine{04475\ \ \ \ \ \ \ \ \ c\ \ =\ stbir\_\_simdf\_swiz2(\ b,\ c,\ 2,\ 7,\ 6,\ 5\ );\ \ \ }
\DoxyCodeLine{04476\ }
\DoxyCodeLine{04477\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode,\ na\ );}
\DoxyCodeLine{04478\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+4,\ nb\ );\ }
\DoxyCodeLine{04479\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+8,\ c\ );}
\DoxyCodeLine{04480\ \ \ \ \ \ \ \ \ decode\ +=\ 12;}
\DoxyCodeLine{04481\ \ \ \ \ \ \ \}}
\DoxyCodeLine{04482\ \ \ \ \ \ \ end\_decode\ +=\ 12;}
\DoxyCodeLine{04483\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{04484\ \ \ \ \ \ \ end\_decode\ -\/=\ 24;}
\DoxyCodeLine{04485\ \ \ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04486\ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04487\ \ \ \ \ \ \ \{}
\DoxyCodeLine{04488\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 26\ instructions\ on\ x64}}
\DoxyCodeLine{04489\ \ \ \ \ \ \ \ \ stbir\_\_simdf\ a,b,c,d,e,f,g;}
\DoxyCodeLine{04490\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ i21,\ i23;}
\DoxyCodeLine{04491\ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{04492\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ a,\ decode\ );}
\DoxyCodeLine{04493\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ b,\ decode+3\ );}
\DoxyCodeLine{04494\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ c,\ decode+6\ );}
\DoxyCodeLine{04495\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ d,\ decode+9\ );}
\DoxyCodeLine{04496\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ e,\ decode+12\ );}
\DoxyCodeLine{04497\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ f,\ decode+15\ );}
\DoxyCodeLine{04498\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ g,\ decode+18\ );}
\DoxyCodeLine{04499\ }
\DoxyCodeLine{04500\ \ \ \ \ \ \ \ \ a\ =\ stbir\_\_simdf\_swiz(\ a,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04501\ \ \ \ \ \ \ \ \ b\ =\ stbir\_\_simdf\_swiz(\ b,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04502\ \ \ \ \ \ \ \ \ c\ =\ stbir\_\_simdf\_swiz(\ c,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04503\ \ \ \ \ \ \ \ \ d\ =\ stbir\_\_simdf\_swiz(\ d,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04504\ \ \ \ \ \ \ \ \ e\ =\ stbir\_\_simdf\_swiz(\ e,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04505\ \ \ \ \ \ \ \ \ f\ =\ stbir\_\_simdf\_swiz(\ f,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04506\ \ \ \ \ \ \ \ \ g\ =\ stbir\_\_simdf\_swiz(\ g,\ 2,\ 1,\ 0,\ 3\ );\ \ \ }
\DoxyCodeLine{04507\ }
\DoxyCodeLine{04508\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ stores\ overlap,\ need\ to\ be\ in\ order,\ }}
\DoxyCodeLine{04509\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode,\ \ \ \ a\ );}
\DoxyCodeLine{04510\ \ \ \ \ \ \ \ \ i21\ =\ decode[21];}
\DoxyCodeLine{04511\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+3,\ \ b\ );\ }
\DoxyCodeLine{04512\ \ \ \ \ \ \ \ \ i23\ =\ decode[23];}
\DoxyCodeLine{04513\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+6,\ \ c\ );}
\DoxyCodeLine{04514\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+9,\ \ d\ );}
\DoxyCodeLine{04515\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+12,\ e\ );}
\DoxyCodeLine{04516\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+15,\ f\ );}
\DoxyCodeLine{04517\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+18,\ g\ );}
\DoxyCodeLine{04518\ \ \ \ \ \ \ \ \ decode[21]\ =\ i23;}
\DoxyCodeLine{04519\ \ \ \ \ \ \ \ \ decode[23]\ =\ i21;}
\DoxyCodeLine{04520\ \ \ \ \ \ \ \ \ decode\ +=\ 24;}
\DoxyCodeLine{04521\ \ \ \ \ \ \ \}}
\DoxyCodeLine{04522\ \ \ \ \ \ \ end\_decode\ +=\ 24;}
\DoxyCodeLine{04523\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{04524\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04525\ \ \ end\_decode\ -\/=\ 12;}
\DoxyCodeLine{04526\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04527\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ end\_decode\ )}
\DoxyCodeLine{04528\ \ \ \{}
\DoxyCodeLine{04529\ \ \ \ \ \textcolor{comment}{//\ 16\ instructions}}
\DoxyCodeLine{04530\ \ \ \ \ \textcolor{keywordtype}{float}\ t0,t1,t2,t3;}
\DoxyCodeLine{04531\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04532\ \ \ \ \ t0\ =\ decode[0];\ t1\ =\ decode[3];\ t2\ =\ decode[6];\ t3\ =\ decode[9];}
\DoxyCodeLine{04533\ \ \ \ \ decode[0]\ =\ decode[2];\ decode[3]\ =\ decode[5];\ decode[6]\ =\ decode[8];\ decode[9]\ =\ decode[11];}
\DoxyCodeLine{04534\ \ \ \ \ decode[2]\ =\ t0;\ decode[5]\ =\ t1;\ decode[8]\ =\ t2;\ decode[11]\ =\ t3;}
\DoxyCodeLine{04535\ \ \ \ \ decode\ +=\ 12;}
\DoxyCodeLine{04536\ \ \ \}}
\DoxyCodeLine{04537\ \ \ end\_decode\ +=\ 12;}
\DoxyCodeLine{04538\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04539\ }
\DoxyCodeLine{04540\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{04541\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ end\_decode\ )}
\DoxyCodeLine{04542\ \ \ \{}
\DoxyCodeLine{04543\ \ \ \ \ \textcolor{keywordtype}{float}\ t\ =\ decode[0];}
\DoxyCodeLine{04544\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{04545\ \ \ \ \ decode[0]\ =\ decode[2];}
\DoxyCodeLine{04546\ \ \ \ \ decode[2]\ =\ t;}
\DoxyCodeLine{04547\ \ \ \ \ decode\ +=\ 3;}
\DoxyCodeLine{04548\ \ \ \}}
\DoxyCodeLine{04549\ \}}
\DoxyCodeLine{04550\ }
\DoxyCodeLine{04551\ }
\DoxyCodeLine{04552\ }
\DoxyCodeLine{04553\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_decode\_scanline(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{float}\ *\ output\_buffer\ STBIR\_ONLY\_PROFILE\_GET\_SPLIT\_INFO\ )}
\DoxyCodeLine{04554\ \{}
\DoxyCodeLine{04555\ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{04556\ \ \ \textcolor{keywordtype}{int}\ effective\_channels\ =\ stbir\_info-\/>effective\_channels;}
\DoxyCodeLine{04557\ \ \ \textcolor{keywordtype}{int}\ input\_sample\_in\_bytes\ =\ stbir\_\_type\_size[stbir\_info-\/>input\_type]\ *\ channels;}
\DoxyCodeLine{04558\ \ \ stbir\_edge\ edge\_horizontal\ =\ stbir\_info-\/>horizontal.edge;}
\DoxyCodeLine{04559\ \ \ stbir\_edge\ edge\_vertical\ =\ stbir\_info-\/>vertical.edge;}
\DoxyCodeLine{04560\ \ \ \textcolor{keywordtype}{int}\ row\ =\ stbir\_\_edge\_wrap(edge\_vertical,\ n,\ stbir\_info-\/>vertical.scale\_info.input\_full\_size);}
\DoxyCodeLine{04561\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ input\_plane\_data\ =\ (\ (\textcolor{keywordtype}{char}\ *)\ stbir\_info-\/>input\_data\ )\ +\ (size\_t)row\ *\ (\textcolor{keywordtype}{size\_t})\ stbir\_info-\/>input\_stride\_bytes;}
\DoxyCodeLine{04562\ \ \ stbir\_\_span\ \textcolor{keyword}{const}\ *\ spans\ =\ stbir\_info-\/>scanline\_extents.spans;}
\DoxyCodeLine{04563\ \ \ \textcolor{keywordtype}{float}*\ full\_decode\_buffer\ =\ output\_buffer\ -\/\ stbir\_info-\/>scanline\_extents.conservative.n0\ *\ effective\_channels;}
\DoxyCodeLine{04564\ }
\DoxyCodeLine{04565\ \ \ \textcolor{comment}{//\ if\ we\ are\ on\ edge\_zero,\ and\ we\ get\ in\ here\ with\ an\ out\ of\ bounds\ n,\ then\ the\ calculate\ filters\ has\ failed}}
\DoxyCodeLine{04566\ \ \ STBIR\_ASSERT(\ !(edge\_vertical\ ==\ STBIR\_EDGE\_ZERO\ \&\&\ (n\ <\ 0\ ||\ n\ >=\ stbir\_info-\/>vertical.scale\_info.input\_full\_size))\ );}
\DoxyCodeLine{04567\ }
\DoxyCodeLine{04568\ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{04569\ \ \ \{}
\DoxyCodeLine{04570\ \ \ \ \ \textcolor{keywordtype}{float}\ *\ decode\_buffer;}
\DoxyCodeLine{04571\ \ \ \ \ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ input\_data;}
\DoxyCodeLine{04572\ \ \ \ \ \textcolor{keywordtype}{float}\ *\ end\_decode;}
\DoxyCodeLine{04573\ \ \ \ \ \textcolor{keywordtype}{int}\ width\_times\_channels;}
\DoxyCodeLine{04574\ \ \ \ \ \textcolor{keywordtype}{int}\ width;}
\DoxyCodeLine{04575\ }
\DoxyCodeLine{04576\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ spans-\/>n1\ <\ spans-\/>n0\ )}
\DoxyCodeLine{04577\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04578\ }
\DoxyCodeLine{04579\ \ \ \ \ width\ =\ spans-\/>n1\ +\ 1\ -\/\ spans-\/>n0;}
\DoxyCodeLine{04580\ \ \ \ \ decode\_buffer\ =\ full\_decode\_buffer\ +\ spans-\/>n0\ *\ effective\_channels;}
\DoxyCodeLine{04581\ \ \ \ \ end\_decode\ =\ full\_decode\_buffer\ +\ (\ spans-\/>n1\ +\ 1\ )\ *\ effective\_channels;}
\DoxyCodeLine{04582\ \ \ \ \ width\_times\_channels\ =\ width\ *\ channels;}
\DoxyCodeLine{04583\ }
\DoxyCodeLine{04584\ \ \ \ \ \textcolor{comment}{//\ read\ directly\ out\ of\ input\ plane\ by\ default}}
\DoxyCodeLine{04585\ \ \ \ \ input\_data\ =\ (\ (\textcolor{keywordtype}{char}*)input\_plane\_data\ )\ +\ spans-\/>pixel\_offset\_for\_input\ *\ input\_sample\_in\_bytes;}
\DoxyCodeLine{04586\ }
\DoxyCodeLine{04587\ \ \ \ \ \textcolor{comment}{//\ if\ we\ have\ an\ input\ callback,\ call\ it\ to\ get\ the\ input\ data}}
\DoxyCodeLine{04588\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ stbir\_info-\/>in\_pixels\_cb\ )}
\DoxyCodeLine{04589\ \ \ \ \ \{}
\DoxyCodeLine{04590\ \ \ \ \ \ \ \textcolor{comment}{//\ call\ the\ callback\ with\ a\ temp\ buffer\ (that\ they\ can\ choose\ to\ use\ or\ not).\ \ the\ temp\ is\ just\ right\ aligned\ memory\ in\ the\ decode\_buffer\ itself}}
\DoxyCodeLine{04591\ \ \ \ \ \ \ input\_data\ =\ stbir\_info-\/>in\_pixels\_cb(\ (\ (\textcolor{keywordtype}{char}*)\ end\_decode\ )\ -\/\ (\ width\ *\ input\_sample\_in\_bytes\ ),\ input\_plane\_data,\ width,\ spans-\/>pixel\_offset\_for\_input,\ row,\ stbir\_info-\/>user\_data\ );}
\DoxyCodeLine{04592\ \ \ \ \ \}}
\DoxyCodeLine{04593\ }
\DoxyCodeLine{04594\ \ \ \ \ STBIR\_PROFILE\_START(\ decode\ );}
\DoxyCodeLine{04595\ \ \ \ \ \textcolor{comment}{//\ convert\ the\ pixels\ info\ the\ float\ decode\_buffer,\ (we\ index\ from\ end\_decode,\ so\ that\ when\ channels<effective\_channels,\ we\ are\ right\ justified\ in\ the\ buffer)}}
\DoxyCodeLine{04596\ \ \ \ \ stbir\_info-\/>decode\_pixels(\ (\textcolor{keywordtype}{float}*)end\_decode\ -\/\ width\_times\_channels,\ width\_times\_channels,\ input\_data\ );}
\DoxyCodeLine{04597\ \ \ \ \ STBIR\_PROFILE\_END(\ decode\ );}
\DoxyCodeLine{04598\ }
\DoxyCodeLine{04599\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>alpha\_weight)}
\DoxyCodeLine{04600\ \ \ \ \ \{}
\DoxyCodeLine{04601\ \ \ \ \ \ \ STBIR\_PROFILE\_START(\ alpha\ );}
\DoxyCodeLine{04602\ \ \ \ \ \ \ stbir\_info-\/>alpha\_weight(\ decode\_buffer,\ width\_times\_channels\ );}
\DoxyCodeLine{04603\ \ \ \ \ \ \ STBIR\_PROFILE\_END(\ alpha\ );}
\DoxyCodeLine{04604\ \ \ \ \ \}}
\DoxyCodeLine{04605\ }
\DoxyCodeLine{04606\ \ \ \ \ ++spans;}
\DoxyCodeLine{04607\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ spans\ <=\ (\ \&stbir\_info-\/>scanline\_extents.spans[1]\ )\ );}
\DoxyCodeLine{04608\ }
\DoxyCodeLine{04609\ \ \ \textcolor{comment}{//\ handle\ the\ edge\_wrap\ filter\ (all\ other\ types\ are\ handled\ back\ out\ at\ the\ calculate\_filter\ stage)}}
\DoxyCodeLine{04610\ \ \ \textcolor{comment}{//\ basically\ the\ idea\ here\ is\ that\ if\ we\ have\ the\ whole\ scanline\ in\ memory,\ we\ don't\ redecode\ the}}
\DoxyCodeLine{04611\ \ \ \textcolor{comment}{//\ \ \ wrapped\ edge\ pixels,\ and\ instead\ just\ memcpy\ them\ from\ the\ scanline\ into\ the\ edge\ positions}}
\DoxyCodeLine{04612\ \ \ \textcolor{keywordflow}{if}\ (\ (\ edge\_horizontal\ ==\ STBIR\_EDGE\_WRAP\ )\ \&\&\ (\ stbir\_info-\/>scanline\_extents.edge\_sizes[0]\ |\ stbir\_info-\/>scanline\_extents.edge\_sizes[1]\ )\ )}
\DoxyCodeLine{04613\ \ \ \{}
\DoxyCodeLine{04614\ \ \ \ \ \textcolor{comment}{//\ this\ code\ only\ runs\ if\ we're\ in\ edge\_wrap,\ and\ we're\ doing\ the\ entire\ scanline}}
\DoxyCodeLine{04615\ \ \ \ \ \textcolor{keywordtype}{int}\ e,\ start\_x[2];}
\DoxyCodeLine{04616\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_full\_size\ =\ stbir\_info-\/>horizontal.scale\_info.input\_full\_size;}
\DoxyCodeLine{04617\ }
\DoxyCodeLine{04618\ \ \ \ \ start\_x[0]\ =\ -\/stbir\_info-\/>scanline\_extents.edge\_sizes[0];\ \ \textcolor{comment}{//\ left\ edge\ start\ x}}
\DoxyCodeLine{04619\ \ \ \ \ start\_x[1]\ =\ \ input\_full\_size;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ right\ edge}}
\DoxyCodeLine{04620\ }
\DoxyCodeLine{04621\ \ \ \ \ \textcolor{keywordflow}{for}(\ e\ =\ 0;\ e\ <\ 2\ ;\ e++\ )}
\DoxyCodeLine{04622\ \ \ \ \ \{}
\DoxyCodeLine{04623\ \ \ \ \ \ \ \textcolor{comment}{//\ do\ each\ margin}}
\DoxyCodeLine{04624\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ margin\ =\ stbir\_info-\/>scanline\_extents.edge\_sizes[e];}
\DoxyCodeLine{04625\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ margin\ )}
\DoxyCodeLine{04626\ \ \ \ \ \ \ \{}
\DoxyCodeLine{04627\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ start\_x[e];}
\DoxyCodeLine{04628\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ marg\ =\ full\_decode\_buffer\ +\ x\ *\ effective\_channels;}
\DoxyCodeLine{04629\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ src\ =\ full\_decode\_buffer\ +\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_full\_size)\ *\ effective\_channels;}
\DoxyCodeLine{04630\ \ \ \ \ \ \ \ \ STBIR\_MEMCPY(\ marg,\ src,\ margin\ *\ effective\_channels\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})\ );}
\DoxyCodeLine{04631\ \ \ \ \ \ \ \}}
\DoxyCodeLine{04632\ \ \ \ \ \}}
\DoxyCodeLine{04633\ \ \ \}}
\DoxyCodeLine{04634\ \}}
\DoxyCodeLine{04635\ }
\DoxyCodeLine{04636\ }
\DoxyCodeLine{04637\ \textcolor{comment}{//=================}}
\DoxyCodeLine{04638\ \textcolor{comment}{//\ Do\ 1\ channel\ horizontal\ routines}}
\DoxyCodeLine{04639\ }
\DoxyCodeLine{04640\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04641\ }
\DoxyCodeLine{04642\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04643\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04644\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04645\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1(\ c,\ hc\ );\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04646\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult1\_mem(\ tot,\ c,\ decode\ );}}
\DoxyCodeLine{04647\ }
\DoxyCodeLine{04648\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04649\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04650\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04651\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2z(\ c,\ hc\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04652\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ d,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{04653\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult(\ tot,\ c,\ d\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04654\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1230(\ c,\ tot\ );\ \(\backslash\)}}
\DoxyCodeLine{04655\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add1(\ tot,\ tot,\ c\ );}}
\DoxyCodeLine{04656\ }
\DoxyCodeLine{04657\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04658\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,t;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04659\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04660\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ c,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04661\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{04662\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1230(\ c,\ tot\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04663\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ t,\ tot\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04664\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add1(\ tot,\ tot,\ c\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04665\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add1(\ tot,\ tot,\ t\ );}}
\DoxyCodeLine{04666\ }
\DoxyCodeLine{04667\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04668\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store1(\ output,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04669\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04670\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04671\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 1;}}
\DoxyCodeLine{04672\ }
\DoxyCodeLine{04673\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04674\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04675\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04676\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ c,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04677\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{04678\ \textcolor{preprocessor}{}}
\DoxyCodeLine{04679\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{04680\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04681\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04682\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot,\ tot,\ c,\ decode+(ofs)\ );}}
\DoxyCodeLine{04683\ }
\DoxyCodeLine{04684\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04685\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04686\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04687\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1(\ d,\ decode\ +\ (ofs)\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{04688\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot,\ tot,\ d,\ c\ );\ \}}}
\DoxyCodeLine{04689\ }
\DoxyCodeLine{04690\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04691\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04692\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2z(\ c,\ hc+(ofs)\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04693\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ d,\ decode+(ofs)\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04694\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot,\ tot,\ d,\ c\ );\ \}}}
\DoxyCodeLine{04695\ }
\DoxyCodeLine{04696\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_setup()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04697\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ mask;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04698\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ mask,\ STBIR\_mask\ +\ 3\ );}}
\DoxyCodeLine{04699\ }
\DoxyCodeLine{04700\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04701\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ c,\ hc+(ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04702\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_and(\ c,\ c,\ mask\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04703\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot,\ tot,\ c,\ decode+(ofs)\ );}}
\DoxyCodeLine{04704\ }
\DoxyCodeLine{04705\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04706\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ c,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04707\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot,\ tot,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04708\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1230(\ c,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04709\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add1(\ tot,\ tot,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04710\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store1(\ output,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04711\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04712\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04713\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 1;}}
\DoxyCodeLine{04714\ }
\DoxyCodeLine{04715\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04716\ }
\DoxyCodeLine{04717\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{04718\ \textcolor{preprocessor}{\ \ \ \ float\ tot;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04719\ \textcolor{preprocessor}{\ \ \ \ tot\ =\ decode[0]*hc[0];}}
\DoxyCodeLine{04720\ }
\DoxyCodeLine{04721\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{04722\ \textcolor{preprocessor}{\ \ \ \ float\ tot;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04723\ \textcolor{preprocessor}{\ \ \ \ tot\ =\ decode[0]\ *\ hc[0];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04724\ \textcolor{preprocessor}{\ \ \ \ tot\ +=\ decode[1]\ *\ hc[1];}}
\DoxyCodeLine{04725\ }
\DoxyCodeLine{04726\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{04727\ \textcolor{preprocessor}{\ \ \ \ float\ tot;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04728\ \textcolor{preprocessor}{\ \ \ \ tot\ =\ decode[0]\ *\ hc[0];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04729\ \textcolor{preprocessor}{\ \ \ \ tot\ +=\ decode[1]\ *\ hc[1];\ \ \(\backslash\)}}
\DoxyCodeLine{04730\ \textcolor{preprocessor}{\ \ \ \ tot\ +=\ decode[2]\ *\ hc[2];}}
\DoxyCodeLine{04731\ }
\DoxyCodeLine{04732\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04733\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ tot;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04734\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04735\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04736\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 1;}}
\DoxyCodeLine{04737\ }
\DoxyCodeLine{04738\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \(\backslash\)}}
\DoxyCodeLine{04739\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,tot1,tot2,tot3;\ \ \(\backslash\)}}
\DoxyCodeLine{04740\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]\ *\ hc[0];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04741\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]\ *\ hc[1];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04742\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]\ *\ hc[2];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04743\ \textcolor{preprocessor}{\ \ \ \ tot3\ =\ decode[3]\ *\ hc[3];}}
\DoxyCodeLine{04744\ }
\DoxyCodeLine{04745\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{04746\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[0+(ofs)]\ *\ hc[0+(ofs)];\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04747\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[1+(ofs)]\ *\ hc[1+(ofs)];\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04748\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[2+(ofs)]\ *\ hc[2+(ofs)];\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04749\ \textcolor{preprocessor}{\ \ \ \ tot3\ +=\ decode[3+(ofs)]\ *\ hc[3+(ofs)];}}
\DoxyCodeLine{04750\ }
\DoxyCodeLine{04751\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04752\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[0+(ofs)]\ *\ hc[0+(ofs)];}}
\DoxyCodeLine{04753\ }
\DoxyCodeLine{04754\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04755\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[0+(ofs)]\ *\ hc[0+(ofs)];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04756\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[1+(ofs)]\ *\ hc[1+(ofs)];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04757\ \textcolor{preprocessor}{}}
\DoxyCodeLine{04758\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04759\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[0+(ofs)]\ *\ hc[0+(ofs)];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04760\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[1+(ofs)]\ *\ hc[1+(ofs)];\ \ \ \(\backslash\)}}
\DoxyCodeLine{04761\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[2+(ofs)]\ *\ hc[2+(ofs)];}}
\DoxyCodeLine{04762\ }
\DoxyCodeLine{04763\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04764\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ (tot0+tot2)+(tot1+tot3);\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04765\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04766\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04767\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 1;}}
\DoxyCodeLine{04768\ }
\DoxyCodeLine{04769\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04770\ }
\DoxyCodeLine{04771\ \textcolor{preprocessor}{\#define\ STBIR\_\_horizontal\_channels\ 1}}
\DoxyCodeLine{04772\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{04773\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{04774\ }
\DoxyCodeLine{04775\ }
\DoxyCodeLine{04776\ \textcolor{comment}{//=================}}
\DoxyCodeLine{04777\ \textcolor{comment}{//\ Do\ 2\ channel\ horizontal\ routines}}
\DoxyCodeLine{04778\ }
\DoxyCodeLine{04779\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{04780\ }
\DoxyCodeLine{04781\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04782\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,d;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04783\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04784\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ c,\ hc\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04785\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ c\ );\ \ \(\backslash\)}}
\DoxyCodeLine{04786\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ d,\ decode\ );\ \ \(\backslash\)}}
\DoxyCodeLine{04787\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult(\ tot,\ d,\ c\ );}}
\DoxyCodeLine{04788\ }
\DoxyCodeLine{04789\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04790\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04791\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04792\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ c,\ hc\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04793\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ c\ );\ \ \(\backslash\)}}
\DoxyCodeLine{04794\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );}}
\DoxyCodeLine{04795\ }
\DoxyCodeLine{04796\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04797\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,cs,d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04798\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04799\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04800\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ cs\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04801\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );\ \(\backslash\)}}
\DoxyCodeLine{04802\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04803\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2z(\ d,\ decode+4\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04804\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot,\ tot,\ d,\ c\ );}}
\DoxyCodeLine{04805\ }
\DoxyCodeLine{04806\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04807\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ c,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04808\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot,\ tot,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04809\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store2(\ output,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04810\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04811\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04812\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 2;}}
\DoxyCodeLine{04813\ }
\DoxyCodeLine{04814\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{04815\ }
\DoxyCodeLine{04816\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04817\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\ tot0,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04818\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04819\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04820\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00112233(\ c,\ cs\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04821\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_mult\_mem(\ tot0,\ c,\ decode\ );}}
\DoxyCodeLine{04822\ }
\DoxyCodeLine{04823\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04824\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04825\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04826\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00112233(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04827\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*2\ );}}
\DoxyCodeLine{04828\ }
\DoxyCodeLine{04829\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04830\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ t,d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04831\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ t,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04832\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ d,\ decode\ +\ (ofs)\ *\ 2\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04833\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ t,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04834\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult(\ t,\ t,\ d\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04835\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add4(\ tot0,\ tot0,\ t\ );\ \}}}
\DoxyCodeLine{04836\ \ }
\DoxyCodeLine{04837\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04838\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ t;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04839\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ t,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04840\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ t,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04841\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ t,\ t,\ decode+(ofs)*2\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{04842\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add4(\ tot0,\ tot0,\ t\ );\ \}}}
\DoxyCodeLine{04843\ }
\DoxyCodeLine{04844\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04845\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf8\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04846\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04847\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00112233(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04848\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load6z(\ d,\ decode+(ofs)*2\ );\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04849\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd(\ tot0,\ tot0,\ c,\ d\ );\ \}}}
\DoxyCodeLine{04850\ }
\DoxyCodeLine{04851\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04852\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ t,d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04853\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add4halves(\ t,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(tot0),\ tot0\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04854\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ d,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04855\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ t,\ t,\ d\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04856\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store2(\ output,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04857\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04858\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04859\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 2;\ \}}}
\DoxyCodeLine{04860\ }
\DoxyCodeLine{04861\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04862\ }
\DoxyCodeLine{04863\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04864\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04865\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04866\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04867\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04868\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04869\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2233(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04870\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+4\ );}}
\DoxyCodeLine{04871\ }
\DoxyCodeLine{04872\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04873\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04874\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04875\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04876\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*2\ );\ \ \(\backslash\)}}
\DoxyCodeLine{04877\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2233(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04878\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*2+4\ );}}
\DoxyCodeLine{04879\ }
\DoxyCodeLine{04880\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04881\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04882\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04883\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04884\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ d,\ decode\ +\ (ofs)\ *\ 2\ );\ \(\backslash\)}}
\DoxyCodeLine{04885\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot0,\ tot0,\ d,\ c\ );\ \}}}
\DoxyCodeLine{04886\ }
\DoxyCodeLine{04887\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04888\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04889\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04890\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*2\ );}}
\DoxyCodeLine{04891\ }
\DoxyCodeLine{04892\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04893\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04894\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04895\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0011(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04896\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*2\ );\ \(\backslash\)}}
\DoxyCodeLine{04897\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04898\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2z(\ d,\ decode\ +\ (ofs)\ *\ 2\ +\ 4\ );\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04899\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot1,\ tot1,\ d,\ c\ );\ \}}}
\DoxyCodeLine{04900\ }
\DoxyCodeLine{04901\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04902\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot0,\ tot0,\ tot1\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04903\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ c,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04904\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot0,\ tot0,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04905\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store2(\ output,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04906\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04907\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04908\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 2;}}
\DoxyCodeLine{04909\ }
\DoxyCodeLine{04910\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04911\ }
\DoxyCodeLine{04912\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04913\ }
\DoxyCodeLine{04914\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{04915\ \textcolor{preprocessor}{\ \ \ \ float\ tota,totb,c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04916\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04917\ \textcolor{preprocessor}{\ \ \ \ tota\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04918\ \textcolor{preprocessor}{\ \ \ \ totb\ =\ decode[1]*c;}}
\DoxyCodeLine{04919\ }
\DoxyCodeLine{04920\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{04921\ \textcolor{preprocessor}{\ \ \ \ float\ tota,totb,c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04922\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04923\ \textcolor{preprocessor}{\ \ \ \ tota\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04924\ \textcolor{preprocessor}{\ \ \ \ totb\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04925\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04926\ \textcolor{preprocessor}{\ \ \ \ tota\ +=\ decode[2]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04927\ \textcolor{preprocessor}{\ \ \ \ totb\ +=\ decode[3]*c;}}
\DoxyCodeLine{04928\ }
\DoxyCodeLine{04929\ \textcolor{comment}{//\ this\ weird\ order\ of\ add\ matches\ the\ simd}}
\DoxyCodeLine{04930\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{04931\ \textcolor{preprocessor}{\ \ \ \ float\ tota,totb,c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04932\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04933\ \textcolor{preprocessor}{\ \ \ \ tota\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04934\ \textcolor{preprocessor}{\ \ \ \ totb\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04935\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04936\ \textcolor{preprocessor}{\ \ \ \ tota\ +=\ decode[4]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04937\ \textcolor{preprocessor}{\ \ \ \ totb\ +=\ decode[5]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04938\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04939\ \textcolor{preprocessor}{\ \ \ \ tota\ +=\ decode[2]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04940\ \textcolor{preprocessor}{\ \ \ \ totb\ +=\ decode[3]*c;}}
\DoxyCodeLine{04941\ }
\DoxyCodeLine{04942\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04943\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ tota;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04944\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ totb;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04945\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{04946\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04947\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 2;}}
\DoxyCodeLine{04948\ }
\DoxyCodeLine{04949\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04950\ \textcolor{preprocessor}{\ \ \ \ float\ tota0,tota1,tota2,tota3,totb0,totb1,totb2,totb3,c;\ \ \(\backslash\)}}
\DoxyCodeLine{04951\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04952\ \textcolor{preprocessor}{\ \ \ \ tota0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04953\ \textcolor{preprocessor}{\ \ \ \ totb0\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04954\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04955\ \textcolor{preprocessor}{\ \ \ \ tota1\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04956\ \textcolor{preprocessor}{\ \ \ \ totb1\ =\ decode[3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04957\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04958\ \textcolor{preprocessor}{\ \ \ \ tota2\ =\ decode[4]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04959\ \textcolor{preprocessor}{\ \ \ \ totb2\ =\ decode[5]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04960\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04961\ \textcolor{preprocessor}{\ \ \ \ tota3\ =\ decode[6]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04962\ \textcolor{preprocessor}{\ \ \ \ totb3\ =\ decode[7]*c;}}
\DoxyCodeLine{04963\ }
\DoxyCodeLine{04964\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{04965\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04966\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04967\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[1+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04968\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04969\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[2+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04970\ \textcolor{preprocessor}{\ \ \ \ totb1\ +=\ decode[3+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04971\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04972\ \textcolor{preprocessor}{\ \ \ \ tota2\ +=\ decode[4+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04973\ \textcolor{preprocessor}{\ \ \ \ totb2\ +=\ decode[5+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04974\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04975\ \textcolor{preprocessor}{\ \ \ \ tota3\ +=\ decode[6+(ofs)*2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04976\ \textcolor{preprocessor}{\ \ \ \ totb3\ +=\ decode[7+(ofs)*2]*c;}}
\DoxyCodeLine{04977\ }
\DoxyCodeLine{04978\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{04979\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04980\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04981\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[1+(ofs)*2]\ *\ c;}}
\DoxyCodeLine{04982\ }
\DoxyCodeLine{04983\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{04984\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04985\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04986\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[1+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04987\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04988\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[2+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04989\ \textcolor{preprocessor}{\ \ \ \ totb1\ +=\ decode[3+(ofs)*2]\ *\ c;}}
\DoxyCodeLine{04990\ }
\DoxyCodeLine{04991\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{04992\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04993\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04994\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[1+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04995\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04996\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[2+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04997\ \textcolor{preprocessor}{\ \ \ \ totb1\ +=\ decode[3+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04998\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{04999\ \textcolor{preprocessor}{\ \ \ \ tota2\ +=\ decode[4+(ofs)*2]\ *\ c;\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05000\ \textcolor{preprocessor}{\ \ \ \ totb2\ +=\ decode[5+(ofs)*2]\ *\ c;}}
\DoxyCodeLine{05001\ }
\DoxyCodeLine{05002\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05003\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ (tota0+tota2)+(tota1+tota3);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05004\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ (totb0+totb2)+(totb1+totb3);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05005\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05006\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05007\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 2;}}
\DoxyCodeLine{05008\ }
\DoxyCodeLine{05009\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05010\ }
\DoxyCodeLine{05011\ \textcolor{preprocessor}{\#define\ STBIR\_\_horizontal\_channels\ 2}}
\DoxyCodeLine{05012\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{05013\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{05014\ }
\DoxyCodeLine{05015\ }
\DoxyCodeLine{05016\ \textcolor{comment}{//=================}}
\DoxyCodeLine{05017\ \textcolor{comment}{//\ Do\ 3\ channel\ horizontal\ routines}}
\DoxyCodeLine{05018\ }
\DoxyCodeLine{05019\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{05020\ }
\DoxyCodeLine{05021\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05022\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,d;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05023\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05024\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ c,\ hc\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05025\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0001(\ c,\ c\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05026\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ d,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05027\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult(\ tot,\ d,\ c\ );}}
\DoxyCodeLine{05028\ }
\DoxyCodeLine{05029\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05030\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,cs,d;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05031\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05032\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ cs,\ hc\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05033\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \(\backslash\)}}
\DoxyCodeLine{05034\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ d,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05035\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult(\ tot,\ d,\ c\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05036\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \(\backslash\)}}
\DoxyCodeLine{05037\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ d,\ decode+3\ );\ \(\backslash\)}}
\DoxyCodeLine{05038\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot,\ tot,\ d,\ c\ );}}
\DoxyCodeLine{05039\ }
\DoxyCodeLine{05040\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05041\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,d,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05042\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05043\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05044\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05045\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ d,\ decode\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05046\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult(\ tot,\ d,\ c\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05047\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05048\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ d,\ decode+3\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05049\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot,\ tot,\ d,\ c\ );\ \(\backslash\)}}
\DoxyCodeLine{05050\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05051\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ d,\ decode+6\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05052\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot,\ tot,\ d,\ c\ );}}
\DoxyCodeLine{05053\ }
\DoxyCodeLine{05054\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05055\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store2(\ output,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05056\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ tot,\ tot\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05057\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store1(\ output+2,\ tot\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05058\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05059\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05060\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 3;}}
\DoxyCodeLine{05061\ }
\DoxyCodeLine{05062\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{05063\ }
\DoxyCodeLine{05064\ \textcolor{comment}{//\ we're\ loading\ from\ the\ XXXYYY\ decode\ by\ -\/1\ to\ get\ the\ XXXYYY\ into\ different\ halves\ of\ the\ AVX\ reg\ fyi}}
\DoxyCodeLine{05065\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05066\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\ tot0,tot1,c,cs;\ stbir\_\_simdf\ t;\ \ \(\backslash\)}}
\DoxyCodeLine{05067\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05068\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05069\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00001111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05070\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_mult\_mem(\ tot0,\ c,\ decode\ -\/\ 1\ );\ \(\backslash\)}}
\DoxyCodeLine{05071\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22223333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05072\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_mult\_mem(\ tot1,\ c,\ decode+6\ -\/\ 1\ );}}
\DoxyCodeLine{05073\ }
\DoxyCodeLine{05074\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05075\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05076\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05077\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00001111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05078\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ -\/\ 1\ );\ \(\backslash\)}}
\DoxyCodeLine{05079\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22223333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05080\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*3\ +\ 6\ -\/\ 1\ );}}
\DoxyCodeLine{05081\ }
\DoxyCodeLine{05082\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05083\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05084\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1rep4(\ t,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05085\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem4(\ tot0,\ tot0,\ t,\ decode+(ofs)*3\ -\/\ 1\ );}}
\DoxyCodeLine{05086\ }
\DoxyCodeLine{05087\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05088\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05089\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ -\/\ 2\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05090\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22223333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05091\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ -\/\ 1\ );}}
\DoxyCodeLine{05092\ }
\DoxyCodeLine{05093\ \textcolor{preprocessor}{\ \#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05094\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05095\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05096\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00001111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05097\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ -\/\ 1\ );\ \(\backslash\)}}
\DoxyCodeLine{05098\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to2222(\ t,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05099\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem4(\ tot1,\ tot1,\ t,\ decode+(ofs)*3\ +\ 6\ -\/\ 1\ );}}
\DoxyCodeLine{05100\ }
\DoxyCodeLine{05101\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05102\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add(\ tot0,\ tot0,\ tot1\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05103\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1230(\ t,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ tot0\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{05104\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add4halves(\ t,\ t,\ tot0\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05105\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05106\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05107\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05108\ \textcolor{preprocessor}{\ \ \ \ if\ (\ output\ <\ output\_end\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05109\ \textcolor{preprocessor}{\ \ \ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05110\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf\_store(\ output-\/3,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05111\ \textcolor{preprocessor}{\ \ \ \ \ \ continue;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05112\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05113\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ tt;\ stbir\_\_simdf\_0123to2301(\ tt,\ t\ );\ \(\backslash\)}}
\DoxyCodeLine{05114\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store2(\ output-\/3,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05115\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store1(\ output+2-\/3,\ tt\ );\ \}\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05116\ \textcolor{preprocessor}{\ \ \ \ break;}}
\DoxyCodeLine{05117\ }
\DoxyCodeLine{05118\ }
\DoxyCodeLine{05119\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05120\ }
\DoxyCodeLine{05121\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05122\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,tot2,c,cs;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05123\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05124\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05125\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0001(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05126\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05127\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1122(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05128\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+4\ );\ \(\backslash\)}}
\DoxyCodeLine{05129\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05130\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot2,\ c,\ decode+8\ );}}
\DoxyCodeLine{05131\ }
\DoxyCodeLine{05132\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05133\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05134\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05135\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0001(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05136\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05137\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1122(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05138\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*3+4\ );\ \(\backslash\)}}
\DoxyCodeLine{05139\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05140\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot2,\ tot2,\ c,\ decode+(ofs)*3+8\ );}}
\DoxyCodeLine{05141\ }
\DoxyCodeLine{05142\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05143\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05144\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05145\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0001(\ c,\ c\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05146\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ );}}
\DoxyCodeLine{05147\ }
\DoxyCodeLine{05148\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05149\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05150\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05151\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2z(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05152\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0001(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05153\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ );\ \(\backslash\)}}
\DoxyCodeLine{05154\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1122(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05155\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2z(\ d,\ decode+(ofs)*3+4\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05156\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot1,\ tot1,\ c,\ d\ );\ \}}}
\DoxyCodeLine{05157\ }
\DoxyCodeLine{05158\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05159\ \textcolor{preprocessor}{\ \ \ \ \{\ stbir\_\_simdf\ d;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05160\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05161\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05162\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0001(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05163\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05164\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1122(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05165\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*3+4\ );\ \(\backslash\)}}
\DoxyCodeLine{05166\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05167\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1z(\ d,\ decode+(ofs)*3+8\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05168\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ tot2,\ tot2,\ c,\ d\ );\ \ \}}}
\DoxyCodeLine{05169\ }
\DoxyCodeLine{05170\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05171\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123ABCDto3ABx(\ c,\ tot0,\ tot1\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05172\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123ABCDto23Ax(\ cs,\ tot1,\ tot2\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05173\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1230(\ tot2,\ tot2\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05174\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot0,\ tot0,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05175\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ c,\ c,\ tot2\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05176\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot0,\ tot0,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05177\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05178\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05179\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05180\ \textcolor{preprocessor}{\ \ \ \ if\ (\ output\ <\ output\_end\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05181\ \textcolor{preprocessor}{\ \ \ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05182\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf\_store(\ output-\/3,\ tot0\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05183\ \textcolor{preprocessor}{\ \ \ \ \ \ continue;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05184\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05185\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2301(\ tot1,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05186\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store2(\ output-\/3,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05187\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store1(\ output+2-\/3,\ tot1\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05188\ \textcolor{preprocessor}{\ \ \ \ break;}}
\DoxyCodeLine{05189\ }
\DoxyCodeLine{05190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05191\ }
\DoxyCodeLine{05192\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05193\ }
\DoxyCodeLine{05194\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{05195\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,\ tot1,\ tot2,\ c;\ \(\backslash\)}}
\DoxyCodeLine{05196\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05197\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05198\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05199\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]*c;}}
\DoxyCodeLine{05200\ }
\DoxyCodeLine{05201\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{05202\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,\ tot1,\ tot2,\ c;\ \(\backslash\)}}
\DoxyCodeLine{05203\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05204\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05205\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05206\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05207\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05208\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[3]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05209\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[4]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05210\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[5]*c;}}
\DoxyCodeLine{05211\ }
\DoxyCodeLine{05212\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \(\backslash\)}}
\DoxyCodeLine{05213\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,\ tot1,\ tot2,\ c;\ \(\backslash\)}}
\DoxyCodeLine{05214\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05215\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05216\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05217\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05218\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05219\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[3]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05220\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[4]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05221\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[5]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05222\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05223\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[6]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05224\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[7]*c;\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05225\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[8]*c;}}
\DoxyCodeLine{05226\ }
\DoxyCodeLine{05227\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05228\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ tot0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05229\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ tot1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05230\ \textcolor{preprocessor}{\ \ \ \ output[2]\ =\ tot2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05231\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05232\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05233\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 3;}}
\DoxyCodeLine{05234\ }
\DoxyCodeLine{05235\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05236\ \textcolor{preprocessor}{\ \ \ \ float\ tota0,tota1,tota2,totb0,totb1,totb2,totc0,totc1,totc2,totd0,totd1,totd2,c;\ \ \(\backslash\)}}
\DoxyCodeLine{05237\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05238\ \textcolor{preprocessor}{\ \ \ \ tota0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05239\ \textcolor{preprocessor}{\ \ \ \ tota1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05240\ \textcolor{preprocessor}{\ \ \ \ tota2\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05241\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05242\ \textcolor{preprocessor}{\ \ \ \ totb0\ =\ decode[3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05243\ \textcolor{preprocessor}{\ \ \ \ totb1\ =\ decode[4]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05244\ \textcolor{preprocessor}{\ \ \ \ totb2\ =\ decode[5]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05245\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05246\ \textcolor{preprocessor}{\ \ \ \ totc0\ =\ decode[6]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05247\ \textcolor{preprocessor}{\ \ \ \ totc1\ =\ decode[7]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05248\ \textcolor{preprocessor}{\ \ \ \ totc2\ =\ decode[8]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05249\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05250\ \textcolor{preprocessor}{\ \ \ \ totd0\ =\ decode[9]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05251\ \textcolor{preprocessor}{\ \ \ \ totd1\ =\ decode[10]*c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05252\ \textcolor{preprocessor}{\ \ \ \ totd2\ =\ decode[11]*c;}}
\DoxyCodeLine{05253\ }
\DoxyCodeLine{05254\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{05255\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05256\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05257\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[1+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05258\ \textcolor{preprocessor}{\ \ \ \ tota2\ +=\ decode[2+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05259\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05260\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[3+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05261\ \textcolor{preprocessor}{\ \ \ \ totb1\ +=\ decode[4+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05262\ \textcolor{preprocessor}{\ \ \ \ totb2\ +=\ decode[5+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05263\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05264\ \textcolor{preprocessor}{\ \ \ \ totc0\ +=\ decode[6+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05265\ \textcolor{preprocessor}{\ \ \ \ totc1\ +=\ decode[7+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05266\ \textcolor{preprocessor}{\ \ \ \ totc2\ +=\ decode[8+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05267\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05268\ \textcolor{preprocessor}{\ \ \ \ totd0\ +=\ decode[9+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05269\ \textcolor{preprocessor}{\ \ \ \ totd1\ +=\ decode[10+(ofs)*3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05270\ \textcolor{preprocessor}{\ \ \ \ totd2\ +=\ decode[11+(ofs)*3]*c;}}
\DoxyCodeLine{05271\ }
\DoxyCodeLine{05272\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{05273\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05274\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05275\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[1+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05276\ \textcolor{preprocessor}{\ \ \ \ tota2\ +=\ decode[2+(ofs)*3]*c;}}
\DoxyCodeLine{05277\ }
\DoxyCodeLine{05278\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{05279\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05280\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05281\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[1+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05282\ \textcolor{preprocessor}{\ \ \ \ tota2\ +=\ decode[2+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05283\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05284\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[3+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05285\ \textcolor{preprocessor}{\ \ \ \ totb1\ +=\ decode[4+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05286\ \textcolor{preprocessor}{\ \ \ \ totb2\ +=\ decode[5+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05287\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05288\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \(\backslash\)}}
\DoxyCodeLine{05289\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05290\ \textcolor{preprocessor}{\ \ \ \ tota0\ +=\ decode[0+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05291\ \textcolor{preprocessor}{\ \ \ \ tota1\ +=\ decode[1+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05292\ \textcolor{preprocessor}{\ \ \ \ tota2\ +=\ decode[2+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05293\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05294\ \textcolor{preprocessor}{\ \ \ \ totb0\ +=\ decode[3+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05295\ \textcolor{preprocessor}{\ \ \ \ totb1\ +=\ decode[4+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05296\ \textcolor{preprocessor}{\ \ \ \ totb2\ +=\ decode[5+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05297\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05298\ \textcolor{preprocessor}{\ \ \ \ totc0\ +=\ decode[6+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05299\ \textcolor{preprocessor}{\ \ \ \ totc1\ +=\ decode[7+(ofs)*3]*c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05300\ \textcolor{preprocessor}{\ \ \ \ totc2\ +=\ decode[8+(ofs)*3]*c;}}
\DoxyCodeLine{05301\ }
\DoxyCodeLine{05302\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05303\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ (tota0+totc0)+(totb0+totd0);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05304\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ (tota1+totc1)+(totb1+totd1);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05305\ \textcolor{preprocessor}{\ \ \ \ output[2]\ =\ (tota2+totc2)+(totb2+totd2);\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05306\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05307\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05308\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 3;}}
\DoxyCodeLine{05309\ }
\DoxyCodeLine{05310\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05311\ }
\DoxyCodeLine{05312\ \textcolor{preprocessor}{\#define\ STBIR\_\_horizontal\_channels\ 3}}
\DoxyCodeLine{05313\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{05314\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{05315\ }
\DoxyCodeLine{05316\ \textcolor{comment}{//=================}}
\DoxyCodeLine{05317\ \textcolor{comment}{//\ Do\ 4\ channel\ horizontal\ routines}}
\DoxyCodeLine{05318\ }
\DoxyCodeLine{05319\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{05320\ }
\DoxyCodeLine{05321\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05322\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05323\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05324\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1(\ c,\ hc\ );\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05325\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ c\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05326\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );}}
\DoxyCodeLine{05327\ }
\DoxyCodeLine{05328\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05329\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05330\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05331\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05332\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05333\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05334\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05335\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot,\ tot,\ c,\ decode+4\ );}}
\DoxyCodeLine{05336\ }
\DoxyCodeLine{05337\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05338\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05339\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05340\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05341\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05342\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot,\ c,\ decode\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05343\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05344\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot,\ tot,\ c,\ decode+4\ );\ \(\backslash\)}}
\DoxyCodeLine{05345\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05346\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot,\ tot,\ c,\ decode+8\ );}}
\DoxyCodeLine{05347\ }
\DoxyCodeLine{05348\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05349\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output,\ tot\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05350\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05351\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05352\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 4;}}
\DoxyCodeLine{05353\ }
\DoxyCodeLine{05354\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{05355\ }
\DoxyCodeLine{05356\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05357\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\ tot0,c,cs;\ stbir\_\_simdf\ t;\ \ \(\backslash\)}}
\DoxyCodeLine{05358\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05359\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05360\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00001111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05361\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05362\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22223333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05363\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+8\ );}}
\DoxyCodeLine{05364\ }
\DoxyCodeLine{05365\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05366\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05367\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05368\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00001111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05369\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05370\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22223333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05371\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4+8\ );}}
\DoxyCodeLine{05372\ }
\DoxyCodeLine{05373\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05374\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05375\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1rep4(\ t,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05376\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem4(\ tot0,\ tot0,\ t,\ decode+(ofs)*4\ );}}
\DoxyCodeLine{05377\ }
\DoxyCodeLine{05378\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05379\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05380\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ -\/\ 2\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05381\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22223333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05382\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );}}
\DoxyCodeLine{05383\ }
\DoxyCodeLine{05384\ \textcolor{preprocessor}{\ \#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05385\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05386\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05387\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00001111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05388\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05389\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to2222(\ t,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05390\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem4(\ tot0,\ tot0,\ t,\ decode+(ofs)*4+8\ );}}
\DoxyCodeLine{05391\ }
\DoxyCodeLine{05392\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05393\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add4halves(\ t,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(tot0),\ tot0\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05394\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output,\ t\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05395\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \ \(\backslash\)}}
\DoxyCodeLine{05396\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05397\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 4;}}
\DoxyCodeLine{05398\ }
\DoxyCodeLine{05399\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05400\ }
\DoxyCodeLine{05401\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05402\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05403\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05404\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05405\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05406\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05407\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05408\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+4\ );\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05409\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05410\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+8\ );\ \(\backslash\)}}
\DoxyCodeLine{05411\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to3333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05412\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+12\ );}}
\DoxyCodeLine{05413\ }
\DoxyCodeLine{05414\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05415\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05416\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05417\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05418\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05419\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05420\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*4+4\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05421\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05422\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4+8\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05423\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to3333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05424\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*4+12\ );}}
\DoxyCodeLine{05425\ }
\DoxyCodeLine{05426\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05427\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05428\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05429\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05430\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );}}
\DoxyCodeLine{05431\ }
\DoxyCodeLine{05432\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05433\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05434\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05435\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05436\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05437\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05438\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*4+4\ );}}
\DoxyCodeLine{05439\ }
\DoxyCodeLine{05440\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05441\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05442\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05443\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05444\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05445\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05446\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*4+4\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05447\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05448\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*4+8\ );}}
\DoxyCodeLine{05449\ }
\DoxyCodeLine{05450\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05451\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot0,\ tot0,\ tot1\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05452\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05453\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05454\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05455\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 4;}}
\DoxyCodeLine{05456\ }
\DoxyCodeLine{05457\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05458\ }
\DoxyCodeLine{05459\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05460\ }
\DoxyCodeLine{05461\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05462\ \textcolor{preprocessor}{\ \ \ \ float\ p0,p1,p2,p3,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05463\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05464\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05465\ \textcolor{preprocessor}{\ \ \ \ p0\ =\ decode[0]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05466\ \textcolor{preprocessor}{\ \ \ \ p1\ =\ decode[1]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05467\ \textcolor{preprocessor}{\ \ \ \ p2\ =\ decode[2]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05468\ \textcolor{preprocessor}{\ \ \ \ p3\ =\ decode[3]\ *\ c;}}
\DoxyCodeLine{05469\ }
\DoxyCodeLine{05470\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05471\ \textcolor{preprocessor}{\ \ \ \ float\ p0,p1,p2,p3,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05472\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05473\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05474\ \textcolor{preprocessor}{\ \ \ \ p0\ =\ decode[0]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05475\ \textcolor{preprocessor}{\ \ \ \ p1\ =\ decode[1]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05476\ \textcolor{preprocessor}{\ \ \ \ p2\ =\ decode[2]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05477\ \textcolor{preprocessor}{\ \ \ \ p3\ =\ decode[3]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05478\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05479\ \textcolor{preprocessor}{\ \ \ \ p0\ +=\ decode[4]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05480\ \textcolor{preprocessor}{\ \ \ \ p1\ +=\ decode[5]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05481\ \textcolor{preprocessor}{\ \ \ \ p2\ +=\ decode[6]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05482\ \textcolor{preprocessor}{\ \ \ \ p3\ +=\ decode[7]\ *\ c;}}
\DoxyCodeLine{05483\ }
\DoxyCodeLine{05484\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05485\ \textcolor{preprocessor}{\ \ \ \ float\ p0,p1,p2,p3,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05486\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05487\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05488\ \textcolor{preprocessor}{\ \ \ \ p0\ =\ decode[0]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05489\ \textcolor{preprocessor}{\ \ \ \ p1\ =\ decode[1]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05490\ \textcolor{preprocessor}{\ \ \ \ p2\ =\ decode[2]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05491\ \textcolor{preprocessor}{\ \ \ \ p3\ =\ decode[3]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05492\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05493\ \textcolor{preprocessor}{\ \ \ \ p0\ +=\ decode[4]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05494\ \textcolor{preprocessor}{\ \ \ \ p1\ +=\ decode[5]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05495\ \textcolor{preprocessor}{\ \ \ \ p2\ +=\ decode[6]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05496\ \textcolor{preprocessor}{\ \ \ \ p3\ +=\ decode[7]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05497\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05498\ \textcolor{preprocessor}{\ \ \ \ p0\ +=\ decode[8]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05499\ \textcolor{preprocessor}{\ \ \ \ p1\ +=\ decode[9]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05500\ \textcolor{preprocessor}{\ \ \ \ p2\ +=\ decode[10]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05501\ \textcolor{preprocessor}{\ \ \ \ p3\ +=\ decode[11]\ *\ c;}}
\DoxyCodeLine{05502\ }
\DoxyCodeLine{05503\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05504\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ p0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05505\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ p1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05506\ \textcolor{preprocessor}{\ \ \ \ output[2]\ =\ p2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05507\ \textcolor{preprocessor}{\ \ \ \ output[3]\ =\ p3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05508\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05509\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05510\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 4;}}
\DoxyCodeLine{05511\ }
\DoxyCodeLine{05512\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05513\ \textcolor{preprocessor}{\ \ \ \ float\ x0,x1,x2,x3,y0,y1,y2,y3,c;\ \ \(\backslash\)}}
\DoxyCodeLine{05514\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05515\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05516\ \textcolor{preprocessor}{\ \ \ \ x0\ =\ decode[0]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05517\ \textcolor{preprocessor}{\ \ \ \ x1\ =\ decode[1]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05518\ \textcolor{preprocessor}{\ \ \ \ x2\ =\ decode[2]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05519\ \textcolor{preprocessor}{\ \ \ \ x3\ =\ decode[3]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05520\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05521\ \textcolor{preprocessor}{\ \ \ \ y0\ =\ decode[4]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05522\ \textcolor{preprocessor}{\ \ \ \ y1\ =\ decode[5]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05523\ \textcolor{preprocessor}{\ \ \ \ y2\ =\ decode[6]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05524\ \textcolor{preprocessor}{\ \ \ \ y3\ =\ decode[7]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05525\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05526\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[8]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05527\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[9]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05528\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[10]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05529\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[11]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05530\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05531\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[12]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05532\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[13]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05533\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[14]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05534\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[15]\ *\ c;}}
\DoxyCodeLine{05535\ }
\DoxyCodeLine{05536\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05537\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05538\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05539\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05540\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05541\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05542\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05543\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05544\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[4+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05545\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[5+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05546\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[6+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05547\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[7+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05548\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05549\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[8+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05550\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[9+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05551\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[10+(ofs)*4]\ *\ c;\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05552\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[11+(ofs)*4]\ *\ c;\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05553\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05554\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[12+(ofs)*4]\ *\ c;\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05555\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[13+(ofs)*4]\ *\ c;\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05556\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[14+(ofs)*4]\ *\ c;\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05557\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[15+(ofs)*4]\ *\ c;}}
\DoxyCodeLine{05558\ }
\DoxyCodeLine{05559\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05560\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05561\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05562\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05563\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05564\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05565\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*4]\ *\ c;}}
\DoxyCodeLine{05566\ }
\DoxyCodeLine{05567\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05568\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05569\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05570\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05571\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05572\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05573\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05574\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05575\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[4+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05576\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[5+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05577\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[6+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05578\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[7+(ofs)*4]\ *\ c;}}
\DoxyCodeLine{05579\ }
\DoxyCodeLine{05580\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05581\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05582\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05583\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05584\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05585\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05586\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05587\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05588\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[4+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05589\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[5+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05590\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[6+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05591\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[7+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05592\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05593\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[8+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05594\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[9+(ofs)*4]\ *\ c;\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05595\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[10+(ofs)*4]\ *\ c;\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05596\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[11+(ofs)*4]\ *\ c;}}
\DoxyCodeLine{05597\ }
\DoxyCodeLine{05598\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05599\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ x0\ +\ y0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05600\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ x1\ +\ y1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05601\ \textcolor{preprocessor}{\ \ \ \ output[2]\ =\ x2\ +\ y2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05602\ \textcolor{preprocessor}{\ \ \ \ output[3]\ =\ x3\ +\ y3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05603\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05604\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05605\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 4;}}
\DoxyCodeLine{05606\ }
\DoxyCodeLine{05607\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05608\ }
\DoxyCodeLine{05609\ \textcolor{preprocessor}{\#define\ STBIR\_\_horizontal\_channels\ 4}}
\DoxyCodeLine{05610\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{05611\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{05612\ }
\DoxyCodeLine{05613\ }
\DoxyCodeLine{05614\ }
\DoxyCodeLine{05615\ \textcolor{comment}{//=================}}
\DoxyCodeLine{05616\ \textcolor{comment}{//\ Do\ 7\ channel\ horizontal\ routines}}
\DoxyCodeLine{05617\ }
\DoxyCodeLine{05618\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{05619\ }
\DoxyCodeLine{05620\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05621\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05622\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05623\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1(\ c,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05624\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05625\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05626\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+3\ );}}
\DoxyCodeLine{05627\ }
\DoxyCodeLine{05628\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05629\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05630\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05631\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05632\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05633\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05634\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+3\ );\ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05635\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05636\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+7\ );\ \(\backslash\)}}
\DoxyCodeLine{05637\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,decode+10\ );}}
\DoxyCodeLine{05638\ }
\DoxyCodeLine{05639\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05640\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05641\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05642\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05643\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05644\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05645\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+3\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05646\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05647\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+7\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05648\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+10\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05649\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05650\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+14\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05651\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+17\ );}}
\DoxyCodeLine{05652\ }
\DoxyCodeLine{05653\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05654\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output+3,\ tot1\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05655\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05656\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05657\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05658\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 7;}}
\DoxyCodeLine{05659\ }
\DoxyCodeLine{05660\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{05661\ }
\DoxyCodeLine{05662\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05663\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\ tot0,tot1,c,cs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05664\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05665\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05666\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00000000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05667\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05668\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to11111111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05669\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_mult\_mem(\ tot1,\ c,\ decode+7\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05670\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22222222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05671\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+14\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05672\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to33333333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05673\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+21\ );}}
\DoxyCodeLine{05674\ }
\DoxyCodeLine{05675\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05676\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05677\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05678\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00000000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05679\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05680\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to11111111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05681\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+7\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05682\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22222222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05683\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7+14\ );\ \(\backslash\)}}
\DoxyCodeLine{05684\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to33333333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05685\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+21\ );}}
\DoxyCodeLine{05686\ }
\DoxyCodeLine{05687\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05688\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05689\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load1b(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05690\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );}}
\DoxyCodeLine{05691\ }
\DoxyCodeLine{05692\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05693\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05694\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load1b(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05695\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05696\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load1b(\ c,\ hc\ +\ (ofs)+1\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05697\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+7\ );}}
\DoxyCodeLine{05698\ }
\DoxyCodeLine{05699\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05700\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05701\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_load4b(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05702\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to00000000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05703\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05704\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to11111111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05705\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+7\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05706\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_0123to22222222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05707\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7+14\ );}}
\DoxyCodeLine{05708\ }
\DoxyCodeLine{05709\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05710\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf8\_add(\ tot0,\ tot0,\ tot1\ );\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05711\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05712\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05713\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 7;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05714\ \textcolor{preprocessor}{\ \ \ \ if\ (\ output\ <\ output\_end\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05715\ \textcolor{preprocessor}{\ \ \ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05716\ \textcolor{preprocessor}{\ \ \ \ \ \ stbir\_\_simdf8\_store(\ output-\/7,\ tot0\ );\ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05717\ \textcolor{preprocessor}{\ \ \ \ \ \ continue;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05718\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05719\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output-\/7+3,\ stbir\_\_simdf\_swiz(stbir\_\_simdf8\_gettop4(tot0),0,0,1,2)\ );\ \(\backslash\)}}
\DoxyCodeLine{05720\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output-\/7,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(tot0)\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05721\ \textcolor{preprocessor}{\ \ \ \ break;}}
\DoxyCodeLine{05722\ }
\DoxyCodeLine{05723\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05724\ }
\DoxyCodeLine{05725\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05726\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\ tot0,tot1,tot2,tot3,c,cs;\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05727\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05728\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05729\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05730\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot0,\ c,\ decode\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05731\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot1,\ c,\ decode+3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05732\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05733\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot2,\ c,\ decode+7\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05734\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_mult\_mem(\ tot3,\ c,\ decode+10\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05735\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05736\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+14\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05737\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+17\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05738\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to3333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05739\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot2,\ tot2,\ c,\ decode+21\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05740\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot3,\ tot3,\ c,\ decode+24\ );}}
\DoxyCodeLine{05741\ }
\DoxyCodeLine{05742\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05743\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05744\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05745\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05746\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05747\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05748\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05749\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot2,\ tot2,\ c,\ decode+(ofs)*7+7\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05750\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot3,\ tot3,\ c,\ decode+(ofs)*7+10\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05751\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05752\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7+14\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05753\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+17\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05754\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to3333(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05755\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot2,\ tot2,\ c,\ decode+(ofs)*7+21\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05756\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot3,\ tot3,\ c,\ decode+(ofs)*7+24\ );}}
\DoxyCodeLine{05757\ }
\DoxyCodeLine{05758\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05759\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05760\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load1(\ c,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05761\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ c\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05762\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05763\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05764\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05765\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05766\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05767\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load2(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05768\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05769\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05770\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05771\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05772\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot2,\ tot2,\ c,\ decode+(ofs)*7+7\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05773\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot3,\ tot3,\ c,\ decode+(ofs)*7+10\ );}}
\DoxyCodeLine{05774\ }
\DoxyCodeLine{05775\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05776\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05777\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_load(\ cs,\ hc\ +\ (ofs)\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05778\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to0000(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05779\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7\ );\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05780\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+3\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05781\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to1111(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05782\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot2,\ tot2,\ c,\ decode+(ofs)*7+7\ );\ \ \ \(\backslash\)}}
\DoxyCodeLine{05783\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot3,\ tot3,\ c,\ decode+(ofs)*7+10\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05784\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_0123to2222(\ c,\ cs\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05785\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot0,\ tot0,\ c,\ decode+(ofs)*7+14\ );\ \ \(\backslash\)}}
\DoxyCodeLine{05786\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd\_mem(\ tot1,\ tot1,\ c,\ decode+(ofs)*7+17\ );}}
\DoxyCodeLine{05787\ }
\DoxyCodeLine{05788\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05789\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot0,\ tot0,\ tot2\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05790\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_add(\ tot1,\ tot1,\ tot3\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05791\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output+3,\ tot1\ );\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05792\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_store(\ output,\ tot0\ );\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05793\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05794\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05795\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 7;}}
\DoxyCodeLine{05796\ }
\DoxyCodeLine{05797\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05798\ }
\DoxyCodeLine{05799\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05800\ }
\DoxyCodeLine{05801\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_only()\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05802\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,\ tot1,\ tot2,\ tot3,\ tot4,\ tot5,\ tot6,\ c;\ \(\backslash\)}}
\DoxyCodeLine{05803\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05804\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05805\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05806\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05807\ \textcolor{preprocessor}{\ \ \ \ tot3\ =\ decode[3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05808\ \textcolor{preprocessor}{\ \ \ \ tot4\ =\ decode[4]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05809\ \textcolor{preprocessor}{\ \ \ \ tot5\ =\ decode[5]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05810\ \textcolor{preprocessor}{\ \ \ \ tot6\ =\ decode[6]*c;}}
\DoxyCodeLine{05811\ }
\DoxyCodeLine{05812\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05813\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,\ tot1,\ tot2,\ tot3,\ tot4,\ tot5,\ tot6,\ c;\ \(\backslash\)}}
\DoxyCodeLine{05814\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05815\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05816\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05817\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05818\ \textcolor{preprocessor}{\ \ \ \ tot3\ =\ decode[3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05819\ \textcolor{preprocessor}{\ \ \ \ tot4\ =\ decode[4]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05820\ \textcolor{preprocessor}{\ \ \ \ tot5\ =\ decode[5]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05821\ \textcolor{preprocessor}{\ \ \ \ tot6\ =\ decode[6]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05822\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05823\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[7]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05824\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[8]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05825\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[9]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05826\ \textcolor{preprocessor}{\ \ \ \ tot3\ +=\ decode[10]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05827\ \textcolor{preprocessor}{\ \ \ \ tot4\ +=\ decode[11]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05828\ \textcolor{preprocessor}{\ \ \ \ tot5\ +=\ decode[12]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05829\ \textcolor{preprocessor}{\ \ \ \ tot6\ +=\ decode[13]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05830\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05831\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05832\ \textcolor{preprocessor}{\ \ \ \ float\ tot0,\ tot1,\ tot2,\ tot3,\ tot4,\ tot5,\ tot6,\ c;\ \(\backslash\)}}
\DoxyCodeLine{05833\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05834\ \textcolor{preprocessor}{\ \ \ \ tot0\ =\ decode[0]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05835\ \textcolor{preprocessor}{\ \ \ \ tot1\ =\ decode[1]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05836\ \textcolor{preprocessor}{\ \ \ \ tot2\ =\ decode[2]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05837\ \textcolor{preprocessor}{\ \ \ \ tot3\ =\ decode[3]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05838\ \textcolor{preprocessor}{\ \ \ \ tot4\ =\ decode[4]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05839\ \textcolor{preprocessor}{\ \ \ \ tot5\ =\ decode[5]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05840\ \textcolor{preprocessor}{\ \ \ \ tot6\ =\ decode[6]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05841\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05842\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[7]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05843\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[8]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05844\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[9]*c;\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05845\ \textcolor{preprocessor}{\ \ \ \ tot3\ +=\ decode[10]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05846\ \textcolor{preprocessor}{\ \ \ \ tot4\ +=\ decode[11]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05847\ \textcolor{preprocessor}{\ \ \ \ tot5\ +=\ decode[12]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05848\ \textcolor{preprocessor}{\ \ \ \ tot6\ +=\ decode[13]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05849\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05850\ \textcolor{preprocessor}{\ \ \ \ tot0\ +=\ decode[14]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05851\ \textcolor{preprocessor}{\ \ \ \ tot1\ +=\ decode[15]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05852\ \textcolor{preprocessor}{\ \ \ \ tot2\ +=\ decode[16]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05853\ \textcolor{preprocessor}{\ \ \ \ tot3\ +=\ decode[17]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05854\ \textcolor{preprocessor}{\ \ \ \ tot4\ +=\ decode[18]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05855\ \textcolor{preprocessor}{\ \ \ \ tot5\ +=\ decode[19]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05856\ \textcolor{preprocessor}{\ \ \ \ tot6\ +=\ decode[20]*c;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05857\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05858\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05859\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ tot0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05860\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ tot1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05861\ \textcolor{preprocessor}{\ \ \ \ output[2]\ =\ tot2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05862\ \textcolor{preprocessor}{\ \ \ \ output[3]\ =\ tot3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05863\ \textcolor{preprocessor}{\ \ \ \ output[4]\ =\ tot4;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05864\ \textcolor{preprocessor}{\ \ \ \ output[5]\ =\ tot5;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05865\ \textcolor{preprocessor}{\ \ \ \ output[6]\ =\ tot6;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05866\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{05867\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05868\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 7;}}
\DoxyCodeLine{05869\ }
\DoxyCodeLine{05870\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05871\ \textcolor{preprocessor}{\ \ \ \ float\ x0,x1,x2,x3,x4,x5,x6,y0,y1,y2,y3,y4,y5,y6,c;\ \(\backslash\)}}
\DoxyCodeLine{05872\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \(\backslash\)}}
\DoxyCodeLine{05873\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05874\ \textcolor{preprocessor}{\ \ \ \ x0\ =\ decode[0]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05875\ \textcolor{preprocessor}{\ \ \ \ x1\ =\ decode[1]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05876\ \textcolor{preprocessor}{\ \ \ \ x2\ =\ decode[2]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05877\ \textcolor{preprocessor}{\ \ \ \ x3\ =\ decode[3]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05878\ \textcolor{preprocessor}{\ \ \ \ x4\ =\ decode[4]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05879\ \textcolor{preprocessor}{\ \ \ \ x5\ =\ decode[5]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05880\ \textcolor{preprocessor}{\ \ \ \ x6\ =\ decode[6]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05881\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05882\ \textcolor{preprocessor}{\ \ \ \ y0\ =\ decode[7]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05883\ \textcolor{preprocessor}{\ \ \ \ y1\ =\ decode[8]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05884\ \textcolor{preprocessor}{\ \ \ \ y2\ =\ decode[9]\ *\ c;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05885\ \textcolor{preprocessor}{\ \ \ \ y3\ =\ decode[10]\ *\ c;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05886\ \textcolor{preprocessor}{\ \ \ \ y4\ =\ decode[11]\ *\ c;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05887\ \textcolor{preprocessor}{\ \ \ \ y5\ =\ decode[12]\ *\ c;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05888\ \textcolor{preprocessor}{\ \ \ \ y6\ =\ decode[13]\ *\ c;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05889\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05890\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[14]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05891\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[15]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05892\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[16]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05893\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[17]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05894\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[18]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05895\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[19]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05896\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[20]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05897\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05898\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[21]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05899\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[22]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05900\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[23]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05901\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[24]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05902\ \textcolor{preprocessor}{\ \ \ \ y4\ +=\ decode[25]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05903\ \textcolor{preprocessor}{\ \ \ \ y5\ +=\ decode[26]\ *\ c;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05904\ \textcolor{preprocessor}{\ \ \ \ y6\ +=\ decode[27]\ *\ c;}}
\DoxyCodeLine{05905\ }
\DoxyCodeLine{05906\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05907\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \(\backslash\)}}
\DoxyCodeLine{05908\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05909\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05910\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05911\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05912\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05913\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[4+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05914\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[5+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05915\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[6+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05916\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05917\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[7+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05918\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[8+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05919\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[9+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05920\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[10+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05921\ \textcolor{preprocessor}{\ \ \ \ y4\ +=\ decode[11+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05922\ \textcolor{preprocessor}{\ \ \ \ y5\ +=\ decode[12+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05923\ \textcolor{preprocessor}{\ \ \ \ y6\ +=\ decode[13+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05924\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05925\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[14+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05926\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[15+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05927\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[16+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05928\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[17+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05929\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[18+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05930\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[19+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05931\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[20+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05932\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[3+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05933\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[21+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05934\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[22+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05935\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[23+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05936\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[24+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05937\ \textcolor{preprocessor}{\ \ \ \ y4\ +=\ decode[25+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05938\ \textcolor{preprocessor}{\ \ \ \ y5\ +=\ decode[26+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05939\ \textcolor{preprocessor}{\ \ \ \ y6\ +=\ decode[27+(ofs)*7]\ *\ c;}}
\DoxyCodeLine{05940\ }
\DoxyCodeLine{05941\ \textcolor{preprocessor}{\#define\ stbir\_\_1\_coeff\_remnant(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05942\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \(\backslash\)}}
\DoxyCodeLine{05943\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05944\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05945\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05946\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05947\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05948\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[4+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05949\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[5+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05950\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[6+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05951\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05952\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05953\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \(\backslash\)}}
\DoxyCodeLine{05954\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05955\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05956\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05957\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05958\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05959\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[4+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05960\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[5+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05961\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[6+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05962\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05963\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[7+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05964\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[8+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05965\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[9+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05966\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[10+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05967\ \textcolor{preprocessor}{\ \ \ \ y4\ +=\ decode[11+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05968\ \textcolor{preprocessor}{\ \ \ \ y5\ +=\ decode[12+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05969\ \textcolor{preprocessor}{\ \ \ \ y6\ +=\ decode[13+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05970\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05971\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \(\backslash\)}}
\DoxyCodeLine{05972\ \textcolor{preprocessor}{\ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);\ \ \(\backslash\)}}
\DoxyCodeLine{05973\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[0+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05974\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[0+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05975\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[1+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05976\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[2+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05977\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[3+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05978\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[4+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05979\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[5+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05980\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[6+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05981\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[1+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05982\ \textcolor{preprocessor}{\ \ \ \ y0\ +=\ decode[7+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05983\ \textcolor{preprocessor}{\ \ \ \ y1\ +=\ decode[8+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05984\ \textcolor{preprocessor}{\ \ \ \ y2\ +=\ decode[9+(ofs)*7]\ *\ c;\ \ \ \(\backslash\)}}
\DoxyCodeLine{05985\ \textcolor{preprocessor}{\ \ \ \ y3\ +=\ decode[10+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05986\ \textcolor{preprocessor}{\ \ \ \ y4\ +=\ decode[11+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05987\ \textcolor{preprocessor}{\ \ \ \ y5\ +=\ decode[12+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05988\ \textcolor{preprocessor}{\ \ \ \ y6\ +=\ decode[13+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05989\ \textcolor{preprocessor}{\ \ \ \ c\ =\ hc[2+(ofs)];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05990\ \textcolor{preprocessor}{\ \ \ \ x0\ +=\ decode[14+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05991\ \textcolor{preprocessor}{\ \ \ \ x1\ +=\ decode[15+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05992\ \textcolor{preprocessor}{\ \ \ \ x2\ +=\ decode[16+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05993\ \textcolor{preprocessor}{\ \ \ \ x3\ +=\ decode[17+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05994\ \textcolor{preprocessor}{\ \ \ \ x4\ +=\ decode[18+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05995\ \textcolor{preprocessor}{\ \ \ \ x5\ +=\ decode[19+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05996\ \textcolor{preprocessor}{\ \ \ \ x6\ +=\ decode[20+(ofs)*7]\ *\ c;\ \ \(\backslash\)}}
\DoxyCodeLine{05997\ \textcolor{preprocessor}{}}
\DoxyCodeLine{05998\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{05999\ \textcolor{preprocessor}{\ \ \ \ output[0]\ =\ x0\ +\ y0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06000\ \textcolor{preprocessor}{\ \ \ \ output[1]\ =\ x1\ +\ y1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06001\ \textcolor{preprocessor}{\ \ \ \ output[2]\ =\ x2\ +\ y2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06002\ \textcolor{preprocessor}{\ \ \ \ output[3]\ =\ x3\ +\ y3;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06003\ \textcolor{preprocessor}{\ \ \ \ output[4]\ =\ x4\ +\ y4;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06004\ \textcolor{preprocessor}{\ \ \ \ output[5]\ =\ x5\ +\ y5;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06005\ \textcolor{preprocessor}{\ \ \ \ output[6]\ =\ x6\ +\ y6;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06006\ \textcolor{preprocessor}{\ \ \ \ horizontal\_coefficients\ +=\ coefficient\_width;\ \(\backslash\)}}
\DoxyCodeLine{06007\ \textcolor{preprocessor}{\ \ \ \ ++horizontal\_contributors;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{06008\ \textcolor{preprocessor}{\ \ \ \ output\ +=\ 7;}}
\DoxyCodeLine{06009\ }
\DoxyCodeLine{06010\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{06011\ }
\DoxyCodeLine{06012\ \textcolor{preprocessor}{\#define\ STBIR\_\_horizontal\_channels\ 7}}
\DoxyCodeLine{06013\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{06014\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06015\ }
\DoxyCodeLine{06016\ }
\DoxyCodeLine{06017\ \textcolor{comment}{//\ include\ all\ of\ the\ vertical\ resamplers\ (both\ scatter\ and\ gather\ versions)}}
\DoxyCodeLine{06018\ }
\DoxyCodeLine{06019\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 1}}
\DoxyCodeLine{06020\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06021\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06022\ }
\DoxyCodeLine{06023\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 1}}
\DoxyCodeLine{06024\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06025\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06026\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06027\ }
\DoxyCodeLine{06028\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 2}}
\DoxyCodeLine{06029\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06030\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06031\ }
\DoxyCodeLine{06032\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 2}}
\DoxyCodeLine{06033\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06034\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06035\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06036\ }
\DoxyCodeLine{06037\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 3}}
\DoxyCodeLine{06038\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06039\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06040\ }
\DoxyCodeLine{06041\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 3}}
\DoxyCodeLine{06042\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06043\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06044\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06045\ }
\DoxyCodeLine{06046\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 4}}
\DoxyCodeLine{06047\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06048\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06049\ }
\DoxyCodeLine{06050\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 4}}
\DoxyCodeLine{06051\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06052\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06053\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06054\ }
\DoxyCodeLine{06055\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 5}}
\DoxyCodeLine{06056\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06057\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06058\ }
\DoxyCodeLine{06059\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 5}}
\DoxyCodeLine{06060\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06061\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06062\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06063\ }
\DoxyCodeLine{06064\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 6}}
\DoxyCodeLine{06065\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06066\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06067\ }
\DoxyCodeLine{06068\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 6}}
\DoxyCodeLine{06069\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06070\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06071\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06072\ }
\DoxyCodeLine{06073\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 7}}
\DoxyCodeLine{06074\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06075\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06076\ }
\DoxyCodeLine{06077\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 7}}
\DoxyCodeLine{06078\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06079\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06080\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06081\ }
\DoxyCodeLine{06082\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 8}}
\DoxyCodeLine{06083\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06084\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06085\ }
\DoxyCodeLine{06086\ \textcolor{preprocessor}{\#define\ STBIR\_\_vertical\_channels\ 8}}
\DoxyCodeLine{06087\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{06088\ \textcolor{preprocessor}{\#define\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{06089\ \textcolor{preprocessor}{\#include\ STBIR\_\_HEADER\_FILENAME}}
\DoxyCodeLine{06090\ }
\DoxyCodeLine{06091\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ STBIR\_VERTICAL\_GATHERFUNC(\ \textcolor{keywordtype}{float}\ *\ output,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ coeffs,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ **\ inputs,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input0\_end\ );}
\DoxyCodeLine{06092\ }
\DoxyCodeLine{06093\ \textcolor{keyword}{static}\ STBIR\_VERTICAL\_GATHERFUNC\ *\ stbir\_\_vertical\_gathers[\ 8\ ]\ =}
\DoxyCodeLine{06094\ \{}
\DoxyCodeLine{06095\ \ \ stbir\_\_vertical\_gather\_with\_1\_coeffs,stbir\_\_vertical\_gather\_with\_2\_coeffs,stbir\_\_vertical\_gather\_with\_3\_coeffs,stbir\_\_vertical\_gather\_with\_4\_coeffs,stbir\_\_vertical\_gather\_with\_5\_coeffs,stbir\_\_vertical\_gather\_with\_6\_coeffs,stbir\_\_vertical\_gather\_with\_7\_coeffs,stbir\_\_vertical\_gather\_with\_8\_coeffs}
\DoxyCodeLine{06096\ \};}
\DoxyCodeLine{06097\ }
\DoxyCodeLine{06098\ \textcolor{keyword}{static}\ STBIR\_VERTICAL\_GATHERFUNC\ *\ stbir\_\_vertical\_gathers\_continues[\ 8\ ]\ =}
\DoxyCodeLine{06099\ \{}
\DoxyCodeLine{06100\ \ \ stbir\_\_vertical\_gather\_with\_1\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_2\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_3\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_4\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_5\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_6\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_7\_coeffs\_cont,stbir\_\_vertical\_gather\_with\_8\_coeffs\_cont}
\DoxyCodeLine{06101\ \};}
\DoxyCodeLine{06102\ }
\DoxyCodeLine{06103\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ STBIR\_VERTICAL\_SCATTERFUNC(\ \textcolor{keywordtype}{float}\ **\ outputs,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ coeffs,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input\_end\ );}
\DoxyCodeLine{06104\ }
\DoxyCodeLine{06105\ \textcolor{keyword}{static}\ STBIR\_VERTICAL\_SCATTERFUNC\ *\ stbir\_\_vertical\_scatter\_sets[\ 8\ ]\ =}
\DoxyCodeLine{06106\ \{}
\DoxyCodeLine{06107\ \ \ stbir\_\_vertical\_scatter\_with\_1\_coeffs,stbir\_\_vertical\_scatter\_with\_2\_coeffs,stbir\_\_vertical\_scatter\_with\_3\_coeffs,stbir\_\_vertical\_scatter\_with\_4\_coeffs,stbir\_\_vertical\_scatter\_with\_5\_coeffs,stbir\_\_vertical\_scatter\_with\_6\_coeffs,stbir\_\_vertical\_scatter\_with\_7\_coeffs,stbir\_\_vertical\_scatter\_with\_8\_coeffs}
\DoxyCodeLine{06108\ \};}
\DoxyCodeLine{06109\ }
\DoxyCodeLine{06110\ \textcolor{keyword}{static}\ STBIR\_VERTICAL\_SCATTERFUNC\ *\ stbir\_\_vertical\_scatter\_blends[\ 8\ ]\ =}
\DoxyCodeLine{06111\ \{}
\DoxyCodeLine{06112\ \ \ stbir\_\_vertical\_scatter\_with\_1\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_2\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_3\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_4\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_5\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_6\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_7\_coeffs\_cont,stbir\_\_vertical\_scatter\_with\_8\_coeffs\_cont}
\DoxyCodeLine{06113\ \};}
\DoxyCodeLine{06114\ }
\DoxyCodeLine{06115\ }
\DoxyCodeLine{06116\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_encode\_scanline(\ stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ \textcolor{keywordtype}{void}\ *output\_buffer\_data,\ \textcolor{keywordtype}{float}\ *\ encode\_buffer,\ \textcolor{keywordtype}{int}\ row\ \ STBIR\_ONLY\_PROFILE\_GET\_SPLIT\_INFO\ )}
\DoxyCodeLine{06117\ \{}
\DoxyCodeLine{06118\ \ \ \textcolor{keywordtype}{int}\ num\_pixels\ =\ stbir\_info-\/>horizontal.scale\_info.output\_sub\_size;}
\DoxyCodeLine{06119\ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{06120\ \ \ \textcolor{keywordtype}{int}\ width\_times\_channels\ =\ num\_pixels\ *\ channels;}
\DoxyCodeLine{06121\ \ \ \textcolor{keywordtype}{void}\ *\ output\_buffer;}
\DoxyCodeLine{06122\ }
\DoxyCodeLine{06123\ \ \ \textcolor{comment}{//\ un-\/alpha\ weight\ if\ we\ need\ to}}
\DoxyCodeLine{06124\ \ \ \textcolor{keywordflow}{if}\ (\ stbir\_info-\/>alpha\_unweight\ )}
\DoxyCodeLine{06125\ \ \ \{}
\DoxyCodeLine{06126\ \ \ \ \ STBIR\_PROFILE\_START(\ unalpha\ );}
\DoxyCodeLine{06127\ \ \ \ \ stbir\_info-\/>alpha\_unweight(\ encode\_buffer,\ width\_times\_channels\ );}
\DoxyCodeLine{06128\ \ \ \ \ STBIR\_PROFILE\_END(\ unalpha\ );}
\DoxyCodeLine{06129\ \ \ \}}
\DoxyCodeLine{06130\ }
\DoxyCodeLine{06131\ \ \ \textcolor{comment}{//\ write\ directly\ into\ output\ by\ default}}
\DoxyCodeLine{06132\ \ \ output\_buffer\ =\ output\_buffer\_data;}
\DoxyCodeLine{06133\ }
\DoxyCodeLine{06134\ \ \ \textcolor{comment}{//\ if\ we\ have\ an\ output\ callback,\ we\ first\ convert\ the\ decode\ buffer\ in\ place\ (and\ then\ hand\ that\ to\ the\ callback)}}
\DoxyCodeLine{06135\ \ \ \textcolor{keywordflow}{if}\ (\ stbir\_info-\/>out\_pixels\_cb\ )}
\DoxyCodeLine{06136\ \ \ \ \ output\_buffer\ =\ encode\_buffer;}
\DoxyCodeLine{06137\ }
\DoxyCodeLine{06138\ \ \ STBIR\_PROFILE\_START(\ encode\ );}
\DoxyCodeLine{06139\ \ \ \textcolor{comment}{//\ convert\ into\ the\ output\ buffer}}
\DoxyCodeLine{06140\ \ \ stbir\_info-\/>encode\_pixels(\ output\_buffer,\ width\_times\_channels,\ encode\_buffer\ );}
\DoxyCodeLine{06141\ \ \ STBIR\_PROFILE\_END(\ encode\ );}
\DoxyCodeLine{06142\ }
\DoxyCodeLine{06143\ \ \ \textcolor{comment}{//\ if\ we\ have\ an\ output\ callback,\ call\ it\ to\ send\ the\ data}}
\DoxyCodeLine{06144\ \ \ \textcolor{keywordflow}{if}\ (\ stbir\_info-\/>out\_pixels\_cb\ )}
\DoxyCodeLine{06145\ \ \ \ \ stbir\_info-\/>out\_pixels\_cb(\ output\_buffer,\ num\_pixels,\ row,\ stbir\_info-\/>user\_data\ );}
\DoxyCodeLine{06146\ \}}
\DoxyCodeLine{06147\ }
\DoxyCodeLine{06148\ }
\DoxyCodeLine{06149\ \textcolor{comment}{//\ Get\ the\ ring\ buffer\ pointer\ for\ an\ index}}
\DoxyCodeLine{06150\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_get\_ring\_buffer\_entry(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info\ \textcolor{keyword}{const}\ *\ split\_info,\ \textcolor{keywordtype}{int}\ index\ )}
\DoxyCodeLine{06151\ \{}
\DoxyCodeLine{06152\ \ \ STBIR\_ASSERT(\ index\ <\ stbir\_info-\/>ring\_buffer\_num\_entries\ );}
\DoxyCodeLine{06153\ }
\DoxyCodeLine{06154\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{06155\ \ \ \ \ \textcolor{keywordflow}{return}\ split\_info-\/>ring\_buffers[\ index\ ];}
\DoxyCodeLine{06156\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{06157\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{float}*)\ (\ (\ (\textcolor{keywordtype}{char}*)\ split\_info-\/>ring\_buffer\ )\ +\ (\ index\ *\ stbir\_info-\/>ring\_buffer\_length\_bytes\ )\ );}
\DoxyCodeLine{06158\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{06159\ \}}
\DoxyCodeLine{06160\ }
\DoxyCodeLine{06161\ \textcolor{comment}{//\ Get\ the\ specified\ scan\ line\ from\ the\ ring\ buffer}}
\DoxyCodeLine{06162\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_get\_ring\_buffer\_scanline(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info\ \textcolor{keyword}{const}\ *\ split\_info,\ \textcolor{keywordtype}{int}\ get\_scanline)}
\DoxyCodeLine{06163\ \{}
\DoxyCodeLine{06164\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_index\ =\ (split\_info-\/>ring\_buffer\_begin\_index\ +\ (get\_scanline\ -\/\ split\_info-\/>ring\_buffer\_first\_scanline))\ \%\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{06165\ \ \ \textcolor{keywordflow}{return}\ stbir\_\_get\_ring\_buffer\_entry(\ stbir\_info,\ split\_info,\ ring\_buffer\_index\ );}
\DoxyCodeLine{06166\ \}}
\DoxyCodeLine{06167\ }
\DoxyCodeLine{06168\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_horizontal\_gather(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ \textcolor{keywordtype}{float}*\ output\_buffer,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input\_buffer\ STBIR\_ONLY\_PROFILE\_GET\_SPLIT\_INFO\ )}
\DoxyCodeLine{06169\ \{}
\DoxyCodeLine{06170\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer\ =\ input\_buffer\ -\/\ (\ stbir\_info-\/>scanline\_extents.conservative.n0\ *\ stbir\_info-\/>effective\_channels\ );}
\DoxyCodeLine{06171\ }
\DoxyCodeLine{06172\ \ \ STBIR\_PROFILE\_START(\ horizontal\ );}
\DoxyCodeLine{06173\ \ \ \textcolor{keywordflow}{if}\ (\ (\ stbir\_info-\/>horizontal.filter\_enum\ ==\ STBIR\_FILTER\_POINT\_SAMPLE\ )\ \&\&\ (\ stbir\_info-\/>horizontal.scale\_info.scale\ ==\ 1.0f\ )\ )}
\DoxyCodeLine{06174\ \ \ \ \ STBIR\_MEMCPY(\ output\_buffer,\ input\_buffer,\ stbir\_info-\/>horizontal.scale\_info.output\_sub\_size\ *\ \textcolor{keyword}{sizeof}(\ \textcolor{keywordtype}{float}\ )\ *\ stbir\_info-\/>effective\_channels\ );}
\DoxyCodeLine{06175\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06176\ \ \ \ \ stbir\_info-\/>horizontal\_gather\_channels(\ output\_buffer,\ stbir\_info-\/>horizontal.scale\_info.output\_sub\_size,\ decode\_buffer,\ stbir\_info-\/>horizontal.contributors,\ stbir\_info-\/>horizontal.coefficients,\ stbir\_info-\/>horizontal.coefficient\_width\ );}
\DoxyCodeLine{06177\ \ \ STBIR\_PROFILE\_END(\ horizontal\ );}
\DoxyCodeLine{06178\ \}}
\DoxyCodeLine{06179\ }
\DoxyCodeLine{06180\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_vertical\_gather(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ contrib\_n0,\ \textcolor{keywordtype}{int}\ contrib\_n1,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_coefficients\ )}
\DoxyCodeLine{06181\ \{}
\DoxyCodeLine{06182\ \ \ \textcolor{keywordtype}{float}*\ encode\_buffer\ =\ split\_info-\/>vertical\_buffer;}
\DoxyCodeLine{06183\ \ \ \textcolor{keywordtype}{float}*\ decode\_buffer\ =\ split\_info-\/>decode\_buffer;}
\DoxyCodeLine{06184\ \ \ \textcolor{keywordtype}{int}\ vertical\_first\ =\ stbir\_info-\/>vertical\_first;}
\DoxyCodeLine{06185\ \ \ \textcolor{keywordtype}{int}\ width\ =\ (vertical\_first)\ ?\ (\ stbir\_info-\/>scanline\_extents.conservative.n1-\/stbir\_info-\/>scanline\_extents.conservative.n0+1\ )\ :\ stbir\_info-\/>horizontal.scale\_info.output\_sub\_size;}
\DoxyCodeLine{06186\ \ \ \textcolor{keywordtype}{int}\ width\_times\_channels\ =\ stbir\_info-\/>effective\_channels\ *\ width;}
\DoxyCodeLine{06187\ }
\DoxyCodeLine{06188\ \ \ STBIR\_ASSERT(\ stbir\_info-\/>vertical.is\_gather\ );}
\DoxyCodeLine{06189\ }
\DoxyCodeLine{06190\ \ \ \textcolor{comment}{//\ loop\ over\ the\ contributing\ scanlines\ and\ scale\ into\ the\ buffer}}
\DoxyCodeLine{06191\ \ \ STBIR\_PROFILE\_START(\ vertical\ );}
\DoxyCodeLine{06192\ \ \ \{}
\DoxyCodeLine{06193\ \ \ \ \ \textcolor{keywordtype}{int}\ k\ =\ 0,\ total\ =\ contrib\_n1\ -\/\ contrib\_n0\ +\ 1;}
\DoxyCodeLine{06194\ \ \ \ \ STBIR\_ASSERT(\ total\ >\ 0\ );}
\DoxyCodeLine{06195\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{06196\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ inputs[8];}
\DoxyCodeLine{06197\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i,\ cnt\ =\ total;\ \textcolor{keywordflow}{if}\ (\ cnt\ >\ 8\ )\ cnt\ =\ 8;}
\DoxyCodeLine{06198\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ cnt\ ;\ i++\ )}
\DoxyCodeLine{06199\ \ \ \ \ \ \ \ \ inputs[\ i\ ]\ =\ stbir\_\_get\_ring\_buffer\_scanline(stbir\_info,\ split\_info,\ k+i+contrib\_n0\ );}
\DoxyCodeLine{06200\ }
\DoxyCodeLine{06201\ \ \ \ \ \ \ \textcolor{comment}{//\ call\ the\ N\ scanlines\ at\ a\ time\ function\ (up\ to\ 8\ scanlines\ of\ blending\ at\ once)}}
\DoxyCodeLine{06202\ \ \ \ \ \ \ ((k==0)?stbir\_\_vertical\_gathers:stbir\_\_vertical\_gathers\_continues)[cnt-\/1](\ (vertical\_first)\ ?\ decode\_buffer\ :\ encode\_buffer,\ vertical\_coefficients\ +\ k,\ inputs,\ inputs[0]\ +\ width\_times\_channels\ );}
\DoxyCodeLine{06203\ \ \ \ \ \ \ k\ +=\ cnt;}
\DoxyCodeLine{06204\ \ \ \ \ \ \ total\ -\/=\ cnt;}
\DoxyCodeLine{06205\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ total\ );}
\DoxyCodeLine{06206\ \ \ \}}
\DoxyCodeLine{06207\ \ \ STBIR\_PROFILE\_END(\ vertical\ );}
\DoxyCodeLine{06208\ }
\DoxyCodeLine{06209\ \ \ \textcolor{keywordflow}{if}\ (\ vertical\_first\ )}
\DoxyCodeLine{06210\ \ \ \{}
\DoxyCodeLine{06211\ \ \ \ \ \textcolor{comment}{//\ Now\ resample\ the\ gathered\ vertical\ data\ in\ the\ horizontal\ axis\ into\ the\ encode\ buffer}}
\DoxyCodeLine{06212\ \ \ \ \ stbir\_\_resample\_horizontal\_gather(stbir\_info,\ encode\_buffer,\ decode\_buffer\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06213\ \ \ \}}
\DoxyCodeLine{06214\ }
\DoxyCodeLine{06215\ \ \ stbir\_\_encode\_scanline(\ stbir\_info,\ (\ (\textcolor{keywordtype}{char}\ *)\ stbir\_info-\/>output\_data\ )\ +\ ((\textcolor{keywordtype}{size\_t})n\ *\ (\textcolor{keywordtype}{size\_t})stbir\_info-\/>output\_stride\_bytes),}
\DoxyCodeLine{06216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer,\ n\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06217\ \}}
\DoxyCodeLine{06218\ }
\DoxyCodeLine{06219\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_decode\_and\_resample\_for\_vertical\_gather\_loop(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{06220\ \{}
\DoxyCodeLine{06221\ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_index;}
\DoxyCodeLine{06222\ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer;}
\DoxyCodeLine{06223\ }
\DoxyCodeLine{06224\ \ \ \textcolor{comment}{//\ Decode\ the\ nth\ scanline\ from\ the\ source\ image\ into\ the\ decode\ buffer.}}
\DoxyCodeLine{06225\ \ \ stbir\_\_decode\_scanline(\ stbir\_info,\ n,\ split\_info-\/>decode\_buffer\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06226\ }
\DoxyCodeLine{06227\ \ \ \textcolor{comment}{//\ update\ new\ end\ scanline}}
\DoxyCodeLine{06228\ \ \ split\_info-\/>ring\_buffer\_last\_scanline\ =\ n;}
\DoxyCodeLine{06229\ }
\DoxyCodeLine{06230\ \ \ \textcolor{comment}{//\ get\ ring\ buffer}}
\DoxyCodeLine{06231\ \ \ ring\_buffer\_index\ =\ (split\_info-\/>ring\_buffer\_begin\_index\ +\ (split\_info-\/>ring\_buffer\_last\_scanline\ -\/\ split\_info-\/>ring\_buffer\_first\_scanline))\ \%\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{06232\ \ \ ring\_buffer\ =\ stbir\_\_get\_ring\_buffer\_entry(stbir\_info,\ split\_info,\ ring\_buffer\_index);}
\DoxyCodeLine{06233\ }
\DoxyCodeLine{06234\ \ \ \textcolor{comment}{//\ Now\ resample\ it\ into\ the\ ring\ buffer.}}
\DoxyCodeLine{06235\ \ \ stbir\_\_resample\_horizontal\_gather(\ stbir\_info,\ ring\_buffer,\ split\_info-\/>decode\_buffer\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06236\ }
\DoxyCodeLine{06237\ \ \ \textcolor{comment}{//\ Now\ it's\ sitting\ in\ the\ ring\ buffer\ ready\ to\ be\ used\ as\ source\ for\ the\ vertical\ sampling.}}
\DoxyCodeLine{06238\ \}}
\DoxyCodeLine{06239\ }
\DoxyCodeLine{06240\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_vertical\_gather\_loop(\ stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info,\ \textcolor{keywordtype}{int}\ split\_count\ )}
\DoxyCodeLine{06241\ \{}
\DoxyCodeLine{06242\ \ \ \textcolor{keywordtype}{int}\ y,\ start\_output\_y,\ end\_output\_y;}
\DoxyCodeLine{06243\ \ \ stbir\_\_contributors*\ vertical\_contributors\ =\ stbir\_info-\/>vertical.contributors;}
\DoxyCodeLine{06244\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_coefficients\ =\ stbir\_info-\/>vertical.coefficients;}
\DoxyCodeLine{06245\ }
\DoxyCodeLine{06246\ \ \ STBIR\_ASSERT(\ stbir\_info-\/>vertical.is\_gather\ );}
\DoxyCodeLine{06247\ }
\DoxyCodeLine{06248\ \ \ start\_output\_y\ =\ split\_info-\/>start\_output\_y;}
\DoxyCodeLine{06249\ \ \ end\_output\_y\ =\ split\_info[split\_count-\/1].end\_output\_y;}
\DoxyCodeLine{06250\ }
\DoxyCodeLine{06251\ \ \ vertical\_contributors\ +=\ start\_output\_y;}
\DoxyCodeLine{06252\ \ \ vertical\_coefficients\ +=\ start\_output\_y\ *\ stbir\_info-\/>vertical.coefficient\_width;}
\DoxyCodeLine{06253\ }
\DoxyCodeLine{06254\ \ \ \textcolor{comment}{//\ initialize\ the\ ring\ buffer\ for\ gathering}}
\DoxyCodeLine{06255\ \ \ split\_info-\/>ring\_buffer\_begin\_index\ =\ 0;}
\DoxyCodeLine{06256\ \ \ split\_info-\/>ring\_buffer\_first\_scanline\ =\ vertical\_contributors-\/>n0;}
\DoxyCodeLine{06257\ \ \ split\_info-\/>ring\_buffer\_last\_scanline\ =\ split\_info-\/>ring\_buffer\_first\_scanline\ -\/\ 1;\ \textcolor{comment}{//\ means\ "{}empty"{}}}
\DoxyCodeLine{06258\ }
\DoxyCodeLine{06259\ \ \ \textcolor{keywordflow}{for}\ (y\ =\ start\_output\_y;\ y\ <\ end\_output\_y;\ y++)}
\DoxyCodeLine{06260\ \ \ \{}
\DoxyCodeLine{06261\ \ \ \ \ \textcolor{keywordtype}{int}\ in\_first\_scanline,\ in\_last\_scanline;}
\DoxyCodeLine{06262\ }
\DoxyCodeLine{06263\ \ \ \ \ in\_first\_scanline\ =\ vertical\_contributors-\/>n0;}
\DoxyCodeLine{06264\ \ \ \ \ in\_last\_scanline\ =\ vertical\_contributors-\/>n1;}
\DoxyCodeLine{06265\ }
\DoxyCodeLine{06266\ \ \ \ \ \textcolor{comment}{//\ make\ sure\ the\ indexing\ hasn't\ broken}}
\DoxyCodeLine{06267\ \ \ \ \ STBIR\_ASSERT(\ in\_first\_scanline\ >=\ split\_info-\/>ring\_buffer\_first\_scanline\ );}
\DoxyCodeLine{06268\ }
\DoxyCodeLine{06269\ \ \ \ \ \textcolor{comment}{//\ Load\ in\ new\ scanlines}}
\DoxyCodeLine{06270\ \ \ \ \ \textcolor{keywordflow}{while}\ (in\_last\_scanline\ >\ split\_info-\/>ring\_buffer\_last\_scanline)}
\DoxyCodeLine{06271\ \ \ \ \ \{}
\DoxyCodeLine{06272\ \ \ \ \ \ \ STBIR\_ASSERT(\ (\ split\_info-\/>ring\_buffer\_last\_scanline\ -\/\ split\_info-\/>ring\_buffer\_first\_scanline\ +\ 1\ )\ <=\ stbir\_info-\/>ring\_buffer\_num\_entries\ );}
\DoxyCodeLine{06273\ }
\DoxyCodeLine{06274\ \ \ \ \ \ \ \textcolor{comment}{//\ make\ sure\ there\ was\ room\ in\ the\ ring\ buffer\ when\ we\ add\ new\ scanlines}}
\DoxyCodeLine{06275\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ split\_info-\/>ring\_buffer\_last\_scanline\ -\/\ split\_info-\/>ring\_buffer\_first\_scanline\ +\ 1\ )\ ==\ stbir\_info-\/>ring\_buffer\_num\_entries\ )}
\DoxyCodeLine{06276\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06277\ \ \ \ \ \ \ \ \ split\_info-\/>ring\_buffer\_first\_scanline++;}
\DoxyCodeLine{06278\ \ \ \ \ \ \ \ \ split\_info-\/>ring\_buffer\_begin\_index++;}
\DoxyCodeLine{06279\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06280\ }
\DoxyCodeLine{06281\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ stbir\_info-\/>vertical\_first\ )}
\DoxyCodeLine{06282\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06283\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ ring\_buffer\ =\ stbir\_\_get\_ring\_buffer\_scanline(\ stbir\_info,\ split\_info,\ ++split\_info-\/>ring\_buffer\_last\_scanline\ );}
\DoxyCodeLine{06284\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ nth\ scanline\ from\ the\ source\ image\ into\ the\ decode\ buffer.}}
\DoxyCodeLine{06285\ \ \ \ \ \ \ \ \ stbir\_\_decode\_scanline(\ stbir\_info,\ split\_info-\/>ring\_buffer\_last\_scanline,\ ring\_buffer\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06286\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06287\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06288\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06289\ \ \ \ \ \ \ \ \ stbir\_\_decode\_and\_resample\_for\_vertical\_gather\_loop(stbir\_info,\ split\_info,\ split\_info-\/>ring\_buffer\_last\_scanline\ +\ 1);}
\DoxyCodeLine{06290\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06291\ \ \ \ \ \}}
\DoxyCodeLine{06292\ }
\DoxyCodeLine{06293\ \ \ \ \ \textcolor{comment}{//\ Now\ all\ buffers\ should\ be\ ready\ to\ write\ a\ row\ of\ vertical\ sampling,\ so\ do\ it.}}
\DoxyCodeLine{06294\ \ \ \ \ stbir\_\_resample\_vertical\_gather(stbir\_info,\ split\_info,\ y,\ in\_first\_scanline,\ in\_last\_scanline,\ vertical\_coefficients\ );}
\DoxyCodeLine{06295\ }
\DoxyCodeLine{06296\ \ \ \ \ ++vertical\_contributors;}
\DoxyCodeLine{06297\ \ \ \ \ vertical\_coefficients\ +=\ stbir\_info-\/>vertical.coefficient\_width;}
\DoxyCodeLine{06298\ \ \ \}}
\DoxyCodeLine{06299\ \}}
\DoxyCodeLine{06300\ }
\DoxyCodeLine{06301\ \textcolor{preprocessor}{\#define\ STBIR\_\_FLOAT\_EMPTY\_MARKER\ 3.0e+38F}}
\DoxyCodeLine{06302\ \textcolor{preprocessor}{\#define\ STBIR\_\_FLOAT\_BUFFER\_IS\_EMPTY(ptr)\ ((ptr)[0]==STBIR\_\_FLOAT\_EMPTY\_MARKER)}}
\DoxyCodeLine{06303\ }
\DoxyCodeLine{06304\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_encode\_first\_scanline\_from\_scatter(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info)}
\DoxyCodeLine{06305\ \{}
\DoxyCodeLine{06306\ \ \ \textcolor{comment}{//\ evict\ a\ scanline\ out\ into\ the\ output\ buffer}}
\DoxyCodeLine{06307\ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_entry(stbir\_info,\ split\_info,\ split\_info-\/>ring\_buffer\_begin\_index\ );}
\DoxyCodeLine{06308\ }
\DoxyCodeLine{06309\ \ \ \textcolor{comment}{//\ dump\ the\ scanline\ out}}
\DoxyCodeLine{06310\ \ \ stbir\_\_encode\_scanline(\ stbir\_info,\ (\ (\textcolor{keywordtype}{char}\ *)stbir\_info-\/>output\_data\ )\ +\ (\ (\textcolor{keywordtype}{size\_t})split\_info-\/>ring\_buffer\_first\_scanline\ *\ (\textcolor{keywordtype}{size\_t})stbir\_info-\/>output\_stride\_bytes\ ),\ ring\_buffer\_entry,\ split\_info-\/>ring\_buffer\_first\_scanline\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06311\ }
\DoxyCodeLine{06312\ \ \ \textcolor{comment}{//\ mark\ it\ as\ empty}}
\DoxyCodeLine{06313\ \ \ ring\_buffer\_entry[\ 0\ ]\ =\ STBIR\_\_FLOAT\_EMPTY\_MARKER;}
\DoxyCodeLine{06314\ }
\DoxyCodeLine{06315\ \ \ \textcolor{comment}{//\ advance\ the\ first\ scanline}}
\DoxyCodeLine{06316\ \ \ split\_info-\/>ring\_buffer\_first\_scanline++;}
\DoxyCodeLine{06317\ \ \ \textcolor{keywordflow}{if}\ (\ ++split\_info-\/>ring\_buffer\_begin\_index\ ==\ stbir\_info-\/>ring\_buffer\_num\_entries\ )}
\DoxyCodeLine{06318\ \ \ \ \ split\_info-\/>ring\_buffer\_begin\_index\ =\ 0;}
\DoxyCodeLine{06319\ \}}
\DoxyCodeLine{06320\ }
\DoxyCodeLine{06321\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_horizontal\_resample\_and\_encode\_first\_scanline\_from\_scatter(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info)}
\DoxyCodeLine{06322\ \{}
\DoxyCodeLine{06323\ \ \ \textcolor{comment}{//\ evict\ a\ scanline\ out\ into\ the\ output\ buffer}}
\DoxyCodeLine{06324\ }
\DoxyCodeLine{06325\ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_entry(stbir\_info,\ split\_info,\ split\_info-\/>ring\_buffer\_begin\_index\ );}
\DoxyCodeLine{06326\ }
\DoxyCodeLine{06327\ \ \ \textcolor{comment}{//\ Now\ resample\ it\ into\ the\ buffer.}}
\DoxyCodeLine{06328\ \ \ stbir\_\_resample\_horizontal\_gather(\ stbir\_info,\ split\_info-\/>vertical\_buffer,\ ring\_buffer\_entry\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06329\ }
\DoxyCodeLine{06330\ \ \ \textcolor{comment}{//\ dump\ the\ scanline\ out}}
\DoxyCodeLine{06331\ \ \ stbir\_\_encode\_scanline(\ stbir\_info,\ (\ (\textcolor{keywordtype}{char}\ *)stbir\_info-\/>output\_data\ )\ +\ (\ (\textcolor{keywordtype}{size\_t})split\_info-\/>ring\_buffer\_first\_scanline\ *\ (\textcolor{keywordtype}{size\_t})stbir\_info-\/>output\_stride\_bytes\ ),\ split\_info-\/>vertical\_buffer,\ split\_info-\/>ring\_buffer\_first\_scanline\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06332\ }
\DoxyCodeLine{06333\ \ \ \textcolor{comment}{//\ mark\ it\ as\ empty}}
\DoxyCodeLine{06334\ \ \ ring\_buffer\_entry[\ 0\ ]\ =\ STBIR\_\_FLOAT\_EMPTY\_MARKER;}
\DoxyCodeLine{06335\ }
\DoxyCodeLine{06336\ \ \ \textcolor{comment}{//\ advance\ the\ first\ scanline}}
\DoxyCodeLine{06337\ \ \ split\_info-\/>ring\_buffer\_first\_scanline++;}
\DoxyCodeLine{06338\ \ \ \textcolor{keywordflow}{if}\ (\ ++split\_info-\/>ring\_buffer\_begin\_index\ ==\ stbir\_info-\/>ring\_buffer\_num\_entries\ )}
\DoxyCodeLine{06339\ \ \ \ \ split\_info-\/>ring\_buffer\_begin\_index\ =\ 0;}
\DoxyCodeLine{06340\ \}}
\DoxyCodeLine{06341\ }
\DoxyCodeLine{06342\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_vertical\_scatter(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info,\ \textcolor{keywordtype}{int}\ n0,\ \textcolor{keywordtype}{int}\ n1,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_coefficients,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_buffer,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_buffer\_end\ )}
\DoxyCodeLine{06343\ \{}
\DoxyCodeLine{06344\ \ \ STBIR\_ASSERT(\ !stbir\_info-\/>vertical.is\_gather\ );}
\DoxyCodeLine{06345\ }
\DoxyCodeLine{06346\ \ \ STBIR\_PROFILE\_START(\ vertical\ );}
\DoxyCodeLine{06347\ \ \ \{}
\DoxyCodeLine{06348\ \ \ \ \ \textcolor{keywordtype}{int}\ k\ =\ 0,\ total\ =\ n1\ -\/\ n0\ +\ 1;}
\DoxyCodeLine{06349\ \ \ \ \ STBIR\_ASSERT(\ total\ >\ 0\ );}
\DoxyCodeLine{06350\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{06351\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *\ outputs[8];}
\DoxyCodeLine{06352\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i,\ n\ =\ total;\ \textcolor{keywordflow}{if}\ (\ n\ >\ 8\ )\ n\ =\ 8;}
\DoxyCodeLine{06353\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ n\ ;\ i++\ )}
\DoxyCodeLine{06354\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06355\ \ \ \ \ \ \ \ \ outputs[\ i\ ]\ =\ stbir\_\_get\_ring\_buffer\_scanline(stbir\_info,\ split\_info,\ k+i+n0\ );}
\DoxyCodeLine{06356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ i\ )\ \&\&\ (\ STBIR\_\_FLOAT\_BUFFER\_IS\_EMPTY(\ outputs[i]\ )\ !=\ STBIR\_\_FLOAT\_BUFFER\_IS\_EMPTY(\ outputs[0]\ )\ )\ )\ \textcolor{comment}{//\ make\ sure\ runs\ are\ of\ the\ same\ type}}
\DoxyCodeLine{06357\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06358\ \ \ \ \ \ \ \ \ \ \ n\ =\ i;}
\DoxyCodeLine{06359\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06360\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06361\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06362\ \ \ \ \ \ \ \textcolor{comment}{//\ call\ the\ scatter\ to\ N\ scanlines\ at\ a\ time\ function\ (up\ to\ 8\ scanlines\ of\ scattering\ at\ once)}}
\DoxyCodeLine{06363\ \ \ \ \ \ \ ((STBIR\_\_FLOAT\_BUFFER\_IS\_EMPTY(\ outputs[0]\ ))?stbir\_\_vertical\_scatter\_sets:stbir\_\_vertical\_scatter\_blends)[n-\/1](\ outputs,\ vertical\_coefficients\ +\ k,\ vertical\_buffer,\ vertical\_buffer\_end\ );}
\DoxyCodeLine{06364\ \ \ \ \ \ \ k\ +=\ n;}
\DoxyCodeLine{06365\ \ \ \ \ \ \ total\ -\/=\ n;}
\DoxyCodeLine{06366\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ total\ );}
\DoxyCodeLine{06367\ \ \ \}}
\DoxyCodeLine{06368\ }
\DoxyCodeLine{06369\ \ \ STBIR\_PROFILE\_END(\ vertical\ );}
\DoxyCodeLine{06370\ \}}
\DoxyCodeLine{06371\ }
\DoxyCodeLine{06372\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ stbir\_\_handle\_scanline\_for\_scatter\_func(stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info);}
\DoxyCodeLine{06373\ }
\DoxyCodeLine{06374\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_vertical\_scatter\_loop(\ stbir\_\_info\ \textcolor{keyword}{const}\ *\ stbir\_info,\ stbir\_\_per\_split\_info*\ split\_info,\ \textcolor{keywordtype}{int}\ split\_count\ )}
\DoxyCodeLine{06375\ \{}
\DoxyCodeLine{06376\ \ \ \textcolor{keywordtype}{int}\ y,\ start\_output\_y,\ end\_output\_y,\ start\_input\_y,\ end\_input\_y;}
\DoxyCodeLine{06377\ \ \ stbir\_\_contributors*\ vertical\_contributors\ =\ stbir\_info-\/>vertical.contributors;}
\DoxyCodeLine{06378\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_coefficients\ =\ stbir\_info-\/>vertical.coefficients;}
\DoxyCodeLine{06379\ \ \ stbir\_\_handle\_scanline\_for\_scatter\_func\ *\ handle\_scanline\_for\_scatter;}
\DoxyCodeLine{06380\ \ \ \textcolor{keywordtype}{void}\ *\ scanline\_scatter\_buffer;}
\DoxyCodeLine{06381\ \ \ \textcolor{keywordtype}{void}\ *\ scanline\_scatter\_buffer\_end;}
\DoxyCodeLine{06382\ \ \ \textcolor{keywordtype}{int}\ on\_first\_input\_y,\ last\_input\_y;}
\DoxyCodeLine{06383\ }
\DoxyCodeLine{06384\ \ \ STBIR\_ASSERT(\ !stbir\_info-\/>vertical.is\_gather\ );}
\DoxyCodeLine{06385\ }
\DoxyCodeLine{06386\ \ \ start\_output\_y\ =\ split\_info-\/>start\_output\_y;}
\DoxyCodeLine{06387\ \ \ end\_output\_y\ =\ split\_info[split\_count-\/1].end\_output\_y;\ \ \textcolor{comment}{//\ may\ do\ multiple\ split\ counts}}
\DoxyCodeLine{06388\ }
\DoxyCodeLine{06389\ \ \ start\_input\_y\ =\ split\_info-\/>start\_input\_y;}
\DoxyCodeLine{06390\ \ \ end\_input\_y\ =\ split\_info[split\_count-\/1].end\_input\_y;}
\DoxyCodeLine{06391\ }
\DoxyCodeLine{06392\ \ \ \textcolor{comment}{//\ adjust\ for\ starting\ offset\ start\_input\_y}}
\DoxyCodeLine{06393\ \ \ y\ =\ start\_input\_y\ +\ stbir\_info-\/>vertical.filter\_pixel\_margin;}
\DoxyCodeLine{06394\ \ \ vertical\_contributors\ +=\ y\ ;}
\DoxyCodeLine{06395\ \ \ vertical\_coefficients\ +=\ stbir\_info-\/>vertical.coefficient\_width\ *\ y;}
\DoxyCodeLine{06396\ }
\DoxyCodeLine{06397\ \ \ \textcolor{keywordflow}{if}\ (\ stbir\_info-\/>vertical\_first\ )}
\DoxyCodeLine{06398\ \ \ \{}
\DoxyCodeLine{06399\ \ \ \ \ handle\_scanline\_for\_scatter\ =\ stbir\_\_horizontal\_resample\_and\_encode\_first\_scanline\_from\_scatter;}
\DoxyCodeLine{06400\ \ \ \ \ scanline\_scatter\_buffer\ =\ split\_info-\/>decode\_buffer;}
\DoxyCodeLine{06401\ \ \ \ \ scanline\_scatter\_buffer\_end\ =\ (\ (\textcolor{keywordtype}{char}*)\ scanline\_scatter\_buffer\ )\ +\ \textcolor{keyword}{sizeof}(\ float\ )\ *\ stbir\_info-\/>effective\_channels\ *\ (stbir\_info-\/>scanline\_extents.conservative.n1-\/stbir\_info-\/>scanline\_extents.conservative.n0+1);}
\DoxyCodeLine{06402\ \ \ \}}
\DoxyCodeLine{06403\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06404\ \ \ \{}
\DoxyCodeLine{06405\ \ \ \ \ handle\_scanline\_for\_scatter\ =\ stbir\_\_encode\_first\_scanline\_from\_scatter;}
\DoxyCodeLine{06406\ \ \ \ \ scanline\_scatter\_buffer\ =\ split\_info-\/>vertical\_buffer;}
\DoxyCodeLine{06407\ \ \ \ \ scanline\_scatter\_buffer\_end\ =\ (\ (\textcolor{keywordtype}{char}*)\ scanline\_scatter\_buffer\ )\ +\ \textcolor{keyword}{sizeof}(\ float\ )\ *\ stbir\_info-\/>effective\_channels\ *\ stbir\_info-\/>horizontal.scale\_info.output\_sub\_size;}
\DoxyCodeLine{06408\ \ \ \}}
\DoxyCodeLine{06409\ }
\DoxyCodeLine{06410\ \ \ \textcolor{comment}{//\ initialize\ the\ ring\ buffer\ for\ scattering}}
\DoxyCodeLine{06411\ \ \ split\_info-\/>ring\_buffer\_first\_scanline\ =\ start\_output\_y;}
\DoxyCodeLine{06412\ \ \ split\_info-\/>ring\_buffer\_last\_scanline\ =\ -\/1;}
\DoxyCodeLine{06413\ \ \ split\_info-\/>ring\_buffer\_begin\_index\ =\ -\/1;}
\DoxyCodeLine{06414\ }
\DoxyCodeLine{06415\ \ \ \textcolor{comment}{//\ mark\ all\ the\ buffers\ as\ empty\ to\ start}}
\DoxyCodeLine{06416\ \ \ \textcolor{keywordflow}{for}(\ y\ =\ 0\ ;\ y\ <\ stbir\_info-\/>ring\_buffer\_num\_entries\ ;\ y++\ )}
\DoxyCodeLine{06417\ \ \ \ \ stbir\_\_get\_ring\_buffer\_entry(\ stbir\_info,\ split\_info,\ y\ )[0]\ =\ STBIR\_\_FLOAT\_EMPTY\_MARKER;\ \textcolor{comment}{//\ only\ used\ on\ scatter}}
\DoxyCodeLine{06418\ }
\DoxyCodeLine{06419\ \ \ \textcolor{comment}{//\ do\ the\ loop\ in\ input\ space}}
\DoxyCodeLine{06420\ \ \ on\_first\_input\_y\ =\ 1;\ last\_input\_y\ =\ start\_input\_y;}
\DoxyCodeLine{06421\ \ \ \textcolor{keywordflow}{for}\ (y\ =\ start\_input\_y\ ;\ y\ <\ end\_input\_y;\ y++)}
\DoxyCodeLine{06422\ \ \ \{}
\DoxyCodeLine{06423\ \ \ \ \ \textcolor{keywordtype}{int}\ out\_first\_scanline,\ out\_last\_scanline;}
\DoxyCodeLine{06424\ }
\DoxyCodeLine{06425\ \ \ \ \ out\_first\_scanline\ =\ vertical\_contributors-\/>n0;}
\DoxyCodeLine{06426\ \ \ \ \ out\_last\_scanline\ =\ vertical\_contributors-\/>n1;}
\DoxyCodeLine{06427\ }
\DoxyCodeLine{06428\ \ \ \ \ STBIR\_ASSERT(out\_last\_scanline\ -\/\ out\_first\_scanline\ +\ 1\ <=\ stbir\_info-\/>ring\_buffer\_num\_entries);}
\DoxyCodeLine{06429\ }
\DoxyCodeLine{06430\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ out\_last\_scanline\ >=\ out\_first\_scanline\ )\ \&\&\ (\ (\ (\ out\_first\_scanline\ >=\ start\_output\_y\ )\ \&\&\ (\ out\_first\_scanline\ <\ end\_output\_y\ )\ )\ ||\ (\ (\ out\_last\_scanline\ >=\ start\_output\_y\ )\ \&\&\ (\ out\_last\_scanline\ <\ end\_output\_y\ )\ )\ )\ )}
\DoxyCodeLine{06431\ \ \ \ \ \{}
\DoxyCodeLine{06432\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vc\ =\ vertical\_coefficients;}
\DoxyCodeLine{06433\ }
\DoxyCodeLine{06434\ \ \ \ \ \ \ \textcolor{comment}{//\ keep\ track\ of\ the\ range\ actually\ seen\ for\ the\ next\ resize}}
\DoxyCodeLine{06435\ \ \ \ \ \ \ last\_input\_y\ =\ y;}
\DoxyCodeLine{06436\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ on\_first\_input\_y\ )\ \&\&\ (\ y\ >\ start\_input\_y\ )\ )}
\DoxyCodeLine{06437\ \ \ \ \ \ \ \ \ split\_info-\/>start\_input\_y\ =\ y;}
\DoxyCodeLine{06438\ \ \ \ \ \ \ on\_first\_input\_y\ =\ 0;}
\DoxyCodeLine{06439\ }
\DoxyCodeLine{06440\ \ \ \ \ \ \ \textcolor{comment}{//\ clip\ the\ region}}
\DoxyCodeLine{06441\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_first\_scanline\ <\ start\_output\_y\ )}
\DoxyCodeLine{06442\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06443\ \ \ \ \ \ \ \ \ vc\ +=\ start\_output\_y\ -\/\ out\_first\_scanline;}
\DoxyCodeLine{06444\ \ \ \ \ \ \ \ \ out\_first\_scanline\ =\ start\_output\_y;}
\DoxyCodeLine{06445\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06446\ }
\DoxyCodeLine{06447\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_last\_scanline\ >=\ end\_output\_y\ )}
\DoxyCodeLine{06448\ \ \ \ \ \ \ \ \ out\_last\_scanline\ =\ end\_output\_y\ -\/\ 1;}
\DoxyCodeLine{06449\ }
\DoxyCodeLine{06450\ \ \ \ \ \ \ \textcolor{comment}{//\ if\ very\ first\ scanline,\ init\ the\ index}}
\DoxyCodeLine{06451\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (split\_info-\/>ring\_buffer\_begin\_index\ <\ 0)}
\DoxyCodeLine{06452\ \ \ \ \ \ \ \ \ split\_info-\/>ring\_buffer\_begin\_index\ =\ out\_first\_scanline\ -\/\ start\_output\_y;}
\DoxyCodeLine{06453\ }
\DoxyCodeLine{06454\ \ \ \ \ \ \ STBIR\_ASSERT(\ split\_info-\/>ring\_buffer\_begin\_index\ <=\ out\_first\_scanline\ );}
\DoxyCodeLine{06455\ }
\DoxyCodeLine{06456\ \ \ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ nth\ scanline\ from\ the\ source\ image\ into\ the\ decode\ buffer.}}
\DoxyCodeLine{06457\ \ \ \ \ \ \ stbir\_\_decode\_scanline(\ stbir\_info,\ y,\ split\_info-\/>decode\_buffer\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06458\ }
\DoxyCodeLine{06459\ \ \ \ \ \ \ \textcolor{comment}{//\ When\ horizontal\ first,\ we\ resample\ horizontally\ into\ the\ vertical\ buffer\ before\ we\ scatter\ it\ out}}
\DoxyCodeLine{06460\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_info-\/>vertical\_first\ )}
\DoxyCodeLine{06461\ \ \ \ \ \ \ \ \ stbir\_\_resample\_horizontal\_gather(\ stbir\_info,\ split\_info-\/>vertical\_buffer,\ split\_info-\/>decode\_buffer\ \ STBIR\_ONLY\_PROFILE\_SET\_SPLIT\_INFO\ );}
\DoxyCodeLine{06462\ }
\DoxyCodeLine{06463\ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ it's\ sitting\ in\ the\ buffer\ ready\ to\ be\ distributed\ into\ the\ ring\ buffers.}}
\DoxyCodeLine{06464\ }
\DoxyCodeLine{06465\ \ \ \ \ \ \ \textcolor{comment}{//\ evict\ from\ the\ ringbuffer,\ if\ we\ need\ are\ full}}
\DoxyCodeLine{06466\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ split\_info-\/>ring\_buffer\_last\_scanline\ -\/\ split\_info-\/>ring\_buffer\_first\_scanline\ +\ 1\ )\ ==\ stbir\_info-\/>ring\_buffer\_num\_entries\ )\ \&\&}
\DoxyCodeLine{06467\ \ \ \ \ \ \ \ \ \ \ \ (\ out\_last\_scanline\ >\ split\_info-\/>ring\_buffer\_last\_scanline\ )\ )}
\DoxyCodeLine{06468\ \ \ \ \ \ \ \ \ handle\_scanline\_for\_scatter(\ stbir\_info,\ split\_info\ );}
\DoxyCodeLine{06469\ }
\DoxyCodeLine{06470\ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ the\ horizontal\ buffer\ is\ ready\ to\ write\ to\ all\ ring\ buffer\ rows,\ so\ do\ it.}}
\DoxyCodeLine{06471\ \ \ \ \ \ \ stbir\_\_resample\_vertical\_scatter(stbir\_info,\ split\_info,\ out\_first\_scanline,\ out\_last\_scanline,\ vc,\ (\textcolor{keywordtype}{float}*)scanline\_scatter\_buffer,\ (\textcolor{keywordtype}{float}*)scanline\_scatter\_buffer\_end\ );}
\DoxyCodeLine{06472\ }
\DoxyCodeLine{06473\ \ \ \ \ \ \ \textcolor{comment}{//\ update\ the\ end\ of\ the\ buffer}}
\DoxyCodeLine{06474\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_last\_scanline\ >\ split\_info-\/>ring\_buffer\_last\_scanline\ )}
\DoxyCodeLine{06475\ \ \ \ \ \ \ \ \ split\_info-\/>ring\_buffer\_last\_scanline\ =\ out\_last\_scanline;}
\DoxyCodeLine{06476\ \ \ \ \ \}}
\DoxyCodeLine{06477\ \ \ \ \ ++vertical\_contributors;}
\DoxyCodeLine{06478\ \ \ \ \ vertical\_coefficients\ +=\ stbir\_info-\/>vertical.coefficient\_width;}
\DoxyCodeLine{06479\ \ \ \}}
\DoxyCodeLine{06480\ }
\DoxyCodeLine{06481\ \ \ \textcolor{comment}{//\ now\ evict\ the\ scanlines\ that\ are\ left\ over\ in\ the\ ring\ buffer}}
\DoxyCodeLine{06482\ \ \ \textcolor{keywordflow}{while}\ (\ split\_info-\/>ring\_buffer\_first\_scanline\ <\ end\_output\_y\ )}
\DoxyCodeLine{06483\ \ \ \ \ handle\_scanline\_for\_scatter(stbir\_info,\ split\_info);}
\DoxyCodeLine{06484\ }
\DoxyCodeLine{06485\ \ \ \textcolor{comment}{//\ update\ the\ end\_input\_y\ if\ we\ do\ multiple\ resizes\ with\ the\ same\ data}}
\DoxyCodeLine{06486\ \ \ ++last\_input\_y;}
\DoxyCodeLine{06487\ \ \ \textcolor{keywordflow}{for}(\ y\ =\ 0\ ;\ y\ <\ split\_count;\ y++\ )}
\DoxyCodeLine{06488\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ split\_info[y].end\_input\_y\ >\ last\_input\_y\ )}
\DoxyCodeLine{06489\ \ \ \ \ \ \ split\_info[y].end\_input\_y\ =\ last\_input\_y;}
\DoxyCodeLine{06490\ \}}
\DoxyCodeLine{06491\ }
\DoxyCodeLine{06492\ }
\DoxyCodeLine{06493\ \textcolor{keyword}{static}\ stbir\_\_kernel\_callback\ *\ stbir\_\_builtin\_kernels[]\ =\ \ \ \{\ 0,\ stbir\_\_filter\_trapezoid,\ \ stbir\_\_filter\_triangle,\ stbir\_\_filter\_cubic,\ stbir\_\_filter\_catmullrom,\ stbir\_\_filter\_mitchell,\ stbir\_\_filter\_point\ \};}
\DoxyCodeLine{06494\ \textcolor{keyword}{static}\ stbir\_\_support\_callback\ *\ stbir\_\_builtin\_supports[]\ =\ \{\ 0,\ stbir\_\_support\_trapezoid,\ stbir\_\_support\_one,\ \ \ \ \ stbir\_\_support\_two,\ \ stbir\_\_support\_two,\ \ \ \ \ \ \ stbir\_\_support\_two,\ \ \ \ \ stbir\_\_support\_zeropoint5\ \};}
\DoxyCodeLine{06495\ }
\DoxyCodeLine{06496\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_set\_sampler(stbir\_\_sampler\ *\ samp,\ stbir\_filter\ filter,\ stbir\_\_kernel\_callback\ *\ kernel,\ stbir\_\_support\_callback\ *\ support,\ stbir\_edge\ edge,\ stbir\_\_scale\_info\ *\ scale\_info,\ \textcolor{keywordtype}{int}\ always\_gather,\ \textcolor{keywordtype}{void}\ *\ user\_data\ )}
\DoxyCodeLine{06497\ \{}
\DoxyCodeLine{06498\ \ \ \textcolor{comment}{//\ set\ filter}}
\DoxyCodeLine{06499\ \ \ \textcolor{keywordflow}{if}\ (filter\ ==\ 0)}
\DoxyCodeLine{06500\ \ \ \{}
\DoxyCodeLine{06501\ \ \ \ \ filter\ =\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE;\ \textcolor{comment}{//\ default\ to\ downsample}}
\DoxyCodeLine{06502\ \ \ \ \ \textcolor{keywordflow}{if}\ (scale\_info-\/>scale\ >=\ (\ 1.0f\ -\/\ stbir\_\_small\_float\ )\ )}
\DoxyCodeLine{06503\ \ \ \ \ \{}
\DoxyCodeLine{06504\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (scale\_info-\/>scale\ <=\ (\ 1.0f\ +\ stbir\_\_small\_float\ )\ )\ \&\&\ (\ STBIR\_CEILF(scale\_info-\/>pixel\_shift)\ ==\ scale\_info-\/>pixel\_shift\ )\ )}
\DoxyCodeLine{06505\ \ \ \ \ \ \ \ \ filter\ =\ STBIR\_FILTER\_POINT\_SAMPLE;}
\DoxyCodeLine{06506\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06507\ \ \ \ \ \ \ \ \ filter\ =\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE;}
\DoxyCodeLine{06508\ \ \ \ \ \}}
\DoxyCodeLine{06509\ \ \ \}}
\DoxyCodeLine{06510\ \ \ samp-\/>filter\_enum\ =\ filter;}
\DoxyCodeLine{06511\ }
\DoxyCodeLine{06512\ \ \ STBIR\_ASSERT(samp-\/>filter\_enum\ !=\ 0);}
\DoxyCodeLine{06513\ \ \ STBIR\_ASSERT((\textcolor{keywordtype}{unsigned})samp-\/>filter\_enum\ <\ STBIR\_FILTER\_OTHER);}
\DoxyCodeLine{06514\ \ \ samp-\/>filter\_kernel\ =\ stbir\_\_builtin\_kernels[\ filter\ ];}
\DoxyCodeLine{06515\ \ \ samp-\/>filter\_support\ =\ stbir\_\_builtin\_supports[\ filter\ ];}
\DoxyCodeLine{06516\ }
\DoxyCodeLine{06517\ \ \ \textcolor{keywordflow}{if}\ (\ kernel\ \&\&\ support\ )}
\DoxyCodeLine{06518\ \ \ \{}
\DoxyCodeLine{06519\ \ \ \ \ samp-\/>filter\_kernel\ =\ kernel;}
\DoxyCodeLine{06520\ \ \ \ \ samp-\/>filter\_support\ =\ support;}
\DoxyCodeLine{06521\ \ \ \ \ samp-\/>filter\_enum\ =\ STBIR\_FILTER\_OTHER;}
\DoxyCodeLine{06522\ \ \ \}}
\DoxyCodeLine{06523\ }
\DoxyCodeLine{06524\ \ \ samp-\/>edge\ =\ edge;}
\DoxyCodeLine{06525\ \ \ samp-\/>filter\_pixel\_width\ \ =\ stbir\_\_get\_filter\_pixel\_width\ (samp-\/>filter\_support,\ scale\_info-\/>scale,\ user\_data\ );}
\DoxyCodeLine{06526\ \ \ \textcolor{comment}{//\ Gather\ is\ always\ better,\ but\ in\ extreme\ downsamples,\ you\ have\ to\ most\ or\ all\ of\ the\ data\ in\ memory}}
\DoxyCodeLine{06527\ \ \ \textcolor{comment}{//\ \ \ \ For\ horizontal,\ we\ always\ have\ all\ the\ pixels,\ so\ we\ always\ use\ gather\ here\ (always\_gather==1).}}
\DoxyCodeLine{06528\ \ \ \textcolor{comment}{//\ \ \ \ For\ vertical,\ we\ use\ gather\ if\ scaling\ up\ (which\ means\ we\ will\ have\ samp-\/>filter\_pixel\_width}}
\DoxyCodeLine{06529\ \ \ \textcolor{comment}{//\ \ \ \ scanlines\ in\ memory\ at\ once).}}
\DoxyCodeLine{06530\ \ \ samp-\/>is\_gather\ =\ 0;}
\DoxyCodeLine{06531\ \ \ \textcolor{keywordflow}{if}\ (\ scale\_info-\/>scale\ >=\ (\ 1.0f\ -\/\ stbir\_\_small\_float\ )\ )}
\DoxyCodeLine{06532\ \ \ \ \ samp-\/>is\_gather\ =\ 1;}
\DoxyCodeLine{06533\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ (\ always\_gather\ )\ ||\ (\ samp-\/>filter\_pixel\_width\ <=\ STBIR\_FORCE\_GATHER\_FILTER\_SCANLINES\_AMOUNT\ )\ )}
\DoxyCodeLine{06534\ \ \ \ \ samp-\/>is\_gather\ =\ 2;}
\DoxyCodeLine{06535\ }
\DoxyCodeLine{06536\ \ \ \textcolor{comment}{//\ pre\ calculate\ stuff\ based\ on\ the\ above}}
\DoxyCodeLine{06537\ \ \ samp-\/>coefficient\_width\ =\ stbir\_\_get\_coefficient\_width(samp,\ samp-\/>is\_gather,\ user\_data);}
\DoxyCodeLine{06538\ }
\DoxyCodeLine{06539\ \ \ \textcolor{comment}{//\ filter\_pixel\_width\ is\ the\ conservative\ size\ in\ pixels\ of\ input\ that\ affect\ an\ output\ pixel.}}
\DoxyCodeLine{06540\ \ \ \textcolor{comment}{//\ \ \ In\ rare\ cases\ (only\ with\ 2\ pix\ to\ 1\ pix\ with\ the\ default\ filters),\ it's\ possible\ that\ the\ }}
\DoxyCodeLine{06541\ \ \ \textcolor{comment}{//\ \ \ filter\ will\ extend\ before\ or\ after\ the\ scanline\ beyond\ just\ one\ extra\ entire\ copy\ of\ the\ }}
\DoxyCodeLine{06542\ \ \ \textcolor{comment}{//\ \ \ scanline\ (we\ would\ hit\ the\ edge\ twice).\ We\ don't\ let\ you\ do\ that,\ so\ we\ clamp\ the\ total\ }}
\DoxyCodeLine{06543\ \ \ \textcolor{comment}{//\ \ \ width\ to\ 3x\ the\ total\ of\ input\ pixel\ (once\ for\ the\ scanline,\ once\ for\ the\ left\ side\ }}
\DoxyCodeLine{06544\ \ \ \textcolor{comment}{//\ \ \ overhang,\ and\ once\ for\ the\ right\ side).\ We\ only\ do\ this\ for\ edge\ mode,\ since\ the\ other\ }}
\DoxyCodeLine{06545\ \ \ \textcolor{comment}{//\ \ \ modes\ can\ just\ re-\/edge\ clamp\ back\ in\ again.}}
\DoxyCodeLine{06546\ \ \ \textcolor{keywordflow}{if}\ (\ edge\ ==\ STBIR\_EDGE\_WRAP\ )}
\DoxyCodeLine{06547\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ samp-\/>filter\_pixel\_width\ >\ (\ scale\_info-\/>input\_full\_size\ *\ 3\ )\ )}
\DoxyCodeLine{06548\ \ \ \ \ \ \ samp-\/>filter\_pixel\_width\ =\ scale\_info-\/>input\_full\_size\ *\ 3;}
\DoxyCodeLine{06549\ }
\DoxyCodeLine{06550\ \ \ \textcolor{comment}{//\ This\ is\ how\ much\ to\ expand\ buffers\ to\ account\ for\ filters\ seeking\ outside}}
\DoxyCodeLine{06551\ \ \ \textcolor{comment}{//\ the\ image\ boundaries.}}
\DoxyCodeLine{06552\ \ \ samp-\/>filter\_pixel\_margin\ =\ samp-\/>filter\_pixel\_width\ /\ 2;}
\DoxyCodeLine{06553\ \ \ }
\DoxyCodeLine{06554\ \ \ \textcolor{comment}{//\ filter\_pixel\_margin\ is\ the\ amount\ that\ this\ filter\ can\ overhang\ on\ just\ one\ side\ of\ either\ }}
\DoxyCodeLine{06555\ \ \ \textcolor{comment}{//\ \ \ end\ of\ the\ scanline\ (left\ or\ the\ right).\ Since\ we\ only\ allow\ you\ to\ overhang\ 1\ scanline's\ }}
\DoxyCodeLine{06556\ \ \ \textcolor{comment}{//\ \ \ worth\ of\ pixels,\ we\ clamp\ this\ one\ side\ of\ overhang\ to\ the\ input\ scanline\ size.\ Again,\ }}
\DoxyCodeLine{06557\ \ \ \textcolor{comment}{//\ \ \ this\ clamping\ only\ happens\ in\ rare\ cases\ with\ the\ default\ filters\ (2\ pix\ to\ 1\ pix).\ }}
\DoxyCodeLine{06558\ \ \ \textcolor{keywordflow}{if}\ (\ edge\ ==\ STBIR\_EDGE\_WRAP\ )}
\DoxyCodeLine{06559\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ samp-\/>filter\_pixel\_margin\ >\ scale\_info-\/>input\_full\_size\ )}
\DoxyCodeLine{06560\ \ \ \ \ \ \ samp-\/>filter\_pixel\_margin\ =\ scale\_info-\/>input\_full\_size;}
\DoxyCodeLine{06561\ }
\DoxyCodeLine{06562\ \ \ samp-\/>num\_contributors\ =\ stbir\_\_get\_contributors(samp,\ samp-\/>is\_gather);}
\DoxyCodeLine{06563\ }
\DoxyCodeLine{06564\ \ \ samp-\/>contributors\_size\ =\ samp-\/>num\_contributors\ *\ \textcolor{keyword}{sizeof}(stbir\_\_contributors);}
\DoxyCodeLine{06565\ \ \ samp-\/>coefficients\_size\ =\ samp-\/>num\_contributors\ *\ samp-\/>coefficient\_width\ *\ \textcolor{keyword}{sizeof}(float)\ +\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float});\ \textcolor{comment}{//\ extra\ sizeof(float)\ is\ padding}}
\DoxyCodeLine{06566\ }
\DoxyCodeLine{06567\ \ \ samp-\/>gather\_prescatter\_contributors\ =\ 0;}
\DoxyCodeLine{06568\ \ \ samp-\/>gather\_prescatter\_coefficients\ =\ 0;}
\DoxyCodeLine{06569\ \ \ \textcolor{keywordflow}{if}\ (\ samp-\/>is\_gather\ ==\ 0\ )}
\DoxyCodeLine{06570\ \ \ \{}
\DoxyCodeLine{06571\ \ \ \ \ samp-\/>gather\_prescatter\_coefficient\_width\ =\ samp-\/>filter\_pixel\_width;}
\DoxyCodeLine{06572\ \ \ \ \ samp-\/>gather\_prescatter\_num\_contributors\ \ =\ stbir\_\_get\_contributors(samp,\ 2);}
\DoxyCodeLine{06573\ \ \ \ \ samp-\/>gather\_prescatter\_contributors\_size\ =\ samp-\/>gather\_prescatter\_num\_contributors\ *\ \textcolor{keyword}{sizeof}(stbir\_\_contributors);}
\DoxyCodeLine{06574\ \ \ \ \ samp-\/>gather\_prescatter\_coefficients\_size\ =\ samp-\/>gather\_prescatter\_num\_contributors\ *\ samp-\/>gather\_prescatter\_coefficient\_width\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{06575\ \ \ \}}
\DoxyCodeLine{06576\ \}}
\DoxyCodeLine{06577\ }
\DoxyCodeLine{06578\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_get\_conservative\_extents(\ stbir\_\_sampler\ *\ samp,\ stbir\_\_contributors\ *\ range,\ \textcolor{keywordtype}{void}\ *\ user\_data\ )}
\DoxyCodeLine{06579\ \{}
\DoxyCodeLine{06580\ \ \ \textcolor{keywordtype}{float}\ scale\ =\ samp-\/>scale\_info.scale;}
\DoxyCodeLine{06581\ \ \ \textcolor{keywordtype}{float}\ out\_shift\ =\ samp-\/>scale\_info.pixel\_shift;}
\DoxyCodeLine{06582\ \ \ stbir\_\_support\_callback\ *\ support\ =\ samp-\/>filter\_support;}
\DoxyCodeLine{06583\ \ \ \textcolor{keywordtype}{int}\ input\_full\_size\ =\ samp-\/>scale\_info.input\_full\_size;}
\DoxyCodeLine{06584\ \ \ stbir\_edge\ edge\ =\ samp-\/>edge;}
\DoxyCodeLine{06585\ \ \ \textcolor{keywordtype}{float}\ inv\_scale\ =\ samp-\/>scale\_info.inv\_scale;}
\DoxyCodeLine{06586\ }
\DoxyCodeLine{06587\ \ \ STBIR\_ASSERT(\ samp-\/>is\_gather\ !=\ 0\ );}
\DoxyCodeLine{06588\ }
\DoxyCodeLine{06589\ \ \ \textcolor{keywordflow}{if}\ (\ samp-\/>is\_gather\ ==\ 1\ )}
\DoxyCodeLine{06590\ \ \ \{}
\DoxyCodeLine{06591\ \ \ \ \ \textcolor{keywordtype}{int}\ in\_first\_pixel,\ in\_last\_pixel;}
\DoxyCodeLine{06592\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_filter\_radius\ =\ support(inv\_scale,\ user\_data)\ *\ scale;}
\DoxyCodeLine{06593\ }
\DoxyCodeLine{06594\ \ \ \ \ stbir\_\_calculate\_in\_pixel\_range(\ \&in\_first\_pixel,\ \&in\_last\_pixel,\ 0.5,\ out\_filter\_radius,\ inv\_scale,\ out\_shift,\ input\_full\_size,\ edge\ );}
\DoxyCodeLine{06595\ \ \ \ \ range-\/>n0\ =\ in\_first\_pixel;}
\DoxyCodeLine{06596\ \ \ \ \ stbir\_\_calculate\_in\_pixel\_range(\ \&in\_first\_pixel,\ \&in\_last\_pixel,\ (\ (\textcolor{keywordtype}{float})(samp-\/>scale\_info.output\_sub\_size-\/1)\ )\ +\ 0.5f,\ out\_filter\_radius,\ inv\_scale,\ out\_shift,\ input\_full\_size,\ edge\ );}
\DoxyCodeLine{06597\ \ \ \ \ range-\/>n1\ =\ in\_last\_pixel;}
\DoxyCodeLine{06598\ \ \ \}}
\DoxyCodeLine{06599\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ samp-\/>is\_gather\ ==\ 2\ )\ \textcolor{comment}{//\ downsample\ gather,\ refine}}
\DoxyCodeLine{06600\ \ \ \{}
\DoxyCodeLine{06601\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixels\_radius\ =\ support(scale,\ user\_data)\ *\ inv\_scale;}
\DoxyCodeLine{06602\ \ \ \ \ \textcolor{keywordtype}{int}\ filter\_pixel\_margin\ =\ samp-\/>filter\_pixel\_margin;}
\DoxyCodeLine{06603\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_sub\_size\ =\ samp-\/>scale\_info.output\_sub\_size;}
\DoxyCodeLine{06604\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_end;}
\DoxyCodeLine{06605\ \ \ \ \ \textcolor{keywordtype}{int}\ n;}
\DoxyCodeLine{06606\ \ \ \ \ \textcolor{keywordtype}{int}\ in\_first\_pixel,\ in\_last\_pixel;}
\DoxyCodeLine{06607\ }
\DoxyCodeLine{06608\ \ \ \ \ \textcolor{comment}{//\ get\ a\ conservative\ area\ of\ the\ input\ range}}
\DoxyCodeLine{06609\ \ \ \ \ stbir\_\_calculate\_in\_pixel\_range(\ \&in\_first\_pixel,\ \&in\_last\_pixel,\ 0,\ 0,\ inv\_scale,\ out\_shift,\ input\_full\_size,\ edge\ );}
\DoxyCodeLine{06610\ \ \ \ \ range-\/>n0\ =\ in\_first\_pixel;}
\DoxyCodeLine{06611\ \ \ \ \ stbir\_\_calculate\_in\_pixel\_range(\ \&in\_first\_pixel,\ \&in\_last\_pixel,\ (\textcolor{keywordtype}{float})output\_sub\_size,\ 0,\ inv\_scale,\ out\_shift,\ input\_full\_size,\ edge\ );}
\DoxyCodeLine{06612\ \ \ \ \ range-\/>n1\ =\ in\_last\_pixel;}
\DoxyCodeLine{06613\ }
\DoxyCodeLine{06614\ \ \ \ \ \textcolor{comment}{//\ now\ go\ through\ the\ margin\ to\ the\ start\ of\ area\ to\ find\ bottom}}
\DoxyCodeLine{06615\ \ \ \ \ n\ =\ range-\/>n0\ +\ 1;}
\DoxyCodeLine{06616\ \ \ \ \ input\_end\ =\ -\/filter\_pixel\_margin;}
\DoxyCodeLine{06617\ \ \ \ \ \textcolor{keywordflow}{while}(\ n\ >=\ input\_end\ )}
\DoxyCodeLine{06618\ \ \ \ \ \{}
\DoxyCodeLine{06619\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_first\_pixel,\ out\_last\_pixel;}
\DoxyCodeLine{06620\ \ \ \ \ \ \ stbir\_\_calculate\_out\_pixel\_range(\ \&out\_first\_pixel,\ \&out\_last\_pixel,\ ((\textcolor{keywordtype}{float})n)+0.5f,\ in\_pixels\_radius,\ scale,\ out\_shift,\ output\_sub\_size\ );}
\DoxyCodeLine{06621\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_first\_pixel\ >\ out\_last\_pixel\ )}
\DoxyCodeLine{06622\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06623\ }
\DoxyCodeLine{06624\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ out\_first\_pixel\ <\ output\_sub\_size\ )\ ||\ (\ out\_last\_pixel\ >=\ 0\ )\ )}
\DoxyCodeLine{06625\ \ \ \ \ \ \ \ \ range-\/>n0\ =\ n;}
\DoxyCodeLine{06626\ \ \ \ \ \ \ -\/-\/n;}
\DoxyCodeLine{06627\ \ \ \ \ \}}
\DoxyCodeLine{06628\ }
\DoxyCodeLine{06629\ \ \ \ \ \textcolor{comment}{//\ now\ go\ through\ the\ end\ of\ the\ area\ through\ the\ margin\ to\ find\ top}}
\DoxyCodeLine{06630\ \ \ \ \ n\ =\ range-\/>n1\ -\/\ 1;}
\DoxyCodeLine{06631\ \ \ \ \ input\_end\ =\ n\ +\ 1\ +\ filter\_pixel\_margin;}
\DoxyCodeLine{06632\ \ \ \ \ \textcolor{keywordflow}{while}(\ n\ <=\ input\_end\ )}
\DoxyCodeLine{06633\ \ \ \ \ \{}
\DoxyCodeLine{06634\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_first\_pixel,\ out\_last\_pixel;}
\DoxyCodeLine{06635\ \ \ \ \ \ \ stbir\_\_calculate\_out\_pixel\_range(\ \&out\_first\_pixel,\ \&out\_last\_pixel,\ ((\textcolor{keywordtype}{float})n)+0.5f,\ in\_pixels\_radius,\ scale,\ out\_shift,\ output\_sub\_size\ );}
\DoxyCodeLine{06636\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ out\_first\_pixel\ >\ out\_last\_pixel\ )}
\DoxyCodeLine{06637\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06638\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ out\_first\_pixel\ <\ output\_sub\_size\ )\ ||\ (\ out\_last\_pixel\ >=\ 0\ )\ )}
\DoxyCodeLine{06639\ \ \ \ \ \ \ \ \ range-\/>n1\ =\ n;}
\DoxyCodeLine{06640\ \ \ \ \ \ \ ++n;}
\DoxyCodeLine{06641\ \ \ \ \ \}}
\DoxyCodeLine{06642\ \ \ \}}
\DoxyCodeLine{06643\ }
\DoxyCodeLine{06644\ \ \ \textcolor{keywordflow}{if}\ (\ samp-\/>edge\ ==\ STBIR\_EDGE\_WRAP\ )}
\DoxyCodeLine{06645\ \ \ \{}
\DoxyCodeLine{06646\ \ \ \ \ \textcolor{comment}{//\ if\ we\ are\ wrapping,\ and\ we\ are\ very\ close\ to\ the\ image\ size\ (so\ the\ edges\ might\ merge),\ just\ use\ the\ scanline\ up\ to\ the\ edge}}
\DoxyCodeLine{06647\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ range-\/>n0\ >\ 0\ )\ \&\&\ (\ range-\/>n1\ >=\ input\_full\_size\ )\ )}
\DoxyCodeLine{06648\ \ \ \ \ \{}
\DoxyCodeLine{06649\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ marg\ =\ range-\/>n1\ -\/\ input\_full\_size\ +\ 1;}
\DoxyCodeLine{06650\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ marg\ +\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ )\ >=\ range-\/>n0\ )}
\DoxyCodeLine{06651\ \ \ \ \ \ \ \ \ range-\/>n0\ =\ 0;}
\DoxyCodeLine{06652\ \ \ \ \ \}}
\DoxyCodeLine{06653\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ range-\/>n0\ <\ 0\ )\ \&\&\ (\ range-\/>n1\ <\ (input\_full\_size-\/1)\ )\ )}
\DoxyCodeLine{06654\ \ \ \ \ \{}
\DoxyCodeLine{06655\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ marg\ =\ -\/range-\/>n0;}
\DoxyCodeLine{06656\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ input\_full\_size\ -\/\ marg\ -\/\ STBIR\_\_MERGE\_RUNS\_PIXEL\_THRESHOLD\ -\/\ 1\ )\ <=\ range-\/>n1\ )}
\DoxyCodeLine{06657\ \ \ \ \ \ \ \ \ range-\/>n1\ =\ input\_full\_size\ -\/\ 1;}
\DoxyCodeLine{06658\ \ \ \ \ \}}
\DoxyCodeLine{06659\ \ \ \}}
\DoxyCodeLine{06660\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06661\ \ \ \{}
\DoxyCodeLine{06662\ \ \ \ \ \textcolor{comment}{//\ for\ non-\/edge-\/wrap\ modes,\ we\ never\ read\ over\ the\ edge,\ so\ clamp}}
\DoxyCodeLine{06663\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ range-\/>n0\ <\ 0\ )}
\DoxyCodeLine{06664\ \ \ \ \ \ \ range-\/>n0\ =\ 0;}
\DoxyCodeLine{06665\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ range-\/>n1\ >=\ input\_full\_size\ )}
\DoxyCodeLine{06666\ \ \ \ \ \ \ range-\/>n1\ =\ input\_full\_size\ -\/\ 1;}
\DoxyCodeLine{06667\ \ \ \}}
\DoxyCodeLine{06668\ \}}
\DoxyCodeLine{06669\ }
\DoxyCodeLine{06670\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_get\_split\_info(\ stbir\_\_per\_split\_info*\ split\_info,\ \textcolor{keywordtype}{int}\ splits,\ \textcolor{keywordtype}{int}\ output\_height,\ \textcolor{keywordtype}{int}\ vertical\_pixel\_margin,\ \textcolor{keywordtype}{int}\ input\_full\_height\ )}
\DoxyCodeLine{06671\ \{}
\DoxyCodeLine{06672\ \ \ \textcolor{keywordtype}{int}\ i,\ cur;}
\DoxyCodeLine{06673\ \ \ \textcolor{keywordtype}{int}\ left\ =\ output\_height;}
\DoxyCodeLine{06674\ }
\DoxyCodeLine{06675\ \ \ cur\ =\ 0;}
\DoxyCodeLine{06676\ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ splits\ ;\ i++\ )}
\DoxyCodeLine{06677\ \ \ \{}
\DoxyCodeLine{06678\ \ \ \ \ \textcolor{keywordtype}{int}\ each;}
\DoxyCodeLine{06679\ \ \ \ \ split\_info[i].start\_output\_y\ =\ cur;}
\DoxyCodeLine{06680\ \ \ \ \ each\ =\ left\ /\ (\ splits\ -\/\ i\ );}
\DoxyCodeLine{06681\ \ \ \ \ split\_info[i].end\_output\_y\ =\ cur\ +\ each;}
\DoxyCodeLine{06682\ \ \ \ \ cur\ +=\ each;}
\DoxyCodeLine{06683\ \ \ \ \ left\ -\/=\ each;}
\DoxyCodeLine{06684\ }
\DoxyCodeLine{06685\ \ \ \ \ \textcolor{comment}{//\ scatter\ range\ (updated\ to\ minimum\ as\ you\ run\ it)}}
\DoxyCodeLine{06686\ \ \ \ \ split\_info[i].start\_input\_y\ =\ -\/vertical\_pixel\_margin;}
\DoxyCodeLine{06687\ \ \ \ \ split\_info[i].end\_input\_y\ =\ input\_full\_height\ +\ vertical\_pixel\_margin;}
\DoxyCodeLine{06688\ \ \ \}}
\DoxyCodeLine{06689\ \}}
\DoxyCodeLine{06690\ }
\DoxyCodeLine{06691\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_free\_internal\_mem(\ stbir\_\_info\ *info\ )}
\DoxyCodeLine{06692\ \{}
\DoxyCodeLine{06693\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_\_FREE\_AND\_CLEAR(\ ptr\ )\ \{\ if\ (\ ptr\ )\ \{\ void\ *\ p\ =\ (ptr);\ (ptr)\ =\ 0;\ STBIR\_FREE(\ p,\ info-\/>user\_data);\ \}\ \}}}
\DoxyCodeLine{06694\ }
\DoxyCodeLine{06695\ \ \ \textcolor{keywordflow}{if}\ (\ info\ )}
\DoxyCodeLine{06696\ \ \ \{}
\DoxyCodeLine{06697\ \textcolor{preprocessor}{\ \ \#ifndef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{06698\ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>alloced\_mem\ );}
\DoxyCodeLine{06699\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{06700\ \ \ \ \ \textcolor{keywordtype}{int}\ i,j;}
\DoxyCodeLine{06701\ }
\DoxyCodeLine{06702\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ info-\/>vertical.gather\_prescatter\_contributors\ )\ \&\&\ (\ (\textcolor{keywordtype}{void}*)info-\/>vertical.gather\_prescatter\_contributors\ !=\ (\textcolor{keywordtype}{void}*)info-\/>split\_info[0].decode\_buffer\ )\ )}
\DoxyCodeLine{06703\ \ \ \ \ \{}
\DoxyCodeLine{06704\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>vertical.gather\_prescatter\_coefficients\ );}
\DoxyCodeLine{06705\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>vertical.gather\_prescatter\_contributors\ );}
\DoxyCodeLine{06706\ \ \ \ \ \}}
\DoxyCodeLine{06707\ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ info-\/>splits\ ;\ i++\ )}
\DoxyCodeLine{06708\ \ \ \ \ \{}
\DoxyCodeLine{06709\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ j\ =\ 0\ ;\ j\ <\ info-\/>alloc\_ring\_buffer\_num\_entries\ ;\ j++\ )}
\DoxyCodeLine{06710\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06711\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{06712\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>effective\_channels\ ==\ 3\ )}
\DoxyCodeLine{06713\ \ \ \ \ \ \ \ \ \ \ -\/-\/info-\/>split\_info[i].ring\_buffers[j];\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer}}
\DoxyCodeLine{06714\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{06715\ \ \ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>split\_info[i].ring\_buffers[j]\ );}
\DoxyCodeLine{06716\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06717\ }
\DoxyCodeLine{06718\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{06719\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>effective\_channels\ ==\ 3\ )}
\DoxyCodeLine{06720\ \ \ \ \ \ \ \ \ -\/-\/info-\/>split\_info[i].decode\_buffer;\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer}}
\DoxyCodeLine{06721\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{06722\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>split\_info[i].decode\_buffer\ );}
\DoxyCodeLine{06723\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>split\_info[i].ring\_buffers\ );}
\DoxyCodeLine{06724\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>split\_info[i].vertical\_buffer\ );}
\DoxyCodeLine{06725\ \ \ \ \ \}}
\DoxyCodeLine{06726\ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>split\_info\ );}
\DoxyCodeLine{06727\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>vertical.coefficients\ !=\ info-\/>horizontal.coefficients\ )}
\DoxyCodeLine{06728\ \ \ \ \ \{}
\DoxyCodeLine{06729\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>vertical.coefficients\ );}
\DoxyCodeLine{06730\ \ \ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>vertical.contributors\ );}
\DoxyCodeLine{06731\ \ \ \ \ \}}
\DoxyCodeLine{06732\ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>horizontal.coefficients\ );}
\DoxyCodeLine{06733\ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>horizontal.contributors\ );}
\DoxyCodeLine{06734\ \ \ \ \ STBIR\_\_FREE\_AND\_CLEAR(\ info-\/>alloced\_mem\ );}
\DoxyCodeLine{06735\ \ \ \ \ STBIR\_FREE(\ info,\ info-\/>user\_data\ );}
\DoxyCodeLine{06736\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{06737\ \ \ \}}
\DoxyCodeLine{06738\ }
\DoxyCodeLine{06739\ \textcolor{preprocessor}{\ \ \#undef\ STBIR\_\_FREE\_AND\_CLEAR}}
\DoxyCodeLine{06740\ \}}
\DoxyCodeLine{06741\ }
\DoxyCodeLine{06742\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_max\_split(\ \textcolor{keywordtype}{int}\ splits,\ \textcolor{keywordtype}{int}\ height\ )}
\DoxyCodeLine{06743\ \{}
\DoxyCodeLine{06744\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{06745\ \ \ \textcolor{keywordtype}{int}\ max\ =\ 0;}
\DoxyCodeLine{06746\ }
\DoxyCodeLine{06747\ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ splits\ ;\ i++\ )}
\DoxyCodeLine{06748\ \ \ \{}
\DoxyCodeLine{06749\ \ \ \ \ \textcolor{keywordtype}{int}\ each\ =\ height\ /\ (\ splits\ -\/\ i\ );}
\DoxyCodeLine{06750\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ each\ >\ max\ )}
\DoxyCodeLine{06751\ \ \ \ \ \ \ max\ =\ each;}
\DoxyCodeLine{06752\ \ \ \ \ height\ -\/=\ each;}
\DoxyCodeLine{06753\ \ \ \}}
\DoxyCodeLine{06754\ \ \ \textcolor{keywordflow}{return}\ max;}
\DoxyCodeLine{06755\ \}}
\DoxyCodeLine{06756\ }
\DoxyCodeLine{06757\ \textcolor{keyword}{static}\ stbir\_\_horizontal\_gather\_channels\_func\ **\ stbir\_\_horizontal\_gather\_n\_coeffs\_funcs[8]\ =}
\DoxyCodeLine{06758\ \{}
\DoxyCodeLine{06759\ \ \ 0,\ stbir\_\_horizontal\_gather\_1\_channels\_with\_n\_coeffs\_funcs,\ stbir\_\_horizontal\_gather\_2\_channels\_with\_n\_coeffs\_funcs,\ stbir\_\_horizontal\_gather\_3\_channels\_with\_n\_coeffs\_funcs,\ stbir\_\_horizontal\_gather\_4\_channels\_with\_n\_coeffs\_funcs,\ 0,0,\ stbir\_\_horizontal\_gather\_7\_channels\_with\_n\_coeffs\_funcs}
\DoxyCodeLine{06760\ \};}
\DoxyCodeLine{06761\ }
\DoxyCodeLine{06762\ \textcolor{keyword}{static}\ stbir\_\_horizontal\_gather\_channels\_func\ **\ stbir\_\_horizontal\_gather\_channels\_funcs[8]\ =}
\DoxyCodeLine{06763\ \{}
\DoxyCodeLine{06764\ \ \ 0,\ stbir\_\_horizontal\_gather\_1\_channels\_funcs,\ stbir\_\_horizontal\_gather\_2\_channels\_funcs,\ stbir\_\_horizontal\_gather\_3\_channels\_funcs,\ stbir\_\_horizontal\_gather\_4\_channels\_funcs,\ 0,0,\ stbir\_\_horizontal\_gather\_7\_channels\_funcs}
\DoxyCodeLine{06765\ \};}
\DoxyCodeLine{06766\ }
\DoxyCodeLine{06767\ \textcolor{comment}{//\ there\ are\ six\ resize\ classifications:\ 0\ ==\ vertical\ scatter,\ 1\ ==\ vertical\ gather\ <\ 1x\ scale,\ 2\ ==\ vertical\ gather\ 1x-\/2x\ scale,\ 4\ ==\ vertical\ gather\ <\ 3x\ scale,\ 4\ ==\ vertical\ gather\ >\ 3x\ scale,\ 5\ ==\ <=4\ pixel\ height,\ 6\ ==\ <=4\ pixel\ wide\ column}}
\DoxyCodeLine{06768\ \textcolor{preprocessor}{\#define\ STBIR\_RESIZE\_CLASSIFICATIONS\ 8}}
\DoxyCodeLine{06769\ }
\DoxyCodeLine{06770\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_compute\_weights[5][STBIR\_RESIZE\_CLASSIFICATIONS][4]=\ \ \textcolor{comment}{//\ 5\ =\ 0=1chan,\ 1=2chan,\ 2=3chan,\ 3=4chan,\ 4=7chan}}
\DoxyCodeLine{06771\ \{}
\DoxyCodeLine{06772\ \ \ \{}
\DoxyCodeLine{06773\ \ \ \ \ \{\ 1.00000f,\ 1.00000f,\ 0.31250f,\ 1.00000f\ \},}
\DoxyCodeLine{06774\ \ \ \ \ \{\ 0.56250f,\ 0.59375f,\ 0.00000f,\ 0.96875f\ \},}
\DoxyCodeLine{06775\ \ \ \ \ \{\ 1.00000f,\ 0.06250f,\ 0.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06776\ \ \ \ \ \{\ 0.00000f,\ 0.09375f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06777\ \ \ \ \ \{\ 1.00000f,\ 1.00000f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06778\ \ \ \ \ \{\ 0.03125f,\ 0.12500f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06779\ \ \ \ \ \{\ 0.06250f,\ 0.12500f,\ 0.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06780\ \ \ \ \ \{\ 0.00000f,\ 1.00000f,\ 0.00000f,\ 0.03125f\ \},}
\DoxyCodeLine{06781\ \ \ \},\ \{}
\DoxyCodeLine{06782\ \ \ \ \ \{\ 0.00000f,\ 0.84375f,\ 0.00000f,\ 0.03125f\ \},}
\DoxyCodeLine{06783\ \ \ \ \ \{\ 0.09375f,\ 0.93750f,\ 0.00000f,\ 0.78125f\ \},}
\DoxyCodeLine{06784\ \ \ \ \ \{\ 0.87500f,\ 0.21875f,\ 0.00000f,\ 0.96875f\ \},}
\DoxyCodeLine{06785\ \ \ \ \ \{\ 0.09375f,\ 0.09375f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06786\ \ \ \ \ \{\ 1.00000f,\ 1.00000f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06787\ \ \ \ \ \{\ 0.03125f,\ 0.12500f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06788\ \ \ \ \ \{\ 0.06250f,\ 0.12500f,\ 0.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06789\ \ \ \ \ \{\ 0.00000f,\ 1.00000f,\ 0.00000f,\ 0.53125f\ \},}
\DoxyCodeLine{06790\ \ \ \},\ \{}
\DoxyCodeLine{06791\ \ \ \ \ \{\ 0.00000f,\ 0.53125f,\ 0.00000f,\ 0.03125f\ \},}
\DoxyCodeLine{06792\ \ \ \ \ \{\ 0.06250f,\ 0.96875f,\ 0.00000f,\ 0.53125f\ \},}
\DoxyCodeLine{06793\ \ \ \ \ \{\ 0.87500f,\ 0.18750f,\ 0.00000f,\ 0.93750f\ \},}
\DoxyCodeLine{06794\ \ \ \ \ \{\ 0.00000f,\ 0.09375f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06795\ \ \ \ \ \{\ 1.00000f,\ 1.00000f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06796\ \ \ \ \ \{\ 0.03125f,\ 0.12500f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06797\ \ \ \ \ \{\ 0.06250f,\ 0.12500f,\ 0.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06798\ \ \ \ \ \{\ 0.00000f,\ 1.00000f,\ 0.00000f,\ 0.56250f\ \},}
\DoxyCodeLine{06799\ \ \ \},\ \{}
\DoxyCodeLine{06800\ \ \ \ \ \{\ 0.00000f,\ 0.50000f,\ 0.00000f,\ 0.71875f\ \},}
\DoxyCodeLine{06801\ \ \ \ \ \{\ 0.06250f,\ 0.84375f,\ 0.00000f,\ 0.87500f\ \},}
\DoxyCodeLine{06802\ \ \ \ \ \{\ 1.00000f,\ 0.50000f,\ 0.50000f,\ 0.96875f\ \},}
\DoxyCodeLine{06803\ \ \ \ \ \{\ 1.00000f,\ 0.09375f,\ 0.31250f,\ 0.50000f\ \},}
\DoxyCodeLine{06804\ \ \ \ \ \{\ 1.00000f,\ 1.00000f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06805\ \ \ \ \ \{\ 1.00000f,\ 0.03125f,\ 0.03125f,\ 0.53125f\ \},}
\DoxyCodeLine{06806\ \ \ \ \ \{\ 0.18750f,\ 0.12500f,\ 0.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06807\ \ \ \ \ \{\ 0.00000f,\ 1.00000f,\ 0.03125f,\ 0.18750f\ \},}
\DoxyCodeLine{06808\ \ \ \},\ \{}
\DoxyCodeLine{06809\ \ \ \ \ \{\ 0.00000f,\ 0.59375f,\ 0.00000f,\ 0.96875f\ \},}
\DoxyCodeLine{06810\ \ \ \ \ \{\ 0.06250f,\ 0.81250f,\ 0.06250f,\ 0.59375f\ \},}
\DoxyCodeLine{06811\ \ \ \ \ \{\ 0.75000f,\ 0.43750f,\ 0.12500f,\ 0.96875f\ \},}
\DoxyCodeLine{06812\ \ \ \ \ \{\ 0.87500f,\ 0.06250f,\ 0.18750f,\ 0.43750f\ \},}
\DoxyCodeLine{06813\ \ \ \ \ \{\ 1.00000f,\ 1.00000f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06814\ \ \ \ \ \{\ 0.15625f,\ 0.12500f,\ 1.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06815\ \ \ \ \ \{\ 0.06250f,\ 0.12500f,\ 0.00000f,\ 1.00000f\ \},}
\DoxyCodeLine{06816\ \ \ \ \ \{\ 0.00000f,\ 1.00000f,\ 0.03125f,\ 0.34375f\ \},}
\DoxyCodeLine{06817\ \ \ \}}
\DoxyCodeLine{06818\ \};}
\DoxyCodeLine{06819\ }
\DoxyCodeLine{06820\ \textcolor{comment}{//\ structure\ that\ allow\ us\ to\ query\ and\ override\ info\ for\ training\ the\ costs}}
\DoxyCodeLine{06821\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }STBIR\_\_V\_FIRST\_INFO}
\DoxyCodeLine{06822\ \{}
\DoxyCodeLine{06823\ \ \ \textcolor{keywordtype}{double}\ v\_cost,\ h\_cost;}
\DoxyCodeLine{06824\ \ \ \textcolor{keywordtype}{int}\ control\_v\_first;\ \textcolor{comment}{//\ 0\ =\ no\ control,\ 1\ =\ force\ hori,\ 2\ =\ force\ vert}}
\DoxyCodeLine{06825\ \ \ \textcolor{keywordtype}{int}\ v\_first;}
\DoxyCodeLine{06826\ \ \ \textcolor{keywordtype}{int}\ v\_resize\_classification;}
\DoxyCodeLine{06827\ \ \ \textcolor{keywordtype}{int}\ is\_gather;}
\DoxyCodeLine{06828\ \}\ STBIR\_\_V\_FIRST\_INFO;}
\DoxyCodeLine{06829\ }
\DoxyCodeLine{06830\ \textcolor{preprocessor}{\#ifdef\ STBIR\_\_V\_FIRST\_INFO\_BUFFER}}
\DoxyCodeLine{06831\ \textcolor{keyword}{static}\ STBIR\_\_V\_FIRST\_INFO\ STBIR\_\_V\_FIRST\_INFO\_BUFFER\ =\ \{0\};}
\DoxyCodeLine{06832\ \textcolor{preprocessor}{\#define\ STBIR\_\_V\_FIRST\_INFO\_POINTER\ \&STBIR\_\_V\_FIRST\_INFO\_BUFFER}}
\DoxyCodeLine{06833\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{06834\ \textcolor{preprocessor}{\#define\ STBIR\_\_V\_FIRST\_INFO\_POINTER\ 0}}
\DoxyCodeLine{06835\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{06836\ }
\DoxyCodeLine{06837\ \textcolor{comment}{//\ Figure\ out\ whether\ to\ scale\ along\ the\ horizontal\ or\ vertical\ first.}}
\DoxyCodeLine{06838\ \textcolor{comment}{//\ \ \ This\ only\ *super*\ important\ when\ you\ are\ scaling\ by\ a\ massively}}
\DoxyCodeLine{06839\ \textcolor{comment}{//\ \ \ different\ amount\ in\ the\ vertical\ vs\ the\ horizontal\ (for\ example,\ if}}
\DoxyCodeLine{06840\ \textcolor{comment}{//\ \ \ you\ are\ scaling\ by\ 2x\ in\ the\ width,\ and\ 0.5x\ in\ the\ height,\ then\ you}}
\DoxyCodeLine{06841\ \textcolor{comment}{//\ \ \ want\ to\ do\ the\ vertical\ scale\ first,\ because\ it's\ around\ 3x\ faster}}
\DoxyCodeLine{06842\ \textcolor{comment}{//\ \ \ in\ that\ order.}}
\DoxyCodeLine{06843\ \textcolor{comment}{//}}
\DoxyCodeLine{06844\ \textcolor{comment}{//\ \ \ In\ more\ normal\ circumstances,\ this\ makes\ a\ 20-\/40\%\ differences,\ so}}
\DoxyCodeLine{06845\ \textcolor{comment}{//\ \ \ \ \ it's\ good\ to\ get\ right,\ but\ not\ critical.\ The\ normal\ way\ that\ you}}
\DoxyCodeLine{06846\ \textcolor{comment}{//\ \ \ \ \ decide\ which\ direction\ goes\ first\ is\ just\ figuring\ out\ which}}
\DoxyCodeLine{06847\ \textcolor{comment}{//\ \ \ \ \ direction\ does\ more\ multiplies.\ But\ with\ modern\ CPUs\ with\ their}}
\DoxyCodeLine{06848\ \textcolor{comment}{//\ \ \ \ \ fancy\ caches\ and\ SIMD\ and\ high\ IPC\ abilities,\ so\ there's\ just\ a\ lot}}
\DoxyCodeLine{06849\ \textcolor{comment}{//\ \ \ \ \ more\ that\ goes\ into\ it.}}
\DoxyCodeLine{06850\ \textcolor{comment}{//}}
\DoxyCodeLine{06851\ \textcolor{comment}{//\ \ \ My\ handwavy\ sort\ of\ solution\ is\ to\ have\ an\ app\ that\ does\ a\ whole}}
\DoxyCodeLine{06852\ \textcolor{comment}{//\ \ \ \ \ bunch\ of\ timing\ for\ both\ vertical\ and\ horizontal\ first\ modes,}}
\DoxyCodeLine{06853\ \textcolor{comment}{//\ \ \ \ \ and\ then\ another\ app\ that\ can\ read\ lots\ of\ these\ timing\ files}}
\DoxyCodeLine{06854\ \textcolor{comment}{//\ \ \ \ \ and\ try\ to\ search\ for\ the\ best\ weights\ to\ use.\ Dotimings.c}}
\DoxyCodeLine{06855\ \textcolor{comment}{//\ \ \ \ \ is\ the\ app\ that\ does\ a\ bunch\ of\ timings,\ and\ vf\_train.c\ is\ the}}
\DoxyCodeLine{06856\ \textcolor{comment}{//\ \ \ \ \ app\ that\ solves\ for\ the\ best\ weights\ (and\ shows\ how\ well\ it}}
\DoxyCodeLine{06857\ \textcolor{comment}{//\ \ \ \ \ does\ currently).}}
\DoxyCodeLine{06858\ }
\DoxyCodeLine{06859\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_should\_do\_vertical\_first(\ \textcolor{keywordtype}{float}\ weights\_table[STBIR\_RESIZE\_CLASSIFICATIONS][4],\ \textcolor{keywordtype}{int}\ horizontal\_filter\_pixel\_width,\ \textcolor{keywordtype}{float}\ horizontal\_scale,\ \textcolor{keywordtype}{int}\ horizontal\_output\_size,\ \textcolor{keywordtype}{int}\ vertical\_filter\_pixel\_width,\ \textcolor{keywordtype}{float}\ vertical\_scale,\ \textcolor{keywordtype}{int}\ vertical\_output\_size,\ \textcolor{keywordtype}{int}\ is\_gather,\ STBIR\_\_V\_FIRST\_INFO\ *\ info\ )}
\DoxyCodeLine{06860\ \{}
\DoxyCodeLine{06861\ \ \ \textcolor{keywordtype}{double}\ v\_cost,\ h\_cost;}
\DoxyCodeLine{06862\ \ \ \textcolor{keywordtype}{float}\ *\ weights;}
\DoxyCodeLine{06863\ \ \ \textcolor{keywordtype}{int}\ vertical\_first;}
\DoxyCodeLine{06864\ \ \ \textcolor{keywordtype}{int}\ v\_classification;}
\DoxyCodeLine{06865\ }
\DoxyCodeLine{06866\ \ \ \textcolor{comment}{//\ categorize\ the\ resize\ into\ buckets}}
\DoxyCodeLine{06867\ \ \ \textcolor{keywordflow}{if}\ (\ (\ vertical\_output\_size\ <=\ 4\ )\ ||\ (\ horizontal\_output\_size\ <=\ 4\ )\ )}
\DoxyCodeLine{06868\ \ \ \ \ v\_classification\ =\ (\ vertical\_output\_size\ <\ horizontal\_output\_size\ )\ ?\ 6\ :\ 7;}
\DoxyCodeLine{06869\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ vertical\_scale\ <=\ 1.0f\ )}
\DoxyCodeLine{06870\ \ \ \ \ v\_classification\ =\ (\ is\_gather\ )\ ?\ 1\ :\ 0;}
\DoxyCodeLine{06871\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ vertical\_scale\ <=\ 2.0f)}
\DoxyCodeLine{06872\ \ \ \ \ v\_classification\ =\ 2;}
\DoxyCodeLine{06873\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ vertical\_scale\ <=\ 3.0f)}
\DoxyCodeLine{06874\ \ \ \ \ v\_classification\ =\ 3;}
\DoxyCodeLine{06875\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ vertical\_scale\ <=\ 4.0f)}
\DoxyCodeLine{06876\ \ \ \ \ v\_classification\ =\ 5;}
\DoxyCodeLine{06877\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06878\ \ \ \ \ v\_classification\ =\ 6;}
\DoxyCodeLine{06879\ }
\DoxyCodeLine{06880\ \ \ \textcolor{comment}{//\ use\ the\ right\ weights}}
\DoxyCodeLine{06881\ \ \ weights\ =\ weights\_table[\ v\_classification\ ];}
\DoxyCodeLine{06882\ }
\DoxyCodeLine{06883\ \ \ \textcolor{comment}{//\ this\ is\ the\ costs\ when\ you\ don't\ take\ into\ account\ modern\ CPUs\ with\ high\ ipc\ and\ simd\ and\ caches\ -\/\ wish\ we\ had\ a\ better\ estimate}}
\DoxyCodeLine{06884\ \ \ h\_cost\ =\ (float)horizontal\_filter\_pixel\_width\ *\ weights[0]\ +\ horizontal\_scale\ *\ (\textcolor{keywordtype}{float})vertical\_filter\_pixel\_width\ *\ weights[1];}
\DoxyCodeLine{06885\ \ \ v\_cost\ =\ (float)vertical\_filter\_pixel\_width\ \ *\ weights[2]\ +\ vertical\_scale\ *\ (\textcolor{keywordtype}{float})horizontal\_filter\_pixel\_width\ *\ weights[3];}
\DoxyCodeLine{06886\ }
\DoxyCodeLine{06887\ \ \ \textcolor{comment}{//\ use\ computation\ estimate\ to\ decide\ vertical\ first\ or\ not}}
\DoxyCodeLine{06888\ \ \ vertical\_first\ =\ (\ v\_cost\ <=\ h\_cost\ )\ ?\ 1\ :\ 0;}
\DoxyCodeLine{06889\ }
\DoxyCodeLine{06890\ \ \ \textcolor{comment}{//\ save\ these,\ if\ requested}}
\DoxyCodeLine{06891\ \ \ \textcolor{keywordflow}{if}\ (\ info\ )}
\DoxyCodeLine{06892\ \ \ \{}
\DoxyCodeLine{06893\ \ \ \ \ info-\/>h\_cost\ =\ h\_cost;}
\DoxyCodeLine{06894\ \ \ \ \ info-\/>v\_cost\ =\ v\_cost;}
\DoxyCodeLine{06895\ \ \ \ \ info-\/>v\_resize\_classification\ =\ v\_classification;}
\DoxyCodeLine{06896\ \ \ \ \ info-\/>v\_first\ =\ vertical\_first;}
\DoxyCodeLine{06897\ \ \ \ \ info-\/>is\_gather\ =\ is\_gather;}
\DoxyCodeLine{06898\ \ \ \}}
\DoxyCodeLine{06899\ }
\DoxyCodeLine{06900\ \ \ \textcolor{comment}{//\ and\ this\ allows\ us\ to\ override\ everything\ for\ testing\ (see\ dotiming.c)}}
\DoxyCodeLine{06901\ \ \ \textcolor{keywordflow}{if}\ (\ (\ info\ )\ \&\&\ (\ info-\/>control\_v\_first\ )\ )}
\DoxyCodeLine{06902\ \ \ \ \ vertical\_first\ =\ (\ info-\/>control\_v\_first\ ==\ 2\ )\ ?\ 1\ :\ 0;}
\DoxyCodeLine{06903\ }
\DoxyCodeLine{06904\ \ \ \textcolor{keywordflow}{return}\ vertical\_first;}
\DoxyCodeLine{06905\ \}}
\DoxyCodeLine{06906\ }
\DoxyCodeLine{06907\ \textcolor{comment}{//\ layout\ lookups\ -\/\ must\ match\ stbir\_internal\_pixel\_layout}}
\DoxyCodeLine{06908\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ stbir\_\_pixel\_channels[]\ =\ \{}
\DoxyCodeLine{06909\ \ \ 1,2,3,3,4,\ \ \ \textcolor{comment}{//\ 1ch,\ 2ch,\ rgb,\ bgr,\ 4ch}}
\DoxyCodeLine{06910\ \ \ 4,4,4,4,2,2,\ \textcolor{comment}{//\ RGBA,BGRA,ARGB,ABGR,RA,AR}}
\DoxyCodeLine{06911\ \ \ 4,4,4,4,2,2,\ \textcolor{comment}{//\ RGBA\_PM,BGRA\_PM,ARGB\_PM,ABGR\_PM,RA\_PM,AR\_PM}}
\DoxyCodeLine{06912\ \};}
\DoxyCodeLine{06913\ }
\DoxyCodeLine{06914\ \textcolor{comment}{//\ the\ internal\ pixel\ layout\ enums\ are\ in\ a\ different\ order,\ so\ we\ can\ easily\ do\ range\ comparisons\ of\ types}}
\DoxyCodeLine{06915\ \textcolor{comment}{//\ \ \ the\ public\ pixel\ layout\ is\ ordered\ in\ a\ way\ that\ if\ you\ cast\ num\_channels\ (1-\/4)\ to\ the\ enum,\ you\ get\ something\ sensible}}
\DoxyCodeLine{06916\ \textcolor{keyword}{static}\ stbir\_internal\_pixel\_layout\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[]\ =\ \{}
\DoxyCodeLine{06917\ \ \ STBIRI\_BGR,\ STBIRI\_1CHANNEL,\ STBIRI\_2CHANNEL,\ STBIRI\_RGB,\ STBIRI\_RGBA,}
\DoxyCodeLine{06918\ \ \ STBIRI\_4CHANNEL,\ STBIRI\_BGRA,\ STBIRI\_ARGB,\ STBIRI\_ABGR,\ STBIRI\_RA,\ STBIRI\_AR,}
\DoxyCodeLine{06919\ \ \ STBIRI\_RGBA\_PM,\ STBIRI\_BGRA\_PM,\ STBIRI\_ARGB\_PM,\ STBIRI\_ABGR\_PM,\ STBIRI\_RA\_PM,\ STBIRI\_AR\_PM,}
\DoxyCodeLine{06920\ \};}
\DoxyCodeLine{06921\ }
\DoxyCodeLine{06922\ \textcolor{keyword}{static}\ stbir\_\_info\ *\ stbir\_\_alloc\_internal\_mem\_and\_build\_samplers(\ stbir\_\_sampler\ *\ horizontal,\ stbir\_\_sampler\ *\ vertical,\ stbir\_\_contributors\ *\ conservative,\ stbir\_pixel\_layout\ input\_pixel\_layout\_public,\ stbir\_pixel\_layout\ output\_pixel\_layout\_public,\ \textcolor{keywordtype}{int}\ splits,\ \textcolor{keywordtype}{int}\ new\_x,\ \textcolor{keywordtype}{int}\ new\_y,\ \textcolor{keywordtype}{int}\ fast\_alpha,\ \textcolor{keywordtype}{void}\ *\ user\_data\ STBIR\_ONLY\_PROFILE\_BUILD\_GET\_INFO\ )}
\DoxyCodeLine{06923\ \{}
\DoxyCodeLine{06924\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ stbir\_channel\_count\_index[8]=\{\ 9,0,1,2,\ 3,9,9,4\ \};}
\DoxyCodeLine{06925\ }
\DoxyCodeLine{06926\ \ \ stbir\_\_info\ *\ info\ =\ 0;}
\DoxyCodeLine{06927\ \ \ \textcolor{keywordtype}{void}\ *\ alloced\ =\ 0;}
\DoxyCodeLine{06928\ \ \ \textcolor{keywordtype}{size\_t}\ alloced\_total\ =\ 0;}
\DoxyCodeLine{06929\ \ \ \textcolor{keywordtype}{int}\ vertical\_first;}
\DoxyCodeLine{06930\ \ \ \textcolor{keywordtype}{int}\ decode\_buffer\_size,\ ring\_buffer\_length\_bytes,\ ring\_buffer\_size,\ vertical\_buffer\_size,\ alloc\_ring\_buffer\_num\_entries;}
\DoxyCodeLine{06931\ }
\DoxyCodeLine{06932\ \ \ \textcolor{keywordtype}{int}\ alpha\_weighting\_type\ =\ 0;\ \textcolor{comment}{//\ 0=none,\ 1=simple,\ 2=fancy}}
\DoxyCodeLine{06933\ \ \ \textcolor{keywordtype}{int}\ conservative\_split\_output\_size\ =\ stbir\_\_get\_max\_split(\ splits,\ vertical-\/>scale\_info.output\_sub\_size\ );}
\DoxyCodeLine{06934\ \ \ stbir\_internal\_pixel\_layout\ input\_pixel\_layout\ =\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[\ input\_pixel\_layout\_public\ ];}
\DoxyCodeLine{06935\ \ \ stbir\_internal\_pixel\_layout\ output\_pixel\_layout\ =\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[\ output\_pixel\_layout\_public\ ];}
\DoxyCodeLine{06936\ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_\_pixel\_channels[\ input\_pixel\_layout\ ];}
\DoxyCodeLine{06937\ \ \ \textcolor{keywordtype}{int}\ effective\_channels\ =\ channels;}
\DoxyCodeLine{06938\ }
\DoxyCodeLine{06939\ \ \ \textcolor{comment}{//\ first\ figure\ out\ what\ type\ of\ alpha\ weighting\ to\ use\ (if\ any)}}
\DoxyCodeLine{06940\ \ \ \textcolor{keywordflow}{if}\ (\ (\ horizontal-\/>filter\_enum\ !=\ STBIR\_FILTER\_POINT\_SAMPLE\ )\ ||\ (\ vertical-\/>filter\_enum\ !=\ STBIR\_FILTER\_POINT\_SAMPLE\ )\ )\ \textcolor{comment}{//\ no\ alpha\ weighting\ on\ point\ sampling}}
\DoxyCodeLine{06941\ \ \ \{}
\DoxyCodeLine{06942\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ input\_pixel\_layout\ >=\ STBIRI\_RGBA\ )\ \&\&\ (\ input\_pixel\_layout\ <=\ STBIRI\_AR\ )\ \&\&\ (\ output\_pixel\_layout\ >=\ STBIRI\_RGBA\ )\ \&\&\ (\ output\_pixel\_layout\ <=\ STBIRI\_AR\ )\ )}
\DoxyCodeLine{06943\ \ \ \ \ \{}
\DoxyCodeLine{06944\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ fast\_alpha\ )}
\DoxyCodeLine{06945\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06946\ \ \ \ \ \ \ \ \ alpha\_weighting\_type\ =\ 4;}
\DoxyCodeLine{06947\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06948\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{06949\ \ \ \ \ \ \ \{}
\DoxyCodeLine{06950\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ fancy\_alpha\_effective\_cnts[6]\ =\ \{\ 7,\ 7,\ 7,\ 7,\ 3,\ 3\ \};}
\DoxyCodeLine{06951\ \ \ \ \ \ \ \ \ alpha\_weighting\_type\ =\ 2;}
\DoxyCodeLine{06952\ \ \ \ \ \ \ \ \ effective\_channels\ =\ fancy\_alpha\_effective\_cnts[\ input\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{06953\ \ \ \ \ \ \ \}}
\DoxyCodeLine{06954\ \ \ \ \ \}}
\DoxyCodeLine{06955\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ (\ input\_pixel\_layout\ >=\ STBIRI\_RGBA\_PM\ )\ \&\&\ (\ input\_pixel\_layout\ <=\ STBIRI\_AR\_PM\ )\ \&\&\ (\ output\_pixel\_layout\ >=\ STBIRI\_RGBA\ )\ \&\&\ (\ output\_pixel\_layout\ <=\ STBIRI\_AR\ )\ )}
\DoxyCodeLine{06956\ \ \ \ \ \{}
\DoxyCodeLine{06957\ \ \ \ \ \ \ \textcolor{comment}{//\ input\ premult,\ output\ non-\/premult}}
\DoxyCodeLine{06958\ \ \ \ \ \ \ alpha\_weighting\_type\ =\ 3;}
\DoxyCodeLine{06959\ \ \ \ \ \}}
\DoxyCodeLine{06960\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ (\ input\_pixel\_layout\ >=\ STBIRI\_RGBA\ )\ \&\&\ (\ input\_pixel\_layout\ <=\ STBIRI\_AR\ )\ \&\&\ (\ output\_pixel\_layout\ >=\ STBIRI\_RGBA\_PM\ )\ \&\&\ (\ output\_pixel\_layout\ <=\ STBIRI\_AR\_PM\ )\ )}
\DoxyCodeLine{06961\ \ \ \ \ \{}
\DoxyCodeLine{06962\ \ \ \ \ \ \ \textcolor{comment}{//\ input\ non-\/premult,\ output\ premult}}
\DoxyCodeLine{06963\ \ \ \ \ \ \ alpha\_weighting\_type\ =\ 1;}
\DoxyCodeLine{06964\ \ \ \ \ \}}
\DoxyCodeLine{06965\ \ \ \}}
\DoxyCodeLine{06966\ }
\DoxyCodeLine{06967\ \ \ \textcolor{comment}{//\ channel\ in\ and\ out\ count\ must\ match\ currently}}
\DoxyCodeLine{06968\ \ \ \textcolor{keywordflow}{if}\ (\ channels\ !=\ stbir\_\_pixel\_channels[\ output\_pixel\_layout\ ]\ )}
\DoxyCodeLine{06969\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{06970\ }
\DoxyCodeLine{06971\ \ \ \textcolor{comment}{//\ get\ vertical\ first}}
\DoxyCodeLine{06972\ \ \ vertical\_first\ =\ stbir\_\_should\_do\_vertical\_first(\ stbir\_\_compute\_weights[\ (\textcolor{keywordtype}{int})stbir\_channel\_count\_index[\ effective\_channels\ ]\ ],\ horizontal-\/>filter\_pixel\_width,\ horizontal-\/>scale\_info.scale,\ horizontal-\/>scale\_info.output\_sub\_size,\ vertical-\/>filter\_pixel\_width,\ vertical-\/>scale\_info.scale,\ vertical-\/>scale\_info.output\_sub\_size,\ vertical-\/>is\_gather,\ STBIR\_\_V\_FIRST\_INFO\_POINTER\ );}
\DoxyCodeLine{06973\ }
\DoxyCodeLine{06974\ \ \ \textcolor{comment}{//\ sometimes\ read\ one\ float\ off\ in\ some\ of\ the\ unrolled\ loops\ (with\ a\ weight\ of\ zero\ coeff,\ so\ it\ doesn't\ have\ an\ effect)}}
\DoxyCodeLine{06975\ \ \ decode\_buffer\_size\ =\ (\ conservative-\/>n1\ -\/\ conservative-\/>n0\ +\ 1\ )\ *\ effective\_channels\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})\ +\ \textcolor{keyword}{sizeof}(float);\ \textcolor{comment}{//\ extra\ float\ for\ padding}}
\DoxyCodeLine{06976\ }
\DoxyCodeLine{06977\ \textcolor{preprocessor}{\#if\ defined(\ STBIR\_\_SEPARATE\_ALLOCATIONS\ )\ \&\&\ defined(STBIR\_SIMD8)}}
\DoxyCodeLine{06978\ \ \ \textcolor{keywordflow}{if}\ (\ effective\_channels\ ==\ 3\ )}
\DoxyCodeLine{06979\ \ \ \ \ decode\_buffer\_size\ +=\ \textcolor{keyword}{sizeof}(float);\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer\ (only\ with\ separate\ allocations)}}
\DoxyCodeLine{06980\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{06981\ }
\DoxyCodeLine{06982\ \ \ ring\_buffer\_length\_bytes\ =\ horizontal-\/>scale\_info.output\_sub\_size\ *\ effective\_channels\ *\ \textcolor{keyword}{sizeof}(float)\ +\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float});\ \textcolor{comment}{//\ extra\ float\ for\ padding}}
\DoxyCodeLine{06983\ }
\DoxyCodeLine{06984\ \ \ \textcolor{comment}{//\ if\ we\ do\ vertical\ first,\ the\ ring\ buffer\ holds\ a\ whole\ decoded\ line}}
\DoxyCodeLine{06985\ \ \ \textcolor{keywordflow}{if}\ (\ vertical\_first\ )}
\DoxyCodeLine{06986\ \ \ \ \ ring\_buffer\_length\_bytes\ =\ (\ decode\_buffer\_size\ +\ 15\ )\ \&\ \string~15;}
\DoxyCodeLine{06987\ }
\DoxyCodeLine{06988\ \ \ \textcolor{keywordflow}{if}\ (\ (\ ring\_buffer\_length\_bytes\ \&\ 4095\ )\ ==\ 0\ )\ ring\_buffer\_length\_bytes\ +=\ 64*3;\ \textcolor{comment}{//\ avoid\ 4k\ alias}}
\DoxyCodeLine{06989\ }
\DoxyCodeLine{06990\ \ \ \textcolor{comment}{//\ One\ extra\ entry\ because\ floating\ point\ precision\ problems\ sometimes\ cause\ an\ extra\ to\ be\ necessary.}}
\DoxyCodeLine{06991\ \ \ alloc\_ring\_buffer\_num\_entries\ =\ vertical-\/>filter\_pixel\_width\ +\ 1;}
\DoxyCodeLine{06992\ }
\DoxyCodeLine{06993\ \ \ \textcolor{comment}{//\ we\ never\ need\ more\ ring\ buffer\ entries\ than\ the\ scanlines\ we're\ outputting\ when\ in\ scatter\ mode}}
\DoxyCodeLine{06994\ \ \ \textcolor{keywordflow}{if}\ (\ (\ !vertical-\/>is\_gather\ )\ \&\&\ (\ alloc\_ring\_buffer\_num\_entries\ >\ conservative\_split\_output\_size\ )\ )}
\DoxyCodeLine{06995\ \ \ \ \ alloc\_ring\_buffer\_num\_entries\ =\ conservative\_split\_output\_size;}
\DoxyCodeLine{06996\ }
\DoxyCodeLine{06997\ \ \ ring\_buffer\_size\ =\ alloc\_ring\_buffer\_num\_entries\ *\ ring\_buffer\_length\_bytes;}
\DoxyCodeLine{06998\ }
\DoxyCodeLine{06999\ \ \ \textcolor{comment}{//\ The\ vertical\ buffer\ is\ used\ differently,\ depending\ on\ whether\ we\ are\ scattering}}
\DoxyCodeLine{07000\ \ \ \textcolor{comment}{//\ \ \ the\ vertical\ scanlines,\ or\ gathering\ them.}}
\DoxyCodeLine{07001\ \ \ \textcolor{comment}{//\ \ \ If\ scattering,\ it's\ used\ at\ the\ temp\ buffer\ to\ accumulate\ each\ output.}}
\DoxyCodeLine{07002\ \ \ \textcolor{comment}{//\ \ \ If\ gathering,\ it's\ just\ the\ output\ buffer.}}
\DoxyCodeLine{07003\ \ \ vertical\_buffer\_size\ =\ horizontal-\/>scale\_info.output\_sub\_size\ *\ effective\_channels\ *\ \textcolor{keyword}{sizeof}(float)\ +\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float});\ \ \textcolor{comment}{//\ extra\ float\ for\ padding}}
\DoxyCodeLine{07004\ }
\DoxyCodeLine{07005\ \ \ \textcolor{comment}{//\ we\ make\ two\ passes\ through\ this\ loop,\ 1st\ to\ add\ everything\ up,\ 2nd\ to\ allocate\ and\ init}}
\DoxyCodeLine{07006\ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{07007\ \ \ \{}
\DoxyCodeLine{07008\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{07009\ \ \ \ \ \textcolor{keywordtype}{void}\ *\ advance\_mem\ =\ alloced;}
\DoxyCodeLine{07010\ \ \ \ \ \textcolor{keywordtype}{int}\ copy\_horizontal\ =\ 0;}
\DoxyCodeLine{07011\ \ \ \ \ stbir\_\_sampler\ *\ possibly\_use\_horizontal\_for\_pivot\ =\ 0;}
\DoxyCodeLine{07012\ }
\DoxyCodeLine{07013\ \textcolor{preprocessor}{\#ifdef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{07014\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_NEXT\_PTR(\ ptr,\ size,\ ntype\ )\ if\ (\ alloced\ )\ \{\ void\ *\ p\ =\ STBIR\_MALLOC(\ size,\ user\_data);\ if\ (\ p\ ==\ 0\ )\ \{\ stbir\_\_free\_internal\_mem(\ info\ );\ return\ 0;\ \}\ (ptr)\ =\ (ntype*)p;\ \}}}
\DoxyCodeLine{07015\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{07016\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_NEXT\_PTR(\ ptr,\ size,\ ntype\ )\ advance\_mem\ =\ (void*)\ (\ (\ ((size\_t)advance\_mem)\ +\ 15\ )\ \&\ \string~15\ );\ if\ (\ alloced\ )\ ptr\ =\ (ntype*)advance\_mem;\ advance\_mem\ =\ ((char*)advance\_mem)\ +\ (size);}}
\DoxyCodeLine{07017\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07018\ }
\DoxyCodeLine{07019\ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info,\ \textcolor{keyword}{sizeof}(\ stbir\_\_info\ ),\ stbir\_\_info\ );}
\DoxyCodeLine{07020\ }
\DoxyCodeLine{07021\ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info-\/>split\_info,\ \textcolor{keyword}{sizeof}(\ stbir\_\_per\_split\_info\ )\ *\ splits,\ stbir\_\_per\_split\_info\ );}
\DoxyCodeLine{07022\ }
\DoxyCodeLine{07023\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info\ )}
\DoxyCodeLine{07024\ \ \ \ \ \{}
\DoxyCodeLine{07025\ \ \ \ \ \ \ \textcolor{keyword}{static}\ stbir\_\_alpha\_weight\_func\ *\ fancy\_alpha\_weights[6]\ \ =\ \ \ \ \{\ stbir\_\_fancy\_alpha\_weight\_4ch,\ \ \ stbir\_\_fancy\_alpha\_weight\_4ch,\ \ \ stbir\_\_fancy\_alpha\_weight\_4ch,\ \ \ stbir\_\_fancy\_alpha\_weight\_4ch,\ \ \ stbir\_\_fancy\_alpha\_weight\_2ch,\ \ \ stbir\_\_fancy\_alpha\_weight\_2ch\ \};}
\DoxyCodeLine{07026\ \ \ \ \ \ \ \textcolor{keyword}{static}\ stbir\_\_alpha\_unweight\_func\ *\ fancy\_alpha\_unweights[6]\ =\ \{\ stbir\_\_fancy\_alpha\_unweight\_4ch,\ stbir\_\_fancy\_alpha\_unweight\_4ch,\ stbir\_\_fancy\_alpha\_unweight\_4ch,\ stbir\_\_fancy\_alpha\_unweight\_4ch,\ stbir\_\_fancy\_alpha\_unweight\_2ch,\ stbir\_\_fancy\_alpha\_unweight\_2ch\ \};}
\DoxyCodeLine{07027\ \ \ \ \ \ \ \textcolor{keyword}{static}\ stbir\_\_alpha\_weight\_func\ *\ simple\_alpha\_weights[6]\ =\ \{\ stbir\_\_simple\_alpha\_weight\_4ch,\ stbir\_\_simple\_alpha\_weight\_4ch,\ stbir\_\_simple\_alpha\_weight\_4ch,\ stbir\_\_simple\_alpha\_weight\_4ch,\ stbir\_\_simple\_alpha\_weight\_2ch,\ stbir\_\_simple\_alpha\_weight\_2ch\ \};}
\DoxyCodeLine{07028\ \ \ \ \ \ \ \textcolor{keyword}{static}\ stbir\_\_alpha\_unweight\_func\ *\ simple\_alpha\_unweights[6]\ =\ \{\ stbir\_\_simple\_alpha\_unweight\_4ch,\ stbir\_\_simple\_alpha\_unweight\_4ch,\ stbir\_\_simple\_alpha\_unweight\_4ch,\ stbir\_\_simple\_alpha\_unweight\_4ch,\ stbir\_\_simple\_alpha\_unweight\_2ch,\ stbir\_\_simple\_alpha\_unweight\_2ch\ \};}
\DoxyCodeLine{07029\ }
\DoxyCodeLine{07030\ \ \ \ \ \ \ \textcolor{comment}{//\ initialize\ info\ fields}}
\DoxyCodeLine{07031\ \ \ \ \ \ \ info-\/>alloced\_mem\ =\ alloced;}
\DoxyCodeLine{07032\ \ \ \ \ \ \ info-\/>alloced\_total\ =\ alloced\_total;}
\DoxyCodeLine{07033\ }
\DoxyCodeLine{07034\ \ \ \ \ \ \ info-\/>channels\ =\ channels;}
\DoxyCodeLine{07035\ \ \ \ \ \ \ info-\/>effective\_channels\ =\ effective\_channels;}
\DoxyCodeLine{07036\ }
\DoxyCodeLine{07037\ \ \ \ \ \ \ info-\/>offset\_x\ =\ new\_x;}
\DoxyCodeLine{07038\ \ \ \ \ \ \ info-\/>offset\_y\ =\ new\_y;}
\DoxyCodeLine{07039\ \ \ \ \ \ \ info-\/>alloc\_ring\_buffer\_num\_entries\ =\ alloc\_ring\_buffer\_num\_entries;}
\DoxyCodeLine{07040\ \ \ \ \ \ \ info-\/>ring\_buffer\_num\_entries\ =\ 0;}
\DoxyCodeLine{07041\ \ \ \ \ \ \ info-\/>ring\_buffer\_length\_bytes\ =\ ring\_buffer\_length\_bytes;}
\DoxyCodeLine{07042\ \ \ \ \ \ \ info-\/>splits\ =\ splits;}
\DoxyCodeLine{07043\ \ \ \ \ \ \ info-\/>vertical\_first\ =\ vertical\_first;}
\DoxyCodeLine{07044\ }
\DoxyCodeLine{07045\ \ \ \ \ \ \ info-\/>input\_pixel\_layout\_internal\ =\ input\_pixel\_layout;}
\DoxyCodeLine{07046\ \ \ \ \ \ \ info-\/>output\_pixel\_layout\_internal\ =\ output\_pixel\_layout;}
\DoxyCodeLine{07047\ }
\DoxyCodeLine{07048\ \ \ \ \ \ \ \textcolor{comment}{//\ setup\ alpha\ weight\ functions}}
\DoxyCodeLine{07049\ \ \ \ \ \ \ info-\/>alpha\_weight\ =\ 0;}
\DoxyCodeLine{07050\ \ \ \ \ \ \ info-\/>alpha\_unweight\ =\ 0;}
\DoxyCodeLine{07051\ }
\DoxyCodeLine{07052\ \ \ \ \ \ \ \textcolor{comment}{//\ handle\ alpha\ weighting\ functions\ and\ overrides}}
\DoxyCodeLine{07053\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alpha\_weighting\_type\ ==\ 2\ )}
\DoxyCodeLine{07054\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07055\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ high\ quality\ alpha\ multiplying\ on\ the\ way\ in,\ dividing\ on\ the\ way\ out}}
\DoxyCodeLine{07056\ \ \ \ \ \ \ \ \ info-\/>alpha\_weight\ =\ fancy\_alpha\_weights[\ input\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{07057\ \ \ \ \ \ \ \ \ info-\/>alpha\_unweight\ =\ fancy\_alpha\_unweights[\ output\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{07058\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07059\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ alpha\_weighting\_type\ ==\ 4\ )}
\DoxyCodeLine{07060\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07061\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fast\ alpha\ multiplying\ on\ the\ way\ in,\ dividing\ on\ the\ way\ out}}
\DoxyCodeLine{07062\ \ \ \ \ \ \ \ \ info-\/>alpha\_weight\ =\ simple\_alpha\_weights[\ input\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{07063\ \ \ \ \ \ \ \ \ info-\/>alpha\_unweight\ =\ simple\_alpha\_unweights[\ output\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{07064\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07065\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ alpha\_weighting\_type\ ==\ 1\ )}
\DoxyCodeLine{07066\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07067\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fast\ alpha\ on\ the\ way\ in,\ leave\ in\ premultiplied\ form\ on\ way\ out}}
\DoxyCodeLine{07068\ \ \ \ \ \ \ \ \ info-\/>alpha\_weight\ =\ simple\_alpha\_weights[\ input\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{07069\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07070\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\ alpha\_weighting\_type\ ==\ 3\ )}
\DoxyCodeLine{07071\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07072\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ incoming\ is\ premultiplied,\ fast\ alpha\ dividing\ on\ the\ way\ out\ -\/\ non-\/premultiplied\ output}}
\DoxyCodeLine{07073\ \ \ \ \ \ \ \ \ info-\/>alpha\_unweight\ =\ simple\_alpha\_unweights[\ output\_pixel\_layout\ -\/\ STBIRI\_RGBA\ ];}
\DoxyCodeLine{07074\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07075\ }
\DoxyCodeLine{07076\ \ \ \ \ \ \ \textcolor{comment}{//\ handle\ 3-\/chan\ color\ flipping,\ using\ the\ alpha\ weight\ path}}
\DoxyCodeLine{07077\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ input\_pixel\_layout\ ==\ STBIRI\_RGB\ )\ \&\&\ (\ output\_pixel\_layout\ ==\ STBIRI\_BGR\ )\ )\ ||}
\DoxyCodeLine{07078\ \ \ \ \ \ \ \ \ \ \ \ (\ (\ input\_pixel\_layout\ ==\ STBIRI\_BGR\ )\ \&\&\ (\ output\_pixel\_layout\ ==\ STBIRI\_RGB\ )\ )\ )}
\DoxyCodeLine{07079\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07080\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ the\ flipping\ on\ the\ smaller\ of\ the\ two\ ends}}
\DoxyCodeLine{07081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ horizontal-\/>scale\_info.scale\ <\ 1.0f\ )}
\DoxyCodeLine{07082\ \ \ \ \ \ \ \ \ \ \ info-\/>alpha\_unweight\ =\ stbir\_\_simple\_flip\_3ch;}
\DoxyCodeLine{07083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07084\ \ \ \ \ \ \ \ \ \ \ info-\/>alpha\_weight\ =\ stbir\_\_simple\_flip\_3ch;}
\DoxyCodeLine{07085\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07086\ }
\DoxyCodeLine{07087\ \ \ \ \ \}}
\DoxyCodeLine{07088\ }
\DoxyCodeLine{07089\ \ \ \ \ \textcolor{comment}{//\ get\ all\ the\ per-\/split\ buffers}}
\DoxyCodeLine{07090\ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ splits\ ;\ i++\ )}
\DoxyCodeLine{07091\ \ \ \ \ \{}
\DoxyCodeLine{07092\ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info-\/>split\_info[i].decode\_buffer,\ decode\_buffer\_size,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07093\ }
\DoxyCodeLine{07094\ \textcolor{preprocessor}{\#ifdef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{07095\ }
\DoxyCodeLine{07096\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{07097\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ info\ )\ \&\&\ (\ effective\_channels\ ==\ 3\ )\ )}
\DoxyCodeLine{07098\ \ \ \ \ \ \ \ \ ++info-\/>split\_info[i].decode\_buffer;\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer}}
\DoxyCodeLine{07099\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{07100\ }
\DoxyCodeLine{07101\ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info-\/>split\_info[i].ring\_buffers,\ alloc\_ring\_buffer\_num\_entries\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}*),\ \textcolor{keywordtype}{float}*\ );}
\DoxyCodeLine{07102\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07103\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ j;}
\DoxyCodeLine{07104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ j\ =\ 0\ ;\ j\ <\ alloc\_ring\_buffer\_num\_entries\ ;\ j++\ )}
\DoxyCodeLine{07105\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{07106\ \ \ \ \ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info-\/>split\_info[i].ring\_buffers[j],\ ring\_buffer\_length\_bytes,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07107\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{07108\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ info\ )\ \&\&\ (\ effective\_channels\ ==\ 3\ )\ )}
\DoxyCodeLine{07109\ \ \ \ \ \ \ \ \ \ \ \ \ ++info-\/>split\_info[i].ring\_buffers[j];\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer}}
\DoxyCodeLine{07110\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{07111\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07112\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07113\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{07114\ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info-\/>split\_info[i].ring\_buffer,\ ring\_buffer\_size,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07115\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07116\ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ info-\/>split\_info[i].vertical\_buffer,\ vertical\_buffer\_size,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07117\ \ \ \ \ \}}
\DoxyCodeLine{07118\ }
\DoxyCodeLine{07119\ \ \ \ \ \textcolor{comment}{//\ alloc\ memory\ for\ to-\/be-\/pivoted\ coeffs\ (if\ necessary)}}
\DoxyCodeLine{07120\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ vertical-\/>is\_gather\ ==\ 0\ )}
\DoxyCodeLine{07121\ \ \ \ \ \{}
\DoxyCodeLine{07122\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ both;}
\DoxyCodeLine{07123\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ temp\_mem\_amt;}
\DoxyCodeLine{07124\ }
\DoxyCodeLine{07125\ \ \ \ \ \ \ \textcolor{comment}{//\ when\ in\ vertical\ scatter\ mode,\ we\ first\ build\ the\ coefficients\ in\ gather\ mode,\ and\ then\ pivot\ after,}}
\DoxyCodeLine{07126\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ that\ means\ we\ need\ two\ buffers,\ so\ we\ try\ to\ use\ the\ decode\ buffer\ and\ ring\ buffer\ for\ this.\ if\ that}}
\DoxyCodeLine{07127\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ is\ too\ small,\ we\ just\ allocate\ extra\ memory\ to\ use\ as\ this\ temp.}}
\DoxyCodeLine{07128\ }
\DoxyCodeLine{07129\ \ \ \ \ \ \ both\ =\ vertical-\/>gather\_prescatter\_contributors\_size\ +\ vertical-\/>gather\_prescatter\_coefficients\_size;}
\DoxyCodeLine{07130\ }
\DoxyCodeLine{07131\ \textcolor{preprocessor}{\#ifdef\ STBIR\_\_SEPARATE\_ALLOCATIONS}}
\DoxyCodeLine{07132\ \ \ \ \ \ \ temp\_mem\_amt\ =\ decode\_buffer\_size;}
\DoxyCodeLine{07133\ }
\DoxyCodeLine{07134\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{07135\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ effective\_channels\ ==\ 3\ )}
\DoxyCodeLine{07136\ \ \ \ \ \ \ \ \ -\/-\/temp\_mem\_amt;\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer}}
\DoxyCodeLine{07137\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{07138\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{07139\ \ \ \ \ \ \ temp\_mem\_amt\ =\ (\ decode\_buffer\_size\ +\ ring\_buffer\_size\ +\ vertical\_buffer\_size\ )\ *\ splits;}
\DoxyCodeLine{07140\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07141\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ temp\_mem\_amt\ >=\ both\ )}
\DoxyCodeLine{07142\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info\ )}
\DoxyCodeLine{07144\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{07145\ \ \ \ \ \ \ \ \ \ \ vertical-\/>gather\_prescatter\_contributors\ =\ (stbir\_\_contributors*)info-\/>split\_info[0].decode\_buffer;}
\DoxyCodeLine{07146\ \ \ \ \ \ \ \ \ \ \ vertical-\/>gather\_prescatter\_coefficients\ =\ (\textcolor{keywordtype}{float}*)\ (\ (\ (\textcolor{keywordtype}{char}*)info-\/>split\_info[0].decode\_buffer\ )\ +\ vertical-\/>gather\_prescatter\_contributors\_size\ );}
\DoxyCodeLine{07147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07148\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07149\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07150\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07151\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ring+decode\ memory\ is\ too\ small,\ so\ allocate\ temp\ memory}}
\DoxyCodeLine{07152\ \ \ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ vertical-\/>gather\_prescatter\_contributors,\ vertical-\/>gather\_prescatter\_contributors\_size,\ stbir\_\_contributors\ );}
\DoxyCodeLine{07153\ \ \ \ \ \ \ \ \ STBIR\_\_NEXT\_PTR(\ vertical-\/>gather\_prescatter\_coefficients,\ vertical-\/>gather\_prescatter\_coefficients\_size,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07154\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07155\ \ \ \ \ \}}
\DoxyCodeLine{07156\ }
\DoxyCodeLine{07157\ \ \ \ \ STBIR\_\_NEXT\_PTR(\ horizontal-\/>contributors,\ horizontal-\/>contributors\_size,\ stbir\_\_contributors\ );}
\DoxyCodeLine{07158\ \ \ \ \ STBIR\_\_NEXT\_PTR(\ horizontal-\/>coefficients,\ horizontal-\/>coefficients\_size,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07159\ }
\DoxyCodeLine{07160\ \ \ \ \ \textcolor{comment}{//\ are\ the\ two\ filters\ identical??\ (happens\ a\ lot\ with\ mipmap\ generation)}}
\DoxyCodeLine{07161\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ horizontal-\/>filter\_kernel\ ==\ vertical-\/>filter\_kernel\ )\ \&\&\ (\ horizontal-\/>filter\_support\ ==\ vertical-\/>filter\_support\ )\ \&\&\ (\ horizontal-\/>edge\ ==\ vertical-\/>edge\ )\ \&\&\ (\ horizontal-\/>scale\_info.output\_sub\_size\ ==\ vertical-\/>scale\_info.output\_sub\_size\ )\ )}
\DoxyCodeLine{07162\ \ \ \ \ \{}
\DoxyCodeLine{07163\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ diff\_scale\ =\ horizontal-\/>scale\_info.scale\ -\/\ vertical-\/>scale\_info.scale;}
\DoxyCodeLine{07164\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ diff\_shift\ =\ horizontal-\/>scale\_info.pixel\_shift\ -\/\ vertical-\/>scale\_info.pixel\_shift;}
\DoxyCodeLine{07165\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ diff\_scale\ <\ 0.0f\ )\ diff\_scale\ =\ -\/diff\_scale;}
\DoxyCodeLine{07166\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ diff\_shift\ <\ 0.0f\ )\ diff\_shift\ =\ -\/diff\_shift;}
\DoxyCodeLine{07167\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ diff\_scale\ <=\ stbir\_\_small\_float\ )\ \&\&\ (\ diff\_shift\ <=\ stbir\_\_small\_float\ )\ )}
\DoxyCodeLine{07168\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ horizontal-\/>is\_gather\ ==\ vertical-\/>is\_gather\ )}
\DoxyCodeLine{07170\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{07171\ \ \ \ \ \ \ \ \ \ \ copy\_horizontal\ =\ 1;}
\DoxyCodeLine{07172\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ no\_vert\_alloc;}
\DoxyCodeLine{07173\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07174\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ everything\ matches,\ but\ vertical\ is\ scatter,\ horizontal\ is\ gather,\ use\ horizontal\ coeffs\ for\ vertical\ pivot\ coeffs}}
\DoxyCodeLine{07175\ \ \ \ \ \ \ \ \ possibly\_use\_horizontal\_for\_pivot\ =\ horizontal;}
\DoxyCodeLine{07176\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07177\ \ \ \ \ \}}
\DoxyCodeLine{07178\ }
\DoxyCodeLine{07179\ \ \ \ \ STBIR\_\_NEXT\_PTR(\ vertical-\/>contributors,\ vertical-\/>contributors\_size,\ stbir\_\_contributors\ );}
\DoxyCodeLine{07180\ \ \ \ \ STBIR\_\_NEXT\_PTR(\ vertical-\/>coefficients,\ vertical-\/>coefficients\_size,\ \textcolor{keywordtype}{float}\ );}
\DoxyCodeLine{07181\ }
\DoxyCodeLine{07182\ \ \ \ no\_vert\_alloc:}
\DoxyCodeLine{07183\ }
\DoxyCodeLine{07184\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info\ )}
\DoxyCodeLine{07185\ \ \ \ \ \{}
\DoxyCodeLine{07186\ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_START(\ horizontal\ );}
\DoxyCodeLine{07187\ }
\DoxyCodeLine{07188\ \ \ \ \ \ \ stbir\_\_calculate\_filters(\ horizontal,\ 0,\ user\_data\ STBIR\_ONLY\_PROFILE\_BUILD\_SET\_INFO\ );}
\DoxyCodeLine{07189\ }
\DoxyCodeLine{07190\ \ \ \ \ \ \ \textcolor{comment}{//\ setup\ the\ horizontal\ gather\ functions}}
\DoxyCodeLine{07191\ \ \ \ \ \ \ \textcolor{comment}{//\ start\ with\ defaulting\ to\ the\ n\_coeffs\ functions\ (specialized\ on\ channels\ and\ remnant\ leftover)}}
\DoxyCodeLine{07192\ \ \ \ \ \ \ info-\/>horizontal\_gather\_channels\ =\ stbir\_\_horizontal\_gather\_n\_coeffs\_funcs[\ effective\_channels\ ][\ horizontal-\/>extent\_info.widest\ \&\ 3\ ];}
\DoxyCodeLine{07193\ \ \ \ \ \ \ \textcolor{comment}{//\ but\ if\ the\ number\ of\ coeffs\ <=\ 12,\ use\ another\ set\ of\ special\ cases.\ <=12\ coeffs\ is\ any\ enlarging\ resize,\ or\ shrinking\ resize\ down\ to\ about\ 1/3\ size}}
\DoxyCodeLine{07194\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ horizontal-\/>extent\_info.widest\ <=\ 12\ )}
\DoxyCodeLine{07195\ \ \ \ \ \ \ \ \ info-\/>horizontal\_gather\_channels\ =\ stbir\_\_horizontal\_gather\_channels\_funcs[\ effective\_channels\ ][\ horizontal-\/>extent\_info.widest\ -\/\ 1\ ];}
\DoxyCodeLine{07196\ }
\DoxyCodeLine{07197\ \ \ \ \ \ \ info-\/>scanline\_extents.conservative.n0\ =\ conservative-\/>n0;}
\DoxyCodeLine{07198\ \ \ \ \ \ \ info-\/>scanline\_extents.conservative.n1\ =\ conservative-\/>n1;}
\DoxyCodeLine{07199\ }
\DoxyCodeLine{07200\ \ \ \ \ \ \ \textcolor{comment}{//\ get\ exact\ extents}}
\DoxyCodeLine{07201\ \ \ \ \ \ \ stbir\_\_get\_extents(\ horizontal,\ \&info-\/>scanline\_extents\ );}
\DoxyCodeLine{07202\ }
\DoxyCodeLine{07203\ \ \ \ \ \ \ \textcolor{comment}{//\ pack\ the\ horizontal\ coeffs}}
\DoxyCodeLine{07204\ \ \ \ \ \ \ horizontal-\/>coefficient\_width\ =\ stbir\_\_pack\_coefficients(horizontal-\/>num\_contributors,\ horizontal-\/>contributors,\ horizontal-\/>coefficients,\ horizontal-\/>coefficient\_width,\ horizontal-\/>extent\_info.widest,\ info-\/>scanline\_extents.conservative.n0,\ info-\/>scanline\_extents.conservative.n1\ );}
\DoxyCodeLine{07205\ }
\DoxyCodeLine{07206\ \ \ \ \ \ \ STBIR\_MEMCPY(\ \&info-\/>horizontal,\ horizontal,\ \textcolor{keyword}{sizeof}(\ stbir\_\_sampler\ )\ );}
\DoxyCodeLine{07207\ }
\DoxyCodeLine{07208\ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_END(\ horizontal\ );}
\DoxyCodeLine{07209\ }
\DoxyCodeLine{07210\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ copy\_horizontal\ )}
\DoxyCodeLine{07211\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07212\ \ \ \ \ \ \ \ \ STBIR\_MEMCPY(\ \&info-\/>vertical,\ horizontal,\ \textcolor{keyword}{sizeof}(\ stbir\_\_sampler\ )\ );}
\DoxyCodeLine{07213\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07214\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07215\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07216\ \ \ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_START(\ vertical\ );}
\DoxyCodeLine{07217\ }
\DoxyCodeLine{07218\ \ \ \ \ \ \ \ \ stbir\_\_calculate\_filters(\ vertical,\ possibly\_use\_horizontal\_for\_pivot,\ user\_data\ STBIR\_ONLY\_PROFILE\_BUILD\_SET\_INFO\ );}
\DoxyCodeLine{07219\ \ \ \ \ \ \ \ \ STBIR\_MEMCPY(\ \&info-\/>vertical,\ vertical,\ \textcolor{keyword}{sizeof}(\ stbir\_\_sampler\ )\ );}
\DoxyCodeLine{07220\ }
\DoxyCodeLine{07221\ \ \ \ \ \ \ \ \ STBIR\_PROFILE\_BUILD\_END(\ vertical\ );}
\DoxyCodeLine{07222\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07223\ }
\DoxyCodeLine{07224\ \ \ \ \ \ \ \textcolor{comment}{//\ setup\ the\ vertical\ split\ ranges}}
\DoxyCodeLine{07225\ \ \ \ \ \ \ stbir\_\_get\_split\_info(\ info-\/>split\_info,\ info-\/>splits,\ info-\/>vertical.scale\_info.output\_sub\_size,\ info-\/>vertical.filter\_pixel\_margin,\ info-\/>vertical.scale\_info.input\_full\_size\ );}
\DoxyCodeLine{07226\ }
\DoxyCodeLine{07227\ \ \ \ \ \ \ \textcolor{comment}{//\ now\ we\ know\ precisely\ how\ many\ entries\ we\ need}}
\DoxyCodeLine{07228\ \ \ \ \ \ \ info-\/>ring\_buffer\_num\_entries\ =\ info-\/>vertical.extent\_info.widest;}
\DoxyCodeLine{07229\ }
\DoxyCodeLine{07230\ \ \ \ \ \ \ \textcolor{comment}{//\ we\ never\ need\ more\ ring\ buffer\ entries\ than\ the\ scanlines\ we're\ outputting}}
\DoxyCodeLine{07231\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ !info-\/>vertical.is\_gather\ )\ \&\&\ (\ info-\/>ring\_buffer\_num\_entries\ >\ conservative\_split\_output\_size\ )\ )}
\DoxyCodeLine{07232\ \ \ \ \ \ \ \ \ info-\/>ring\_buffer\_num\_entries\ =\ conservative\_split\_output\_size;}
\DoxyCodeLine{07233\ \ \ \ \ \ \ STBIR\_ASSERT(\ info-\/>ring\_buffer\_num\_entries\ <=\ info-\/>alloc\_ring\_buffer\_num\_entries\ );}
\DoxyCodeLine{07234\ }
\DoxyCodeLine{07235\ \ \ \ \ \ \ \textcolor{comment}{//\ a\ few\ of\ the\ horizontal\ gather\ functions\ read\ past\ the\ end\ of\ the\ decode\ (but\ mask\ it\ out),\ }}
\DoxyCodeLine{07236\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ so\ put\ in\ normal\ values\ so\ no\ snans\ or\ denormals\ accidentally\ sneak\ in\ (also,\ in\ the\ ring\ }}
\DoxyCodeLine{07237\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ buffer\ for\ vertical\ first)}}
\DoxyCodeLine{07238\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ splits\ ;\ i++\ )}
\DoxyCodeLine{07239\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07240\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ t,\ ofs,\ start;}
\DoxyCodeLine{07241\ }
\DoxyCodeLine{07242\ \ \ \ \ \ \ \ \ ofs\ =\ decode\_buffer\_size\ /\ 4;}
\DoxyCodeLine{07243\ }
\DoxyCodeLine{07244\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(\ STBIR\_\_SEPARATE\_ALLOCATIONS\ )\ \&\&\ defined(STBIR\_SIMD8)}}
\DoxyCodeLine{07245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ effective\_channels\ ==\ 3\ )\ }
\DoxyCodeLine{07246\ \ \ \ \ \ \ \ \ \ \ -\/-\/ofs;\ \textcolor{comment}{//\ avx\ in\ 3\ channel\ mode\ needs\ one\ float\ at\ the\ start\ of\ the\ buffer,\ so\ we\ snap\ back\ for\ clearing}}
\DoxyCodeLine{07247\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{07248\ }
\DoxyCodeLine{07249\ \ \ \ \ \ \ \ \ start\ =\ ofs\ -\/\ 4;}
\DoxyCodeLine{07250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ start\ <\ 0\ )\ start\ =\ 0;}
\DoxyCodeLine{07251\ }
\DoxyCodeLine{07252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ t\ =\ start\ ;\ t\ <\ ofs;\ t++\ )}
\DoxyCodeLine{07253\ \ \ \ \ \ \ \ \ \ \ info-\/>split\_info[i].decode\_buffer[\ t\ ]\ =\ 9999.0f;}
\DoxyCodeLine{07254\ }
\DoxyCodeLine{07255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ vertical\_first\ )}
\DoxyCodeLine{07256\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{07257\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ j;}
\DoxyCodeLine{07258\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ j\ =\ 0;\ j\ <\ info-\/>ring\_buffer\_num\_entries\ ;\ j++\ )}
\DoxyCodeLine{07259\ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{07260\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ t\ =\ start\ ;\ t\ <\ ofs;\ t++\ )}
\DoxyCodeLine{07261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_get\_ring\_buffer\_entry(\ info,\ info-\/>split\_info\ +\ i,\ j\ )[\ t\ ]\ =\ 9999.0f;}
\DoxyCodeLine{07262\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07263\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07264\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07265\ \ \ \ \ \}}
\DoxyCodeLine{07266\ }
\DoxyCodeLine{07267\ \textcolor{preprocessor}{\ \ \ \ \#undef\ STBIR\_\_NEXT\_PTR}}
\DoxyCodeLine{07268\ }
\DoxyCodeLine{07269\ }
\DoxyCodeLine{07270\ \ \ \ \ \textcolor{comment}{//\ is\ this\ the\ first\ time\ through\ loop?}}
\DoxyCodeLine{07271\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info\ ==\ 0\ )}
\DoxyCodeLine{07272\ \ \ \ \ \{}
\DoxyCodeLine{07273\ \ \ \ \ \ \ alloced\_total\ =\ (\ 15\ +\ (size\_t)advance\_mem\ );}
\DoxyCodeLine{07274\ \ \ \ \ \ \ alloced\ =\ STBIR\_MALLOC(\ alloced\_total,\ user\_data\ );}
\DoxyCodeLine{07275\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ alloced\ ==\ 0\ )}
\DoxyCodeLine{07276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07277\ \ \ \ \ \}}
\DoxyCodeLine{07278\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07279\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ info;\ \ \textcolor{comment}{//\ success}}
\DoxyCodeLine{07280\ \ \ \}}
\DoxyCodeLine{07281\ \}}
\DoxyCodeLine{07282\ }
\DoxyCodeLine{07283\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_perform\_resize(\ stbir\_\_info\ \textcolor{keyword}{const}\ *\ info,\ \textcolor{keywordtype}{int}\ split\_start,\ \textcolor{keywordtype}{int}\ split\_count\ )}
\DoxyCodeLine{07284\ \{}
\DoxyCodeLine{07285\ \ \ stbir\_\_per\_split\_info\ *\ split\_info\ =\ info-\/>split\_info\ +\ split\_start;}
\DoxyCodeLine{07286\ }
\DoxyCodeLine{07287\ \ \ STBIR\_PROFILE\_CLEAR\_EXTRAS();}
\DoxyCodeLine{07288\ }
\DoxyCodeLine{07289\ \ \ STBIR\_PROFILE\_FIRST\_START(\ looping\ );}
\DoxyCodeLine{07290\ \ \ \textcolor{keywordflow}{if}\ (info-\/>vertical.is\_gather)}
\DoxyCodeLine{07291\ \ \ \ \ stbir\_\_vertical\_gather\_loop(\ info,\ split\_info,\ split\_count\ );}
\DoxyCodeLine{07292\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07293\ \ \ \ \ stbir\_\_vertical\_scatter\_loop(\ info,\ split\_info,\ split\_count\ );}
\DoxyCodeLine{07294\ \ \ STBIR\_PROFILE\_END(\ looping\ );}
\DoxyCodeLine{07295\ }
\DoxyCodeLine{07296\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07297\ \}}
\DoxyCodeLine{07298\ }
\DoxyCodeLine{07299\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_update\_info\_from\_resize(\ stbir\_\_info\ *\ info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ )}
\DoxyCodeLine{07300\ \{}
\DoxyCodeLine{07301\ \ \ \textcolor{keyword}{static}\ stbir\_\_decode\_pixels\_func\ *\ decode\_simple[STBIR\_TYPE\_HALF\_FLOAT-\/STBIR\_TYPE\_UINT8\_SRGB+1]=}
\DoxyCodeLine{07302\ \ \ \{}
\DoxyCodeLine{07303\ \ \ \ \ \textcolor{comment}{/*\ 1ch-\/4ch\ */}\ stbir\_\_decode\_uint8\_srgb,\ stbir\_\_decode\_uint8\_srgb,\ 0,\ stbir\_\_decode\_float\_linear,\ stbir\_\_decode\_half\_float\_linear,}
\DoxyCodeLine{07304\ \ \ \};}
\DoxyCodeLine{07305\ }
\DoxyCodeLine{07306\ \ \ \textcolor{keyword}{static}\ stbir\_\_decode\_pixels\_func\ *\ decode\_alphas[STBIRI\_AR-\/STBIRI\_RGBA+1][STBIR\_TYPE\_HALF\_FLOAT-\/STBIR\_TYPE\_UINT8\_SRGB+1]=}
\DoxyCodeLine{07307\ \ \ \{}
\DoxyCodeLine{07308\ \ \ \ \ \{\ \textcolor{comment}{/*\ RGBA\ */}\ stbir\_\_decode\_uint8\_srgb4\_linearalpha,\ \ \ \ \ \ stbir\_\_decode\_uint8\_srgb,\ \ \ \ \ \ 0,\ stbir\_\_decode\_float\_linear,\ \ \ \ \ \ stbir\_\_decode\_half\_float\_linear\ \},}
\DoxyCodeLine{07309\ \ \ \ \ \{\ \textcolor{comment}{/*\ BGRA\ */}\ stbir\_\_decode\_uint8\_srgb4\_linearalpha\_BGRA,\ stbir\_\_decode\_uint8\_srgb\_BGRA,\ 0,\ stbir\_\_decode\_float\_linear\_BGRA,\ stbir\_\_decode\_half\_float\_linear\_BGRA\ \},}
\DoxyCodeLine{07310\ \ \ \ \ \{\ \textcolor{comment}{/*\ ARGB\ */}\ stbir\_\_decode\_uint8\_srgb4\_linearalpha\_ARGB,\ stbir\_\_decode\_uint8\_srgb\_ARGB,\ 0,\ stbir\_\_decode\_float\_linear\_ARGB,\ stbir\_\_decode\_half\_float\_linear\_ARGB\ \},}
\DoxyCodeLine{07311\ \ \ \ \ \{\ \textcolor{comment}{/*\ ABGR\ */}\ stbir\_\_decode\_uint8\_srgb4\_linearalpha\_ABGR,\ stbir\_\_decode\_uint8\_srgb\_ABGR,\ 0,\ stbir\_\_decode\_float\_linear\_ABGR,\ stbir\_\_decode\_half\_float\_linear\_ABGR\ \},}
\DoxyCodeLine{07312\ \ \ \ \ \{\ \textcolor{comment}{/*\ RA\ \ \ */}\ stbir\_\_decode\_uint8\_srgb2\_linearalpha,\ \ \ \ \ \ stbir\_\_decode\_uint8\_srgb,\ \ \ \ \ \ 0,\ stbir\_\_decode\_float\_linear,\ \ \ \ \ \ stbir\_\_decode\_half\_float\_linear\ \},}
\DoxyCodeLine{07313\ \ \ \ \ \{\ \textcolor{comment}{/*\ AR\ \ \ */}\ stbir\_\_decode\_uint8\_srgb2\_linearalpha\_AR,\ \ \ stbir\_\_decode\_uint8\_srgb\_AR,\ \ \ 0,\ stbir\_\_decode\_float\_linear\_AR,\ \ \ stbir\_\_decode\_half\_float\_linear\_AR\ \},}
\DoxyCodeLine{07314\ \ \ \};}
\DoxyCodeLine{07315\ }
\DoxyCodeLine{07316\ \ \ \textcolor{keyword}{static}\ stbir\_\_decode\_pixels\_func\ *\ decode\_simple\_scaled\_or\_not[2][2]=}
\DoxyCodeLine{07317\ \ \ \{}
\DoxyCodeLine{07318\ \ \ \ \ \{\ stbir\_\_decode\_uint8\_linear\_scaled,\ \ stbir\_\_decode\_uint8\_linear\ \},\ \{\ stbir\_\_decode\_uint16\_linear\_scaled,\ stbir\_\_decode\_uint16\_linear\ \},}
\DoxyCodeLine{07319\ \ \ \};}
\DoxyCodeLine{07320\ }
\DoxyCodeLine{07321\ \ \ \textcolor{keyword}{static}\ stbir\_\_decode\_pixels\_func\ *\ decode\_alphas\_scaled\_or\_not[STBIRI\_AR-\/STBIRI\_RGBA+1][2][2]=}
\DoxyCodeLine{07322\ \ \ \{}
\DoxyCodeLine{07323\ \ \ \ \ \{\ \textcolor{comment}{/*\ RGBA\ */}\ \{\ stbir\_\_decode\_uint8\_linear\_scaled,\ \ \ \ \ \ \ stbir\_\_decode\_uint8\_linear\ \},\ \ \ \ \ \ \{\ stbir\_\_decode\_uint16\_linear\_scaled,\ \ \ \ \ \ stbir\_\_decode\_uint16\_linear\ \}\ \},}
\DoxyCodeLine{07324\ \ \ \ \ \{\ \textcolor{comment}{/*\ BGRA\ */}\ \{\ stbir\_\_decode\_uint8\_linear\_scaled\_BGRA,\ \ stbir\_\_decode\_uint8\_linear\_BGRA\ \},\ \{\ stbir\_\_decode\_uint16\_linear\_scaled\_BGRA,\ stbir\_\_decode\_uint16\_linear\_BGRA\ \}\ \},}
\DoxyCodeLine{07325\ \ \ \ \ \{\ \textcolor{comment}{/*\ ARGB\ */}\ \{\ stbir\_\_decode\_uint8\_linear\_scaled\_ARGB,\ \ stbir\_\_decode\_uint8\_linear\_ARGB\ \},\ \{\ stbir\_\_decode\_uint16\_linear\_scaled\_ARGB,\ stbir\_\_decode\_uint16\_linear\_ARGB\ \}\ \},}
\DoxyCodeLine{07326\ \ \ \ \ \{\ \textcolor{comment}{/*\ ABGR\ */}\ \{\ stbir\_\_decode\_uint8\_linear\_scaled\_ABGR,\ \ stbir\_\_decode\_uint8\_linear\_ABGR\ \},\ \{\ stbir\_\_decode\_uint16\_linear\_scaled\_ABGR,\ stbir\_\_decode\_uint16\_linear\_ABGR\ \}\ \},}
\DoxyCodeLine{07327\ \ \ \ \ \{\ \textcolor{comment}{/*\ RA\ \ \ */}\ \{\ stbir\_\_decode\_uint8\_linear\_scaled,\ \ \ \ \ \ \ stbir\_\_decode\_uint8\_linear\ \},\ \ \ \ \ \ \{\ stbir\_\_decode\_uint16\_linear\_scaled,\ \ \ \ \ \ stbir\_\_decode\_uint16\_linear\ \}\ \},}
\DoxyCodeLine{07328\ \ \ \ \ \{\ \textcolor{comment}{/*\ AR\ \ \ */}\ \{\ stbir\_\_decode\_uint8\_linear\_scaled\_AR,\ \ \ \ stbir\_\_decode\_uint8\_linear\_AR\ \},\ \ \ \{\ stbir\_\_decode\_uint16\_linear\_scaled\_AR,\ \ \ stbir\_\_decode\_uint16\_linear\_AR\ \}\ \}}
\DoxyCodeLine{07329\ \ \ \};}
\DoxyCodeLine{07330\ }
\DoxyCodeLine{07331\ \ \ \textcolor{keyword}{static}\ stbir\_\_encode\_pixels\_func\ *\ encode\_simple[STBIR\_TYPE\_HALF\_FLOAT-\/STBIR\_TYPE\_UINT8\_SRGB+1]=}
\DoxyCodeLine{07332\ \ \ \{}
\DoxyCodeLine{07333\ \ \ \ \ \textcolor{comment}{/*\ 1ch-\/4ch\ */}\ stbir\_\_encode\_uint8\_srgb,\ stbir\_\_encode\_uint8\_srgb,\ 0,\ stbir\_\_encode\_float\_linear,\ stbir\_\_encode\_half\_float\_linear,}
\DoxyCodeLine{07334\ \ \ \};}
\DoxyCodeLine{07335\ }
\DoxyCodeLine{07336\ \ \ \textcolor{keyword}{static}\ stbir\_\_encode\_pixels\_func\ *\ encode\_alphas[STBIRI\_AR-\/STBIRI\_RGBA+1][STBIR\_TYPE\_HALF\_FLOAT-\/STBIR\_TYPE\_UINT8\_SRGB+1]=}
\DoxyCodeLine{07337\ \ \ \{}
\DoxyCodeLine{07338\ \ \ \ \ \{\ \textcolor{comment}{/*\ RGBA\ */}\ stbir\_\_encode\_uint8\_srgb4\_linearalpha,\ \ \ \ \ \ stbir\_\_encode\_uint8\_srgb,\ \ \ \ \ \ 0,\ stbir\_\_encode\_float\_linear,\ \ \ \ \ \ stbir\_\_encode\_half\_float\_linear\ \},}
\DoxyCodeLine{07339\ \ \ \ \ \{\ \textcolor{comment}{/*\ BGRA\ */}\ stbir\_\_encode\_uint8\_srgb4\_linearalpha\_BGRA,\ stbir\_\_encode\_uint8\_srgb\_BGRA,\ 0,\ stbir\_\_encode\_float\_linear\_BGRA,\ stbir\_\_encode\_half\_float\_linear\_BGRA\ \},}
\DoxyCodeLine{07340\ \ \ \ \ \{\ \textcolor{comment}{/*\ ARGB\ */}\ stbir\_\_encode\_uint8\_srgb4\_linearalpha\_ARGB,\ stbir\_\_encode\_uint8\_srgb\_ARGB,\ 0,\ stbir\_\_encode\_float\_linear\_ARGB,\ stbir\_\_encode\_half\_float\_linear\_ARGB\ \},}
\DoxyCodeLine{07341\ \ \ \ \ \{\ \textcolor{comment}{/*\ ABGR\ */}\ stbir\_\_encode\_uint8\_srgb4\_linearalpha\_ABGR,\ stbir\_\_encode\_uint8\_srgb\_ABGR,\ 0,\ stbir\_\_encode\_float\_linear\_ABGR,\ stbir\_\_encode\_half\_float\_linear\_ABGR\ \},}
\DoxyCodeLine{07342\ \ \ \ \ \{\ \textcolor{comment}{/*\ RA\ \ \ */}\ stbir\_\_encode\_uint8\_srgb2\_linearalpha,\ \ \ \ \ \ stbir\_\_encode\_uint8\_srgb,\ \ \ \ \ \ 0,\ stbir\_\_encode\_float\_linear,\ \ \ \ \ \ stbir\_\_encode\_half\_float\_linear\ \},}
\DoxyCodeLine{07343\ \ \ \ \ \{\ \textcolor{comment}{/*\ AR\ \ \ */}\ stbir\_\_encode\_uint8\_srgb2\_linearalpha\_AR,\ \ \ stbir\_\_encode\_uint8\_srgb\_AR,\ \ \ 0,\ stbir\_\_encode\_float\_linear\_AR,\ \ \ stbir\_\_encode\_half\_float\_linear\_AR\ \}}
\DoxyCodeLine{07344\ \ \ \};}
\DoxyCodeLine{07345\ }
\DoxyCodeLine{07346\ \ \ \textcolor{keyword}{static}\ stbir\_\_encode\_pixels\_func\ *\ encode\_simple\_scaled\_or\_not[2][2]=}
\DoxyCodeLine{07347\ \ \ \{}
\DoxyCodeLine{07348\ \ \ \ \ \{\ stbir\_\_encode\_uint8\_linear\_scaled,\ \ stbir\_\_encode\_uint8\_linear\ \},\ \{\ stbir\_\_encode\_uint16\_linear\_scaled,\ stbir\_\_encode\_uint16\_linear\ \},}
\DoxyCodeLine{07349\ \ \ \};}
\DoxyCodeLine{07350\ }
\DoxyCodeLine{07351\ \ \ \textcolor{keyword}{static}\ stbir\_\_encode\_pixels\_func\ *\ encode\_alphas\_scaled\_or\_not[STBIRI\_AR-\/STBIRI\_RGBA+1][2][2]=}
\DoxyCodeLine{07352\ \ \ \{}
\DoxyCodeLine{07353\ \ \ \ \ \{\ \textcolor{comment}{/*\ RGBA\ */}\ \{\ stbir\_\_encode\_uint8\_linear\_scaled,\ \ \ \ \ \ \ stbir\_\_encode\_uint8\_linear\ \},\ \ \ \ \ \ \ \{\ stbir\_\_encode\_uint16\_linear\_scaled,\ \ \ \ \ \ stbir\_\_encode\_uint16\_linear\ \}\ \},}
\DoxyCodeLine{07354\ \ \ \ \ \{\ \textcolor{comment}{/*\ BGRA\ */}\ \{\ stbir\_\_encode\_uint8\_linear\_scaled\_BGRA,\ \ stbir\_\_encode\_uint8\_linear\_BGRA\ \},\ \ \{\ stbir\_\_encode\_uint16\_linear\_scaled\_BGRA,\ stbir\_\_encode\_uint16\_linear\_BGRA\ \}\ \},}
\DoxyCodeLine{07355\ \ \ \ \ \{\ \textcolor{comment}{/*\ ARGB\ */}\ \{\ stbir\_\_encode\_uint8\_linear\_scaled\_ARGB,\ \ stbir\_\_encode\_uint8\_linear\_ARGB\ \},\ \ \{\ stbir\_\_encode\_uint16\_linear\_scaled\_ARGB,\ stbir\_\_encode\_uint16\_linear\_ARGB\ \}\ \},}
\DoxyCodeLine{07356\ \ \ \ \ \{\ \textcolor{comment}{/*\ ABGR\ */}\ \{\ stbir\_\_encode\_uint8\_linear\_scaled\_ABGR,\ \ stbir\_\_encode\_uint8\_linear\_ABGR\ \},\ \ \{\ stbir\_\_encode\_uint16\_linear\_scaled\_ABGR,\ stbir\_\_encode\_uint16\_linear\_ABGR\ \}\ \},}
\DoxyCodeLine{07357\ \ \ \ \ \{\ \textcolor{comment}{/*\ RA\ \ \ */}\ \{\ stbir\_\_encode\_uint8\_linear\_scaled,\ \ \ \ \ \ \ stbir\_\_encode\_uint8\_linear\ \},\ \ \ \ \ \ \ \{\ stbir\_\_encode\_uint16\_linear\_scaled,\ \ \ \ \ \ stbir\_\_encode\_uint16\_linear\ \}\ \},}
\DoxyCodeLine{07358\ \ \ \ \ \{\ \textcolor{comment}{/*\ AR\ \ \ */}\ \{\ stbir\_\_encode\_uint8\_linear\_scaled\_AR,\ \ \ \ stbir\_\_encode\_uint8\_linear\_AR\ \},\ \ \ \ \{\ stbir\_\_encode\_uint16\_linear\_scaled\_AR,\ \ \ stbir\_\_encode\_uint16\_linear\_AR\ \}\ \}}
\DoxyCodeLine{07359\ \ \ \};}
\DoxyCodeLine{07360\ }
\DoxyCodeLine{07361\ \ \ stbir\_\_decode\_pixels\_func\ *\ decode\_pixels\ =\ 0;}
\DoxyCodeLine{07362\ \ \ stbir\_\_encode\_pixels\_func\ *\ encode\_pixels\ =\ 0;}
\DoxyCodeLine{07363\ \ \ stbir\_datatype\ input\_type,\ output\_type;}
\DoxyCodeLine{07364\ }
\DoxyCodeLine{07365\ \ \ input\_type\ =\ resize-\/>input\_data\_type;}
\DoxyCodeLine{07366\ \ \ output\_type\ =\ resize-\/>output\_data\_type;}
\DoxyCodeLine{07367\ \ \ info-\/>input\_data\ =\ resize-\/>input\_pixels;}
\DoxyCodeLine{07368\ \ \ info-\/>input\_stride\_bytes\ =\ resize-\/>input\_stride\_in\_bytes;}
\DoxyCodeLine{07369\ \ \ info-\/>output\_stride\_bytes\ =\ resize-\/>output\_stride\_in\_bytes;}
\DoxyCodeLine{07370\ }
\DoxyCodeLine{07371\ \ \ \textcolor{comment}{//\ if\ we're\ completely\ point\ sampling,\ then\ we\ can\ turn\ off\ SRGB}}
\DoxyCodeLine{07372\ \ \ \textcolor{keywordflow}{if}\ (\ (\ info-\/>horizontal.filter\_enum\ ==\ STBIR\_FILTER\_POINT\_SAMPLE\ )\ \&\&\ (\ info-\/>vertical.filter\_enum\ ==\ STBIR\_FILTER\_POINT\_SAMPLE\ )\ )}
\DoxyCodeLine{07373\ \ \ \{}
\DoxyCodeLine{07374\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ input\_type\ \ ==\ STBIR\_TYPE\_UINT8\_SRGB\ )\ ||\ (\ input\_type\ \ ==\ STBIR\_TYPE\_UINT8\_SRGB\_ALPHA\ )\ )\ \&\&}
\DoxyCodeLine{07375\ \ \ \ \ \ \ \ \ \ (\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT8\_SRGB\ )\ ||\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT8\_SRGB\_ALPHA\ )\ )\ )}
\DoxyCodeLine{07376\ \ \ \ \ \{}
\DoxyCodeLine{07377\ \ \ \ \ \ \ input\_type\ =\ STBIR\_TYPE\_UINT8;}
\DoxyCodeLine{07378\ \ \ \ \ \ \ output\_type\ =\ STBIR\_TYPE\_UINT8;}
\DoxyCodeLine{07379\ \ \ \ \ \}}
\DoxyCodeLine{07380\ \ \ \}}
\DoxyCodeLine{07381\ }
\DoxyCodeLine{07382\ \ \ \textcolor{comment}{//\ recalc\ the\ output\ and\ input\ strides}}
\DoxyCodeLine{07383\ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>input\_stride\_bytes\ ==\ 0\ )}
\DoxyCodeLine{07384\ \ \ \ \ info-\/>input\_stride\_bytes\ =\ info-\/>channels\ *\ info-\/>horizontal.scale\_info.input\_full\_size\ *\ stbir\_\_type\_size[input\_type];}
\DoxyCodeLine{07385\ }
\DoxyCodeLine{07386\ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>output\_stride\_bytes\ ==\ 0\ )}
\DoxyCodeLine{07387\ \ \ \ \ info-\/>output\_stride\_bytes\ =\ info-\/>channels\ *\ info-\/>horizontal.scale\_info.output\_sub\_size\ *\ stbir\_\_type\_size[output\_type];}
\DoxyCodeLine{07388\ }
\DoxyCodeLine{07389\ \ \ \textcolor{comment}{//\ calc\ offset}}
\DoxyCodeLine{07390\ \ \ info-\/>output\_data\ =\ (\ (\textcolor{keywordtype}{char}*)\ resize-\/>output\_pixels\ )\ +\ (\ (size\_t)\ info-\/>offset\_y\ *\ (\textcolor{keywordtype}{size\_t})\ resize-\/>output\_stride\_in\_bytes\ )\ +\ (\ info-\/>offset\_x\ *\ info-\/>channels\ *\ stbir\_\_type\_size[output\_type]\ );}
\DoxyCodeLine{07391\ }
\DoxyCodeLine{07392\ \ \ info-\/>in\_pixels\_cb\ =\ resize-\/>input\_cb;}
\DoxyCodeLine{07393\ \ \ info-\/>user\_data\ =\ resize-\/>user\_data;}
\DoxyCodeLine{07394\ \ \ info-\/>out\_pixels\_cb\ =\ resize-\/>output\_cb;}
\DoxyCodeLine{07395\ }
\DoxyCodeLine{07396\ \ \ \textcolor{comment}{//\ setup\ the\ input\ format\ converters}}
\DoxyCodeLine{07397\ \ \ \textcolor{keywordflow}{if}\ (\ (\ input\_type\ ==\ STBIR\_TYPE\_UINT8\ )\ ||\ (\ input\_type\ ==\ STBIR\_TYPE\_UINT16\ )\ )}
\DoxyCodeLine{07398\ \ \ \{}
\DoxyCodeLine{07399\ \ \ \ \ \textcolor{keywordtype}{int}\ non\_scaled\ =\ 0;}
\DoxyCodeLine{07400\ }
\DoxyCodeLine{07401\ \ \ \ \ \textcolor{comment}{//\ check\ if\ we\ can\ run\ unscaled\ -\/\ 0-\/255.0/0-\/65535.0\ instead\ of\ 0-\/1.0\ (which\ is\ a\ tiny\ bit\ faster\ when\ doing\ linear\ 8-\/>8\ or\ 16-\/>16)}}
\DoxyCodeLine{07402\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ !info-\/>alpha\_weight\ )\ \&\&\ (\ !info-\/>alpha\_unweight\ )\ \ )\ \textcolor{comment}{//\ don't\ short\ circuit\ when\ alpha\ weighting\ (get\ everything\ to\ 0-\/1.0\ as\ usual)}}
\DoxyCodeLine{07403\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ input\_type\ ==\ STBIR\_TYPE\_UINT8\ )\ \&\&\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT8\ )\ )\ ||\ (\ (\ input\_type\ ==\ STBIR\_TYPE\_UINT16\ )\ \&\&\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT16\ )\ )\ )}
\DoxyCodeLine{07404\ \ \ \ \ \ \ \ \ non\_scaled\ =\ 1;}
\DoxyCodeLine{07405\ }
\DoxyCodeLine{07406\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>input\_pixel\_layout\_internal\ <=\ STBIRI\_4CHANNEL\ )}
\DoxyCodeLine{07407\ \ \ \ \ \ \ decode\_pixels\ =\ decode\_simple\_scaled\_or\_not[\ input\_type\ ==\ STBIR\_TYPE\_UINT16\ ][\ non\_scaled\ ];}
\DoxyCodeLine{07408\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07409\ \ \ \ \ \ \ decode\_pixels\ =\ decode\_alphas\_scaled\_or\_not[\ (\ info-\/>input\_pixel\_layout\_internal\ -\/\ STBIRI\_RGBA\ )\ \%\ (\ STBIRI\_AR-\/STBIRI\_RGBA+1\ )\ ][\ input\_type\ ==\ STBIR\_TYPE\_UINT16\ ][\ non\_scaled\ ];}
\DoxyCodeLine{07410\ \ \ \}}
\DoxyCodeLine{07411\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07412\ \ \ \{}
\DoxyCodeLine{07413\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>input\_pixel\_layout\_internal\ <=\ STBIRI\_4CHANNEL\ )}
\DoxyCodeLine{07414\ \ \ \ \ \ \ decode\_pixels\ =\ decode\_simple[\ input\_type\ -\/\ STBIR\_TYPE\_UINT8\_SRGB\ ];}
\DoxyCodeLine{07415\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07416\ \ \ \ \ \ \ decode\_pixels\ =\ decode\_alphas[\ (\ info-\/>input\_pixel\_layout\_internal\ -\/\ STBIRI\_RGBA\ )\ \%\ (\ STBIRI\_AR-\/STBIRI\_RGBA+1\ )\ ][\ input\_type\ -\/\ STBIR\_TYPE\_UINT8\_SRGB\ ];}
\DoxyCodeLine{07417\ \ \ \}}
\DoxyCodeLine{07418\ }
\DoxyCodeLine{07419\ \ \ \textcolor{comment}{//\ setup\ the\ output\ format\ converters}}
\DoxyCodeLine{07420\ \ \ \textcolor{keywordflow}{if}\ (\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT8\ )\ ||\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT16\ )\ )}
\DoxyCodeLine{07421\ \ \ \{}
\DoxyCodeLine{07422\ \ \ \ \ \textcolor{keywordtype}{int}\ non\_scaled\ =\ 0;}
\DoxyCodeLine{07423\ }
\DoxyCodeLine{07424\ \ \ \ \ \textcolor{comment}{//\ check\ if\ we\ can\ run\ unscaled\ -\/\ 0-\/255.0/0-\/65535.0\ instead\ of\ 0-\/1.0\ (which\ is\ a\ tiny\ bit\ faster\ when\ doing\ linear\ 8-\/>8\ or\ 16-\/>16)}}
\DoxyCodeLine{07425\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ !info-\/>alpha\_weight\ )\ \&\&\ (\ !info-\/>alpha\_unweight\ )\ )\ \textcolor{comment}{//\ don't\ short\ circuit\ when\ alpha\ weighting\ (get\ everything\ to\ 0-\/1.0\ as\ usual)}}
\DoxyCodeLine{07426\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ input\_type\ ==\ STBIR\_TYPE\_UINT8\ )\ \&\&\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT8\ )\ )\ ||\ (\ (\ input\_type\ ==\ STBIR\_TYPE\_UINT16\ )\ \&\&\ (\ output\_type\ ==\ STBIR\_TYPE\_UINT16\ )\ )\ )}
\DoxyCodeLine{07427\ \ \ \ \ \ \ \ \ non\_scaled\ =\ 1;}
\DoxyCodeLine{07428\ }
\DoxyCodeLine{07429\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>output\_pixel\_layout\_internal\ <=\ STBIRI\_4CHANNEL\ )}
\DoxyCodeLine{07430\ \ \ \ \ \ \ encode\_pixels\ =\ encode\_simple\_scaled\_or\_not[\ output\_type\ ==\ STBIR\_TYPE\_UINT16\ ][\ non\_scaled\ ];}
\DoxyCodeLine{07431\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07432\ \ \ \ \ \ \ encode\_pixels\ =\ encode\_alphas\_scaled\_or\_not[\ (\ info-\/>output\_pixel\_layout\_internal\ -\/\ STBIRI\_RGBA\ )\ \%\ (\ STBIRI\_AR-\/STBIRI\_RGBA+1\ )\ ][\ output\_type\ ==\ STBIR\_TYPE\_UINT16\ ][\ non\_scaled\ ];}
\DoxyCodeLine{07433\ \ \ \}}
\DoxyCodeLine{07434\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07435\ \ \ \{}
\DoxyCodeLine{07436\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ info-\/>output\_pixel\_layout\_internal\ <=\ STBIRI\_4CHANNEL\ )}
\DoxyCodeLine{07437\ \ \ \ \ \ \ encode\_pixels\ =\ encode\_simple[\ output\_type\ -\/\ STBIR\_TYPE\_UINT8\_SRGB\ ];}
\DoxyCodeLine{07438\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07439\ \ \ \ \ \ \ encode\_pixels\ =\ encode\_alphas[\ (\ info-\/>output\_pixel\_layout\_internal\ -\/\ STBIRI\_RGBA\ )\ \%\ (\ STBIRI\_AR-\/STBIRI\_RGBA+1\ )\ ][\ output\_type\ -\/\ STBIR\_TYPE\_UINT8\_SRGB\ ];}
\DoxyCodeLine{07440\ \ \ \}}
\DoxyCodeLine{07441\ }
\DoxyCodeLine{07442\ \ \ info-\/>input\_type\ =\ input\_type;}
\DoxyCodeLine{07443\ \ \ info-\/>output\_type\ =\ output\_type;}
\DoxyCodeLine{07444\ \ \ info-\/>decode\_pixels\ =\ decode\_pixels;}
\DoxyCodeLine{07445\ \ \ info-\/>encode\_pixels\ =\ encode\_pixels;}
\DoxyCodeLine{07446\ \}}
\DoxyCodeLine{07447\ }
\DoxyCodeLine{07448\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_clip(\ \textcolor{keywordtype}{int}\ *\ outx,\ \textcolor{keywordtype}{int}\ *\ outsubw,\ \textcolor{keywordtype}{int}\ outw,\ \textcolor{keywordtype}{double}\ *\ u0,\ \textcolor{keywordtype}{double}\ *\ u1\ )}
\DoxyCodeLine{07449\ \{}
\DoxyCodeLine{07450\ \ \ \textcolor{keywordtype}{double}\ per,\ adj;}
\DoxyCodeLine{07451\ \ \ \textcolor{keywordtype}{int}\ over;}
\DoxyCodeLine{07452\ }
\DoxyCodeLine{07453\ \ \ \textcolor{comment}{//\ do\ left/top\ edge}}
\DoxyCodeLine{07454\ \ \ \textcolor{keywordflow}{if}\ (\ *outx\ <\ 0\ )}
\DoxyCodeLine{07455\ \ \ \{}
\DoxyCodeLine{07456\ \ \ \ \ per\ =\ (\ (double)*outx\ )\ /\ (\ (double)*outsubw\ );\ \textcolor{comment}{//\ is\ negative}}
\DoxyCodeLine{07457\ \ \ \ \ adj\ =\ per\ *\ (\ *u1\ -\/\ *u0\ );}
\DoxyCodeLine{07458\ \ \ \ \ *u0\ -\/=\ adj;\ \textcolor{comment}{//\ increases\ u0}}
\DoxyCodeLine{07459\ \ \ \ \ *outx\ =\ 0;}
\DoxyCodeLine{07460\ \ \ \}}
\DoxyCodeLine{07461\ }
\DoxyCodeLine{07462\ \ \ \textcolor{comment}{//\ do\ right/bot\ edge}}
\DoxyCodeLine{07463\ \ \ over\ =\ outw\ -\/\ (\ *outx\ +\ *outsubw\ );}
\DoxyCodeLine{07464\ \ \ \textcolor{keywordflow}{if}\ (\ over\ <\ 0\ )}
\DoxyCodeLine{07465\ \ \ \{}
\DoxyCodeLine{07466\ \ \ \ \ per\ =\ (\ (double)over\ )\ /\ (\ (double)*outsubw\ );\ \textcolor{comment}{//\ is\ negative}}
\DoxyCodeLine{07467\ \ \ \ \ adj\ =\ per\ *\ (\ *u1\ -\/\ *u0\ );}
\DoxyCodeLine{07468\ \ \ \ \ *u1\ +=\ adj;\ \textcolor{comment}{//\ decrease\ u1}}
\DoxyCodeLine{07469\ \ \ \ \ *outsubw\ =\ outw\ -\/\ *outx;}
\DoxyCodeLine{07470\ \ \ \}}
\DoxyCodeLine{07471\ \}}
\DoxyCodeLine{07472\ }
\DoxyCodeLine{07473\ \textcolor{comment}{//\ converts\ a\ double\ to\ a\ rational\ that\ has\ less\ than\ one\ float\ bit\ of\ error\ (returns\ 0\ if\ unable\ to\ do\ so)}}
\DoxyCodeLine{07474\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_double\_to\_rational(\textcolor{keywordtype}{double}\ f,\ stbir\_uint32\ limit,\ stbir\_uint32\ *numer,\ stbir\_uint32\ *denom,\ \textcolor{keywordtype}{int}\ limit\_denom\ )\ \textcolor{comment}{//\ limit\_denom\ (1)\ or\ limit\ numer\ (0)}}
\DoxyCodeLine{07475\ \{}
\DoxyCodeLine{07476\ \ \ \textcolor{keywordtype}{double}\ err;}
\DoxyCodeLine{07477\ \ \ stbir\_uint64\ top,\ bot;}
\DoxyCodeLine{07478\ \ \ stbir\_uint64\ numer\_last\ =\ 0;}
\DoxyCodeLine{07479\ \ \ stbir\_uint64\ denom\_last\ =\ 1;}
\DoxyCodeLine{07480\ \ \ stbir\_uint64\ numer\_estimate\ =\ 1;}
\DoxyCodeLine{07481\ \ \ stbir\_uint64\ denom\_estimate\ =\ 0;}
\DoxyCodeLine{07482\ }
\DoxyCodeLine{07483\ \ \ \textcolor{comment}{//\ scale\ to\ past\ float\ error\ range}}
\DoxyCodeLine{07484\ \ \ top\ =\ (stbir\_uint64)(\ f\ *\ (\textcolor{keywordtype}{double})(1\ <<\ 25)\ );}
\DoxyCodeLine{07485\ \ \ bot\ =\ 1\ <<\ 25;}
\DoxyCodeLine{07486\ }
\DoxyCodeLine{07487\ \ \ \textcolor{comment}{//\ keep\ refining,\ but\ usually\ stops\ in\ a\ few\ loops\ -\/\ usually\ 5\ for\ bad\ cases}}
\DoxyCodeLine{07488\ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{07489\ \ \ \{}
\DoxyCodeLine{07490\ \ \ \ \ stbir\_uint64\ est,\ temp;}
\DoxyCodeLine{07491\ }
\DoxyCodeLine{07492\ \ \ \ \ \textcolor{comment}{//\ hit\ limit,\ break\ out\ and\ do\ best\ full\ range\ estimate}}
\DoxyCodeLine{07493\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (\ (\ limit\_denom\ )\ ?\ denom\_estimate\ :\ numer\_estimate\ )\ >=\ limit\ )}
\DoxyCodeLine{07494\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07495\ }
\DoxyCodeLine{07496\ \ \ \ \ \textcolor{comment}{//\ is\ the\ current\ error\ less\ than\ 1\ bit\ of\ a\ float?\ if\ so,\ we're\ done}}
\DoxyCodeLine{07497\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ denom\_estimate\ )}
\DoxyCodeLine{07498\ \ \ \ \ \{}
\DoxyCodeLine{07499\ \ \ \ \ \ \ err\ =\ (\ (double)numer\_estimate\ /\ (\textcolor{keywordtype}{double})denom\_estimate\ )\ -\/\ f;}
\DoxyCodeLine{07500\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ err\ <\ 0.0\ )\ err\ =\ -\/err;}
\DoxyCodeLine{07501\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ err\ <\ (\ 1.0\ /\ (\textcolor{keywordtype}{double})(1<<24)\ )\ )}
\DoxyCodeLine{07502\ \ \ \ \ \ \ \{}
\DoxyCodeLine{07503\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ yup,\ found\ it}}
\DoxyCodeLine{07504\ \ \ \ \ \ \ \ \ *numer\ =\ (stbir\_uint32)\ numer\_estimate;}
\DoxyCodeLine{07505\ \ \ \ \ \ \ \ \ *denom\ =\ (stbir\_uint32)\ denom\_estimate;}
\DoxyCodeLine{07506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07507\ \ \ \ \ \ \ \}}
\DoxyCodeLine{07508\ \ \ \ \ \}}
\DoxyCodeLine{07509\ }
\DoxyCodeLine{07510\ \ \ \ \ \textcolor{comment}{//\ no\ more\ refinement\ bits\ left?\ break\ out\ and\ do\ full\ range\ estimate}}
\DoxyCodeLine{07511\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ bot\ ==\ 0\ )}
\DoxyCodeLine{07512\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07513\ }
\DoxyCodeLine{07514\ \ \ \ \ \textcolor{comment}{//\ gcd\ the\ estimate\ bits}}
\DoxyCodeLine{07515\ \ \ \ \ est\ =\ top\ /\ bot;}
\DoxyCodeLine{07516\ \ \ \ \ temp\ =\ top\ \%\ bot;}
\DoxyCodeLine{07517\ \ \ \ \ top\ =\ bot;}
\DoxyCodeLine{07518\ \ \ \ \ bot\ =\ temp;}
\DoxyCodeLine{07519\ }
\DoxyCodeLine{07520\ \ \ \ \ \textcolor{comment}{//\ move\ remainders}}
\DoxyCodeLine{07521\ \ \ \ \ temp\ =\ est\ *\ denom\_estimate\ +\ denom\_last;}
\DoxyCodeLine{07522\ \ \ \ \ denom\_last\ =\ denom\_estimate;}
\DoxyCodeLine{07523\ \ \ \ \ denom\_estimate\ =\ temp;}
\DoxyCodeLine{07524\ }
\DoxyCodeLine{07525\ \ \ \ \ \textcolor{comment}{//\ move\ remainders}}
\DoxyCodeLine{07526\ \ \ \ \ temp\ =\ est\ *\ numer\_estimate\ +\ numer\_last;}
\DoxyCodeLine{07527\ \ \ \ \ numer\_last\ =\ numer\_estimate;}
\DoxyCodeLine{07528\ \ \ \ \ numer\_estimate\ =\ temp;}
\DoxyCodeLine{07529\ \ \ \}}
\DoxyCodeLine{07530\ }
\DoxyCodeLine{07531\ \ \ \textcolor{comment}{//\ we\ didn't\ fine\ anything\ good\ enough\ for\ float,\ use\ a\ full\ range\ estimate}}
\DoxyCodeLine{07532\ \ \ \textcolor{keywordflow}{if}\ (\ limit\_denom\ )}
\DoxyCodeLine{07533\ \ \ \{}
\DoxyCodeLine{07534\ \ \ \ \ numer\_estimate=\ (stbir\_uint64)(\ f\ *\ (\textcolor{keywordtype}{double})limit\ +\ 0.5\ );}
\DoxyCodeLine{07535\ \ \ \ \ denom\_estimate\ =\ limit;}
\DoxyCodeLine{07536\ \ \ \}}
\DoxyCodeLine{07537\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07538\ \ \ \{}
\DoxyCodeLine{07539\ \ \ \ \ numer\_estimate\ =\ limit;}
\DoxyCodeLine{07540\ \ \ \ \ denom\_estimate\ =\ (stbir\_uint64)(\ (\ (\textcolor{keywordtype}{double})limit\ /\ f\ )\ +\ 0.5\ );}
\DoxyCodeLine{07541\ \ \ \}}
\DoxyCodeLine{07542\ }
\DoxyCodeLine{07543\ \ \ *numer\ =\ (stbir\_uint32)\ numer\_estimate;}
\DoxyCodeLine{07544\ \ \ *denom\ =\ (stbir\_uint32)\ denom\_estimate;}
\DoxyCodeLine{07545\ }
\DoxyCodeLine{07546\ \ \ err\ =\ (\ denom\_estimate\ )\ ?\ (\ (\ (\textcolor{keywordtype}{double})(stbir\_uint32)numer\_estimate\ /\ (\textcolor{keywordtype}{double})(stbir\_uint32)denom\_estimate\ )\ -\/\ f\ )\ :\ 1.0;}
\DoxyCodeLine{07547\ \ \ \textcolor{keywordflow}{if}\ (\ err\ <\ 0.0\ )\ err\ =\ -\/err;}
\DoxyCodeLine{07548\ \ \ \textcolor{keywordflow}{return}\ (\ err\ <\ (\ 1.0\ /\ (\textcolor{keywordtype}{double})(1<<24)\ )\ )\ ?\ 1\ :\ 0;}
\DoxyCodeLine{07549\ \}}
\DoxyCodeLine{07550\ }
\DoxyCodeLine{07551\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_calculate\_region\_transform(\ stbir\_\_scale\_info\ *\ scale\_info,\ \textcolor{keywordtype}{int}\ output\_full\_range,\ \textcolor{keywordtype}{int}\ *\ output\_offset,\ \textcolor{keywordtype}{int}\ output\_sub\_range,\ \textcolor{keywordtype}{int}\ input\_full\_range,\ \textcolor{keywordtype}{double}\ input\_s0,\ \textcolor{keywordtype}{double}\ input\_s1\ )}
\DoxyCodeLine{07552\ \{}
\DoxyCodeLine{07553\ \ \ \textcolor{keywordtype}{double}\ output\_range,\ input\_range,\ output\_s,\ input\_s,\ ratio,\ scale;}
\DoxyCodeLine{07554\ }
\DoxyCodeLine{07555\ \ \ input\_s\ =\ input\_s1\ -\/\ input\_s0;}
\DoxyCodeLine{07556\ }
\DoxyCodeLine{07557\ \ \ \textcolor{comment}{//\ null\ area}}
\DoxyCodeLine{07558\ \ \ \textcolor{keywordflow}{if}\ (\ (\ output\_full\_range\ ==\ 0\ )\ ||\ (\ input\_full\_range\ ==\ 0\ )\ ||}
\DoxyCodeLine{07559\ \ \ \ \ \ \ \ (\ output\_sub\_range\ ==\ 0\ )\ ||\ (\ input\_s\ <=\ stbir\_\_small\_float\ )\ )}
\DoxyCodeLine{07560\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07561\ }
\DoxyCodeLine{07562\ \ \ \textcolor{comment}{//\ are\ either\ of\ the\ ranges\ completely\ out\ of\ bounds?}}
\DoxyCodeLine{07563\ \ \ \textcolor{keywordflow}{if}\ (\ (\ *output\_offset\ >=\ output\_full\_range\ )\ ||\ (\ (\ *output\_offset\ +\ output\_sub\_range\ )\ <=\ 0\ )\ ||\ (\ input\_s0\ >=\ (1.0f-\/stbir\_\_small\_float)\ )\ ||\ (\ input\_s1\ <=\ stbir\_\_small\_float\ )\ )}
\DoxyCodeLine{07564\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07565\ }
\DoxyCodeLine{07566\ \ \ output\_range\ =\ (double)output\_full\_range;}
\DoxyCodeLine{07567\ \ \ input\_range\ =\ (double)input\_full\_range;}
\DoxyCodeLine{07568\ }
\DoxyCodeLine{07569\ \ \ output\_s\ =\ (\ (double)output\_sub\_range)\ /\ output\_range;}
\DoxyCodeLine{07570\ }
\DoxyCodeLine{07571\ \ \ \textcolor{comment}{//\ figure\ out\ the\ scaling\ to\ use}}
\DoxyCodeLine{07572\ \ \ ratio\ =\ output\_s\ /\ input\_s;}
\DoxyCodeLine{07573\ }
\DoxyCodeLine{07574\ \ \ \textcolor{comment}{//\ save\ scale\ before\ clipping}}
\DoxyCodeLine{07575\ \ \ scale\ =\ (\ output\_range\ /\ input\_range\ )\ *\ ratio;}
\DoxyCodeLine{07576\ \ \ scale\_info-\/>scale\ =\ (float)scale;}
\DoxyCodeLine{07577\ \ \ scale\_info-\/>inv\_scale\ =\ (float)(\ 1.0\ /\ scale\ );}
\DoxyCodeLine{07578\ }
\DoxyCodeLine{07579\ \ \ \textcolor{comment}{//\ clip\ output\ area\ to\ left/right\ output\ edges\ (and\ adjust\ input\ area)}}
\DoxyCodeLine{07580\ \ \ stbir\_\_clip(\ output\_offset,\ \&output\_sub\_range,\ output\_full\_range,\ \&input\_s0,\ \&input\_s1\ );}
\DoxyCodeLine{07581\ }
\DoxyCodeLine{07582\ \ \ \textcolor{comment}{//\ recalc\ input\ area}}
\DoxyCodeLine{07583\ \ \ input\_s\ =\ input\_s1\ -\/\ input\_s0;}
\DoxyCodeLine{07584\ }
\DoxyCodeLine{07585\ \ \ \textcolor{comment}{//\ after\ clipping\ do\ we\ have\ zero\ input\ area?}}
\DoxyCodeLine{07586\ \ \ \textcolor{keywordflow}{if}\ (\ input\_s\ <=\ stbir\_\_small\_float\ )}
\DoxyCodeLine{07587\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07588\ }
\DoxyCodeLine{07589\ \ \ \textcolor{comment}{//\ calculate\ and\ store\ the\ starting\ source\ offsets\ in\ output\ pixel\ space}}
\DoxyCodeLine{07590\ \ \ scale\_info-\/>pixel\_shift\ =\ (float)\ (\ input\_s0\ *\ ratio\ *\ output\_range\ );}
\DoxyCodeLine{07591\ }
\DoxyCodeLine{07592\ \ \ scale\_info-\/>scale\_is\_rational\ =\ stbir\_\_double\_to\_rational(\ scale,\ (\ scale\ <=\ 1.0\ )\ ?\ output\_full\_range\ :\ input\_full\_range,\ \&scale\_info-\/>scale\_numerator,\ \&scale\_info-\/>scale\_denominator,\ (\ scale\ >=\ 1.0\ )\ );}
\DoxyCodeLine{07593\ }
\DoxyCodeLine{07594\ \ \ scale\_info-\/>input\_full\_size\ =\ input\_full\_range;}
\DoxyCodeLine{07595\ \ \ scale\_info-\/>output\_sub\_size\ =\ output\_sub\_range;}
\DoxyCodeLine{07596\ }
\DoxyCodeLine{07597\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07598\ \}}
\DoxyCodeLine{07599\ }
\DoxyCodeLine{07600\ }
\DoxyCodeLine{07601\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_init\_and\_set\_layout(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_pixel\_layout\ pixel\_layout,\ stbir\_datatype\ data\_type\ )}
\DoxyCodeLine{07602\ \{}
\DoxyCodeLine{07603\ \ \ resize-\/>input\_cb\ =\ 0;}
\DoxyCodeLine{07604\ \ \ resize-\/>output\_cb\ =\ 0;}
\DoxyCodeLine{07605\ \ \ resize-\/>user\_data\ =\ resize;}
\DoxyCodeLine{07606\ \ \ resize-\/>samplers\ =\ 0;}
\DoxyCodeLine{07607\ \ \ resize-\/>called\_alloc\ =\ 0;}
\DoxyCodeLine{07608\ \ \ resize-\/>horizontal\_filter\ =\ STBIR\_FILTER\_DEFAULT;}
\DoxyCodeLine{07609\ \ \ resize-\/>horizontal\_filter\_kernel\ =\ 0;\ resize-\/>horizontal\_filter\_support\ =\ 0;}
\DoxyCodeLine{07610\ \ \ resize-\/>vertical\_filter\ =\ STBIR\_FILTER\_DEFAULT;}
\DoxyCodeLine{07611\ \ \ resize-\/>vertical\_filter\_kernel\ =\ 0;\ resize-\/>vertical\_filter\_support\ =\ 0;}
\DoxyCodeLine{07612\ \ \ resize-\/>horizontal\_edge\ =\ STBIR\_EDGE\_CLAMP;}
\DoxyCodeLine{07613\ \ \ resize-\/>vertical\_edge\ =\ STBIR\_EDGE\_CLAMP;}
\DoxyCodeLine{07614\ \ \ resize-\/>input\_s0\ =\ 0;\ resize-\/>input\_t0\ =\ 0;\ resize-\/>input\_s1\ =\ 1;\ resize-\/>input\_t1\ =\ 1;}
\DoxyCodeLine{07615\ \ \ resize-\/>output\_subx\ =\ 0;\ resize-\/>output\_suby\ =\ 0;\ resize-\/>output\_subw\ =\ resize-\/>output\_w;\ resize-\/>output\_subh\ =\ resize-\/>output\_h;}
\DoxyCodeLine{07616\ \ \ resize-\/>input\_data\_type\ =\ data\_type;}
\DoxyCodeLine{07617\ \ \ resize-\/>output\_data\_type\ =\ data\_type;}
\DoxyCodeLine{07618\ \ \ resize-\/>input\_pixel\_layout\_public\ =\ pixel\_layout;}
\DoxyCodeLine{07619\ \ \ resize-\/>output\_pixel\_layout\_public\ =\ pixel\_layout;}
\DoxyCodeLine{07620\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07621\ \}}
\DoxyCodeLine{07622\ }
\DoxyCodeLine{07623\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_init(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,}
\DoxyCodeLine{07624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels,\ \ \textcolor{keywordtype}{int}\ input\_w,\ \ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,\ \textcolor{comment}{//\ stride\ can\ be\ zero}}
\DoxyCodeLine{07625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,\ \textcolor{comment}{//\ stride\ can\ be\ zero}}
\DoxyCodeLine{07626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout,\ stbir\_datatype\ data\_type\ )}
\DoxyCodeLine{07627\ \{}
\DoxyCodeLine{07628\ \ \ resize-\/>input\_pixels\ =\ input\_pixels;}
\DoxyCodeLine{07629\ \ \ resize-\/>input\_w\ =\ input\_w;}
\DoxyCodeLine{07630\ \ \ resize-\/>input\_h\ =\ input\_h;}
\DoxyCodeLine{07631\ \ \ resize-\/>input\_stride\_in\_bytes\ =\ input\_stride\_in\_bytes;}
\DoxyCodeLine{07632\ \ \ resize-\/>output\_pixels\ =\ output\_pixels;}
\DoxyCodeLine{07633\ \ \ resize-\/>output\_w\ =\ output\_w;}
\DoxyCodeLine{07634\ \ \ resize-\/>output\_h\ =\ output\_h;}
\DoxyCodeLine{07635\ \ \ resize-\/>output\_stride\_in\_bytes\ =\ output\_stride\_in\_bytes;}
\DoxyCodeLine{07636\ \ \ resize-\/>fast\_alpha\ =\ 0;}
\DoxyCodeLine{07637\ }
\DoxyCodeLine{07638\ \ \ stbir\_\_init\_and\_set\_layout(\ resize,\ pixel\_layout,\ data\_type\ );}
\DoxyCodeLine{07639\ \}}
\DoxyCodeLine{07640\ }
\DoxyCodeLine{07641\ \textcolor{comment}{//\ You\ can\ update\ parameters\ any\ time\ after\ resize\_init}}
\DoxyCodeLine{07642\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_datatypes(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_datatype\ input\_type,\ stbir\_datatype\ output\_type\ )\ \ \textcolor{comment}{//\ by\ default,\ datatype\ from\ resize\_init}}
\DoxyCodeLine{07643\ \{}
\DoxyCodeLine{07644\ \ \ resize-\/>input\_data\_type\ =\ input\_type;}
\DoxyCodeLine{07645\ \ \ resize-\/>output\_data\_type\ =\ output\_type;}
\DoxyCodeLine{07646\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ )\ \&\&\ (\ !resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07647\ \ \ \ \ stbir\_\_update\_info\_from\_resize(\ resize-\/>samplers,\ resize\ );}
\DoxyCodeLine{07648\ \}}
\DoxyCodeLine{07649\ }
\DoxyCodeLine{07650\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_pixel\_callbacks(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_input\_callback\ *\ input\_cb,\ stbir\_output\_callback\ *\ output\_cb\ )\ \ \ \textcolor{comment}{//\ no\ callbacks\ by\ default}}
\DoxyCodeLine{07651\ \{}
\DoxyCodeLine{07652\ \ \ resize-\/>input\_cb\ =\ input\_cb;}
\DoxyCodeLine{07653\ \ \ resize-\/>output\_cb\ =\ output\_cb;}
\DoxyCodeLine{07654\ }
\DoxyCodeLine{07655\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ )\ \&\&\ (\ !resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07656\ \ \ \{}
\DoxyCodeLine{07657\ \ \ \ \ resize-\/>samplers-\/>in\_pixels\_cb\ =\ input\_cb;}
\DoxyCodeLine{07658\ \ \ \ \ resize-\/>samplers-\/>out\_pixels\_cb\ =\ output\_cb;}
\DoxyCodeLine{07659\ \ \ \}}
\DoxyCodeLine{07660\ \}}
\DoxyCodeLine{07661\ }
\DoxyCodeLine{07662\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_user\_data(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{void}\ *\ user\_data\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ pass\ back\ STBIR\_RESIZE*\ by\ default}}
\DoxyCodeLine{07663\ \{}
\DoxyCodeLine{07664\ \ \ resize-\/>user\_data\ =\ user\_data;}
\DoxyCodeLine{07665\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ )\ \&\&\ (\ !resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07666\ \ \ \ \ resize-\/>samplers-\/>user\_data\ =\ user\_data;}
\DoxyCodeLine{07667\ \}}
\DoxyCodeLine{07668\ }
\DoxyCodeLine{07669\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_set\_buffer\_ptrs(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *\ input\_pixels,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,\ \textcolor{keywordtype}{void}\ *\ output\_pixels,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes\ )}
\DoxyCodeLine{07670\ \{}
\DoxyCodeLine{07671\ \ \ resize-\/>input\_pixels\ =\ input\_pixels;}
\DoxyCodeLine{07672\ \ \ resize-\/>input\_stride\_in\_bytes\ =\ input\_stride\_in\_bytes;}
\DoxyCodeLine{07673\ \ \ resize-\/>output\_pixels\ =\ output\_pixels;}
\DoxyCodeLine{07674\ \ \ resize-\/>output\_stride\_in\_bytes\ =\ output\_stride\_in\_bytes;}
\DoxyCodeLine{07675\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ )\ \&\&\ (\ !resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07676\ \ \ \ \ stbir\_\_update\_info\_from\_resize(\ resize-\/>samplers,\ resize\ );}
\DoxyCodeLine{07677\ \}}
\DoxyCodeLine{07678\ }
\DoxyCodeLine{07679\ }
\DoxyCodeLine{07680\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_edgemodes(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_edge\ horizontal\_edge,\ stbir\_edge\ vertical\_edge\ )\ \ \ \ \ \ \ \textcolor{comment}{//\ CLAMP\ by\ default}}
\DoxyCodeLine{07681\ \{}
\DoxyCodeLine{07682\ \ \ resize-\/>horizontal\_edge\ =\ horizontal\_edge;}
\DoxyCodeLine{07683\ \ \ resize-\/>vertical\_edge\ =\ vertical\_edge;}
\DoxyCodeLine{07684\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07685\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07686\ \}}
\DoxyCodeLine{07687\ }
\DoxyCodeLine{07688\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_filters(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_filter\ horizontal\_filter,\ stbir\_filter\ vertical\_filter\ )\ \textcolor{comment}{//\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE/DOWNSAMPLE\ by\ default}}
\DoxyCodeLine{07689\ \{}
\DoxyCodeLine{07690\ \ \ resize-\/>horizontal\_filter\ =\ horizontal\_filter;}
\DoxyCodeLine{07691\ \ \ resize-\/>vertical\_filter\ =\ vertical\_filter;}
\DoxyCodeLine{07692\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07693\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07694\ \}}
\DoxyCodeLine{07695\ }
\DoxyCodeLine{07696\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_filter\_callbacks(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_\_kernel\_callback\ *\ horizontal\_filter,\ stbir\_\_support\_callback\ *\ horizontal\_support,\ stbir\_\_kernel\_callback\ *\ vertical\_filter,\ stbir\_\_support\_callback\ *\ vertical\_support\ )}
\DoxyCodeLine{07697\ \{}
\DoxyCodeLine{07698\ \ \ resize-\/>horizontal\_filter\_kernel\ =\ horizontal\_filter;\ resize-\/>horizontal\_filter\_support\ =\ horizontal\_support;}
\DoxyCodeLine{07699\ \ \ resize-\/>vertical\_filter\_kernel\ =\ vertical\_filter;\ resize-\/>vertical\_filter\_support\ =\ vertical\_support;}
\DoxyCodeLine{07700\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07701\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07702\ \}}
\DoxyCodeLine{07703\ }
\DoxyCodeLine{07704\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_pixel\_layouts(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ stbir\_pixel\_layout\ input\_pixel\_layout,\ stbir\_pixel\_layout\ output\_pixel\_layout\ )\ \ \ \textcolor{comment}{//\ sets\ new\ pixel\ layouts}}
\DoxyCodeLine{07705\ \{}
\DoxyCodeLine{07706\ \ \ resize-\/>input\_pixel\_layout\_public\ =\ input\_pixel\_layout;}
\DoxyCodeLine{07707\ \ \ resize-\/>output\_pixel\_layout\_public\ =\ output\_pixel\_layout;}
\DoxyCodeLine{07708\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07709\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07710\ \}}
\DoxyCodeLine{07711\ }
\DoxyCodeLine{07712\ }
\DoxyCodeLine{07713\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_non\_pm\_alpha\_speed\_over\_quality(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ non\_pma\_alpha\_speed\_over\_quality\ )\ \ \ \textcolor{comment}{//\ sets\ alpha\ speed}}
\DoxyCodeLine{07714\ \{}
\DoxyCodeLine{07715\ \ \ resize-\/>fast\_alpha\ =\ non\_pma\_alpha\_speed\_over\_quality;}
\DoxyCodeLine{07716\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07717\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07718\ \}}
\DoxyCodeLine{07719\ }
\DoxyCodeLine{07720\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_input\_subrect(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{double}\ s0,\ \textcolor{keywordtype}{double}\ t0,\ \textcolor{keywordtype}{double}\ s1,\ \textcolor{keywordtype}{double}\ t1\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ sets\ input\ region\ (full\ region\ by\ default)}}
\DoxyCodeLine{07721\ \{}
\DoxyCodeLine{07722\ \ \ resize-\/>input\_s0\ =\ s0;}
\DoxyCodeLine{07723\ \ \ resize-\/>input\_t0\ =\ t0;}
\DoxyCodeLine{07724\ \ \ resize-\/>input\_s1\ =\ s1;}
\DoxyCodeLine{07725\ \ \ resize-\/>input\_t1\ =\ t1;}
\DoxyCodeLine{07726\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07727\ }
\DoxyCodeLine{07728\ \ \ \textcolor{comment}{//\ are\ we\ inbounds?}}
\DoxyCodeLine{07729\ \ \ \textcolor{keywordflow}{if}\ (\ (\ s1\ <\ stbir\_\_small\_float\ )\ ||\ (\ (s1-\/s0)\ <\ stbir\_\_small\_float\ )\ ||}
\DoxyCodeLine{07730\ \ \ \ \ \ \ \ (\ t1\ <\ stbir\_\_small\_float\ )\ ||\ (\ (t1-\/t0)\ <\ stbir\_\_small\_float\ )\ ||}
\DoxyCodeLine{07731\ \ \ \ \ \ \ \ (\ s0\ >\ (1.0f-\/stbir\_\_small\_float)\ )\ ||}
\DoxyCodeLine{07732\ \ \ \ \ \ \ \ (\ t0\ >\ (1.0f-\/stbir\_\_small\_float)\ )\ )}
\DoxyCodeLine{07733\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07734\ }
\DoxyCodeLine{07735\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07736\ \}}
\DoxyCodeLine{07737\ }
\DoxyCodeLine{07738\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_output\_pixel\_subrect(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ subx,\ \textcolor{keywordtype}{int}\ suby,\ \textcolor{keywordtype}{int}\ subw,\ \textcolor{keywordtype}{int}\ subh\ )\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ sets\ input\ region\ (full\ region\ by\ default)}}
\DoxyCodeLine{07739\ \{}
\DoxyCodeLine{07740\ \ \ resize-\/>output\_subx\ =\ subx;}
\DoxyCodeLine{07741\ \ \ resize-\/>output\_suby\ =\ suby;}
\DoxyCodeLine{07742\ \ \ resize-\/>output\_subw\ =\ subw;}
\DoxyCodeLine{07743\ \ \ resize-\/>output\_subh\ =\ subh;}
\DoxyCodeLine{07744\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07745\ }
\DoxyCodeLine{07746\ \ \ \textcolor{comment}{//\ are\ we\ inbounds?}}
\DoxyCodeLine{07747\ \ \ \textcolor{keywordflow}{if}\ (\ (\ subx\ >=\ resize-\/>output\_w\ )\ ||\ (\ (\ subx\ +\ subw\ )\ <=\ 0\ )\ ||\ (\ suby\ >=\ resize-\/>output\_h\ )\ ||\ (\ (\ suby\ +\ subh\ )\ <=\ 0\ )\ ||\ (\ subw\ ==\ 0\ )\ ||\ (\ subh\ ==\ 0\ )\ )}
\DoxyCodeLine{07748\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07749\ }
\DoxyCodeLine{07750\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07751\ \}}
\DoxyCodeLine{07752\ }
\DoxyCodeLine{07753\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_set\_pixel\_subrect(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ subx,\ \textcolor{keywordtype}{int}\ suby,\ \textcolor{keywordtype}{int}\ subw,\ \textcolor{keywordtype}{int}\ subh\ )\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ sets\ both\ regions\ (full\ regions\ by\ default)}}
\DoxyCodeLine{07754\ \{}
\DoxyCodeLine{07755\ \ \ \textcolor{keywordtype}{double}\ s0,\ t0,\ s1,\ t1;}
\DoxyCodeLine{07756\ }
\DoxyCodeLine{07757\ \ \ s0\ =\ (\ (double)subx\ )\ /\ (\ (double)resize-\/>output\_w\ );}
\DoxyCodeLine{07758\ \ \ t0\ =\ (\ (double)suby\ )\ /\ (\ (double)resize-\/>output\_h\ );}
\DoxyCodeLine{07759\ \ \ s1\ =\ (\ (double)(subx+subw)\ )\ /\ (\ (\textcolor{keywordtype}{double})resize-\/>output\_w\ );}
\DoxyCodeLine{07760\ \ \ t1\ =\ (\ (double)(suby+subh)\ )\ /\ (\ (\textcolor{keywordtype}{double})resize-\/>output\_h\ );}
\DoxyCodeLine{07761\ }
\DoxyCodeLine{07762\ \ \ resize-\/>input\_s0\ =\ s0;}
\DoxyCodeLine{07763\ \ \ resize-\/>input\_t0\ =\ t0;}
\DoxyCodeLine{07764\ \ \ resize-\/>input\_s1\ =\ s1;}
\DoxyCodeLine{07765\ \ \ resize-\/>input\_t1\ =\ t1;}
\DoxyCodeLine{07766\ \ \ resize-\/>output\_subx\ =\ subx;}
\DoxyCodeLine{07767\ \ \ resize-\/>output\_suby\ =\ suby;}
\DoxyCodeLine{07768\ \ \ resize-\/>output\_subw\ =\ subw;}
\DoxyCodeLine{07769\ \ \ resize-\/>output\_subh\ =\ subh;}
\DoxyCodeLine{07770\ \ \ resize-\/>needs\_rebuild\ =\ 1;}
\DoxyCodeLine{07771\ }
\DoxyCodeLine{07772\ \ \ \textcolor{comment}{//\ are\ we\ inbounds?}}
\DoxyCodeLine{07773\ \ \ \textcolor{keywordflow}{if}\ (\ (\ subx\ >=\ resize-\/>output\_w\ )\ ||\ (\ (\ subx\ +\ subw\ )\ <=\ 0\ )\ ||\ (\ suby\ >=\ resize-\/>output\_h\ )\ ||\ (\ (\ suby\ +\ subh\ )\ <=\ 0\ )\ ||\ (\ subw\ ==\ 0\ )\ ||\ (\ subh\ ==\ 0\ )\ )}
\DoxyCodeLine{07774\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07775\ }
\DoxyCodeLine{07776\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07777\ \}}
\DoxyCodeLine{07778\ }
\DoxyCodeLine{07779\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_perform\_build(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ splits\ )}
\DoxyCodeLine{07780\ \{}
\DoxyCodeLine{07781\ \ \ stbir\_\_contributors\ conservative\ =\ \{\ 0,\ 0\ \};}
\DoxyCodeLine{07782\ \ \ stbir\_\_sampler\ horizontal,\ vertical;}
\DoxyCodeLine{07783\ \ \ \textcolor{keywordtype}{int}\ new\_output\_subx,\ new\_output\_suby;}
\DoxyCodeLine{07784\ \ \ stbir\_\_info\ *\ out\_info;}
\DoxyCodeLine{07785\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{07786\ \ \ stbir\_\_info\ profile\_infod;\ \ \textcolor{comment}{//\ used\ to\ contain\ building\ profile\ info\ before\ everything\ is\ allocated}}
\DoxyCodeLine{07787\ \ \ stbir\_\_info\ *\ profile\_info\ =\ \&profile\_infod;}
\DoxyCodeLine{07788\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{07789\ }
\DoxyCodeLine{07790\ \ \ \textcolor{comment}{//\ have\ we\ already\ built\ the\ samplers?}}
\DoxyCodeLine{07791\ \ \ \textcolor{keywordflow}{if}\ (\ resize-\/>samplers\ )}
\DoxyCodeLine{07792\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07793\ }
\DoxyCodeLine{07794\ \textcolor{preprocessor}{\ \ \#define\ STBIR\_RETURN\_ERROR\_AND\_ASSERT(\ exp\ )\ \ STBIR\_ASSERT(\ !(exp)\ );\ if\ (exp)\ return\ 0;}}
\DoxyCodeLine{07795\ \ \ STBIR\_RETURN\_ERROR\_AND\_ASSERT(\ (\textcolor{keywordtype}{unsigned})resize-\/>horizontal\_filter\ >=\ STBIR\_FILTER\_OTHER)}
\DoxyCodeLine{07796\ \ \ STBIR\_RETURN\_ERROR\_AND\_ASSERT(\ (\textcolor{keywordtype}{unsigned})resize-\/>vertical\_filter\ >=\ STBIR\_FILTER\_OTHER)}
\DoxyCodeLine{07797\ \ \ \textcolor{preprocessor}{\#undef\ STBIR\_RETURN\_ERROR\_AND\_ASSERT}}
\DoxyCodeLine{07798\ }
\DoxyCodeLine{07799\ \ \ \textcolor{keywordflow}{if}\ (\ splits\ <=\ 0\ )}
\DoxyCodeLine{07800\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07801\ }
\DoxyCodeLine{07802\ \ \ STBIR\_PROFILE\_BUILD\_FIRST\_START(\ build\ );}
\DoxyCodeLine{07803\ }
\DoxyCodeLine{07804\ \ \ new\_output\_subx\ =\ resize-\/>output\_subx;}
\DoxyCodeLine{07805\ \ \ new\_output\_suby\ =\ resize-\/>output\_suby;}
\DoxyCodeLine{07806\ }
\DoxyCodeLine{07807\ \ \ \textcolor{comment}{//\ do\ horizontal\ clip\ and\ scale\ calcs}}
\DoxyCodeLine{07808\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_\_calculate\_region\_transform(\ \&horizontal.scale\_info,\ resize-\/>output\_w,\ \&new\_output\_subx,\ resize-\/>output\_subw,\ resize-\/>input\_w,\ resize-\/>input\_s0,\ resize-\/>input\_s1\ )\ )}
\DoxyCodeLine{07809\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07810\ }
\DoxyCodeLine{07811\ \ \ \textcolor{comment}{//\ do\ vertical\ clip\ and\ scale\ calcs}}
\DoxyCodeLine{07812\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_\_calculate\_region\_transform(\ \&vertical.scale\_info,\ resize-\/>output\_h,\ \&new\_output\_suby,\ resize-\/>output\_subh,\ resize-\/>input\_h,\ resize-\/>input\_t0,\ resize-\/>input\_t1\ )\ )}
\DoxyCodeLine{07813\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07814\ }
\DoxyCodeLine{07815\ \ \ \textcolor{comment}{//\ if\ nothing\ to\ do,\ just\ return}}
\DoxyCodeLine{07816\ \ \ \textcolor{keywordflow}{if}\ (\ (\ horizontal.scale\_info.output\_sub\_size\ ==\ 0\ )\ ||\ (\ vertical.scale\_info.output\_sub\_size\ ==\ 0\ )\ )}
\DoxyCodeLine{07817\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07818\ }
\DoxyCodeLine{07819\ \ \ stbir\_\_set\_sampler(\&horizontal,\ resize-\/>horizontal\_filter,\ resize-\/>horizontal\_filter\_kernel,\ resize-\/>horizontal\_filter\_support,\ resize-\/>horizontal\_edge,\ \&horizontal.scale\_info,\ 1,\ resize-\/>user\_data\ );}
\DoxyCodeLine{07820\ \ \ stbir\_\_get\_conservative\_extents(\ \&horizontal,\ \&conservative,\ resize-\/>user\_data\ );}
\DoxyCodeLine{07821\ \ \ stbir\_\_set\_sampler(\&vertical,\ resize-\/>vertical\_filter,\ resize-\/>horizontal\_filter\_kernel,\ resize-\/>vertical\_filter\_support,\ resize-\/>vertical\_edge,\ \&vertical.scale\_info,\ 0,\ resize-\/>user\_data\ );}
\DoxyCodeLine{07822\ }
\DoxyCodeLine{07823\ \ \ \textcolor{keywordflow}{if}\ (\ (\ vertical.scale\_info.output\_sub\_size\ /\ splits\ )\ <\ STBIR\_FORCE\_MINIMUM\_SCANLINES\_FOR\_SPLITS\ )\ \textcolor{comment}{//\ each\ split\ should\ be\ a\ minimum\ of\ 4\ scanlines\ (handwavey\ choice)}}
\DoxyCodeLine{07824\ \ \ \{}
\DoxyCodeLine{07825\ \ \ \ \ splits\ =\ vertical.scale\_info.output\_sub\_size\ /\ STBIR\_FORCE\_MINIMUM\_SCANLINES\_FOR\_SPLITS;}
\DoxyCodeLine{07826\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ splits\ ==\ 0\ )\ splits\ =\ 1;}
\DoxyCodeLine{07827\ \ \ \}}
\DoxyCodeLine{07828\ }
\DoxyCodeLine{07829\ \ \ STBIR\_PROFILE\_BUILD\_START(\ alloc\ );}
\DoxyCodeLine{07830\ \ \ out\_info\ =\ stbir\_\_alloc\_internal\_mem\_and\_build\_samplers(\ \&horizontal,\ \&vertical,\ \&conservative,\ resize-\/>input\_pixel\_layout\_public,\ resize-\/>output\_pixel\_layout\_public,\ splits,\ new\_output\_subx,\ new\_output\_suby,\ resize-\/>fast\_alpha,\ resize-\/>user\_data\ STBIR\_ONLY\_PROFILE\_BUILD\_SET\_INFO\ );}
\DoxyCodeLine{07831\ \ \ STBIR\_PROFILE\_BUILD\_END(\ alloc\ );}
\DoxyCodeLine{07832\ \ \ STBIR\_PROFILE\_BUILD\_END(\ build\ );}
\DoxyCodeLine{07833\ }
\DoxyCodeLine{07834\ \ \ \textcolor{keywordflow}{if}\ (\ out\_info\ )}
\DoxyCodeLine{07835\ \ \ \{}
\DoxyCodeLine{07836\ \ \ \ \ resize-\/>splits\ =\ splits;}
\DoxyCodeLine{07837\ \ \ \ \ resize-\/>samplers\ =\ out\_info;}
\DoxyCodeLine{07838\ \ \ \ \ resize-\/>needs\_rebuild\ =\ 0;}
\DoxyCodeLine{07839\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{07840\ \ \ \ \ \ \ STBIR\_MEMCPY(\ \&out\_info-\/>profile,\ \&profile\_infod.profile,\ \textcolor{keyword}{sizeof}(\ out\_info-\/>profile\ )\ );}
\DoxyCodeLine{07841\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{07842\ }
\DoxyCodeLine{07843\ \ \ \ \ \textcolor{comment}{//\ update\ anything\ that\ can\ be\ changed\ without\ recalcing\ samplers}}
\DoxyCodeLine{07844\ \ \ \ \ stbir\_\_update\_info\_from\_resize(\ out\_info,\ resize\ );}
\DoxyCodeLine{07845\ }
\DoxyCodeLine{07846\ \ \ \ \ \textcolor{keywordflow}{return}\ splits;}
\DoxyCodeLine{07847\ \ \ \}}
\DoxyCodeLine{07848\ }
\DoxyCodeLine{07849\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07850\ \}}
\DoxyCodeLine{07851\ }
\DoxyCodeLine{07852\ \textcolor{keywordtype}{void}\ stbir\_free\_samplers(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ )}
\DoxyCodeLine{07853\ \{}
\DoxyCodeLine{07854\ \ \ \textcolor{keywordflow}{if}\ (\ resize-\/>samplers\ )}
\DoxyCodeLine{07855\ \ \ \{}
\DoxyCodeLine{07856\ \ \ \ \ stbir\_\_free\_internal\_mem(\ resize-\/>samplers\ );}
\DoxyCodeLine{07857\ \ \ \ \ resize-\/>samplers\ =\ 0;}
\DoxyCodeLine{07858\ \ \ \ \ resize-\/>called\_alloc\ =\ 0;}
\DoxyCodeLine{07859\ \ \ \}}
\DoxyCodeLine{07860\ \}}
\DoxyCodeLine{07861\ }
\DoxyCodeLine{07862\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_build\_samplers\_with\_splits(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ splits\ )}
\DoxyCodeLine{07863\ \{}
\DoxyCodeLine{07864\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ ==\ 0\ )\ ||\ (\ resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07865\ \ \ \{}
\DoxyCodeLine{07866\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ resize-\/>samplers\ )}
\DoxyCodeLine{07867\ \ \ \ \ \ \ stbir\_free\_samplers(\ resize\ );}
\DoxyCodeLine{07868\ }
\DoxyCodeLine{07869\ \ \ \ \ resize-\/>called\_alloc\ =\ 1;}
\DoxyCodeLine{07870\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_perform\_build(\ resize,\ splits\ );}
\DoxyCodeLine{07871\ \ \ \}}
\DoxyCodeLine{07872\ }
\DoxyCodeLine{07873\ \ \ STBIR\_PROFILE\_BUILD\_CLEAR(\ resize-\/>samplers\ );}
\DoxyCodeLine{07874\ }
\DoxyCodeLine{07875\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07876\ \}}
\DoxyCodeLine{07877\ }
\DoxyCodeLine{07878\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_build\_samplers(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ )}
\DoxyCodeLine{07879\ \{}
\DoxyCodeLine{07880\ \ \ \textcolor{keywordflow}{return}\ stbir\_build\_samplers\_with\_splits(\ resize,\ 1\ );}
\DoxyCodeLine{07881\ \}}
\DoxyCodeLine{07882\ }
\DoxyCodeLine{07883\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_extended(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize\ )}
\DoxyCodeLine{07884\ \{}
\DoxyCodeLine{07885\ \ \ \textcolor{keywordtype}{int}\ result;}
\DoxyCodeLine{07886\ }
\DoxyCodeLine{07887\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ ==\ 0\ )\ ||\ (\ resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07888\ \ \ \{}
\DoxyCodeLine{07889\ \ \ \ \ \textcolor{keywordtype}{int}\ alloc\_state\ =\ resize-\/>called\_alloc;\ \ \textcolor{comment}{//\ remember\ allocated\ state}}
\DoxyCodeLine{07890\ }
\DoxyCodeLine{07891\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ resize-\/>samplers\ )}
\DoxyCodeLine{07892\ \ \ \ \ \{}
\DoxyCodeLine{07893\ \ \ \ \ \ \ stbir\_\_free\_internal\_mem(\ resize-\/>samplers\ );}
\DoxyCodeLine{07894\ \ \ \ \ \ \ resize-\/>samplers\ =\ 0;}
\DoxyCodeLine{07895\ \ \ \ \ \}}
\DoxyCodeLine{07896\ }
\DoxyCodeLine{07897\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_build\_samplers(\ resize\ )\ )}
\DoxyCodeLine{07898\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07899\ }
\DoxyCodeLine{07900\ \ \ \ \ resize-\/>called\_alloc\ =\ alloc\_state;}
\DoxyCodeLine{07901\ }
\DoxyCodeLine{07902\ \ \ \ \ \textcolor{comment}{//\ if\ build\_samplers\ succeeded\ (above),\ but\ there\ are\ no\ samplers\ set,\ then}}
\DoxyCodeLine{07903\ \ \ \ \ \textcolor{comment}{//\ \ \ the\ area\ to\ stretch\ into\ was\ zero\ pixels,\ so\ don't\ do\ anything\ and\ return}}
\DoxyCodeLine{07904\ \ \ \ \ \textcolor{comment}{//\ \ \ success}}
\DoxyCodeLine{07905\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ resize-\/>samplers\ ==\ 0\ )}
\DoxyCodeLine{07906\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07907\ \ \ \}}
\DoxyCodeLine{07908\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{07909\ \ \ \{}
\DoxyCodeLine{07910\ \ \ \ \ \textcolor{comment}{//\ didn't\ build\ anything\ -\/\ clear\ it}}
\DoxyCodeLine{07911\ \ \ \ \ STBIR\_PROFILE\_BUILD\_CLEAR(\ resize-\/>samplers\ );}
\DoxyCodeLine{07912\ \ \ \}}
\DoxyCodeLine{07913\ }
\DoxyCodeLine{07914\ \ \ \textcolor{comment}{//\ do\ resize}}
\DoxyCodeLine{07915\ \ \ result\ =\ stbir\_\_perform\_resize(\ resize-\/>samplers,\ 0,\ resize-\/>splits\ );}
\DoxyCodeLine{07916\ }
\DoxyCodeLine{07917\ \ \ \textcolor{comment}{//\ if\ we\ alloced,\ then\ free}}
\DoxyCodeLine{07918\ \ \ \textcolor{keywordflow}{if}\ (\ !resize-\/>called\_alloc\ )}
\DoxyCodeLine{07919\ \ \ \{}
\DoxyCodeLine{07920\ \ \ \ \ stbir\_free\_samplers(\ resize\ );}
\DoxyCodeLine{07921\ \ \ \ \ resize-\/>samplers\ =\ 0;}
\DoxyCodeLine{07922\ \ \ \}}
\DoxyCodeLine{07923\ }
\DoxyCodeLine{07924\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{07925\ \}}
\DoxyCodeLine{07926\ }
\DoxyCodeLine{07927\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_extended\_split(\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ *\ resize,\ \textcolor{keywordtype}{int}\ split\_start,\ \textcolor{keywordtype}{int}\ split\_count\ )}
\DoxyCodeLine{07928\ \{}
\DoxyCodeLine{07929\ \ \ STBIR\_ASSERT(\ resize-\/>samplers\ );}
\DoxyCodeLine{07930\ }
\DoxyCodeLine{07931\ \ \ \textcolor{comment}{//\ if\ we're\ just\ doing\ the\ whole\ thing,\ call\ full}}
\DoxyCodeLine{07932\ \ \ \textcolor{keywordflow}{if}\ (\ (\ split\_start\ ==\ -\/1\ )\ ||\ (\ (\ split\_start\ ==\ 0\ )\ \&\&\ (\ split\_count\ ==\ resize-\/>splits\ )\ )\ )}
\DoxyCodeLine{07933\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_resize\_extended(\ resize\ );}
\DoxyCodeLine{07934\ }
\DoxyCodeLine{07935\ \ \ \textcolor{comment}{//\ you\ **must**\ build\ samplers\ first\ when\ using\ split\ resize}}
\DoxyCodeLine{07936\ \ \ \textcolor{keywordflow}{if}\ (\ (\ resize-\/>samplers\ ==\ 0\ )\ ||\ (\ resize-\/>needs\_rebuild\ )\ )}
\DoxyCodeLine{07937\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07938\ }
\DoxyCodeLine{07939\ \ \ \textcolor{keywordflow}{if}\ (\ (\ split\_start\ >=\ resize-\/>splits\ )\ ||\ (\ split\_start\ <\ 0\ )\ ||\ (\ (\ split\_start\ +\ split\_count\ )\ >\ resize-\/>splits\ )\ ||\ (\ split\_count\ <=\ 0\ )\ )}
\DoxyCodeLine{07940\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07941\ }
\DoxyCodeLine{07942\ \ \ \textcolor{comment}{//\ do\ resize}}
\DoxyCodeLine{07943\ \ \ \textcolor{keywordflow}{return}\ stbir\_\_perform\_resize(\ resize-\/>samplers,\ split\_start,\ split\_count\ );}
\DoxyCodeLine{07944\ \}}
\DoxyCodeLine{07945\ }
\DoxyCodeLine{07946\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_check\_output\_stuff(\ \textcolor{keywordtype}{void}\ **\ ret\_ptr,\ \textcolor{keywordtype}{int}\ *\ ret\_pitch,\ \textcolor{keywordtype}{void}\ *\ output\_pixels,\ \textcolor{keywordtype}{int}\ type\_size,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,\ stbir\_internal\_pixel\_layout\ pixel\_layout\ )}
\DoxyCodeLine{07947\ \{}
\DoxyCodeLine{07948\ \ \ \textcolor{keywordtype}{size\_t}\ size;}
\DoxyCodeLine{07949\ \ \ \textcolor{keywordtype}{int}\ pitch;}
\DoxyCodeLine{07950\ \ \ \textcolor{keywordtype}{void}\ *\ ptr;}
\DoxyCodeLine{07951\ }
\DoxyCodeLine{07952\ \ \ pitch\ =\ output\_w\ *\ type\_size\ *\ stbir\_\_pixel\_channels[\ pixel\_layout\ ];}
\DoxyCodeLine{07953\ \ \ \textcolor{keywordflow}{if}\ (\ pitch\ ==\ 0\ )}
\DoxyCodeLine{07954\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07955\ }
\DoxyCodeLine{07956\ \ \ \textcolor{keywordflow}{if}\ (\ output\_stride\_in\_bytes\ ==\ 0\ )}
\DoxyCodeLine{07957\ \ \ \ \ output\_stride\_in\_bytes\ =\ pitch;}
\DoxyCodeLine{07958\ }
\DoxyCodeLine{07959\ \ \ \textcolor{keywordflow}{if}\ (\ output\_stride\_in\_bytes\ <\ pitch\ )}
\DoxyCodeLine{07960\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07961\ }
\DoxyCodeLine{07962\ \ \ size\ =\ (size\_t)output\_stride\_in\_bytes\ *\ (\textcolor{keywordtype}{size\_t})output\_h;}
\DoxyCodeLine{07963\ \ \ \textcolor{keywordflow}{if}\ (\ size\ ==\ 0\ )}
\DoxyCodeLine{07964\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07965\ }
\DoxyCodeLine{07966\ \ \ *ret\_ptr\ =\ 0;}
\DoxyCodeLine{07967\ \ \ *ret\_pitch\ =\ output\_stride\_in\_bytes;}
\DoxyCodeLine{07968\ }
\DoxyCodeLine{07969\ \ \ \textcolor{keywordflow}{if}\ (\ output\_pixels\ ==\ 0\ )}
\DoxyCodeLine{07970\ \ \ \{}
\DoxyCodeLine{07971\ \ \ \ \ ptr\ =\ STBIR\_MALLOC(\ size,\ 0\ );}
\DoxyCodeLine{07972\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ ptr\ ==\ 0\ )}
\DoxyCodeLine{07973\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07974\ }
\DoxyCodeLine{07975\ \ \ \ \ *ret\_ptr\ =\ ptr;}
\DoxyCodeLine{07976\ \ \ \ \ *ret\_pitch\ =\ pitch;}
\DoxyCodeLine{07977\ \ \ \}}
\DoxyCodeLine{07978\ }
\DoxyCodeLine{07979\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{07980\ \}}
\DoxyCodeLine{07981\ }
\DoxyCodeLine{07982\ }
\DoxyCodeLine{07983\ STBIRDEF\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ stbir\_resize\_uint8\_linear(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{07984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{07985\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout\ )}
\DoxyCodeLine{07986\ \{}
\DoxyCodeLine{07987\ \ \ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ resize;}
\DoxyCodeLine{07988\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ optr;}
\DoxyCodeLine{07989\ \ \ \textcolor{keywordtype}{int}\ opitch;}
\DoxyCodeLine{07990\ }
\DoxyCodeLine{07991\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_\_check\_output\_stuff(\ (\textcolor{keywordtype}{void}**)\&optr,\ \&opitch,\ output\_pixels,\ \textcolor{keyword}{sizeof}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ ),\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[\ pixel\_layout\ ]\ )\ )}
\DoxyCodeLine{07992\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{07993\ }
\DoxyCodeLine{07994\ \ \ stbir\_resize\_init(\ \&resize,}
\DoxyCodeLine{07995\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}
\DoxyCodeLine{07996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (optr)\ ?\ optr\ :\ output\_pixels,\ output\_w,\ output\_h,\ opitch,}
\DoxyCodeLine{07997\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout,\ STBIR\_TYPE\_UINT8\ );}
\DoxyCodeLine{07998\ }
\DoxyCodeLine{07999\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_resize\_extended(\ \&resize\ )\ )}
\DoxyCodeLine{08000\ \ \ \{}
\DoxyCodeLine{08001\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ optr\ )}
\DoxyCodeLine{08002\ \ \ \ \ \ \ STBIR\_FREE(\ optr,\ 0\ );}
\DoxyCodeLine{08003\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08004\ \ \ \}}
\DoxyCodeLine{08005\ }
\DoxyCodeLine{08006\ \ \ \textcolor{keywordflow}{return}\ (optr)\ ?\ optr\ :\ output\_pixels;}
\DoxyCodeLine{08007\ \}}
\DoxyCodeLine{08008\ }
\DoxyCodeLine{08009\ STBIRDEF\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ stbir\_resize\_uint8\_srgb(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{08010\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{08011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout\ )}
\DoxyCodeLine{08012\ \{}
\DoxyCodeLine{08013\ \ \ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ resize;}
\DoxyCodeLine{08014\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ optr;}
\DoxyCodeLine{08015\ \ \ \textcolor{keywordtype}{int}\ opitch;}
\DoxyCodeLine{08016\ }
\DoxyCodeLine{08017\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_\_check\_output\_stuff(\ (\textcolor{keywordtype}{void}**)\&optr,\ \&opitch,\ output\_pixels,\ \textcolor{keyword}{sizeof}(\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ ),\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[\ pixel\_layout\ ]\ )\ )}
\DoxyCodeLine{08018\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08019\ }
\DoxyCodeLine{08020\ \ \ stbir\_resize\_init(\ \&resize,}
\DoxyCodeLine{08021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}
\DoxyCodeLine{08022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (optr)\ ?\ optr\ :\ output\_pixels,\ output\_w,\ output\_h,\ opitch,}
\DoxyCodeLine{08023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout,\ STBIR\_TYPE\_UINT8\_SRGB\ );}
\DoxyCodeLine{08024\ }
\DoxyCodeLine{08025\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_resize\_extended(\ \&resize\ )\ )}
\DoxyCodeLine{08026\ \ \ \{}
\DoxyCodeLine{08027\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ optr\ )}
\DoxyCodeLine{08028\ \ \ \ \ \ \ STBIR\_FREE(\ optr,\ 0\ );}
\DoxyCodeLine{08029\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08030\ \ \ \}}
\DoxyCodeLine{08031\ }
\DoxyCodeLine{08032\ \ \ \textcolor{keywordflow}{return}\ (optr)\ ?\ optr\ :\ output\_pixels;}
\DoxyCodeLine{08033\ \}}
\DoxyCodeLine{08034\ }
\DoxyCodeLine{08035\ }
\DoxyCodeLine{08036\ STBIRDEF\ \textcolor{keywordtype}{float}\ *\ stbir\_resize\_float\_linear(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{08037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{08038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout\ )}
\DoxyCodeLine{08039\ \{}
\DoxyCodeLine{08040\ \ \ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ resize;}
\DoxyCodeLine{08041\ \ \ \textcolor{keywordtype}{float}\ *\ optr;}
\DoxyCodeLine{08042\ \ \ \textcolor{keywordtype}{int}\ opitch;}
\DoxyCodeLine{08043\ }
\DoxyCodeLine{08044\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_\_check\_output\_stuff(\ (\textcolor{keywordtype}{void}**)\&optr,\ \&opitch,\ output\_pixels,\ \textcolor{keyword}{sizeof}(\ \textcolor{keywordtype}{float}\ ),\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[\ pixel\_layout\ ]\ )\ )}
\DoxyCodeLine{08045\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08046\ }
\DoxyCodeLine{08047\ \ \ stbir\_resize\_init(\ \&resize,}
\DoxyCodeLine{08048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}
\DoxyCodeLine{08049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (optr)\ ?\ optr\ :\ output\_pixels,\ output\_w,\ output\_h,\ opitch,}
\DoxyCodeLine{08050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout,\ STBIR\_TYPE\_FLOAT\ );}
\DoxyCodeLine{08051\ }
\DoxyCodeLine{08052\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_resize\_extended(\ \&resize\ )\ )}
\DoxyCodeLine{08053\ \ \ \{}
\DoxyCodeLine{08054\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ optr\ )}
\DoxyCodeLine{08055\ \ \ \ \ \ \ STBIR\_FREE(\ optr,\ 0\ );}
\DoxyCodeLine{08056\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08057\ \ \ \}}
\DoxyCodeLine{08058\ }
\DoxyCodeLine{08059\ \ \ \textcolor{keywordflow}{return}\ (optr)\ ?\ optr\ :\ output\_pixels;}
\DoxyCodeLine{08060\ \}}
\DoxyCodeLine{08061\ }
\DoxyCodeLine{08062\ }
\DoxyCodeLine{08063\ STBIRDEF\ \textcolor{keywordtype}{void}\ *\ stbir\_resize(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{08064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{08065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_pixel\_layout\ pixel\_layout,\ stbir\_datatype\ data\_type,}
\DoxyCodeLine{08066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge,\ stbir\_filter\ filter\ )}
\DoxyCodeLine{08067\ \{}
\DoxyCodeLine{08068\ \ \ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ resize;}
\DoxyCodeLine{08069\ \ \ \textcolor{keywordtype}{float}\ *\ optr;}
\DoxyCodeLine{08070\ \ \ \textcolor{keywordtype}{int}\ opitch;}
\DoxyCodeLine{08071\ }
\DoxyCodeLine{08072\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_\_check\_output\_stuff(\ (\textcolor{keywordtype}{void}**)\&optr,\ \&opitch,\ output\_pixels,\ stbir\_\_type\_size[data\_type],\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,\ stbir\_\_pixel\_layout\_convert\_public\_to\_internal[\ pixel\_layout\ ]\ )\ )}
\DoxyCodeLine{08073\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08074\ }
\DoxyCodeLine{08075\ \ \ stbir\_resize\_init(\ \&resize,}
\DoxyCodeLine{08076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input\_pixels,\ \ input\_w,\ \ input\_h,\ \ input\_stride\_in\_bytes,}
\DoxyCodeLine{08077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (optr)\ ?\ optr\ :\ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{08078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pixel\_layout,\ data\_type\ );}
\DoxyCodeLine{08079\ }
\DoxyCodeLine{08080\ \ \ resize.horizontal\_edge\ =\ edge;}
\DoxyCodeLine{08081\ \ \ resize.vertical\_edge\ =\ edge;}
\DoxyCodeLine{08082\ \ \ resize.horizontal\_filter\ =\ filter;}
\DoxyCodeLine{08083\ \ \ resize.vertical\_filter\ =\ filter;}
\DoxyCodeLine{08084\ }
\DoxyCodeLine{08085\ \ \ \textcolor{keywordflow}{if}\ (\ !stbir\_resize\_extended(\ \&resize\ )\ )}
\DoxyCodeLine{08086\ \ \ \{}
\DoxyCodeLine{08087\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ optr\ )}
\DoxyCodeLine{08088\ \ \ \ \ \ \ STBIR\_FREE(\ optr,\ 0\ );}
\DoxyCodeLine{08089\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{08090\ \ \ \}}
\DoxyCodeLine{08091\ }
\DoxyCodeLine{08092\ \ \ \textcolor{keywordflow}{return}\ (optr)\ ?\ optr\ :\ output\_pixels;}
\DoxyCodeLine{08093\ \}}
\DoxyCodeLine{08094\ }
\DoxyCodeLine{08095\ \textcolor{preprocessor}{\#ifdef\ STBIR\_PROFILE}}
\DoxyCodeLine{08096\ }
\DoxyCodeLine{08097\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_build\_profile\_info(\ STBIR\_PROFILE\_INFO\ *\ info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \textcolor{keyword}{const}\ *\ resize\ )}
\DoxyCodeLine{08098\ \{}
\DoxyCodeLine{08099\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ bdescriptions[6]\ =\ \{\ \textcolor{stringliteral}{"{}Building"{}},\ \textcolor{stringliteral}{"{}Allocating"{}},\ \textcolor{stringliteral}{"{}Horizontal\ sampler"{}},\ \textcolor{stringliteral}{"{}Vertical\ sampler"{}},\ \textcolor{stringliteral}{"{}Coefficient\ cleanup"{}},\ \textcolor{stringliteral}{"{}Coefficient\ piovot"{}}\ \}\ ;}
\DoxyCodeLine{08100\ \ \ stbir\_\_info*\ samp\ =\ resize-\/>samplers;}
\DoxyCodeLine{08101\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{08102\ }
\DoxyCodeLine{08103\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ testa[\ (STBIR\_\_ARRAY\_SIZE(\ bdescriptions\ )\ ==\ (STBIR\_\_ARRAY\_SIZE(\ samp-\/>profile.array\ )-\/1)\ )?1:-\/1];}
\DoxyCodeLine{08104\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ testb[\ (\textcolor{keyword}{sizeof}(\ samp-\/>profile.array\ )\ ==\ (\textcolor{keyword}{sizeof}(samp-\/>profile.named))\ )?1:-\/1];}
\DoxyCodeLine{08105\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ testc[\ (\textcolor{keyword}{sizeof}(\ info-\/>clocks\ )\ >=\ (\textcolor{keyword}{sizeof}(samp-\/>profile.named))\ )?1:-\/1];}
\DoxyCodeLine{08106\ }
\DoxyCodeLine{08107\ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ STBIR\_\_ARRAY\_SIZE(\ bdescriptions\ )\ ;\ i++)}
\DoxyCodeLine{08108\ \ \ \ \ info-\/>clocks[i]\ =\ samp-\/>profile.array[i+1];}
\DoxyCodeLine{08109\ }
\DoxyCodeLine{08110\ \ \ info-\/>total\_clocks\ =\ samp-\/>profile.named.total;}
\DoxyCodeLine{08111\ \ \ info-\/>descriptions\ =\ bdescriptions;}
\DoxyCodeLine{08112\ \ \ info-\/>count\ =\ STBIR\_\_ARRAY\_SIZE(\ bdescriptions\ );}
\DoxyCodeLine{08113\ \}}
\DoxyCodeLine{08114\ }
\DoxyCodeLine{08115\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_split\_profile\_info(\ STBIR\_PROFILE\_INFO\ *\ info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \textcolor{keyword}{const}\ *\ resize,\ \textcolor{keywordtype}{int}\ split\_start,\ \textcolor{keywordtype}{int}\ split\_count\ )}
\DoxyCodeLine{08116\ \{}
\DoxyCodeLine{08117\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ descriptions[7]\ =\ \{\ \textcolor{stringliteral}{"{}Looping"{}},\ \textcolor{stringliteral}{"{}Vertical\ sampling"{}},\ \textcolor{stringliteral}{"{}Horizontal\ sampling"{}},\ \textcolor{stringliteral}{"{}Scanline\ input"{}},\ \textcolor{stringliteral}{"{}Scanline\ output"{}},\ \textcolor{stringliteral}{"{}Alpha\ weighting"{}},\ \textcolor{stringliteral}{"{}Alpha\ unweighting"{}}\ \};}
\DoxyCodeLine{08118\ \ \ stbir\_\_per\_split\_info\ *\ split\_info;}
\DoxyCodeLine{08119\ \ \ \textcolor{keywordtype}{int}\ s,\ i;}
\DoxyCodeLine{08120\ }
\DoxyCodeLine{08121\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ testa[\ (STBIR\_\_ARRAY\_SIZE(\ descriptions\ )\ ==\ (STBIR\_\_ARRAY\_SIZE(\ split\_info-\/>profile.array\ )-\/1)\ )?1:-\/1];}
\DoxyCodeLine{08122\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ testb[\ (\textcolor{keyword}{sizeof}(\ split\_info-\/>profile.array\ )\ ==\ (\textcolor{keyword}{sizeof}(split\_info-\/>profile.named))\ )?1:-\/1];}
\DoxyCodeLine{08123\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ testc[\ (\textcolor{keyword}{sizeof}(\ info-\/>clocks\ )\ >=\ (\textcolor{keyword}{sizeof}(split\_info-\/>profile.named))\ )?1:-\/1];}
\DoxyCodeLine{08124\ }
\DoxyCodeLine{08125\ \ \ \textcolor{keywordflow}{if}\ (\ split\_start\ ==\ -\/1\ )}
\DoxyCodeLine{08126\ \ \ \{}
\DoxyCodeLine{08127\ \ \ \ \ split\_start\ =\ 0;}
\DoxyCodeLine{08128\ \ \ \ \ split\_count\ =\ resize-\/>samplers-\/>splits;}
\DoxyCodeLine{08129\ \ \ \}}
\DoxyCodeLine{08130\ }
\DoxyCodeLine{08131\ \ \ \textcolor{keywordflow}{if}\ (\ (\ split\_start\ >=\ resize-\/>splits\ )\ ||\ (\ split\_start\ <\ 0\ )\ ||\ (\ (\ split\_start\ +\ split\_count\ )\ >\ resize-\/>splits\ )\ ||\ (\ split\_count\ <=\ 0\ )\ )}
\DoxyCodeLine{08132\ \ \ \{}
\DoxyCodeLine{08133\ \ \ \ \ info-\/>total\_clocks\ =\ 0;}
\DoxyCodeLine{08134\ \ \ \ \ info-\/>descriptions\ =\ 0;}
\DoxyCodeLine{08135\ \ \ \ \ info-\/>count\ =\ 0;}
\DoxyCodeLine{08136\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08137\ \ \ \}}
\DoxyCodeLine{08138\ }
\DoxyCodeLine{08139\ \ \ split\_info\ =\ resize-\/>samplers-\/>split\_info\ +\ split\_start;}
\DoxyCodeLine{08140\ }
\DoxyCodeLine{08141\ \ \ \textcolor{comment}{//\ sum\ up\ the\ profile\ from\ all\ the\ splits}}
\DoxyCodeLine{08142\ \ \ \textcolor{keywordflow}{for}(\ i\ =\ 0\ ;\ i\ <\ STBIR\_\_ARRAY\_SIZE(\ descriptions\ )\ ;\ i++\ )}
\DoxyCodeLine{08143\ \ \ \{}
\DoxyCodeLine{08144\ \ \ \ \ stbir\_uint64\ sum\ =\ 0;}
\DoxyCodeLine{08145\ \ \ \ \ \textcolor{keywordflow}{for}(\ s\ =\ 0\ ;\ s\ <\ split\_count\ ;\ s++\ )}
\DoxyCodeLine{08146\ \ \ \ \ \ \ sum\ +=\ split\_info[s].profile.array[i+1];}
\DoxyCodeLine{08147\ \ \ \ \ info-\/>clocks[i]\ =\ sum;}
\DoxyCodeLine{08148\ \ \ \}}
\DoxyCodeLine{08149\ }
\DoxyCodeLine{08150\ \ \ info-\/>total\_clocks\ =\ split\_info-\/>profile.named.total;}
\DoxyCodeLine{08151\ \ \ info-\/>descriptions\ =\ descriptions;}
\DoxyCodeLine{08152\ \ \ info-\/>count\ =\ STBIR\_\_ARRAY\_SIZE(\ descriptions\ );}
\DoxyCodeLine{08153\ \}}
\DoxyCodeLine{08154\ }
\DoxyCodeLine{08155\ STBIRDEF\ \textcolor{keywordtype}{void}\ stbir\_resize\_extended\_profile\_info(\ STBIR\_PROFILE\_INFO\ *\ info,\ \mbox{\hyperlink{structSTBIR__RESIZE}{STBIR\_RESIZE}}\ \textcolor{keyword}{const}\ *\ resize\ )}
\DoxyCodeLine{08156\ \{}
\DoxyCodeLine{08157\ \ \ stbir\_resize\_split\_profile\_info(\ info,\ resize,\ -\/1,\ 0\ );}
\DoxyCodeLine{08158\ \}}
\DoxyCodeLine{08159\ }
\DoxyCodeLine{08160\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STBIR\_PROFILE}}
\DoxyCodeLine{08161\ }
\DoxyCodeLine{08162\ \textcolor{preprocessor}{\#undef\ STBIR\_BGR}}
\DoxyCodeLine{08163\ \textcolor{preprocessor}{\#undef\ STBIR\_1CHANNEL}}
\DoxyCodeLine{08164\ \textcolor{preprocessor}{\#undef\ STBIR\_2CHANNEL}}
\DoxyCodeLine{08165\ \textcolor{preprocessor}{\#undef\ STBIR\_RGB}}
\DoxyCodeLine{08166\ \textcolor{preprocessor}{\#undef\ STBIR\_RGBA}}
\DoxyCodeLine{08167\ \textcolor{preprocessor}{\#undef\ STBIR\_4CHANNEL}}
\DoxyCodeLine{08168\ \textcolor{preprocessor}{\#undef\ STBIR\_BGRA}}
\DoxyCodeLine{08169\ \textcolor{preprocessor}{\#undef\ STBIR\_ARGB}}
\DoxyCodeLine{08170\ \textcolor{preprocessor}{\#undef\ STBIR\_ABGR}}
\DoxyCodeLine{08171\ \textcolor{preprocessor}{\#undef\ STBIR\_RA}}
\DoxyCodeLine{08172\ \textcolor{preprocessor}{\#undef\ STBIR\_AR}}
\DoxyCodeLine{08173\ \textcolor{preprocessor}{\#undef\ STBIR\_RGBA\_PM}}
\DoxyCodeLine{08174\ \textcolor{preprocessor}{\#undef\ STBIR\_BGRA\_PM}}
\DoxyCodeLine{08175\ \textcolor{preprocessor}{\#undef\ STBIR\_ARGB\_PM}}
\DoxyCodeLine{08176\ \textcolor{preprocessor}{\#undef\ STBIR\_ABGR\_PM}}
\DoxyCodeLine{08177\ \textcolor{preprocessor}{\#undef\ STBIR\_RA\_PM}}
\DoxyCodeLine{08178\ \textcolor{preprocessor}{\#undef\ STBIR\_AR\_PM}}
\DoxyCodeLine{08179\ }
\DoxyCodeLine{08180\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STB\_IMAGE\_RESIZE\_IMPLEMENTATION}}
\DoxyCodeLine{08181\ }
\DoxyCodeLine{08182\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{//\ STB\_IMAGE\_RESIZE\_HORIZONTALS\&STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{08183\ }
\DoxyCodeLine{08184\ \textcolor{comment}{//\ we\ reinclude\ the\ header\ file\ to\ define\ all\ the\ horizontal\ functions}}
\DoxyCodeLine{08185\ \textcolor{comment}{//\ \ \ specializing\ each\ function\ for\ the\ number\ of\ coeffs\ is\ 20-\/40\%\ faster\ *OVERALL*}}
\DoxyCodeLine{08186\ }
\DoxyCodeLine{08187\ \textcolor{comment}{//\ by\ including\ the\ header\ file\ again\ this\ way,\ we\ can\ still\ debug\ the\ functions}}
\DoxyCodeLine{08188\ }
\DoxyCodeLine{08189\ \textcolor{preprocessor}{\#define\ STBIR\_strs\_join2(\ start,\ mid,\ end\ )\ start\#\#mid\#\#end}}
\DoxyCodeLine{08190\ \textcolor{preprocessor}{\#define\ STBIR\_strs\_join1(\ start,\ mid,\ end\ )\ STBIR\_strs\_join2(\ start,\ mid,\ end\ )}}
\DoxyCodeLine{08191\ }
\DoxyCodeLine{08192\ \textcolor{preprocessor}{\#define\ STBIR\_strs\_join24(\ start,\ mid1,\ mid2,\ end\ )\ start\#\#mid1\#\#mid2\#\#end}}
\DoxyCodeLine{08193\ \textcolor{preprocessor}{\#define\ STBIR\_strs\_join14(\ start,\ mid1,\ mid2,\ end\ )\ STBIR\_strs\_join24(\ start,\ mid1,\ mid2,\ end\ )}}
\DoxyCodeLine{08194\ }
\DoxyCodeLine{08195\ \textcolor{preprocessor}{\#ifdef\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{08196\ }
\DoxyCodeLine{08197\ \textcolor{preprocessor}{\#ifdef\ stbir\_\_decode\_suffix}}
\DoxyCodeLine{08198\ \textcolor{preprocessor}{\#define\ STBIR\_\_CODER\_NAME(\ name\ )\ STBIR\_strs\_join1(\ name,\ \_,\ stbir\_\_decode\_suffix\ )}}
\DoxyCodeLine{08199\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{08200\ \textcolor{preprocessor}{\#define\ STBIR\_\_CODER\_NAME(\ name\ )\ name}}
\DoxyCodeLine{08201\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08202\ }
\DoxyCodeLine{08203\ \textcolor{preprocessor}{\#ifdef\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{08204\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_simdf8\_flip(reg)\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ stbir\_\_simdf8\_0123to,stbir\_\_decode\_order0,stbir\_\_decode\_order1),stbir\_\_decode\_order2,stbir\_\_decode\_order3),stbir\_\_decode\_order0,stbir\_\_decode\_order1),stbir\_\_decode\_order2,stbir\_\_decode\_order3)(reg,\ reg)}}
\DoxyCodeLine{08205\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_simdf4\_flip(reg)\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ stbir\_\_simdf\_0123to,stbir\_\_decode\_order0,stbir\_\_decode\_order1),stbir\_\_decode\_order2,stbir\_\_decode\_order3)(reg,\ reg)}}
\DoxyCodeLine{08206\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_simdf8\_unflip(reg)\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ stbir\_\_simdf8\_0123to,stbir\_\_encode\_order0,stbir\_\_encode\_order1),stbir\_\_encode\_order2,stbir\_\_encode\_order3),stbir\_\_encode\_order0,stbir\_\_encode\_order1),stbir\_\_encode\_order2,stbir\_\_encode\_order3)(reg,\ reg)}}
\DoxyCodeLine{08207\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_simdf4\_unflip(reg)\ STBIR\_strs\_join1(\ STBIR\_strs\_join1(\ stbir\_\_simdf\_0123to,stbir\_\_encode\_order0,stbir\_\_encode\_order1),stbir\_\_encode\_order2,stbir\_\_encode\_order3)(reg,\ reg)}}
\DoxyCodeLine{08208\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{08209\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order0\ 0}}
\DoxyCodeLine{08210\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order1\ 1}}
\DoxyCodeLine{08211\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order2\ 2}}
\DoxyCodeLine{08212\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_order3\ 3}}
\DoxyCodeLine{08213\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order0\ 0}}
\DoxyCodeLine{08214\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order1\ 1}}
\DoxyCodeLine{08215\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order2\ 2}}
\DoxyCodeLine{08216\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_order3\ 3}}
\DoxyCodeLine{08217\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_simdf8\_flip(reg)}}
\DoxyCodeLine{08218\ \textcolor{preprocessor}{\#define\ stbir\_\_decode\_simdf4\_flip(reg)}}
\DoxyCodeLine{08219\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_simdf8\_unflip(reg)}}
\DoxyCodeLine{08220\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_simdf4\_unflip(reg)}}
\DoxyCodeLine{08221\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08222\ }
\DoxyCodeLine{08223\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{08224\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_simdfX\_unflip\ \ stbir\_\_encode\_simdf8\_unflip}}
\DoxyCodeLine{08225\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{08226\ \textcolor{preprocessor}{\#define\ stbir\_\_encode\_simdfX\_unflip\ \ stbir\_\_encode\_simdf4\_unflip}}
\DoxyCodeLine{08227\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08228\ }
\DoxyCodeLine{08229\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_decode\_uint8\_linear\_scaled\ )(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{08230\ \{}
\DoxyCodeLine{08231\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{08232\ \ \ \textcolor{keywordtype}{float}\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{08233\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const*)inputp;}
\DoxyCodeLine{08234\ }
\DoxyCodeLine{08235\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08236\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ end\_input\_m16\ =\ input\ +\ width\_times\_channels\ -\/\ 16;}
\DoxyCodeLine{08237\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 16\ )}
\DoxyCodeLine{08238\ \ \ \{}
\DoxyCodeLine{08239\ \ \ \ \ decode\_end\ -\/=\ 16;}
\DoxyCodeLine{08240\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08241\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08242\ \ \ \ \ \{}
\DoxyCodeLine{08243\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{08244\ \ \ \ \ \ \ stbir\_\_simdi\ i;\ stbir\_\_simdi8\ o0,o1;}
\DoxyCodeLine{08245\ \ \ \ \ \ \ stbir\_\_simdf8\ of0,\ of1;}
\DoxyCodeLine{08246\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08247\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{08248\ \ \ \ \ \ \ stbir\_\_simdi8\_expand\_u8\_to\_u32(\ o0,\ o1,\ i\ );}
\DoxyCodeLine{08249\ \ \ \ \ \ \ stbir\_\_simdi8\_convert\_i32\_to\_float(\ of0,\ o0\ );}
\DoxyCodeLine{08250\ \ \ \ \ \ \ stbir\_\_simdi8\_convert\_i32\_to\_float(\ of1,\ o1\ );}
\DoxyCodeLine{08251\ \ \ \ \ \ \ stbir\_\_simdf8\_mult(\ of0,\ of0,\ STBIR\_max\_uint8\_as\_float\_inverted8);}
\DoxyCodeLine{08252\ \ \ \ \ \ \ stbir\_\_simdf8\_mult(\ of1,\ of1,\ STBIR\_max\_uint8\_as\_float\_inverted8);}
\DoxyCodeLine{08253\ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of0\ );}
\DoxyCodeLine{08254\ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of1\ );}
\DoxyCodeLine{08255\ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode\ +\ 0,\ of0\ );}
\DoxyCodeLine{08256\ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode\ +\ 8,\ of1\ );}
\DoxyCodeLine{08257\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{08258\ \ \ \ \ \ \ stbir\_\_simdi\ i,\ o0,\ o1,\ o2,\ o3;}
\DoxyCodeLine{08259\ \ \ \ \ \ \ stbir\_\_simdf\ of0,\ of1,\ of2,\ of3;}
\DoxyCodeLine{08260\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08261\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{08262\ \ \ \ \ \ \ stbir\_\_simdi\_expand\_u8\_to\_u32(\ o0,o1,o2,o3,i);}
\DoxyCodeLine{08263\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of0,\ o0\ );}
\DoxyCodeLine{08264\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of1,\ o1\ );}
\DoxyCodeLine{08265\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of2,\ o2\ );}
\DoxyCodeLine{08266\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of3,\ o3\ );}
\DoxyCodeLine{08267\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ of0,\ of0,\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float\_inverted)\ );}
\DoxyCodeLine{08268\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ of1,\ of1,\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float\_inverted)\ );}
\DoxyCodeLine{08269\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ of2,\ of2,\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float\_inverted)\ );}
\DoxyCodeLine{08270\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ of3,\ of3,\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float\_inverted)\ );}
\DoxyCodeLine{08271\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of0\ );}
\DoxyCodeLine{08272\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of1\ );}
\DoxyCodeLine{08273\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of2\ );}
\DoxyCodeLine{08274\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of3\ );}
\DoxyCodeLine{08275\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 0,\ \ of0\ );}
\DoxyCodeLine{08276\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 4,\ \ of1\ );}
\DoxyCodeLine{08277\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 8,\ \ of2\ );}
\DoxyCodeLine{08278\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 12,\ of3\ );}
\DoxyCodeLine{08279\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{08280\ \ \ \ \ \ \ decode\ +=\ 16;}
\DoxyCodeLine{08281\ \ \ \ \ \ \ input\ +=\ 16;}
\DoxyCodeLine{08282\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{08283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08284\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ ==\ (\ decode\_end\ +\ 16\ )\ )}
\DoxyCodeLine{08285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08286\ \ \ \ \ \ \ decode\ =\ decode\_end;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08287\ \ \ \ \ \ \ input\ =\ end\_input\_m16;}
\DoxyCodeLine{08288\ \ \ \ \ \}}
\DoxyCodeLine{08289\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08290\ \ \ \}}
\DoxyCodeLine{08291\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08292\ }
\DoxyCodeLine{08293\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08294\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08295\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08296\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08297\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{08298\ \ \ \{}
\DoxyCodeLine{08299\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{08300\ \ \ \ \ decode[0-\/4]\ =\ ((float)(input[stbir\_\_decode\_order0]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08301\ \ \ \ \ decode[1-\/4]\ =\ ((float)(input[stbir\_\_decode\_order1]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08302\ \ \ \ \ decode[2-\/4]\ =\ ((float)(input[stbir\_\_decode\_order2]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08303\ \ \ \ \ decode[3-\/4]\ =\ ((float)(input[stbir\_\_decode\_order3]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08304\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08305\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{08306\ \ \ \}}
\DoxyCodeLine{08307\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{08308\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08309\ }
\DoxyCodeLine{08310\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08311\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08312\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08313\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{08314\ \ \ \{}
\DoxyCodeLine{08315\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08316\ \ \ \ \ decode[0]\ =\ ((float)(input[stbir\_\_decode\_order0]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08317\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08318\ \ \ \ \ decode[1]\ =\ ((float)(input[stbir\_\_decode\_order1]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08319\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08320\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08321\ \ \ \ \ decode[2]\ =\ ((float)(input[stbir\_\_decode\_order2]))\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08322\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08323\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08324\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08325\ \ \ \}}
\DoxyCodeLine{08326\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08327\ \}}
\DoxyCodeLine{08328\ }
\DoxyCodeLine{08329\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_uint8\_linear\_scaled\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{08330\ \{}
\DoxyCodeLine{08331\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *)\ outputp;}
\DoxyCodeLine{08332\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{08333\ }
\DoxyCodeLine{08334\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08335\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ stbir\_\_simdfX\_float\_count*2\ )}
\DoxyCodeLine{08336\ \ \ \{}
\DoxyCodeLine{08337\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m8\ =\ encode\ +\ width\_times\_channels\ -\/\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08338\ \ \ \ \ end\_output\ -\/=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08339\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08340\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08341\ \ \ \ \ \{}
\DoxyCodeLine{08342\ \ \ \ \ \ \ stbir\_\_simdfX\ e0,\ e1;}
\DoxyCodeLine{08343\ \ \ \ \ \ \ stbir\_\_simdi\ i;}
\DoxyCodeLine{08344\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08345\ \ \ \ \ \ \ stbir\_\_simdfX\_madd\_mem(\ e0,\ STBIR\_simd\_point5X,\ STBIR\_max\_uint8\_as\_floatX,\ encode\ );}
\DoxyCodeLine{08346\ \ \ \ \ \ \ stbir\_\_simdfX\_madd\_mem(\ e1,\ STBIR\_simd\_point5X,\ STBIR\_max\_uint8\_as\_floatX,\ encode+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{08347\ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e0\ );}
\DoxyCodeLine{08348\ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e1\ );}
\DoxyCodeLine{08349\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{08350\ \ \ \ \ \ \ stbir\_\_simdf8\_pack\_to\_16bytes(\ i,\ e0,\ e1\ );}
\DoxyCodeLine{08351\ \ \ \ \ \ \ stbir\_\_simdi\_store(\ output,\ i\ );}
\DoxyCodeLine{08352\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{08353\ \ \ \ \ \ \ stbir\_\_simdf\_pack\_to\_8bytes(\ i,\ e0,\ e1\ );}
\DoxyCodeLine{08354\ \ \ \ \ \ \ stbir\_\_simdi\_store2(\ output,\ i\ );}
\DoxyCodeLine{08355\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{08356\ \ \ \ \ \ \ encode\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08357\ \ \ \ \ \ \ output\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08358\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08359\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08360\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ stbir\_\_simdfX\_float\_count*2\ )\ )}
\DoxyCodeLine{08361\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08362\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08363\ \ \ \ \ \ \ encode\ =\ end\_encode\_m8;}
\DoxyCodeLine{08364\ \ \ \ \ \}}
\DoxyCodeLine{08365\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08366\ \ \ \}}
\DoxyCodeLine{08367\ }
\DoxyCodeLine{08368\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08369\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08370\ \ \ output\ +=\ 4;}
\DoxyCodeLine{08371\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08372\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08373\ \ \ \{}
\DoxyCodeLine{08374\ \ \ \ \ stbir\_\_simdf\ e0;}
\DoxyCodeLine{08375\ \ \ \ \ stbir\_\_simdi\ i0;}
\DoxyCodeLine{08376\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{08377\ \ \ \ \ stbir\_\_simdf\_load(\ e0,\ encode\ );}
\DoxyCodeLine{08378\ \ \ \ \ stbir\_\_simdf\_madd(\ e0,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float),\ e0\ );}
\DoxyCodeLine{08379\ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ e0\ );}
\DoxyCodeLine{08380\ \ \ \ \ stbir\_\_simdf\_pack\_to\_8bytes(\ i0,\ e0,\ e0\ );\ \ \textcolor{comment}{//\ only\ use\ first\ 4}}
\DoxyCodeLine{08381\ \ \ \ \ *(\textcolor{keywordtype}{int}*)(output-\/4)\ =\ stbir\_\_simdi\_to\_int(\ i0\ );}
\DoxyCodeLine{08382\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{08383\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{08384\ \ \ \}}
\DoxyCodeLine{08385\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{08386\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08387\ }
\DoxyCodeLine{08388\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08389\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08390\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08391\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{08392\ \ \ \{}
\DoxyCodeLine{08393\ \ \ \ \ stbir\_\_simdf\ e0;}
\DoxyCodeLine{08394\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{08395\ \ \ \ \ stbir\_\_simdf\_madd1\_mem(\ e0,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float),\ encode+stbir\_\_encode\_order0\ );\ output[0]\ =\ stbir\_\_simdf\_convert\_float\_to\_uint8(\ e0\ );}
\DoxyCodeLine{08396\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08397\ \ \ \ \ stbir\_\_simdf\_madd1\_mem(\ e0,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float),\ encode+stbir\_\_encode\_order1\ );\ output[1]\ =\ stbir\_\_simdf\_convert\_float\_to\_uint8(\ e0\ );}
\DoxyCodeLine{08398\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08399\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08400\ \ \ \ \ stbir\_\_simdf\_madd1\_mem(\ e0,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint8\_as\_float),\ encode+stbir\_\_encode\_order2\ );\ output[2]\ =\ stbir\_\_simdf\_convert\_float\_to\_uint8(\ e0\ );}
\DoxyCodeLine{08401\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08402\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08403\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08404\ \ \ \}}
\DoxyCodeLine{08405\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08406\ }
\DoxyCodeLine{08407\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{08408\ }
\DoxyCodeLine{08409\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08410\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08411\ \ \ output\ +=\ 4;}
\DoxyCodeLine{08412\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08413\ \ \ \{}
\DoxyCodeLine{08414\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{08415\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[0-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08416\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[1-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08417\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[2-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08418\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order3]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[3-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08419\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{08420\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{08421\ \ \ \}}
\DoxyCodeLine{08422\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{08423\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08424\ }
\DoxyCodeLine{08425\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08426\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08427\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08428\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{08429\ \ \ \{}
\DoxyCodeLine{08430\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{08431\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{08432\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[0]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08433\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08434\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[1]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08435\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08436\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08437\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[2]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08438\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08439\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08440\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08441\ \ \ \}}
\DoxyCodeLine{08442\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08443\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08444\ \}}
\DoxyCodeLine{08445\ }
\DoxyCodeLine{08446\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_uint8\_linear)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{08447\ \{}
\DoxyCodeLine{08448\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{08449\ \ \ \textcolor{keywordtype}{float}\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{08450\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const*)inputp;}
\DoxyCodeLine{08451\ }
\DoxyCodeLine{08452\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08453\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ end\_input\_m16\ =\ input\ +\ width\_times\_channels\ -\/\ 16;}
\DoxyCodeLine{08454\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 16\ )}
\DoxyCodeLine{08455\ \ \ \{}
\DoxyCodeLine{08456\ \ \ \ \ decode\_end\ -\/=\ 16;}
\DoxyCodeLine{08457\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08458\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08459\ \ \ \ \ \{}
\DoxyCodeLine{08460\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{08461\ \ \ \ \ \ \ stbir\_\_simdi\ i;\ stbir\_\_simdi8\ o0,o1;}
\DoxyCodeLine{08462\ \ \ \ \ \ \ stbir\_\_simdf8\ of0,\ of1;}
\DoxyCodeLine{08463\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08464\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{08465\ \ \ \ \ \ \ stbir\_\_simdi8\_expand\_u8\_to\_u32(\ o0,\ o1,\ i\ );}
\DoxyCodeLine{08466\ \ \ \ \ \ \ stbir\_\_simdi8\_convert\_i32\_to\_float(\ of0,\ o0\ );}
\DoxyCodeLine{08467\ \ \ \ \ \ \ stbir\_\_simdi8\_convert\_i32\_to\_float(\ of1,\ o1\ );}
\DoxyCodeLine{08468\ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of0\ );}
\DoxyCodeLine{08469\ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of1\ );}
\DoxyCodeLine{08470\ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode\ +\ 0,\ of0\ );}
\DoxyCodeLine{08471\ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode\ +\ 8,\ of1\ );}
\DoxyCodeLine{08472\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{08473\ \ \ \ \ \ \ stbir\_\_simdi\ i,\ o0,\ o1,\ o2,\ o3;}
\DoxyCodeLine{08474\ \ \ \ \ \ \ stbir\_\_simdf\ of0,\ of1,\ of2,\ of3;}
\DoxyCodeLine{08475\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08476\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{08477\ \ \ \ \ \ \ stbir\_\_simdi\_expand\_u8\_to\_u32(\ o0,o1,o2,o3,i);}
\DoxyCodeLine{08478\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of0,\ o0\ );}
\DoxyCodeLine{08479\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of1,\ o1\ );}
\DoxyCodeLine{08480\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of2,\ o2\ );}
\DoxyCodeLine{08481\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of3,\ o3\ );}
\DoxyCodeLine{08482\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of0\ );}
\DoxyCodeLine{08483\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of1\ );}
\DoxyCodeLine{08484\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of2\ );}
\DoxyCodeLine{08485\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of3\ );}
\DoxyCodeLine{08486\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 0,\ \ of0\ );}
\DoxyCodeLine{08487\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 4,\ \ of1\ );}
\DoxyCodeLine{08488\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 8,\ \ of2\ );}
\DoxyCodeLine{08489\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 12,\ of3\ );}
\DoxyCodeLine{08490\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08491\ \ \ \ \ \ \ decode\ +=\ 16;}
\DoxyCodeLine{08492\ \ \ \ \ \ \ input\ +=\ 16;}
\DoxyCodeLine{08493\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{08494\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08495\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ ==\ (\ decode\_end\ +\ 16\ )\ )}
\DoxyCodeLine{08496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08497\ \ \ \ \ \ \ decode\ =\ decode\_end;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08498\ \ \ \ \ \ \ input\ =\ end\_input\_m16;}
\DoxyCodeLine{08499\ \ \ \ \ \}}
\DoxyCodeLine{08500\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08501\ \ \ \}}
\DoxyCodeLine{08502\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08503\ }
\DoxyCodeLine{08504\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08505\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08506\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08507\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08508\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{08509\ \ \ \{}
\DoxyCodeLine{08510\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{08511\ \ \ \ \ decode[0-\/4]\ =\ ((float)(input[stbir\_\_decode\_order0]));}
\DoxyCodeLine{08512\ \ \ \ \ decode[1-\/4]\ =\ ((float)(input[stbir\_\_decode\_order1]));}
\DoxyCodeLine{08513\ \ \ \ \ decode[2-\/4]\ =\ ((float)(input[stbir\_\_decode\_order2]));}
\DoxyCodeLine{08514\ \ \ \ \ decode[3-\/4]\ =\ ((float)(input[stbir\_\_decode\_order3]));}
\DoxyCodeLine{08515\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08516\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{08517\ \ \ \}}
\DoxyCodeLine{08518\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{08519\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08520\ }
\DoxyCodeLine{08521\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08522\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08523\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08524\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{08525\ \ \ \{}
\DoxyCodeLine{08526\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08527\ \ \ \ \ decode[0]\ =\ ((float)(input[stbir\_\_decode\_order0]));}
\DoxyCodeLine{08528\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08529\ \ \ \ \ decode[1]\ =\ ((float)(input[stbir\_\_decode\_order1]));}
\DoxyCodeLine{08530\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08531\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08532\ \ \ \ \ decode[2]\ =\ ((float)(input[stbir\_\_decode\_order2]));}
\DoxyCodeLine{08533\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08534\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08535\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08536\ \ \ \}}
\DoxyCodeLine{08537\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08538\ \}}
\DoxyCodeLine{08539\ }
\DoxyCodeLine{08540\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_uint8\_linear\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{08541\ \{}
\DoxyCodeLine{08542\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *)\ outputp;}
\DoxyCodeLine{08543\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{08544\ }
\DoxyCodeLine{08545\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08546\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ stbir\_\_simdfX\_float\_count*2\ )}
\DoxyCodeLine{08547\ \ \ \{}
\DoxyCodeLine{08548\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m8\ =\ encode\ +\ width\_times\_channels\ -\/\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08549\ \ \ \ \ end\_output\ -\/=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08550\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08551\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08552\ \ \ \ \ \{}
\DoxyCodeLine{08553\ \ \ \ \ \ \ stbir\_\_simdfX\ e0,\ e1;}
\DoxyCodeLine{08554\ \ \ \ \ \ \ stbir\_\_simdi\ i;}
\DoxyCodeLine{08555\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08556\ \ \ \ \ \ \ stbir\_\_simdfX\_add\_mem(\ e0,\ STBIR\_simd\_point5X,\ encode\ );}
\DoxyCodeLine{08557\ \ \ \ \ \ \ stbir\_\_simdfX\_add\_mem(\ e1,\ STBIR\_simd\_point5X,\ encode+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{08558\ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e0\ );}
\DoxyCodeLine{08559\ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e1\ );}
\DoxyCodeLine{08560\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{08561\ \ \ \ \ \ \ stbir\_\_simdf8\_pack\_to\_16bytes(\ i,\ e0,\ e1\ );}
\DoxyCodeLine{08562\ \ \ \ \ \ \ stbir\_\_simdi\_store(\ output,\ i\ );}
\DoxyCodeLine{08563\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{08564\ \ \ \ \ \ \ stbir\_\_simdf\_pack\_to\_8bytes(\ i,\ e0,\ e1\ );}
\DoxyCodeLine{08565\ \ \ \ \ \ \ stbir\_\_simdi\_store2(\ output,\ i\ );}
\DoxyCodeLine{08566\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{08567\ \ \ \ \ \ \ encode\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08568\ \ \ \ \ \ \ output\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{08569\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08570\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08571\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ stbir\_\_simdfX\_float\_count*2\ )\ )}
\DoxyCodeLine{08572\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08573\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08574\ \ \ \ \ \ \ encode\ =\ end\_encode\_m8;}
\DoxyCodeLine{08575\ \ \ \ \ \}}
\DoxyCodeLine{08576\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08577\ \ \ \}}
\DoxyCodeLine{08578\ }
\DoxyCodeLine{08579\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08580\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08581\ \ \ output\ +=\ 4;}
\DoxyCodeLine{08582\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08583\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08584\ \ \ \{}
\DoxyCodeLine{08585\ \ \ \ \ stbir\_\_simdf\ e0;}
\DoxyCodeLine{08586\ \ \ \ \ stbir\_\_simdi\ i0;}
\DoxyCodeLine{08587\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{08588\ \ \ \ \ stbir\_\_simdf\_load(\ e0,\ encode\ );}
\DoxyCodeLine{08589\ \ \ \ \ stbir\_\_simdf\_add(\ e0,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ e0\ );}
\DoxyCodeLine{08590\ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ e0\ );}
\DoxyCodeLine{08591\ \ \ \ \ stbir\_\_simdf\_pack\_to\_8bytes(\ i0,\ e0,\ e0\ );\ \ \textcolor{comment}{//\ only\ use\ first\ 4}}
\DoxyCodeLine{08592\ \ \ \ \ *(\textcolor{keywordtype}{int}*)(output-\/4)\ =\ stbir\_\_simdi\_to\_int(\ i0\ );}
\DoxyCodeLine{08593\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{08594\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{08595\ \ \ \}}
\DoxyCodeLine{08596\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{08597\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08598\ }
\DoxyCodeLine{08599\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{08600\ }
\DoxyCodeLine{08601\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08602\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08603\ \ \ output\ +=\ 4;}
\DoxyCodeLine{08604\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08605\ \ \ \{}
\DoxyCodeLine{08606\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{08607\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[0-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08608\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[1-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08609\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[2-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08610\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order3]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[3-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08611\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{08612\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{08613\ \ \ \}}
\DoxyCodeLine{08614\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{08615\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08616\ }
\DoxyCodeLine{08617\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08618\ }
\DoxyCodeLine{08619\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08620\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08621\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08622\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{08623\ \ \ \{}
\DoxyCodeLine{08624\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{08625\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{08626\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[0]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08627\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08628\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[1]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08629\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08630\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08631\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 255);\ output[2]\ =\ (\textcolor{keywordtype}{unsigned}\ char)f;}
\DoxyCodeLine{08632\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08633\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08634\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08635\ \ \ \}}
\DoxyCodeLine{08636\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08637\ \}}
\DoxyCodeLine{08638\ }
\DoxyCodeLine{08639\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_uint8\_srgb)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{08640\ \{}
\DoxyCodeLine{08641\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{08642\ \ \ \textcolor{keywordtype}{float}\ const\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{08643\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *)inputp;}
\DoxyCodeLine{08644\ }
\DoxyCodeLine{08645\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08646\ \ \ \textcolor{preprocessor}{\#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08647\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08648\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{08649\ \ \ \{}
\DoxyCodeLine{08650\ \ \ \ \ decode[0-\/4]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order0\ ]\ ];}
\DoxyCodeLine{08651\ \ \ \ \ decode[1-\/4]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order1\ ]\ ];}
\DoxyCodeLine{08652\ \ \ \ \ decode[2-\/4]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order2\ ]\ ];}
\DoxyCodeLine{08653\ \ \ \ \ decode[3-\/4]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order3\ ]\ ];}
\DoxyCodeLine{08654\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08655\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{08656\ \ \ \}}
\DoxyCodeLine{08657\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{08658\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08659\ }
\DoxyCodeLine{08660\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08661\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08662\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08663\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{08664\ \ \ \{}
\DoxyCodeLine{08665\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{08666\ \ \ \ \ decode[0]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order0\ ]\ ];}
\DoxyCodeLine{08667\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08668\ \ \ \ \ decode[1]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order1\ ]\ ];}
\DoxyCodeLine{08669\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08670\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08671\ \ \ \ \ decode[2]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[\ stbir\_\_decode\_order2\ ]\ ];}
\DoxyCodeLine{08672\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08673\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08674\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08675\ \ \ \}}
\DoxyCodeLine{08676\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08677\ \}}
\DoxyCodeLine{08678\ }
\DoxyCodeLine{08679\ \textcolor{preprocessor}{\#define\ stbir\_\_min\_max\_shift20(\ i,\ f\ )\ \(\backslash\)}}
\DoxyCodeLine{08680\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_max(\ f,\ f,\ stbir\_simdf\_casti(STBIR\_\_CONSTI(\ STBIR\_almost\_zero\ ))\ );\ \(\backslash\)}}
\DoxyCodeLine{08681\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_min(\ f,\ f,\ stbir\_simdf\_casti(STBIR\_\_CONSTI(\ STBIR\_almost\_one\ \ ))\ );\ \(\backslash\)}}
\DoxyCodeLine{08682\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\_32shr(\ i,\ stbir\_simdi\_castf(\ f\ ),\ 20\ );}}
\DoxyCodeLine{08683\ }
\DoxyCodeLine{08684\ \textcolor{preprocessor}{\#define\ stbir\_\_scale\_and\_convert(\ i,\ f\ )\ \(\backslash\)}}
\DoxyCodeLine{08685\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_madd(\ f,\ STBIR\_\_CONSTF(\ STBIR\_simd\_point5\ ),\ STBIR\_\_CONSTF(\ STBIR\_max\_uint8\_as\_float\ ),\ f\ );\ \(\backslash\)}}
\DoxyCodeLine{08686\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_max(\ f,\ f,\ stbir\_\_simdf\_zeroP()\ );\ \(\backslash\)}}
\DoxyCodeLine{08687\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_min(\ f,\ f,\ STBIR\_\_CONSTF(\ STBIR\_max\_uint8\_as\_float\ )\ );\ \(\backslash\)}}
\DoxyCodeLine{08688\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdf\_convert\_float\_to\_i32(\ i,\ f\ );}}
\DoxyCodeLine{08689\ }
\DoxyCodeLine{08690\ \textcolor{preprocessor}{\#define\ stbir\_\_linear\_to\_srgb\_finish(\ i,\ f\ )\ \(\backslash\)}}
\DoxyCodeLine{08691\ \textcolor{preprocessor}{\{\ \(\backslash\)}}
\DoxyCodeLine{08692\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\ temp;\ \ \(\backslash\)}}
\DoxyCodeLine{08693\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\_32shr(\ temp,\ stbir\_simdi\_castf(\ f\ ),\ 12\ )\ ;\ \(\backslash\)}}
\DoxyCodeLine{08694\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\_and(\ temp,\ temp,\ STBIR\_\_CONSTI(STBIR\_mastissa\_mask)\ );\ \(\backslash\)}}
\DoxyCodeLine{08695\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\_or(\ temp,\ temp,\ STBIR\_\_CONSTI(STBIR\_topscale)\ );\ \(\backslash\)}}
\DoxyCodeLine{08696\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\_16madd(\ i,\ i,\ temp\ );\ \(\backslash\)}}
\DoxyCodeLine{08697\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_simdi\_32shr(\ i,\ i,\ 16\ );\ \(\backslash\)}}
\DoxyCodeLine{08698\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{08699\ }
\DoxyCodeLine{08700\ \textcolor{preprocessor}{\#define\ stbir\_\_simdi\_table\_lookup2(\ v0,v1,\ table\ )\ \(\backslash\)}}
\DoxyCodeLine{08701\ \textcolor{preprocessor}{\{\ \(\backslash\)}}
\DoxyCodeLine{08702\ \textcolor{preprocessor}{\ \ stbir\_\_simdi\_u32\ temp0,temp1;\ \(\backslash\)}}
\DoxyCodeLine{08703\ \textcolor{preprocessor}{\ \ temp0.m128i\_i128\ =\ v0;\ \(\backslash\)}}
\DoxyCodeLine{08704\ \textcolor{preprocessor}{\ \ temp1.m128i\_i128\ =\ v1;\ \(\backslash\)}}
\DoxyCodeLine{08705\ \textcolor{preprocessor}{\ \ temp0.m128i\_u32[0]\ =\ table[temp0.m128i\_i32[0]];\ temp0.m128i\_u32[1]\ =\ table[temp0.m128i\_i32[1]];\ temp0.m128i\_u32[2]\ =\ table[temp0.m128i\_i32[2]];\ temp0.m128i\_u32[3]\ =\ table[temp0.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08706\ \textcolor{preprocessor}{\ \ temp1.m128i\_u32[0]\ =\ table[temp1.m128i\_i32[0]];\ temp1.m128i\_u32[1]\ =\ table[temp1.m128i\_i32[1]];\ temp1.m128i\_u32[2]\ =\ table[temp1.m128i\_i32[2]];\ temp1.m128i\_u32[3]\ =\ table[temp1.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08707\ \textcolor{preprocessor}{\ \ v0\ =\ temp0.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08708\ \textcolor{preprocessor}{\ \ v1\ =\ temp1.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08709\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{08710\ }
\DoxyCodeLine{08711\ \textcolor{preprocessor}{\#define\ stbir\_\_simdi\_table\_lookup3(\ v0,v1,v2,\ table\ )\ \(\backslash\)}}
\DoxyCodeLine{08712\ \textcolor{preprocessor}{\{\ \(\backslash\)}}
\DoxyCodeLine{08713\ \textcolor{preprocessor}{\ \ stbir\_\_simdi\_u32\ temp0,temp1,temp2;\ \(\backslash\)}}
\DoxyCodeLine{08714\ \textcolor{preprocessor}{\ \ temp0.m128i\_i128\ =\ v0;\ \(\backslash\)}}
\DoxyCodeLine{08715\ \textcolor{preprocessor}{\ \ temp1.m128i\_i128\ =\ v1;\ \(\backslash\)}}
\DoxyCodeLine{08716\ \textcolor{preprocessor}{\ \ temp2.m128i\_i128\ =\ v2;\ \(\backslash\)}}
\DoxyCodeLine{08717\ \textcolor{preprocessor}{\ \ temp0.m128i\_u32[0]\ =\ table[temp0.m128i\_i32[0]];\ temp0.m128i\_u32[1]\ =\ table[temp0.m128i\_i32[1]];\ temp0.m128i\_u32[2]\ =\ table[temp0.m128i\_i32[2]];\ temp0.m128i\_u32[3]\ =\ table[temp0.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08718\ \textcolor{preprocessor}{\ \ temp1.m128i\_u32[0]\ =\ table[temp1.m128i\_i32[0]];\ temp1.m128i\_u32[1]\ =\ table[temp1.m128i\_i32[1]];\ temp1.m128i\_u32[2]\ =\ table[temp1.m128i\_i32[2]];\ temp1.m128i\_u32[3]\ =\ table[temp1.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08719\ \textcolor{preprocessor}{\ \ temp2.m128i\_u32[0]\ =\ table[temp2.m128i\_i32[0]];\ temp2.m128i\_u32[1]\ =\ table[temp2.m128i\_i32[1]];\ temp2.m128i\_u32[2]\ =\ table[temp2.m128i\_i32[2]];\ temp2.m128i\_u32[3]\ =\ table[temp2.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08720\ \textcolor{preprocessor}{\ \ v0\ =\ temp0.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08721\ \textcolor{preprocessor}{\ \ v1\ =\ temp1.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08722\ \textcolor{preprocessor}{\ \ v2\ =\ temp2.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08723\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{08724\ }
\DoxyCodeLine{08725\ \textcolor{preprocessor}{\#define\ stbir\_\_simdi\_table\_lookup4(\ v0,v1,v2,v3,\ table\ )\ \(\backslash\)}}
\DoxyCodeLine{08726\ \textcolor{preprocessor}{\{\ \(\backslash\)}}
\DoxyCodeLine{08727\ \textcolor{preprocessor}{\ \ stbir\_\_simdi\_u32\ temp0,temp1,temp2,temp3;\ \(\backslash\)}}
\DoxyCodeLine{08728\ \textcolor{preprocessor}{\ \ temp0.m128i\_i128\ =\ v0;\ \(\backslash\)}}
\DoxyCodeLine{08729\ \textcolor{preprocessor}{\ \ temp1.m128i\_i128\ =\ v1;\ \(\backslash\)}}
\DoxyCodeLine{08730\ \textcolor{preprocessor}{\ \ temp2.m128i\_i128\ =\ v2;\ \(\backslash\)}}
\DoxyCodeLine{08731\ \textcolor{preprocessor}{\ \ temp3.m128i\_i128\ =\ v3;\ \(\backslash\)}}
\DoxyCodeLine{08732\ \textcolor{preprocessor}{\ \ temp0.m128i\_u32[0]\ =\ table[temp0.m128i\_i32[0]];\ temp0.m128i\_u32[1]\ =\ table[temp0.m128i\_i32[1]];\ temp0.m128i\_u32[2]\ =\ table[temp0.m128i\_i32[2]];\ temp0.m128i\_u32[3]\ =\ table[temp0.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08733\ \textcolor{preprocessor}{\ \ temp1.m128i\_u32[0]\ =\ table[temp1.m128i\_i32[0]];\ temp1.m128i\_u32[1]\ =\ table[temp1.m128i\_i32[1]];\ temp1.m128i\_u32[2]\ =\ table[temp1.m128i\_i32[2]];\ temp1.m128i\_u32[3]\ =\ table[temp1.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08734\ \textcolor{preprocessor}{\ \ temp2.m128i\_u32[0]\ =\ table[temp2.m128i\_i32[0]];\ temp2.m128i\_u32[1]\ =\ table[temp2.m128i\_i32[1]];\ temp2.m128i\_u32[2]\ =\ table[temp2.m128i\_i32[2]];\ temp2.m128i\_u32[3]\ =\ table[temp2.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08735\ \textcolor{preprocessor}{\ \ temp3.m128i\_u32[0]\ =\ table[temp3.m128i\_i32[0]];\ temp3.m128i\_u32[1]\ =\ table[temp3.m128i\_i32[1]];\ temp3.m128i\_u32[2]\ =\ table[temp3.m128i\_i32[2]];\ temp3.m128i\_u32[3]\ =\ table[temp3.m128i\_i32[3]];\ \(\backslash\)}}
\DoxyCodeLine{08736\ \textcolor{preprocessor}{\ \ v0\ =\ temp0.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08737\ \textcolor{preprocessor}{\ \ v1\ =\ temp1.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08738\ \textcolor{preprocessor}{\ \ v2\ =\ temp2.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08739\ \textcolor{preprocessor}{\ \ v3\ =\ temp3.m128i\_i128;\ \(\backslash\)}}
\DoxyCodeLine{08740\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{08741\ }
\DoxyCodeLine{08742\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_uint8\_srgb\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{08743\ \{}
\DoxyCodeLine{08744\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\ outputp;}
\DoxyCodeLine{08745\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{08746\ }
\DoxyCodeLine{08747\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08748\ }
\DoxyCodeLine{08749\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 16\ )}
\DoxyCodeLine{08750\ \ \ \{}
\DoxyCodeLine{08751\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m16\ =\ encode\ +\ width\_times\_channels\ -\/\ 16;}
\DoxyCodeLine{08752\ \ \ \ \ end\_output\ -\/=\ 16;}
\DoxyCodeLine{08753\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08754\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08755\ \ \ \ \ \{}
\DoxyCodeLine{08756\ \ \ \ \ \ \ stbir\_\_simdf\ f0,\ f1,\ f2,\ f3;}
\DoxyCodeLine{08757\ \ \ \ \ \ \ stbir\_\_simdi\ i0,\ i1,\ i2,\ i3;}
\DoxyCodeLine{08758\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08759\ }
\DoxyCodeLine{08760\ \ \ \ \ \ \ stbir\_\_simdf\_load4\_transposed(\ f0,\ f1,\ f2,\ f3,\ encode\ );}
\DoxyCodeLine{08761\ }
\DoxyCodeLine{08762\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i0,\ f0\ );}
\DoxyCodeLine{08763\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i1,\ f1\ );}
\DoxyCodeLine{08764\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i2,\ f2\ );}
\DoxyCodeLine{08765\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i3,\ f3\ );}
\DoxyCodeLine{08766\ }
\DoxyCodeLine{08767\ \ \ \ \ \ \ stbir\_\_simdi\_table\_lookup4(\ i0,\ i1,\ i2,\ i3,\ (\ fp32\_to\_srgb8\_tab4\ -\/\ (127-\/13)*8\ )\ );}
\DoxyCodeLine{08768\ }
\DoxyCodeLine{08769\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i0,\ f0\ );}
\DoxyCodeLine{08770\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i1,\ f1\ );}
\DoxyCodeLine{08771\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i2,\ f2\ );}
\DoxyCodeLine{08772\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i3,\ f3\ );}
\DoxyCodeLine{08773\ }
\DoxyCodeLine{08774\ \ \ \ \ \ \ stbir\_\_interleave\_pack\_and\_store\_16\_u8(\ output,\ \ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order0),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order1),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order2),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order3)\ );}
\DoxyCodeLine{08775\ }
\DoxyCodeLine{08776\ \ \ \ \ \ \ encode\ +=\ 16;}
\DoxyCodeLine{08777\ \ \ \ \ \ \ output\ +=\ 16;}
\DoxyCodeLine{08778\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08779\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08780\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ 16\ )\ )}
\DoxyCodeLine{08781\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08782\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08783\ \ \ \ \ \ \ encode\ =\ end\_encode\_m16;}
\DoxyCodeLine{08784\ \ \ \ \ \}}
\DoxyCodeLine{08785\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08786\ \ \ \}}
\DoxyCodeLine{08787\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08788\ }
\DoxyCodeLine{08789\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{08790\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{08791\ \ \ output\ +=\ 4;}
\DoxyCodeLine{08792\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08793\ \ \ \textcolor{keywordflow}{while}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08794\ \ \ \{}
\DoxyCodeLine{08795\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08796\ }
\DoxyCodeLine{08797\ \ \ \ \ output[0-\/4]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order0]\ );}
\DoxyCodeLine{08798\ \ \ \ \ output[1-\/4]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order1]\ );}
\DoxyCodeLine{08799\ \ \ \ \ output[2-\/4]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order2]\ );}
\DoxyCodeLine{08800\ \ \ \ \ output[3-\/4]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order3]\ );}
\DoxyCodeLine{08801\ }
\DoxyCodeLine{08802\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{08803\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{08804\ \ \ \}}
\DoxyCodeLine{08805\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{08806\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08807\ }
\DoxyCodeLine{08808\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{08809\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{08810\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08811\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{08812\ \ \ \{}
\DoxyCodeLine{08813\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{08814\ \ \ \ \ output[0]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order0]\ );}
\DoxyCodeLine{08815\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{08816\ \ \ \ \ output[1]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order1]\ );}
\DoxyCodeLine{08817\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08818\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{08819\ \ \ \ \ output[2]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[stbir\_\_encode\_order2]\ );}
\DoxyCodeLine{08820\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08821\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08822\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{08823\ \ \ \}}
\DoxyCodeLine{08824\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08825\ \}}
\DoxyCodeLine{08826\ }
\DoxyCodeLine{08827\ \textcolor{preprocessor}{\#if\ (\ stbir\_\_coder\_min\_num\ ==\ 4\ )\ ||\ (\ (\ stbir\_\_coder\_min\_num\ ==\ 1\ )\ \&\&\ (\ !defined(stbir\_\_decode\_swizzle)\ )\ )}}
\DoxyCodeLine{08828\ }
\DoxyCodeLine{08829\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_uint8\_srgb4\_linearalpha)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{08830\ \{}
\DoxyCodeLine{08831\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{08832\ \ \ \textcolor{keywordtype}{float}\ const\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{08833\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *)inputp;}
\DoxyCodeLine{08834\ \ \ do\ \{}
\DoxyCodeLine{08835\ \ \ \ \ decode[0]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[stbir\_\_decode\_order0]\ ];}
\DoxyCodeLine{08836\ \ \ \ \ decode[1]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[stbir\_\_decode\_order1]\ ];}
\DoxyCodeLine{08837\ \ \ \ \ decode[2]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[stbir\_\_decode\_order2]\ ];}
\DoxyCodeLine{08838\ \ \ \ \ decode[3]\ =\ (\ (float)\ input[stbir\_\_decode\_order3]\ )\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08839\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{08840\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08841\ \ \ \}\ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ );}
\DoxyCodeLine{08842\ \}}
\DoxyCodeLine{08843\ }
\DoxyCodeLine{08844\ }
\DoxyCodeLine{08845\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_uint8\_srgb4\_linearalpha\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{08846\ \{}
\DoxyCodeLine{08847\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\ outputp;}
\DoxyCodeLine{08848\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{08849\ }
\DoxyCodeLine{08850\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08851\ }
\DoxyCodeLine{08852\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 16\ )}
\DoxyCodeLine{08853\ \ \ \{}
\DoxyCodeLine{08854\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m16\ =\ encode\ +\ width\_times\_channels\ -\/\ 16;}
\DoxyCodeLine{08855\ \ \ \ \ end\_output\ -\/=\ 16;}
\DoxyCodeLine{08856\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08857\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08858\ \ \ \ \ \{}
\DoxyCodeLine{08859\ \ \ \ \ \ \ stbir\_\_simdf\ f0,\ f1,\ f2,\ f3;}
\DoxyCodeLine{08860\ \ \ \ \ \ \ stbir\_\_simdi\ i0,\ i1,\ i2,\ i3;}
\DoxyCodeLine{08861\ }
\DoxyCodeLine{08862\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08863\ \ \ \ \ \ \ stbir\_\_simdf\_load4\_transposed(\ f0,\ f1,\ f2,\ f3,\ encode\ );}
\DoxyCodeLine{08864\ }
\DoxyCodeLine{08865\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i0,\ f0\ );}
\DoxyCodeLine{08866\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i1,\ f1\ );}
\DoxyCodeLine{08867\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i2,\ f2\ );}
\DoxyCodeLine{08868\ \ \ \ \ \ \ stbir\_\_scale\_and\_convert(\ i3,\ f3\ );}
\DoxyCodeLine{08869\ }
\DoxyCodeLine{08870\ \ \ \ \ \ \ stbir\_\_simdi\_table\_lookup3(\ i0,\ i1,\ i2,\ (\ fp32\_to\_srgb8\_tab4\ -\/\ (127-\/13)*8\ )\ );}
\DoxyCodeLine{08871\ }
\DoxyCodeLine{08872\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i0,\ f0\ );}
\DoxyCodeLine{08873\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i1,\ f1\ );}
\DoxyCodeLine{08874\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i2,\ f2\ );}
\DoxyCodeLine{08875\ }
\DoxyCodeLine{08876\ \ \ \ \ \ \ stbir\_\_interleave\_pack\_and\_store\_16\_u8(\ output,\ \ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order0),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order1),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order2),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order3)\ );}
\DoxyCodeLine{08877\ }
\DoxyCodeLine{08878\ \ \ \ \ \ \ output\ +=\ 16;}
\DoxyCodeLine{08879\ \ \ \ \ \ \ encode\ +=\ 16;}
\DoxyCodeLine{08880\ }
\DoxyCodeLine{08881\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08882\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08883\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ 16\ )\ )}
\DoxyCodeLine{08884\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08885\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08886\ \ \ \ \ \ \ encode\ =\ end\_encode\_m16;}
\DoxyCodeLine{08887\ \ \ \ \ \}}
\DoxyCodeLine{08888\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08889\ \ \ \}}
\DoxyCodeLine{08890\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08891\ }
\DoxyCodeLine{08892\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08893\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{08894\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{08895\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08896\ }
\DoxyCodeLine{08897\ \ \ \ \ output[stbir\_\_decode\_order0]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[0]\ );}
\DoxyCodeLine{08898\ \ \ \ \ output[stbir\_\_decode\_order1]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[1]\ );}
\DoxyCodeLine{08899\ \ \ \ \ output[stbir\_\_decode\_order2]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[2]\ );}
\DoxyCodeLine{08900\ }
\DoxyCodeLine{08901\ \ \ \ \ f\ =\ encode[3]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;}
\DoxyCodeLine{08902\ \ \ \ \ STBIR\_CLAMP(f,\ 0,\ 255);}
\DoxyCodeLine{08903\ \ \ \ \ output[stbir\_\_decode\_order3]\ =\ (\textcolor{keywordtype}{unsigned}\ char)\ f;}
\DoxyCodeLine{08904\ }
\DoxyCodeLine{08905\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{08906\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{08907\ \ \ \}\ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ );}
\DoxyCodeLine{08908\ \}}
\DoxyCodeLine{08909\ }
\DoxyCodeLine{08910\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08911\ }
\DoxyCodeLine{08912\ \textcolor{preprocessor}{\#if\ (\ stbir\_\_coder\_min\_num\ ==\ 2\ )\ ||\ (\ (\ stbir\_\_coder\_min\_num\ ==\ 1\ )\ \&\&\ (\ !defined(stbir\_\_decode\_swizzle)\ )\ )}}
\DoxyCodeLine{08913\ }
\DoxyCodeLine{08914\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_uint8\_srgb2\_linearalpha)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{08915\ \{}
\DoxyCodeLine{08916\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{08917\ \ \ \textcolor{keywordtype}{float}\ const\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{08918\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ const\ *)inputp;}
\DoxyCodeLine{08919\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08920\ \ \ while(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{08921\ \ \ \{}
\DoxyCodeLine{08922\ \ \ \ \ decode[0-\/4]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[stbir\_\_decode\_order0]\ ];}
\DoxyCodeLine{08923\ \ \ \ \ decode[1-\/4]\ =\ (\ (float)\ input[stbir\_\_decode\_order1]\ )\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08924\ \ \ \ \ decode[2-\/4]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ input[stbir\_\_decode\_order0+2]\ ];}
\DoxyCodeLine{08925\ \ \ \ \ decode[3-\/4]\ =\ (\ (float)\ input[stbir\_\_decode\_order1+2]\ )\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08926\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{08927\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{08928\ \ \ \}}
\DoxyCodeLine{08929\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{08930\ \ \ \textcolor{keywordflow}{if}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{08931\ \ \ \{}
\DoxyCodeLine{08932\ \ \ \ \ decode[0]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[\ stbir\_\_decode\_order0\ ];}
\DoxyCodeLine{08933\ \ \ \ \ decode[1]\ =\ (\ (float)\ input[stbir\_\_decode\_order1]\ )\ *\ stbir\_\_max\_uint8\_as\_float\_inverted;}
\DoxyCodeLine{08934\ \ \ \}}
\DoxyCodeLine{08935\ \}}
\DoxyCodeLine{08936\ }
\DoxyCodeLine{08937\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_uint8\_srgb2\_linearalpha\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{08938\ \{}
\DoxyCodeLine{08939\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\ outputp;}
\DoxyCodeLine{08940\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{08941\ }
\DoxyCodeLine{08942\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{08943\ }
\DoxyCodeLine{08944\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 16\ )}
\DoxyCodeLine{08945\ \ \ \{}
\DoxyCodeLine{08946\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m16\ =\ encode\ +\ width\_times\_channels\ -\/\ 16;}
\DoxyCodeLine{08947\ \ \ \ \ end\_output\ -\/=\ 16;}
\DoxyCodeLine{08948\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{08949\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{08950\ \ \ \ \ \{}
\DoxyCodeLine{08951\ \ \ \ \ \ \ stbir\_\_simdf\ f0,\ f1,\ f2,\ f3;}
\DoxyCodeLine{08952\ \ \ \ \ \ \ stbir\_\_simdi\ i0,\ i1,\ i2,\ i3;}
\DoxyCodeLine{08953\ }
\DoxyCodeLine{08954\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08955\ \ \ \ \ \ \ stbir\_\_simdf\_load4\_transposed(\ f0,\ f1,\ f2,\ f3,\ encode\ );}
\DoxyCodeLine{08956\ }
\DoxyCodeLine{08957\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i0,\ f0\ );}
\DoxyCodeLine{08958\ \ \ \ \ \ \ stbir\_\_scale\_and\_convert(\ i1,\ f1\ );}
\DoxyCodeLine{08959\ \ \ \ \ \ \ stbir\_\_min\_max\_shift20(\ i2,\ f2\ );}
\DoxyCodeLine{08960\ \ \ \ \ \ \ stbir\_\_scale\_and\_convert(\ i3,\ f3\ );}
\DoxyCodeLine{08961\ }
\DoxyCodeLine{08962\ \ \ \ \ \ \ stbir\_\_simdi\_table\_lookup2(\ i0,\ i2,\ (\ fp32\_to\_srgb8\_tab4\ -\/\ (127-\/13)*8\ )\ );}
\DoxyCodeLine{08963\ }
\DoxyCodeLine{08964\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i0,\ f0\ );}
\DoxyCodeLine{08965\ \ \ \ \ \ \ stbir\_\_linear\_to\_srgb\_finish(\ i2,\ f2\ );}
\DoxyCodeLine{08966\ }
\DoxyCodeLine{08967\ \ \ \ \ \ \ stbir\_\_interleave\_pack\_and\_store\_16\_u8(\ output,\ \ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order0),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order1),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order2),\ STBIR\_strs\_join1(i,\ ,stbir\_\_encode\_order3)\ );}
\DoxyCodeLine{08968\ }
\DoxyCodeLine{08969\ \ \ \ \ \ \ output\ +=\ 16;}
\DoxyCodeLine{08970\ \ \ \ \ \ \ encode\ +=\ 16;}
\DoxyCodeLine{08971\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{08972\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08973\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ 16\ )\ )}
\DoxyCodeLine{08974\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08975\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{08976\ \ \ \ \ \ \ encode\ =\ end\_encode\_m16;}
\DoxyCodeLine{08977\ \ \ \ \ \}}
\DoxyCodeLine{08978\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08979\ \ \ \}}
\DoxyCodeLine{08980\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{08981\ }
\DoxyCodeLine{08982\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{08983\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{08984\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{08985\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{08986\ }
\DoxyCodeLine{08987\ \ \ \ \ output[stbir\_\_decode\_order0]\ =\ stbir\_\_linear\_to\_srgb\_uchar(\ encode[0]\ );}
\DoxyCodeLine{08988\ }
\DoxyCodeLine{08989\ \ \ \ \ f\ =\ encode[1]\ *\ stbir\_\_max\_uint8\_as\_float\ +\ 0.5f;}
\DoxyCodeLine{08990\ \ \ \ \ STBIR\_CLAMP(f,\ 0,\ 255);}
\DoxyCodeLine{08991\ \ \ \ \ output[stbir\_\_decode\_order1]\ =\ (\textcolor{keywordtype}{unsigned}\ char)\ f;}
\DoxyCodeLine{08992\ }
\DoxyCodeLine{08993\ \ \ \ \ output\ +=\ 2;}
\DoxyCodeLine{08994\ \ \ \ \ encode\ +=\ 2;}
\DoxyCodeLine{08995\ \ \ \}\ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ );}
\DoxyCodeLine{08996\ \}}
\DoxyCodeLine{08997\ }
\DoxyCodeLine{08998\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08999\ }
\DoxyCodeLine{09000\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_uint16\_linear\_scaled)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{09001\ \{}
\DoxyCodeLine{09002\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{09003\ \ \ \textcolor{keywordtype}{float}\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{09004\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ const\ *)inputp;}
\DoxyCodeLine{09005\ }
\DoxyCodeLine{09006\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09007\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keyword}{const}\ *\ end\_input\_m8\ =\ input\ +\ width\_times\_channels\ -\/\ 8;}
\DoxyCodeLine{09008\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 8\ )}
\DoxyCodeLine{09009\ \ \ \{}
\DoxyCodeLine{09010\ \ \ \ \ decode\_end\ -\/=\ 8;}
\DoxyCodeLine{09011\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09012\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09013\ \ \ \ \ \{}
\DoxyCodeLine{09014\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{09015\ \ \ \ \ \ \ stbir\_\_simdi\ i;\ stbir\_\_simdi8\ o;}
\DoxyCodeLine{09016\ \ \ \ \ \ \ stbir\_\_simdf8\ of;}
\DoxyCodeLine{09017\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09018\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{09019\ \ \ \ \ \ \ stbir\_\_simdi8\_expand\_u16\_to\_u32(\ o,\ i\ );}
\DoxyCodeLine{09020\ \ \ \ \ \ \ stbir\_\_simdi8\_convert\_i32\_to\_float(\ of,\ o\ );}
\DoxyCodeLine{09021\ \ \ \ \ \ \ stbir\_\_simdf8\_mult(\ of,\ of,\ STBIR\_max\_uint16\_as\_float\_inverted8);}
\DoxyCodeLine{09022\ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of\ );}
\DoxyCodeLine{09023\ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode\ +\ 0,\ of\ );}
\DoxyCodeLine{09024\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{09025\ \ \ \ \ \ \ stbir\_\_simdi\ i,\ o0,\ o1;}
\DoxyCodeLine{09026\ \ \ \ \ \ \ stbir\_\_simdf\ of0,\ of1;}
\DoxyCodeLine{09027\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09028\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{09029\ \ \ \ \ \ \ stbir\_\_simdi\_expand\_u16\_to\_u32(\ o0,o1,i\ );}
\DoxyCodeLine{09030\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of0,\ o0\ );}
\DoxyCodeLine{09031\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of1,\ o1\ );}
\DoxyCodeLine{09032\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ of0,\ of0,\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float\_inverted)\ );}
\DoxyCodeLine{09033\ \ \ \ \ \ \ stbir\_\_simdf\_mult(\ of1,\ of1,\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float\_inverted));}
\DoxyCodeLine{09034\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of0\ );}
\DoxyCodeLine{09035\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of1\ );}
\DoxyCodeLine{09036\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 0,\ \ of0\ );}
\DoxyCodeLine{09037\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 4,\ \ of1\ );}
\DoxyCodeLine{09038\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09039\ \ \ \ \ \ \ decode\ +=\ 8;}
\DoxyCodeLine{09040\ \ \ \ \ \ \ input\ +=\ 8;}
\DoxyCodeLine{09041\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09043\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ ==\ (\ decode\_end\ +\ 8\ )\ )}
\DoxyCodeLine{09044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09045\ \ \ \ \ \ \ decode\ =\ decode\_end;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09046\ \ \ \ \ \ \ input\ =\ end\_input\_m8;}
\DoxyCodeLine{09047\ \ \ \ \ \}}
\DoxyCodeLine{09048\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09049\ \ \ \}}
\DoxyCodeLine{09050\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09051\ }
\DoxyCodeLine{09052\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09053\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09054\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09055\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09056\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09057\ \ \ \{}
\DoxyCodeLine{09058\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{09059\ \ \ \ \ decode[0-\/4]\ =\ ((float)(input[stbir\_\_decode\_order0]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09060\ \ \ \ \ decode[1-\/4]\ =\ ((float)(input[stbir\_\_decode\_order1]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09061\ \ \ \ \ decode[2-\/4]\ =\ ((float)(input[stbir\_\_decode\_order2]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09062\ \ \ \ \ decode[3-\/4]\ =\ ((float)(input[stbir\_\_decode\_order3]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09063\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09064\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{09065\ \ \ \}}
\DoxyCodeLine{09066\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{09067\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09068\ }
\DoxyCodeLine{09069\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09070\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09071\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09072\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{09073\ \ \ \{}
\DoxyCodeLine{09074\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09075\ \ \ \ \ decode[0]\ =\ ((float)(input[stbir\_\_decode\_order0]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09076\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09077\ \ \ \ \ decode[1]\ =\ ((float)(input[stbir\_\_decode\_order1]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09078\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09079\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09080\ \ \ \ \ decode[2]\ =\ ((float)(input[stbir\_\_decode\_order2]))\ *\ stbir\_\_max\_uint16\_as\_float\_inverted;}
\DoxyCodeLine{09081\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09082\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09083\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09084\ \ \ \}}
\DoxyCodeLine{09085\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09086\ \}}
\DoxyCodeLine{09087\ }
\DoxyCodeLine{09088\ }
\DoxyCodeLine{09089\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_encode\_uint16\_linear\_scaled)(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{09090\ \{}
\DoxyCodeLine{09091\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)\ outputp;}
\DoxyCodeLine{09092\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{09093\ }
\DoxyCodeLine{09094\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09095\ \ \ \{}
\DoxyCodeLine{09096\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ stbir\_\_simdfX\_float\_count*2\ )}
\DoxyCodeLine{09097\ \ \ \ \ \{}
\DoxyCodeLine{09098\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m8\ =\ encode\ +\ width\_times\_channels\ -\/\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09099\ \ \ \ \ \ \ end\_output\ -\/=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09100\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09101\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09102\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09103\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\ e0,\ e1;}
\DoxyCodeLine{09104\ \ \ \ \ \ \ \ \ stbir\_\_simdiX\ i;}
\DoxyCodeLine{09105\ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09106\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd\_mem(\ e0,\ STBIR\_simd\_point5X,\ STBIR\_max\_uint16\_as\_floatX,\ encode\ );}
\DoxyCodeLine{09107\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd\_mem(\ e1,\ STBIR\_simd\_point5X,\ STBIR\_max\_uint16\_as\_floatX,\ encode+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{09108\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e0\ );}
\DoxyCodeLine{09109\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e1\ );}
\DoxyCodeLine{09110\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_pack\_to\_words(\ i,\ e0,\ e1\ );}
\DoxyCodeLine{09111\ \ \ \ \ \ \ \ \ stbir\_\_simdiX\_store(\ output,\ i\ );}
\DoxyCodeLine{09112\ \ \ \ \ \ \ \ \ encode\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09113\ \ \ \ \ \ \ \ \ output\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09115\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ stbir\_\_simdfX\_float\_count*2\ )\ )}
\DoxyCodeLine{09117\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09118\ \ \ \ \ \ \ \ \ output\ =\ end\_output;\ \ \ \ \ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09119\ \ \ \ \ \ \ \ \ encode\ =\ end\_encode\_m8;}
\DoxyCodeLine{09120\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09121\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09122\ \ \ \ \ \}}
\DoxyCodeLine{09123\ \ \ \}}
\DoxyCodeLine{09124\ }
\DoxyCodeLine{09125\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09126\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09127\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09128\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09129\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09130\ \ \ \{}
\DoxyCodeLine{09131\ \ \ \ \ stbir\_\_simdf\ e;}
\DoxyCodeLine{09132\ \ \ \ \ stbir\_\_simdi\ i;}
\DoxyCodeLine{09133\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09134\ \ \ \ \ stbir\_\_simdf\_load(\ e,\ encode\ );}
\DoxyCodeLine{09135\ \ \ \ \ stbir\_\_simdf\_madd(\ e,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float),\ e\ );}
\DoxyCodeLine{09136\ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ e\ );}
\DoxyCodeLine{09137\ \ \ \ \ stbir\_\_simdf\_pack\_to\_8words(\ i,\ e,\ e\ );\ \ \textcolor{comment}{//\ only\ use\ first\ 4}}
\DoxyCodeLine{09138\ \ \ \ \ stbir\_\_simdi\_store2(\ output-\/4,\ i\ );}
\DoxyCodeLine{09139\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09140\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09141\ \ \ \}}
\DoxyCodeLine{09142\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09143\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09144\ }
\DoxyCodeLine{09145\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09146\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09147\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09148\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{09149\ \ \ \{}
\DoxyCodeLine{09150\ \ \ \ \ stbir\_\_simdf\ e;}
\DoxyCodeLine{09151\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09152\ \ \ \ \ stbir\_\_simdf\_madd1\_mem(\ e,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float),\ encode+stbir\_\_encode\_order0\ );\ output[0]\ =\ stbir\_\_simdf\_convert\_float\_to\_short(\ e\ );}
\DoxyCodeLine{09153\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09154\ \ \ \ \ stbir\_\_simdf\_madd1\_mem(\ e,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float),\ encode+stbir\_\_encode\_order1\ );\ output[1]\ =\ stbir\_\_simdf\_convert\_float\_to\_short(\ e\ );}
\DoxyCodeLine{09155\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09156\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09157\ \ \ \ \ stbir\_\_simdf\_madd1\_mem(\ e,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ STBIR\_\_CONSTF(STBIR\_max\_uint16\_as\_float),\ encode+stbir\_\_encode\_order2\ );\ output[2]\ =\ stbir\_\_simdf\_convert\_float\_to\_short(\ e\ );}
\DoxyCodeLine{09158\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09159\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09160\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09161\ \ \ \}}
\DoxyCodeLine{09162\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09163\ }
\DoxyCodeLine{09164\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09165\ }
\DoxyCodeLine{09166\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09167\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09168\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09169\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09170\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09171\ \ \ \{}
\DoxyCodeLine{09172\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{09173\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09174\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[0-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09175\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[1-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09176\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[2-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09177\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order3]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[3-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09178\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09179\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09180\ \ \ \}}
\DoxyCodeLine{09181\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09182\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09183\ }
\DoxyCodeLine{09184\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09185\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09186\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09187\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{09188\ \ \ \{}
\DoxyCodeLine{09189\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{09190\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09191\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[0]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09192\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09193\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[1]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09194\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09195\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09196\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ *\ stbir\_\_max\_uint16\_as\_float\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[2]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09197\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09198\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09199\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09200\ \ \ \}}
\DoxyCodeLine{09201\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09202\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09203\ \}}
\DoxyCodeLine{09204\ }
\DoxyCodeLine{09205\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_uint16\_linear)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{09206\ \{}
\DoxyCodeLine{09207\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{09208\ \ \ \textcolor{keywordtype}{float}\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{09209\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ const\ *\ input\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ const\ *)inputp;}
\DoxyCodeLine{09210\ }
\DoxyCodeLine{09211\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09212\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keyword}{const}\ *\ end\_input\_m8\ =\ input\ +\ width\_times\_channels\ -\/\ 8;}
\DoxyCodeLine{09213\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 8\ )}
\DoxyCodeLine{09214\ \ \ \{}
\DoxyCodeLine{09215\ \ \ \ \ decode\_end\ -\/=\ 8;}
\DoxyCodeLine{09216\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09217\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09218\ \ \ \ \ \{}
\DoxyCodeLine{09219\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{09220\ \ \ \ \ \ \ stbir\_\_simdi\ i;\ stbir\_\_simdi8\ o;}
\DoxyCodeLine{09221\ \ \ \ \ \ \ stbir\_\_simdf8\ of;}
\DoxyCodeLine{09222\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09223\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{09224\ \ \ \ \ \ \ stbir\_\_simdi8\_expand\_u16\_to\_u32(\ o,\ i\ );}
\DoxyCodeLine{09225\ \ \ \ \ \ \ stbir\_\_simdi8\_convert\_i32\_to\_float(\ of,\ o\ );}
\DoxyCodeLine{09226\ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of\ );}
\DoxyCodeLine{09227\ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode\ +\ 0,\ of\ );}
\DoxyCodeLine{09228\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{09229\ \ \ \ \ \ \ stbir\_\_simdi\ i,\ o0,\ o1;}
\DoxyCodeLine{09230\ \ \ \ \ \ \ stbir\_\_simdf\ of0,\ of1;}
\DoxyCodeLine{09231\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09232\ \ \ \ \ \ \ stbir\_\_simdi\_load(\ i,\ input\ );}
\DoxyCodeLine{09233\ \ \ \ \ \ \ stbir\_\_simdi\_expand\_u16\_to\_u32(\ o0,\ o1,\ i\ );}
\DoxyCodeLine{09234\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of0,\ o0\ );}
\DoxyCodeLine{09235\ \ \ \ \ \ \ stbir\_\_simdi\_convert\_i32\_to\_float(\ of1,\ o1\ );}
\DoxyCodeLine{09236\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of0\ );}
\DoxyCodeLine{09237\ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of1\ );}
\DoxyCodeLine{09238\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 0,\ \ of0\ );}
\DoxyCodeLine{09239\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode\ +\ 4,\ \ of1\ );}
\DoxyCodeLine{09240\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09241\ \ \ \ \ \ \ decode\ +=\ 8;}
\DoxyCodeLine{09242\ \ \ \ \ \ \ input\ +=\ 8;}
\DoxyCodeLine{09243\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09245\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ ==\ (\ decode\_end\ +\ 8\ )\ )}
\DoxyCodeLine{09246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09247\ \ \ \ \ \ \ decode\ =\ decode\_end;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09248\ \ \ \ \ \ \ input\ =\ end\_input\_m8;}
\DoxyCodeLine{09249\ \ \ \ \ \}}
\DoxyCodeLine{09250\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09251\ \ \ \}}
\DoxyCodeLine{09252\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09253\ }
\DoxyCodeLine{09254\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09255\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09256\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09257\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09258\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09259\ \ \ \{}
\DoxyCodeLine{09260\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{09261\ \ \ \ \ decode[0-\/4]\ =\ ((float)(input[stbir\_\_decode\_order0]));}
\DoxyCodeLine{09262\ \ \ \ \ decode[1-\/4]\ =\ ((float)(input[stbir\_\_decode\_order1]));}
\DoxyCodeLine{09263\ \ \ \ \ decode[2-\/4]\ =\ ((float)(input[stbir\_\_decode\_order2]));}
\DoxyCodeLine{09264\ \ \ \ \ decode[3-\/4]\ =\ ((float)(input[stbir\_\_decode\_order3]));}
\DoxyCodeLine{09265\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09266\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{09267\ \ \ \}}
\DoxyCodeLine{09268\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{09269\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09270\ }
\DoxyCodeLine{09271\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09272\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09273\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09274\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{09275\ \ \ \{}
\DoxyCodeLine{09276\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09277\ \ \ \ \ decode[0]\ =\ ((float)(input[stbir\_\_decode\_order0]));}
\DoxyCodeLine{09278\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09279\ \ \ \ \ decode[1]\ =\ ((float)(input[stbir\_\_decode\_order1]));}
\DoxyCodeLine{09280\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09281\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09282\ \ \ \ \ decode[2]\ =\ ((float)(input[stbir\_\_decode\_order2]));}
\DoxyCodeLine{09283\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09284\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09285\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09286\ \ \ \}}
\DoxyCodeLine{09287\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09288\ \}}
\DoxyCodeLine{09289\ }
\DoxyCodeLine{09290\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_encode\_uint16\_linear)(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{09291\ \{}
\DoxyCodeLine{09292\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)\ outputp;}
\DoxyCodeLine{09293\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{09294\ }
\DoxyCodeLine{09295\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09296\ \ \ \{}
\DoxyCodeLine{09297\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ stbir\_\_simdfX\_float\_count*2\ )}
\DoxyCodeLine{09298\ \ \ \ \ \{}
\DoxyCodeLine{09299\ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m8\ =\ encode\ +\ width\_times\_channels\ -\/\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09300\ \ \ \ \ \ \ end\_output\ -\/=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09301\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09302\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09303\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09304\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\ e0,\ e1;}
\DoxyCodeLine{09305\ \ \ \ \ \ \ \ \ stbir\_\_simdiX\ i;}
\DoxyCodeLine{09306\ \ \ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09307\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_add\_mem(\ e0,\ STBIR\_simd\_point5X,\ encode\ );}
\DoxyCodeLine{09308\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_add\_mem(\ e1,\ STBIR\_simd\_point5X,\ encode+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{09309\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e0\ );}
\DoxyCodeLine{09310\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e1\ );}
\DoxyCodeLine{09311\ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_pack\_to\_words(\ i,\ e0,\ e1\ );}
\DoxyCodeLine{09312\ \ \ \ \ \ \ \ \ stbir\_\_simdiX\_store(\ output,\ i\ );}
\DoxyCodeLine{09313\ \ \ \ \ \ \ \ \ encode\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09314\ \ \ \ \ \ \ \ \ output\ +=\ stbir\_\_simdfX\_float\_count*2;}
\DoxyCodeLine{09315\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09316\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ stbir\_\_simdfX\_float\_count*2\ )\ )}
\DoxyCodeLine{09318\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09319\ \ \ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09320\ \ \ \ \ \ \ \ \ encode\ =\ end\_encode\_m8;}
\DoxyCodeLine{09321\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09322\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09323\ \ \ \ \ \}}
\DoxyCodeLine{09324\ \ \ \}}
\DoxyCodeLine{09325\ }
\DoxyCodeLine{09326\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09327\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09328\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09329\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09330\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09331\ \ \ \{}
\DoxyCodeLine{09332\ \ \ \ \ stbir\_\_simdf\ e;}
\DoxyCodeLine{09333\ \ \ \ \ stbir\_\_simdi\ i;}
\DoxyCodeLine{09334\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09335\ \ \ \ \ stbir\_\_simdf\_load(\ e,\ encode\ );}
\DoxyCodeLine{09336\ \ \ \ \ stbir\_\_simdf\_add(\ e,\ STBIR\_\_CONSTF(STBIR\_simd\_point5),\ e\ );}
\DoxyCodeLine{09337\ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ e\ );}
\DoxyCodeLine{09338\ \ \ \ \ stbir\_\_simdf\_pack\_to\_8words(\ i,\ e,\ e\ );\ \ \textcolor{comment}{//\ only\ use\ first\ 4}}
\DoxyCodeLine{09339\ \ \ \ \ stbir\_\_simdi\_store2(\ output-\/4,\ i\ );}
\DoxyCodeLine{09340\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09341\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09342\ \ \ \}}
\DoxyCodeLine{09343\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09344\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09345\ }
\DoxyCodeLine{09346\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09347\ }
\DoxyCodeLine{09348\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09349\ \textcolor{preprocessor}{\ \ \#if\ \ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09350\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09351\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09352\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09353\ \ \ \{}
\DoxyCodeLine{09354\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{09355\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09356\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[0-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09357\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[1-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09358\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[2-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09359\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order3]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[3-\/4]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09360\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09361\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09362\ \ \ \}}
\DoxyCodeLine{09363\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09364\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09365\ }
\DoxyCodeLine{09366\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09367\ }
\DoxyCodeLine{09368\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09369\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09370\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09371\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{09372\ \ \ \{}
\DoxyCodeLine{09373\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{09374\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09375\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order0]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[0]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09376\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09377\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order1]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[1]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09378\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09379\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09380\ \ \ \ \ f\ =\ encode[stbir\_\_encode\_order2]\ +\ 0.5f;\ STBIR\_CLAMP(f,\ 0,\ 65535);\ output[2]\ =\ (\textcolor{keywordtype}{unsigned}\ short)f;}
\DoxyCodeLine{09381\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09382\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09383\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09384\ \ \ \}}
\DoxyCodeLine{09385\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09386\ \}}
\DoxyCodeLine{09387\ }
\DoxyCodeLine{09388\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_half\_float\_linear)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{09389\ \{}
\DoxyCodeLine{09390\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{09391\ \ \ \textcolor{keywordtype}{float}\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{09392\ \ \ stbir\_\_FP16\ const\ *\ input\ =\ (stbir\_\_FP16\ const\ *)inputp;}
\DoxyCodeLine{09393\ }
\DoxyCodeLine{09394\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09395\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 8\ )}
\DoxyCodeLine{09396\ \ \ \{}
\DoxyCodeLine{09397\ \ \ \ \ stbir\_\_FP16\ \textcolor{keyword}{const}\ *\ end\_input\_m8\ =\ input\ +\ width\_times\_channels\ -\/\ 8;}
\DoxyCodeLine{09398\ \ \ \ \ decode\_end\ -\/=\ 8;}
\DoxyCodeLine{09399\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09400\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09401\ \ \ \ \ \{}
\DoxyCodeLine{09402\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09403\ }
\DoxyCodeLine{09404\ \ \ \ \ \ \ stbir\_\_half\_to\_float\_SIMD(\ decode,\ input\ );}
\DoxyCodeLine{09405\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{09406\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{09407\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09408\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\ of;}
\DoxyCodeLine{09409\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_load(\ of,\ decode\ );}
\DoxyCodeLine{09410\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of\ );}
\DoxyCodeLine{09411\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode,\ of\ );}
\DoxyCodeLine{09412\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09413\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{09414\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09415\ \ \ \ \ \ \ \ \ stbir\_\_simdf\ of0,of1;}
\DoxyCodeLine{09416\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of0,\ decode\ );}
\DoxyCodeLine{09417\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of1,\ decode+4\ );}
\DoxyCodeLine{09418\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of0\ );}
\DoxyCodeLine{09419\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of1\ );}
\DoxyCodeLine{09420\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode,\ of0\ );}
\DoxyCodeLine{09421\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+4,\ of1\ );}
\DoxyCodeLine{09422\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09423\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09424\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09425\ \ \ \ \ \ \ decode\ +=\ 8;}
\DoxyCodeLine{09426\ \ \ \ \ \ \ input\ +=\ 8;}
\DoxyCodeLine{09427\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09429\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ ==\ (\ decode\_end\ +\ 8\ )\ )}
\DoxyCodeLine{09430\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09431\ \ \ \ \ \ \ decode\ =\ decode\_end;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09432\ \ \ \ \ \ \ input\ =\ end\_input\_m8;}
\DoxyCodeLine{09433\ \ \ \ \ \}}
\DoxyCodeLine{09434\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09435\ \ \ \}}
\DoxyCodeLine{09436\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09437\ }
\DoxyCodeLine{09438\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09439\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09440\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09441\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09442\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09443\ \ \ \{}
\DoxyCodeLine{09444\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{09445\ \ \ \ \ decode[0-\/4]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order0]);}
\DoxyCodeLine{09446\ \ \ \ \ decode[1-\/4]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order1]);}
\DoxyCodeLine{09447\ \ \ \ \ decode[2-\/4]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order2]);}
\DoxyCodeLine{09448\ \ \ \ \ decode[3-\/4]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order3]);}
\DoxyCodeLine{09449\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09450\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{09451\ \ \ \}}
\DoxyCodeLine{09452\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{09453\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09454\ }
\DoxyCodeLine{09455\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09456\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09457\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09458\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{09459\ \ \ \{}
\DoxyCodeLine{09460\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09461\ \ \ \ \ decode[0]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order0]);}
\DoxyCodeLine{09462\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09463\ \ \ \ \ decode[1]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order1]);}
\DoxyCodeLine{09464\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09465\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09466\ \ \ \ \ decode[2]\ =\ stbir\_\_half\_to\_float(input[stbir\_\_decode\_order2]);}
\DoxyCodeLine{09467\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09468\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09469\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09470\ \ \ \}}
\DoxyCodeLine{09471\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09472\ \}}
\DoxyCodeLine{09473\ }
\DoxyCodeLine{09474\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_half\_float\_linear\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{09475\ \{}
\DoxyCodeLine{09476\ \ \ stbir\_\_FP16\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (stbir\_\_FP16*)\ outputp;}
\DoxyCodeLine{09477\ \ \ stbir\_\_FP16\ *\ end\_output\ =\ (\ (stbir\_\_FP16*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{09478\ }
\DoxyCodeLine{09479\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09480\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 8\ )}
\DoxyCodeLine{09481\ \ \ \{}
\DoxyCodeLine{09482\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m8\ =\ encode\ +\ width\_times\_channels\ -\/\ 8;}
\DoxyCodeLine{09483\ \ \ \ \ end\_output\ -\/=\ 8;}
\DoxyCodeLine{09484\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09485\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09486\ \ \ \ \ \{}
\DoxyCodeLine{09487\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09488\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{09489\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{09490\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09491\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\ of;}
\DoxyCodeLine{09492\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_load(\ of,\ encode\ );}
\DoxyCodeLine{09493\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdf8\_unflip(\ of\ );}
\DoxyCodeLine{09494\ \ \ \ \ \ \ \ \ stbir\_\_float\_to\_half\_SIMD(\ output,\ (\textcolor{keywordtype}{float}*)\&of\ );}
\DoxyCodeLine{09495\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09496\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{09497\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09498\ \ \ \ \ \ \ \ \ stbir\_\_simdf\ of[2];}
\DoxyCodeLine{09499\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of[0],\ encode\ );}
\DoxyCodeLine{09500\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of[1],\ encode+4\ );}
\DoxyCodeLine{09501\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ of[0]\ );}
\DoxyCodeLine{09502\ \ \ \ \ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ of[1]\ );}
\DoxyCodeLine{09503\ \ \ \ \ \ \ \ \ stbir\_\_float\_to\_half\_SIMD(\ output,\ (\textcolor{keywordtype}{float}*)of\ );}
\DoxyCodeLine{09504\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09505\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09506\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{09507\ \ \ \ \ \ \ stbir\_\_float\_to\_half\_SIMD(\ output,\ encode\ );}
\DoxyCodeLine{09508\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09509\ \ \ \ \ \ \ encode\ +=\ 8;}
\DoxyCodeLine{09510\ \ \ \ \ \ \ output\ +=\ 8;}
\DoxyCodeLine{09511\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09512\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09513\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ 8\ )\ )}
\DoxyCodeLine{09514\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09515\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09516\ \ \ \ \ \ \ encode\ =\ end\_encode\_m8;}
\DoxyCodeLine{09517\ \ \ \ \ \}}
\DoxyCodeLine{09518\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09519\ \ \ \}}
\DoxyCodeLine{09520\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09521\ }
\DoxyCodeLine{09522\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09523\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09524\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09525\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09526\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09527\ \ \ \{}
\DoxyCodeLine{09528\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(output);}
\DoxyCodeLine{09529\ \ \ \ \ output[0-\/4]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order0]);}
\DoxyCodeLine{09530\ \ \ \ \ output[1-\/4]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order1]);}
\DoxyCodeLine{09531\ \ \ \ \ output[2-\/4]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order2]);}
\DoxyCodeLine{09532\ \ \ \ \ output[3-\/4]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order3]);}
\DoxyCodeLine{09533\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09534\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09535\ \ \ \}}
\DoxyCodeLine{09536\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09537\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09538\ }
\DoxyCodeLine{09539\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09540\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09541\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09542\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{09543\ \ \ \{}
\DoxyCodeLine{09544\ \ \ \ \ STBIR\_NO\_UNROLL(output);}
\DoxyCodeLine{09545\ \ \ \ \ output[0]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order0]);}
\DoxyCodeLine{09546\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09547\ \ \ \ \ output[1]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order1]);}
\DoxyCodeLine{09548\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09549\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09550\ \ \ \ \ output[2]\ =\ stbir\_\_float\_to\_half(encode[stbir\_\_encode\_order2]);}
\DoxyCodeLine{09551\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09552\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09553\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09554\ \ \ \}}
\DoxyCodeLine{09555\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09556\ \}}
\DoxyCodeLine{09557\ }
\DoxyCodeLine{09558\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(stbir\_\_decode\_float\_linear)(\ \textcolor{keywordtype}{float}\ *\ decodep,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{void}\ \textcolor{keyword}{const}\ *\ inputp\ )}
\DoxyCodeLine{09559\ \{}
\DoxyCodeLine{09560\ \textcolor{preprocessor}{\ \ \#ifdef\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{09561\ \ \ \textcolor{keywordtype}{float}\ STBIR\_STREAMOUT\_PTR(\ *\ )\ decode\ =\ decodep;}
\DoxyCodeLine{09562\ \ \ \textcolor{keywordtype}{float}\ *\ decode\_end\ =\ (\textcolor{keywordtype}{float}*)\ decode\ +\ width\_times\_channels;}
\DoxyCodeLine{09563\ \ \ \textcolor{keywordtype}{float}\ const\ *\ input\ =\ (\textcolor{keywordtype}{float}\ const\ *)inputp;}
\DoxyCodeLine{09564\ }
\DoxyCodeLine{09565\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09566\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ 16\ )}
\DoxyCodeLine{09567\ \ \ \{}
\DoxyCodeLine{09568\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_input\_m16\ =\ input\ +\ width\_times\_channels\ -\/\ 16;}
\DoxyCodeLine{09569\ \ \ \ \ decode\_end\ -\/=\ 16;}
\DoxyCodeLine{09570\ \ \ \ \ STBIR\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09571\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09572\ \ \ \ \ \{}
\DoxyCodeLine{09573\ \ \ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09574\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{09575\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STBIR\_SIMD8}}
\DoxyCodeLine{09576\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09577\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\ of0,of1;}
\DoxyCodeLine{09578\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_load(\ of0,\ input\ );}
\DoxyCodeLine{09579\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_load(\ of1,\ input+8\ );}
\DoxyCodeLine{09580\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of0\ );}
\DoxyCodeLine{09581\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf8\_flip(\ of1\ );}
\DoxyCodeLine{09582\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode,\ of0\ );}
\DoxyCodeLine{09583\ \ \ \ \ \ \ \ \ stbir\_\_simdf8\_store(\ decode+8,\ of1\ );}
\DoxyCodeLine{09584\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09585\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{09586\ \ \ \ \ \ \ \{}
\DoxyCodeLine{09587\ \ \ \ \ \ \ \ \ stbir\_\_simdf\ of0,of1,of2,of3;}
\DoxyCodeLine{09588\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of0,\ input\ );}
\DoxyCodeLine{09589\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of1,\ input+4\ );}
\DoxyCodeLine{09590\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of2,\ input+8\ );}
\DoxyCodeLine{09591\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_load(\ of3,\ input+12\ );}
\DoxyCodeLine{09592\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of0\ );}
\DoxyCodeLine{09593\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of1\ );}
\DoxyCodeLine{09594\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of2\ );}
\DoxyCodeLine{09595\ \ \ \ \ \ \ \ \ stbir\_\_decode\_simdf4\_flip(\ of3\ );}
\DoxyCodeLine{09596\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode,\ of0\ );}
\DoxyCodeLine{09597\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+4,\ of1\ );}
\DoxyCodeLine{09598\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+8,\ of2\ );}
\DoxyCodeLine{09599\ \ \ \ \ \ \ \ \ stbir\_\_simdf\_store(\ decode+12,\ of3\ );}
\DoxyCodeLine{09600\ \ \ \ \ \ \ \}}
\DoxyCodeLine{09601\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09602\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{09603\ \ \ \ \ \ \ decode\ +=\ 16;}
\DoxyCodeLine{09604\ \ \ \ \ \ \ input\ +=\ 16;}
\DoxyCodeLine{09605\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09606\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09607\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ decode\ ==\ (\ decode\_end\ +\ 16\ )\ )}
\DoxyCodeLine{09608\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09609\ \ \ \ \ \ \ decode\ =\ decode\_end;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09610\ \ \ \ \ \ \ input\ =\ end\_input\_m16;}
\DoxyCodeLine{09611\ \ \ \ \ \}}
\DoxyCodeLine{09612\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09613\ \ \ \}}
\DoxyCodeLine{09614\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09615\ }
\DoxyCodeLine{09616\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09617\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09618\ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09619\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09620\ \ \ \textcolor{keywordflow}{while}(\ decode\ <=\ decode\_end\ )}
\DoxyCodeLine{09621\ \ \ \{}
\DoxyCodeLine{09622\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(decode);}
\DoxyCodeLine{09623\ \ \ \ \ decode[0-\/4]\ =\ input[stbir\_\_decode\_order0];}
\DoxyCodeLine{09624\ \ \ \ \ decode[1-\/4]\ =\ input[stbir\_\_decode\_order1];}
\DoxyCodeLine{09625\ \ \ \ \ decode[2-\/4]\ =\ input[stbir\_\_decode\_order2];}
\DoxyCodeLine{09626\ \ \ \ \ decode[3-\/4]\ =\ input[stbir\_\_decode\_order3];}
\DoxyCodeLine{09627\ \ \ \ \ decode\ +=\ 4;}
\DoxyCodeLine{09628\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{09629\ \ \ \}}
\DoxyCodeLine{09630\ \ \ decode\ -\/=\ 4;}
\DoxyCodeLine{09631\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09632\ }
\DoxyCodeLine{09633\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09634\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09635\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09636\ \ \ \textcolor{keywordflow}{while}(\ decode\ <\ decode\_end\ )}
\DoxyCodeLine{09637\ \ \ \{}
\DoxyCodeLine{09638\ \ \ \ \ STBIR\_NO\_UNROLL(decode);}
\DoxyCodeLine{09639\ \ \ \ \ decode[0]\ =\ input[stbir\_\_decode\_order0];}
\DoxyCodeLine{09640\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09641\ \ \ \ \ decode[1]\ =\ input[stbir\_\_decode\_order1];}
\DoxyCodeLine{09642\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09643\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09644\ \ \ \ \ decode[2]\ =\ input[stbir\_\_decode\_order2];}
\DoxyCodeLine{09645\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09646\ \ \ \ \ decode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09647\ \ \ \ \ input\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09648\ \ \ \}}
\DoxyCodeLine{09649\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09650\ }
\DoxyCodeLine{09651\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09652\ }
\DoxyCodeLine{09653\ \ \ \textcolor{keywordflow}{if}\ (\ (\textcolor{keywordtype}{void}*)decodep\ !=\ inputp\ )}
\DoxyCodeLine{09654\ \ \ \ \ STBIR\_MEMCPY(\ decodep,\ inputp,\ width\_times\_channels\ *\ \textcolor{keyword}{sizeof}(\ \textcolor{keywordtype}{float}\ )\ );}
\DoxyCodeLine{09655\ }
\DoxyCodeLine{09656\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09657\ \}}
\DoxyCodeLine{09658\ }
\DoxyCodeLine{09659\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_\_CODER\_NAME(\ stbir\_\_encode\_float\_linear\ )(\ \textcolor{keywordtype}{void}\ *\ outputp,\ \textcolor{keywordtype}{int}\ width\_times\_channels,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ encode\ )}
\DoxyCodeLine{09660\ \{}
\DoxyCodeLine{09661\ \textcolor{preprocessor}{\ \ \#if\ !defined(\ STBIR\_FLOAT\_HIGH\_CLAMP\ )\ \&\&\ !defined(STBIR\_FLOAT\_LO\_CLAMP)\ \&\&\ !defined(stbir\_\_decode\_swizzle)}}
\DoxyCodeLine{09662\ }
\DoxyCodeLine{09663\ \ \ \textcolor{keywordflow}{if}\ (\ (\textcolor{keywordtype}{void}*)outputp\ !=\ (\textcolor{keywordtype}{void}*)\ encode\ )}
\DoxyCodeLine{09664\ \ \ \ \ STBIR\_MEMCPY(\ outputp,\ encode,\ width\_times\_channels\ *\ \textcolor{keyword}{sizeof}(\ \textcolor{keywordtype}{float}\ )\ );}
\DoxyCodeLine{09665\ }
\DoxyCodeLine{09666\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09667\ }
\DoxyCodeLine{09668\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ (\textcolor{keywordtype}{float}*)\ outputp;}
\DoxyCodeLine{09669\ \ \ \textcolor{keywordtype}{float}\ *\ end\_output\ =\ (\ (\textcolor{keywordtype}{float}*)\ output\ )\ +\ width\_times\_channels;}
\DoxyCodeLine{09670\ }
\DoxyCodeLine{09671\ \ \ \textcolor{preprocessor}{\#ifdef\ STBIR\_FLOAT\_HIGH\_CLAMP}}
\DoxyCodeLine{09672\ \textcolor{preprocessor}{\ \ \#define\ stbir\_scalar\_hi\_clamp(\ v\ )\ if\ (\ v\ >\ STBIR\_FLOAT\_HIGH\_CLAMP\ )\ v\ =\ STBIR\_FLOAT\_HIGH\_CLAMP;}}
\DoxyCodeLine{09673\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09674\ \textcolor{preprocessor}{\ \ \#define\ stbir\_scalar\_hi\_clamp(\ v\ )}}
\DoxyCodeLine{09675\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09676\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_FLOAT\_LOW\_CLAMP}}
\DoxyCodeLine{09677\ \textcolor{preprocessor}{\ \ \#define\ stbir\_scalar\_lo\_clamp(\ v\ )\ if\ (\ v\ <\ STBIR\_FLOAT\_LOW\_CLAMP\ )\ v\ =\ STBIR\_FLOAT\_LOW\_CLAMP;}}
\DoxyCodeLine{09678\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09679\ \textcolor{preprocessor}{\ \ \#define\ stbir\_scalar\_lo\_clamp(\ v\ )}}
\DoxyCodeLine{09680\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09681\ }
\DoxyCodeLine{09682\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{09683\ }
\DoxyCodeLine{09684\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_FLOAT\_HIGH\_CLAMP}}
\DoxyCodeLine{09685\ \ \ \textcolor{keyword}{const}\ stbir\_\_simdfX\ high\_clamp\ =\ stbir\_\_simdf\_frepX(STBIR\_FLOAT\_HIGH\_CLAMP);}
\DoxyCodeLine{09686\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09687\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_FLOAT\_LOW\_CLAMP}}
\DoxyCodeLine{09688\ \ \ \textcolor{keyword}{const}\ stbir\_\_simdfX\ low\_clamp\ =\ stbir\_\_simdf\_frepX(STBIR\_FLOAT\_LOW\_CLAMP);}
\DoxyCodeLine{09689\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09690\ }
\DoxyCodeLine{09691\ \ \ \textcolor{keywordflow}{if}\ (\ width\_times\_channels\ >=\ (\ stbir\_\_simdfX\_float\_count\ *\ 2\ )\ )}
\DoxyCodeLine{09692\ \ \ \{}
\DoxyCodeLine{09693\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ end\_encode\_m8\ =\ encode\ +\ width\_times\_channels\ -\/\ (\ stbir\_\_simdfX\_float\_count\ *\ 2\ );}
\DoxyCodeLine{09694\ \ \ \ \ end\_output\ -\/=\ (\ stbir\_\_simdfX\_float\_count\ *\ 2\ );}
\DoxyCodeLine{09695\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START\_INF\_FOR}
\DoxyCodeLine{09696\ \ \ \ \ \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{09697\ \ \ \ \ \{}
\DoxyCodeLine{09698\ \ \ \ \ \ \ stbir\_\_simdfX\ e0,\ e1;}
\DoxyCodeLine{09699\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09700\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ e0,\ encode\ );}
\DoxyCodeLine{09701\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ e1,\ encode+stbir\_\_simdfX\_float\_count\ );}
\DoxyCodeLine{09702\ \textcolor{preprocessor}{\#ifdef\ STBIR\_FLOAT\_HIGH\_CLAMP}}
\DoxyCodeLine{09703\ \ \ \ \ \ \ stbir\_\_simdfX\_min(\ e0,\ e0,\ high\_clamp\ );}
\DoxyCodeLine{09704\ \ \ \ \ \ \ stbir\_\_simdfX\_min(\ e1,\ e1,\ high\_clamp\ );}
\DoxyCodeLine{09705\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09706\ \textcolor{preprocessor}{\#ifdef\ STBIR\_FLOAT\_LOW\_CLAMP}}
\DoxyCodeLine{09707\ \ \ \ \ \ \ stbir\_\_simdfX\_max(\ e0,\ e0,\ low\_clamp\ );}
\DoxyCodeLine{09708\ \ \ \ \ \ \ stbir\_\_simdfX\_max(\ e1,\ e1,\ low\_clamp\ );}
\DoxyCodeLine{09709\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09710\ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e0\ );}
\DoxyCodeLine{09711\ \ \ \ \ \ \ stbir\_\_encode\_simdfX\_unflip(\ e1\ );}
\DoxyCodeLine{09712\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output,\ e0\ );}
\DoxyCodeLine{09713\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output+stbir\_\_simdfX\_float\_count,\ e1\ );}
\DoxyCodeLine{09714\ \ \ \ \ \ \ encode\ +=\ stbir\_\_simdfX\_float\_count\ *\ 2;}
\DoxyCodeLine{09715\ \ \ \ \ \ \ output\ +=\ stbir\_\_simdfX\_float\_count\ *\ 2;}
\DoxyCodeLine{09716\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ <\ end\_output\ )}
\DoxyCodeLine{09717\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{09718\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ output\ ==\ (\ end\_output\ +\ (\ stbir\_\_simdfX\_float\_count\ *\ 2\ )\ )\ )}
\DoxyCodeLine{09719\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09720\ \ \ \ \ \ \ output\ =\ end\_output;\ \textcolor{comment}{//\ backup\ and\ do\ last\ couple}}
\DoxyCodeLine{09721\ \ \ \ \ \ \ encode\ =\ end\_encode\_m8;}
\DoxyCodeLine{09722\ \ \ \ \ \}}
\DoxyCodeLine{09723\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{09724\ \ \ \}}
\DoxyCodeLine{09725\ }
\DoxyCodeLine{09726\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09727\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09728\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09729\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09730\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09731\ \ \ \{}
\DoxyCodeLine{09732\ \ \ \ \ stbir\_\_simdf\ e0;}
\DoxyCodeLine{09733\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09734\ \ \ \ \ stbir\_\_simdf\_load(\ e0,\ encode\ );}
\DoxyCodeLine{09735\ \textcolor{preprocessor}{\#ifdef\ STBIR\_FLOAT\_HIGH\_CLAMP}}
\DoxyCodeLine{09736\ \ \ \ \ stbir\_\_simdf\_min(\ e0,\ e0,\ high\_clamp\ );}
\DoxyCodeLine{09737\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09738\ \textcolor{preprocessor}{\#ifdef\ STBIR\_FLOAT\_LOW\_CLAMP}}
\DoxyCodeLine{09739\ \ \ \ \ stbir\_\_simdf\_max(\ e0,\ e0,\ low\_clamp\ );}
\DoxyCodeLine{09740\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09741\ \ \ \ \ stbir\_\_encode\_simdf4\_unflip(\ e0\ );}
\DoxyCodeLine{09742\ \ \ \ \ stbir\_\_simdf\_store(\ output-\/4,\ e0\ );}
\DoxyCodeLine{09743\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09744\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09745\ \ \ \}}
\DoxyCodeLine{09746\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09747\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09748\ }
\DoxyCodeLine{09749\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09750\ }
\DoxyCodeLine{09751\ \ \ \textcolor{comment}{//\ try\ to\ do\ blocks\ of\ 4\ when\ you\ can}}
\DoxyCodeLine{09752\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ !=\ 3\ }\textcolor{comment}{//\ doesn't\ divide\ cleanly\ by\ four}}
\DoxyCodeLine{09753\ \ \ output\ +=\ 4;}
\DoxyCodeLine{09754\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09755\ \ \ \textcolor{keywordflow}{while}(\ output\ <=\ end\_output\ )}
\DoxyCodeLine{09756\ \ \ \{}
\DoxyCodeLine{09757\ \ \ \ \ \textcolor{keywordtype}{float}\ e;}
\DoxyCodeLine{09758\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(encode);}
\DoxyCodeLine{09759\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order0\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[0-\/4]\ =\ e;}
\DoxyCodeLine{09760\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order1\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[1-\/4]\ =\ e;}
\DoxyCodeLine{09761\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order2\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[2-\/4]\ =\ e;}
\DoxyCodeLine{09762\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order3\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[3-\/4]\ =\ e;}
\DoxyCodeLine{09763\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{09764\ \ \ \ \ encode\ +=\ 4;}
\DoxyCodeLine{09765\ \ \ \}}
\DoxyCodeLine{09766\ \ \ output\ -\/=\ 4;}
\DoxyCodeLine{09767\ }
\DoxyCodeLine{09768\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09769\ }
\DoxyCodeLine{09770\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09771\ }
\DoxyCodeLine{09772\ \ \ \textcolor{comment}{//\ do\ the\ remnants}}
\DoxyCodeLine{09773\ \textcolor{preprocessor}{\ \ \#if\ stbir\_\_coder\_min\_num\ <\ 4}}
\DoxyCodeLine{09774\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09775\ \ \ \textcolor{keywordflow}{while}(\ output\ <\ end\_output\ )}
\DoxyCodeLine{09776\ \ \ \{}
\DoxyCodeLine{09777\ \ \ \ \ \textcolor{keywordtype}{float}\ e;}
\DoxyCodeLine{09778\ \ \ \ \ STBIR\_NO\_UNROLL(encode);}
\DoxyCodeLine{09779\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order0\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[0]\ =\ e;}
\DoxyCodeLine{09780\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 2}}
\DoxyCodeLine{09781\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order1\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[1]\ =\ e;}
\DoxyCodeLine{09782\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09783\ \textcolor{preprocessor}{\ \ \ \ \#if\ stbir\_\_coder\_min\_num\ >=\ 3}}
\DoxyCodeLine{09784\ \ \ \ \ e\ =\ encode[\ stbir\_\_encode\_order2\ ];\ stbir\_scalar\_hi\_clamp(\ e\ );\ stbir\_scalar\_lo\_clamp(\ e\ );\ output[2]\ =\ e;}
\DoxyCodeLine{09785\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{09786\ \ \ \ \ output\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09787\ \ \ \ \ encode\ +=\ stbir\_\_coder\_min\_num;}
\DoxyCodeLine{09788\ \ \ \}}
\DoxyCodeLine{09789\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09790\ }
\DoxyCodeLine{09791\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{09792\ \}}
\DoxyCodeLine{09793\ }
\DoxyCodeLine{09794\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_suffix}}
\DoxyCodeLine{09795\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_simdf8\_flip}}
\DoxyCodeLine{09796\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_simdf4\_flip}}
\DoxyCodeLine{09797\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_order0}}
\DoxyCodeLine{09798\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_order1}}
\DoxyCodeLine{09799\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_order2}}
\DoxyCodeLine{09800\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_order3}}
\DoxyCodeLine{09801\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_order0}}
\DoxyCodeLine{09802\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_order1}}
\DoxyCodeLine{09803\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_order2}}
\DoxyCodeLine{09804\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_order3}}
\DoxyCodeLine{09805\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_simdf8\_unflip}}
\DoxyCodeLine{09806\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_simdf4\_unflip}}
\DoxyCodeLine{09807\ \textcolor{preprocessor}{\#undef\ stbir\_\_encode\_simdfX\_unflip}}
\DoxyCodeLine{09808\ \textcolor{preprocessor}{\#undef\ STBIR\_\_CODER\_NAME}}
\DoxyCodeLine{09809\ \textcolor{preprocessor}{\#undef\ stbir\_\_coder\_min\_num}}
\DoxyCodeLine{09810\ \textcolor{preprocessor}{\#undef\ stbir\_\_decode\_swizzle}}
\DoxyCodeLine{09811\ \textcolor{preprocessor}{\#undef\ stbir\_scalar\_hi\_clamp}}
\DoxyCodeLine{09812\ \textcolor{preprocessor}{\#undef\ stbir\_scalar\_lo\_clamp}}
\DoxyCodeLine{09813\ \textcolor{preprocessor}{\#undef\ STB\_IMAGE\_RESIZE\_DO\_CODERS}}
\DoxyCodeLine{09814\ }
\DoxyCodeLine{09815\ \textcolor{preprocessor}{\#elif\ defined(\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS)}}
\DoxyCodeLine{09816\ }
\DoxyCodeLine{09817\ \textcolor{preprocessor}{\#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{09818\ \textcolor{preprocessor}{\#define\ STBIR\_chans(\ start,\ end\ )\ STBIR\_strs\_join14(start,STBIR\_\_vertical\_channels,end,\_cont)}}
\DoxyCodeLine{09819\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09820\ \textcolor{preprocessor}{\#define\ STBIR\_chans(\ start,\ end\ )\ STBIR\_strs\_join1(start,STBIR\_\_vertical\_channels,end)}}
\DoxyCodeLine{09821\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09822\ }
\DoxyCodeLine{09823\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 1}}
\DoxyCodeLine{09824\ \textcolor{preprocessor}{\#define\ stbIF0(\ code\ )\ code}}
\DoxyCodeLine{09825\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09826\ \textcolor{preprocessor}{\#define\ stbIF0(\ code\ )}}
\DoxyCodeLine{09827\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09828\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 2}}
\DoxyCodeLine{09829\ \textcolor{preprocessor}{\#define\ stbIF1(\ code\ )\ code}}
\DoxyCodeLine{09830\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09831\ \textcolor{preprocessor}{\#define\ stbIF1(\ code\ )}}
\DoxyCodeLine{09832\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09833\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 3}}
\DoxyCodeLine{09834\ \textcolor{preprocessor}{\#define\ stbIF2(\ code\ )\ code}}
\DoxyCodeLine{09835\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09836\ \textcolor{preprocessor}{\#define\ stbIF2(\ code\ )}}
\DoxyCodeLine{09837\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09838\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 4}}
\DoxyCodeLine{09839\ \textcolor{preprocessor}{\#define\ stbIF3(\ code\ )\ code}}
\DoxyCodeLine{09840\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09841\ \textcolor{preprocessor}{\#define\ stbIF3(\ code\ )}}
\DoxyCodeLine{09842\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09843\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 5}}
\DoxyCodeLine{09844\ \textcolor{preprocessor}{\#define\ stbIF4(\ code\ )\ code}}
\DoxyCodeLine{09845\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09846\ \textcolor{preprocessor}{\#define\ stbIF4(\ code\ )}}
\DoxyCodeLine{09847\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09848\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 6}}
\DoxyCodeLine{09849\ \textcolor{preprocessor}{\#define\ stbIF5(\ code\ )\ code}}
\DoxyCodeLine{09850\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09851\ \textcolor{preprocessor}{\#define\ stbIF5(\ code\ )}}
\DoxyCodeLine{09852\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09853\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 7}}
\DoxyCodeLine{09854\ \textcolor{preprocessor}{\#define\ stbIF6(\ code\ )\ code}}
\DoxyCodeLine{09855\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09856\ \textcolor{preprocessor}{\#define\ stbIF6(\ code\ )}}
\DoxyCodeLine{09857\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09858\ \textcolor{preprocessor}{\#if\ STBIR\_\_vertical\_channels\ >=\ 8}}
\DoxyCodeLine{09859\ \textcolor{preprocessor}{\#define\ stbIF7(\ code\ )\ code}}
\DoxyCodeLine{09860\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09861\ \textcolor{preprocessor}{\#define\ stbIF7(\ code\ )}}
\DoxyCodeLine{09862\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09863\ }
\DoxyCodeLine{09864\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_vertical\_scatter\_with\_,\_coeffs)(\ \textcolor{keywordtype}{float}\ **\ outputs,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_coefficients,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input\_end\ )}
\DoxyCodeLine{09865\ \{}
\DoxyCodeLine{09866\ \ \ stbIF0(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output0\ =\ outputs[0];\ \textcolor{keywordtype}{float}\ c0s\ =\ vertical\_coefficients[0];\ )}
\DoxyCodeLine{09867\ \ \ stbIF1(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output1\ =\ outputs[1];\ \textcolor{keywordtype}{float}\ c1s\ =\ vertical\_coefficients[1];\ )}
\DoxyCodeLine{09868\ \ \ stbIF2(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output2\ =\ outputs[2];\ \textcolor{keywordtype}{float}\ c2s\ =\ vertical\_coefficients[2];\ )}
\DoxyCodeLine{09869\ \ \ stbIF3(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output3\ =\ outputs[3];\ \textcolor{keywordtype}{float}\ c3s\ =\ vertical\_coefficients[3];\ )}
\DoxyCodeLine{09870\ \ \ stbIF4(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output4\ =\ outputs[4];\ \textcolor{keywordtype}{float}\ c4s\ =\ vertical\_coefficients[4];\ )}
\DoxyCodeLine{09871\ \ \ stbIF5(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output5\ =\ outputs[5];\ \textcolor{keywordtype}{float}\ c5s\ =\ vertical\_coefficients[5];\ )}
\DoxyCodeLine{09872\ \ \ stbIF6(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output6\ =\ outputs[6];\ \textcolor{keywordtype}{float}\ c6s\ =\ vertical\_coefficients[6];\ )}
\DoxyCodeLine{09873\ \ \ stbIF7(\ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output7\ =\ outputs[7];\ \textcolor{keywordtype}{float}\ c7s\ =\ vertical\_coefficients[7];\ )}
\DoxyCodeLine{09874\ }
\DoxyCodeLine{09875\ \ \ \#ifdef\ STBIR\_SIMD}
\DoxyCodeLine{09876\ \ \ \{}
\DoxyCodeLine{09877\ \ \ \ \ stbIF0(stbir\_\_simdfX\ c0\ =\ stbir\_\_simdf\_frepX(\ c0s\ );\ )}
\DoxyCodeLine{09878\ \ \ \ \ stbIF1(stbir\_\_simdfX\ c1\ =\ stbir\_\_simdf\_frepX(\ c1s\ );\ )}
\DoxyCodeLine{09879\ \ \ \ \ stbIF2(stbir\_\_simdfX\ c2\ =\ stbir\_\_simdf\_frepX(\ c2s\ );\ )}
\DoxyCodeLine{09880\ \ \ \ \ stbIF3(stbir\_\_simdfX\ c3\ =\ stbir\_\_simdf\_frepX(\ c3s\ );\ )}
\DoxyCodeLine{09881\ \ \ \ \ stbIF4(stbir\_\_simdfX\ c4\ =\ stbir\_\_simdf\_frepX(\ c4s\ );\ )}
\DoxyCodeLine{09882\ \ \ \ \ stbIF5(stbir\_\_simdfX\ c5\ =\ stbir\_\_simdf\_frepX(\ c5s\ );\ )}
\DoxyCodeLine{09883\ \ \ \ \ stbIF6(stbir\_\_simdfX\ c6\ =\ stbir\_\_simdf\_frepX(\ c6s\ );\ )}
\DoxyCodeLine{09884\ \ \ \ \ stbIF7(stbir\_\_simdfX\ c7\ =\ stbir\_\_simdf\_frepX(\ c7s\ );\ )}
\DoxyCodeLine{09885\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09886\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ (\ (\textcolor{keywordtype}{char}*)input\_end\ -\/\ (\textcolor{keywordtype}{char}*)\ input\ )\ >=\ (16*stbir\_\_simdfX\_float\_count)\ )}
\DoxyCodeLine{09887\ \ \ \ \ \{}
\DoxyCodeLine{09888\ \ \ \ \ \ \ stbir\_\_simdfX\ o0,\ o1,\ o2,\ o3,\ r0,\ r1,\ r2,\ r3;}
\DoxyCodeLine{09889\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(output0);}
\DoxyCodeLine{09890\ }
\DoxyCodeLine{09891\ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ r0,\ input\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input+stbir\_\_simdfX\_float\_count\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ r2,\ input+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r3,\ input+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09892\ }
\DoxyCodeLine{09893\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{09894\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdfX\_load(\ o0,\ output0\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output0+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output0+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output0+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c0\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c0\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c0\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c0\ );}
\DoxyCodeLine{09896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output0,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output0+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output0+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output0+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09897\ \ \ \ \ \ \ stbIF1(\ stbir\_\_simdfX\_load(\ o0,\ output1\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output1+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output1+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output1+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c1\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c1\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c1\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c1\ );}
\DoxyCodeLine{09899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output1,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output1+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output1+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output1+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09900\ \ \ \ \ \ \ stbIF2(\ stbir\_\_simdfX\_load(\ o0,\ output2\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output2+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output2+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output2+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c2\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c2\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c2\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c2\ );}
\DoxyCodeLine{09902\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output2,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output2+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output2+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output2+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09903\ \ \ \ \ \ \ stbIF3(\ stbir\_\_simdfX\_load(\ o0,\ output3\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output3+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output3+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output3+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c3\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c3\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c3\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c3\ );}
\DoxyCodeLine{09905\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output3,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output3+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output3+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output3+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09906\ \ \ \ \ \ \ stbIF4(\ stbir\_\_simdfX\_load(\ o0,\ output4\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output4+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output4+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output4+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09907\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c4\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c4\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c4\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c4\ );}
\DoxyCodeLine{09908\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output4,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output4+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output4+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output4+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09909\ \ \ \ \ \ \ stbIF5(\ stbir\_\_simdfX\_load(\ o0,\ output5\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output5+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output5+(2*stbir\_\_simdfX\_float\_count));\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output5+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c5\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c5\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c5\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c5\ );}
\DoxyCodeLine{09911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output5,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output5+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output5+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output5+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09912\ \ \ \ \ \ \ stbIF6(\ stbir\_\_simdfX\_load(\ o0,\ output6\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output6+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output6+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output6+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c6\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c6\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c6\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c6\ );}
\DoxyCodeLine{09914\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output6,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output6+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output6+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output6+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09915\ \ \ \ \ \ \ stbIF7(\ stbir\_\_simdfX\_load(\ o0,\ output7\ );\ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output7+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output7+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ \ stbir\_\_simdfX\_load(\ o3,\ output7+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{09916\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c7\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c7\ );\ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c7\ );\ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c7\ );}
\DoxyCodeLine{09917\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output7,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output7+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output7+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output7+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09918\ \ \ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{09919\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c0\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c0\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c0\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c0\ );}
\DoxyCodeLine{09920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output0,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output0+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output0+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output0+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09921\ \ \ \ \ \ \ stbIF1(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c1\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c1\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c1\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c1\ );}
\DoxyCodeLine{09922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output1,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output1+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output1+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output1+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09923\ \ \ \ \ \ \ stbIF2(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c2\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c2\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c2\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c2\ );}
\DoxyCodeLine{09924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output2,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output2+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output2+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output2+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09925\ \ \ \ \ \ \ stbIF3(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c3\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c3\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c3\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c3\ );}
\DoxyCodeLine{09926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output3,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output3+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output3+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output3+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09927\ \ \ \ \ \ \ stbIF4(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c4\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c4\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c4\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c4\ );}
\DoxyCodeLine{09928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output4,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output4+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output4+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output4+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09929\ \ \ \ \ \ \ stbIF5(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c5\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c5\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c5\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c5\ );}
\DoxyCodeLine{09930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output5,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output5+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output5+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output5+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09931\ \ \ \ \ \ \ stbIF6(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c6\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c6\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c6\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c6\ );}
\DoxyCodeLine{09932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output6,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output6+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output6+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output6+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09933\ \ \ \ \ \ \ stbIF7(\ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c7\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c7\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c7\ );\ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c7\ );}
\DoxyCodeLine{09934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output7,\ o0\ );\ \ \ \ stbir\_\_simdfX\_store(\ output7+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output7+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ \ stbir\_\_simdfX\_store(\ output7+(3*stbir\_\_simdfX\_float\_count),\ o3\ );\ )}
\DoxyCodeLine{09935\ \ \ \ \ \ \ \#endif}
\DoxyCodeLine{09936\ }
\DoxyCodeLine{09937\ \ \ \ \ \ \ input\ +=\ (4*stbir\_\_simdfX\_float\_count);}
\DoxyCodeLine{09938\ \ \ \ \ \ \ stbIF0(\ output0\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF1(\ output1\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF2(\ output2\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF3(\ output3\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF4(\ output4\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF5(\ output5\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF6(\ output6\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF7(\ output7\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )}
\DoxyCodeLine{09939\ \ \ \ \ \}}
\DoxyCodeLine{09940\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09941\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ (\ (\textcolor{keywordtype}{char}*)input\_end\ -\/\ (\textcolor{keywordtype}{char}*)\ input\ )\ >=\ 16\ )}
\DoxyCodeLine{09942\ \ \ \ \ \{}
\DoxyCodeLine{09943\ \ \ \ \ \ \ stbir\_\_simdf\ o0,\ r0;}
\DoxyCodeLine{09944\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(output0);}
\DoxyCodeLine{09945\ }
\DoxyCodeLine{09946\ \ \ \ \ \ \ stbir\_\_simdf\_load(\ r0,\ input\ );}
\DoxyCodeLine{09947\ }
\DoxyCodeLine{09948\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{09949\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdf\_load(\ o0,\ output0\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c0\ )\ );\ \ stbir\_\_simdf\_store(\ output0,\ o0\ );\ )}
\DoxyCodeLine{09950\ \ \ \ \ \ \ stbIF1(\ stbir\_\_simdf\_load(\ o0,\ output1\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c1\ )\ );\ \ stbir\_\_simdf\_store(\ output1,\ o0\ );\ )}
\DoxyCodeLine{09951\ \ \ \ \ \ \ stbIF2(\ stbir\_\_simdf\_load(\ o0,\ output2\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c2\ )\ );\ \ stbir\_\_simdf\_store(\ output2,\ o0\ );\ )}
\DoxyCodeLine{09952\ \ \ \ \ \ \ stbIF3(\ stbir\_\_simdf\_load(\ o0,\ output3\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c3\ )\ );\ \ stbir\_\_simdf\_store(\ output3,\ o0\ );\ )}
\DoxyCodeLine{09953\ \ \ \ \ \ \ stbIF4(\ stbir\_\_simdf\_load(\ o0,\ output4\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c4\ )\ );\ \ stbir\_\_simdf\_store(\ output4,\ o0\ );\ )}
\DoxyCodeLine{09954\ \ \ \ \ \ \ stbIF5(\ stbir\_\_simdf\_load(\ o0,\ output5\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c5\ )\ );\ \ stbir\_\_simdf\_store(\ output5,\ o0\ );\ )}
\DoxyCodeLine{09955\ \ \ \ \ \ \ stbIF6(\ stbir\_\_simdf\_load(\ o0,\ output6\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c6\ )\ );\ \ stbir\_\_simdf\_store(\ output6,\ o0\ );\ )}
\DoxyCodeLine{09956\ \ \ \ \ \ \ stbIF7(\ stbir\_\_simdf\_load(\ o0,\ output7\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c7\ )\ );\ \ stbir\_\_simdf\_store(\ output7,\ o0\ );\ )}
\DoxyCodeLine{09957\ \ \ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{09958\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c0\ )\ );\ \ \ stbir\_\_simdf\_store(\ output0,\ o0\ );\ )}
\DoxyCodeLine{09959\ \ \ \ \ \ \ stbIF1(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c1\ )\ );\ \ \ stbir\_\_simdf\_store(\ output1,\ o0\ );\ )}
\DoxyCodeLine{09960\ \ \ \ \ \ \ stbIF2(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c2\ )\ );\ \ \ stbir\_\_simdf\_store(\ output2,\ o0\ );\ )}
\DoxyCodeLine{09961\ \ \ \ \ \ \ stbIF3(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c3\ )\ );\ \ \ stbir\_\_simdf\_store(\ output3,\ o0\ );\ )}
\DoxyCodeLine{09962\ \ \ \ \ \ \ stbIF4(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c4\ )\ );\ \ \ stbir\_\_simdf\_store(\ output4,\ o0\ );\ )}
\DoxyCodeLine{09963\ \ \ \ \ \ \ stbIF5(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c5\ )\ );\ \ \ stbir\_\_simdf\_store(\ output5,\ o0\ );\ )}
\DoxyCodeLine{09964\ \ \ \ \ \ \ stbIF6(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c6\ )\ );\ \ \ stbir\_\_simdf\_store(\ output6,\ o0\ );\ )}
\DoxyCodeLine{09965\ \ \ \ \ \ \ stbIF7(\ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c7\ )\ );\ \ \ stbir\_\_simdf\_store(\ output7,\ o0\ );\ )}
\DoxyCodeLine{09966\ \ \ \ \ \ \ \#endif}
\DoxyCodeLine{09967\ }
\DoxyCodeLine{09968\ \ \ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{09969\ \ \ \ \ \ \ stbIF0(\ output0\ +=\ 4;\ )\ stbIF1(\ output1\ +=\ 4;\ )\ stbIF2(\ output2\ +=\ 4;\ )\ stbIF3(\ output3\ +=\ 4;\ )\ stbIF4(\ output4\ +=\ 4;\ )\ stbIF5(\ output5\ +=\ 4;\ )\ stbIF6(\ output6\ +=\ 4;\ )\ stbIF7(\ output7\ +=\ 4;\ )}
\DoxyCodeLine{09970\ \ \ \ \ \}}
\DoxyCodeLine{09971\ \ \ \}}
\DoxyCodeLine{09972\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{09973\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{09974\ \ \ \textcolor{keywordflow}{while}\ (\ (\ (\textcolor{keywordtype}{char}*)input\_end\ -\/\ (\textcolor{keywordtype}{char}*)\ input\ )\ >=\ 16\ )}
\DoxyCodeLine{09975\ \ \ \{}
\DoxyCodeLine{09976\ \ \ \ \ \textcolor{keywordtype}{float}\ r0,\ r1,\ r2,\ r3;}
\DoxyCodeLine{09977\ \ \ \ \ STBIR\_NO\_UNROLL(input);}
\DoxyCodeLine{09978\ }
\DoxyCodeLine{09979\ \ \ \ \ r0\ =\ input[0],\ r1\ =\ input[1],\ r2\ =\ input[2],\ r3\ =\ input[3];}
\DoxyCodeLine{09980\ }
\DoxyCodeLine{09981\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{09982\ \ \ \ \ stbIF0(\ output0[0]\ +=\ (\ r0\ *\ c0s\ );\ output0[1]\ +=\ (\ r1\ *\ c0s\ );\ output0[2]\ +=\ (\ r2\ *\ c0s\ );\ output0[3]\ +=\ (\ r3\ *\ c0s\ );\ )}
\DoxyCodeLine{09983\ \ \ \ \ stbIF1(\ output1[0]\ +=\ (\ r0\ *\ c1s\ );\ output1[1]\ +=\ (\ r1\ *\ c1s\ );\ output1[2]\ +=\ (\ r2\ *\ c1s\ );\ output1[3]\ +=\ (\ r3\ *\ c1s\ );\ )}
\DoxyCodeLine{09984\ \ \ \ \ stbIF2(\ output2[0]\ +=\ (\ r0\ *\ c2s\ );\ output2[1]\ +=\ (\ r1\ *\ c2s\ );\ output2[2]\ +=\ (\ r2\ *\ c2s\ );\ output2[3]\ +=\ (\ r3\ *\ c2s\ );\ )}
\DoxyCodeLine{09985\ \ \ \ \ stbIF3(\ output3[0]\ +=\ (\ r0\ *\ c3s\ );\ output3[1]\ +=\ (\ r1\ *\ c3s\ );\ output3[2]\ +=\ (\ r2\ *\ c3s\ );\ output3[3]\ +=\ (\ r3\ *\ c3s\ );\ )}
\DoxyCodeLine{09986\ \ \ \ \ stbIF4(\ output4[0]\ +=\ (\ r0\ *\ c4s\ );\ output4[1]\ +=\ (\ r1\ *\ c4s\ );\ output4[2]\ +=\ (\ r2\ *\ c4s\ );\ output4[3]\ +=\ (\ r3\ *\ c4s\ );\ )}
\DoxyCodeLine{09987\ \ \ \ \ stbIF5(\ output5[0]\ +=\ (\ r0\ *\ c5s\ );\ output5[1]\ +=\ (\ r1\ *\ c5s\ );\ output5[2]\ +=\ (\ r2\ *\ c5s\ );\ output5[3]\ +=\ (\ r3\ *\ c5s\ );\ )}
\DoxyCodeLine{09988\ \ \ \ \ stbIF6(\ output6[0]\ +=\ (\ r0\ *\ c6s\ );\ output6[1]\ +=\ (\ r1\ *\ c6s\ );\ output6[2]\ +=\ (\ r2\ *\ c6s\ );\ output6[3]\ +=\ (\ r3\ *\ c6s\ );\ )}
\DoxyCodeLine{09989\ \ \ \ \ stbIF7(\ output7[0]\ +=\ (\ r0\ *\ c7s\ );\ output7[1]\ +=\ (\ r1\ *\ c7s\ );\ output7[2]\ +=\ (\ r2\ *\ c7s\ );\ output7[3]\ +=\ (\ r3\ *\ c7s\ );\ )}
\DoxyCodeLine{09990\ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{09991\ \ \ \ \ stbIF0(\ output0[0]\ \ =\ (\ r0\ *\ c0s\ );\ output0[1]\ \ =\ (\ r1\ *\ c0s\ );\ output0[2]\ \ =\ (\ r2\ *\ c0s\ );\ output0[3]\ \ =\ (\ r3\ *\ c0s\ );\ )}
\DoxyCodeLine{09992\ \ \ \ \ stbIF1(\ output1[0]\ \ =\ (\ r0\ *\ c1s\ );\ output1[1]\ \ =\ (\ r1\ *\ c1s\ );\ output1[2]\ \ =\ (\ r2\ *\ c1s\ );\ output1[3]\ \ =\ (\ r3\ *\ c1s\ );\ )}
\DoxyCodeLine{09993\ \ \ \ \ stbIF2(\ output2[0]\ \ =\ (\ r0\ *\ c2s\ );\ output2[1]\ \ =\ (\ r1\ *\ c2s\ );\ output2[2]\ \ =\ (\ r2\ *\ c2s\ );\ output2[3]\ \ =\ (\ r3\ *\ c2s\ );\ )}
\DoxyCodeLine{09994\ \ \ \ \ stbIF3(\ output3[0]\ \ =\ (\ r0\ *\ c3s\ );\ output3[1]\ \ =\ (\ r1\ *\ c3s\ );\ output3[2]\ \ =\ (\ r2\ *\ c3s\ );\ output3[3]\ \ =\ (\ r3\ *\ c3s\ );\ )}
\DoxyCodeLine{09995\ \ \ \ \ stbIF4(\ output4[0]\ \ =\ (\ r0\ *\ c4s\ );\ output4[1]\ \ =\ (\ r1\ *\ c4s\ );\ output4[2]\ \ =\ (\ r2\ *\ c4s\ );\ output4[3]\ \ =\ (\ r3\ *\ c4s\ );\ )}
\DoxyCodeLine{09996\ \ \ \ \ stbIF5(\ output5[0]\ \ =\ (\ r0\ *\ c5s\ );\ output5[1]\ \ =\ (\ r1\ *\ c5s\ );\ output5[2]\ \ =\ (\ r2\ *\ c5s\ );\ output5[3]\ \ =\ (\ r3\ *\ c5s\ );\ )}
\DoxyCodeLine{09997\ \ \ \ \ stbIF6(\ output6[0]\ \ =\ (\ r0\ *\ c6s\ );\ output6[1]\ \ =\ (\ r1\ *\ c6s\ );\ output6[2]\ \ =\ (\ r2\ *\ c6s\ );\ output6[3]\ \ =\ (\ r3\ *\ c6s\ );\ )}
\DoxyCodeLine{09998\ \ \ \ \ stbIF7(\ output7[0]\ \ =\ (\ r0\ *\ c7s\ );\ output7[1]\ \ =\ (\ r1\ *\ c7s\ );\ output7[2]\ \ =\ (\ r2\ *\ c7s\ );\ output7[3]\ \ =\ (\ r3\ *\ c7s\ );\ )}
\DoxyCodeLine{09999\ \ \ \ \ \#endif}
\DoxyCodeLine{10000\ }
\DoxyCodeLine{10001\ \ \ \ \ input\ +=\ 4;}
\DoxyCodeLine{10002\ \ \ \ \ stbIF0(\ output0\ +=\ 4;\ )\ stbIF1(\ output1\ +=\ 4;\ )\ stbIF2(\ output2\ +=\ 4;\ )\ stbIF3(\ output3\ +=\ 4;\ )\ stbIF4(\ output4\ +=\ 4;\ )\ stbIF5(\ output5\ +=\ 4;\ )\ stbIF6(\ output6\ +=\ 4;\ )\ stbIF7(\ output7\ +=\ 4;\ )}
\DoxyCodeLine{10003\ \ \ \}}
\DoxyCodeLine{10004\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{10005\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10006\ \ \ \textcolor{keywordflow}{while}\ (\ input\ <\ input\_end\ )}
\DoxyCodeLine{10007\ \ \ \{}
\DoxyCodeLine{10008\ \ \ \ \ \textcolor{keywordtype}{float}\ r\ =\ input[0];}
\DoxyCodeLine{10009\ \ \ \ \ STBIR\_NO\_UNROLL(output0);}
\DoxyCodeLine{10010\ }
\DoxyCodeLine{10011\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{10012\ \ \ \ \ stbIF0(\ output0[0]\ +=\ (\ r\ *\ c0s\ );\ )}
\DoxyCodeLine{10013\ \ \ \ \ stbIF1(\ output1[0]\ +=\ (\ r\ *\ c1s\ );\ )}
\DoxyCodeLine{10014\ \ \ \ \ stbIF2(\ output2[0]\ +=\ (\ r\ *\ c2s\ );\ )}
\DoxyCodeLine{10015\ \ \ \ \ stbIF3(\ output3[0]\ +=\ (\ r\ *\ c3s\ );\ )}
\DoxyCodeLine{10016\ \ \ \ \ stbIF4(\ output4[0]\ +=\ (\ r\ *\ c4s\ );\ )}
\DoxyCodeLine{10017\ \ \ \ \ stbIF5(\ output5[0]\ +=\ (\ r\ *\ c5s\ );\ )}
\DoxyCodeLine{10018\ \ \ \ \ stbIF6(\ output6[0]\ +=\ (\ r\ *\ c6s\ );\ )}
\DoxyCodeLine{10019\ \ \ \ \ stbIF7(\ output7[0]\ +=\ (\ r\ *\ c7s\ );\ )}
\DoxyCodeLine{10020\ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{10021\ \ \ \ \ stbIF0(\ output0[0]\ \ =\ (\ r\ *\ c0s\ );\ )}
\DoxyCodeLine{10022\ \ \ \ \ stbIF1(\ output1[0]\ \ =\ (\ r\ *\ c1s\ );\ )}
\DoxyCodeLine{10023\ \ \ \ \ stbIF2(\ output2[0]\ \ =\ (\ r\ *\ c2s\ );\ )}
\DoxyCodeLine{10024\ \ \ \ \ stbIF3(\ output3[0]\ \ =\ (\ r\ *\ c3s\ );\ )}
\DoxyCodeLine{10025\ \ \ \ \ stbIF4(\ output4[0]\ \ =\ (\ r\ *\ c4s\ );\ )}
\DoxyCodeLine{10026\ \ \ \ \ stbIF5(\ output5[0]\ \ =\ (\ r\ *\ c5s\ );\ )}
\DoxyCodeLine{10027\ \ \ \ \ stbIF6(\ output6[0]\ \ =\ (\ r\ *\ c6s\ );\ )}
\DoxyCodeLine{10028\ \ \ \ \ stbIF7(\ output7[0]\ \ =\ (\ r\ *\ c7s\ );\ )}
\DoxyCodeLine{10029\ \ \ \ \ \#endif}
\DoxyCodeLine{10030\ }
\DoxyCodeLine{10031\ \ \ \ \ ++input;}
\DoxyCodeLine{10032\ \ \ \ \ stbIF0(\ ++output0;\ )\ stbIF1(\ ++output1;\ )\ stbIF2(\ ++output2;\ )\ stbIF3(\ ++output3;\ )\ stbIF4(\ ++output4;\ )\ stbIF5(\ ++output5;\ )\ stbIF6(\ ++output6;\ )\ stbIF7(\ ++output7;\ )}
\DoxyCodeLine{10033\ \ \ \}}
\DoxyCodeLine{10034\ \}}
\DoxyCodeLine{10035\ }
\DoxyCodeLine{10036\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_vertical\_gather\_with\_,\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ outputp,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ vertical\_coefficients,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ **\ inputs,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ input0\_end\ )}
\DoxyCodeLine{10037\ \{}
\DoxyCodeLine{10038\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ outputp;}
\DoxyCodeLine{10039\ }
\DoxyCodeLine{10040\ \ \ stbIF0(\ \textcolor{keywordtype}{float}\ const\ *\ input0\ =\ inputs[0];\ \textcolor{keywordtype}{float}\ c0s\ =\ vertical\_coefficients[0];\ )}
\DoxyCodeLine{10041\ \ \ stbIF1(\ \textcolor{keywordtype}{float}\ const\ *\ input1\ =\ inputs[1];\ \textcolor{keywordtype}{float}\ c1s\ =\ vertical\_coefficients[1];\ )}
\DoxyCodeLine{10042\ \ \ stbIF2(\ \textcolor{keywordtype}{float}\ const\ *\ input2\ =\ inputs[2];\ \textcolor{keywordtype}{float}\ c2s\ =\ vertical\_coefficients[2];\ )}
\DoxyCodeLine{10043\ \ \ stbIF3(\ \textcolor{keywordtype}{float}\ const\ *\ input3\ =\ inputs[3];\ \textcolor{keywordtype}{float}\ c3s\ =\ vertical\_coefficients[3];\ )}
\DoxyCodeLine{10044\ \ \ stbIF4(\ \textcolor{keywordtype}{float}\ const\ *\ input4\ =\ inputs[4];\ \textcolor{keywordtype}{float}\ c4s\ =\ vertical\_coefficients[4];\ )}
\DoxyCodeLine{10045\ \ \ stbIF5(\ \textcolor{keywordtype}{float}\ const\ *\ input5\ =\ inputs[5];\ \textcolor{keywordtype}{float}\ c5s\ =\ vertical\_coefficients[5];\ )}
\DoxyCodeLine{10046\ \ \ stbIF6(\ \textcolor{keywordtype}{float}\ const\ *\ input6\ =\ inputs[6];\ \textcolor{keywordtype}{float}\ c6s\ =\ vertical\_coefficients[6];\ )}
\DoxyCodeLine{10047\ \ \ stbIF7(\ \textcolor{keywordtype}{float}\ const\ *\ input7\ =\ inputs[7];\ \textcolor{keywordtype}{float}\ c7s\ =\ vertical\_coefficients[7];\ )}
\DoxyCodeLine{10048\ }
\DoxyCodeLine{10049\ \textcolor{preprocessor}{\#if\ (\ STBIR\_\_vertical\_channels\ ==\ 1\ )\ \&\&\ !defined(STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE)}}
\DoxyCodeLine{10050\ \ \ \textcolor{comment}{//\ check\ single\ channel\ one\ weight}}
\DoxyCodeLine{10051\ \ \ \textcolor{keywordflow}{if}\ (\ (\ c0s\ >=\ (1.0f-\/0.000001f)\ )\ \&\&\ (\ c0s\ <=\ (1.0f+0.000001f)\ )\ )}
\DoxyCodeLine{10052\ \ \ \{}
\DoxyCodeLine{10053\ \ \ \ \ STBIR\_MEMCPY(\ output,\ input0,\ (\textcolor{keywordtype}{char}*)input0\_end\ -\/\ (\textcolor{keywordtype}{char}*)input0\ );}
\DoxyCodeLine{10054\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{10055\ \ \ \}}
\DoxyCodeLine{10056\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10057\ }
\DoxyCodeLine{10058\ \textcolor{preprocessor}{\ \ \#ifdef\ STBIR\_SIMD}}
\DoxyCodeLine{10059\ \ \ \{}
\DoxyCodeLine{10060\ \ \ \ \ stbIF0(stbir\_\_simdfX\ c0\ =\ stbir\_\_simdf\_frepX(\ c0s\ );\ )}
\DoxyCodeLine{10061\ \ \ \ \ stbIF1(stbir\_\_simdfX\ c1\ =\ stbir\_\_simdf\_frepX(\ c1s\ );\ )}
\DoxyCodeLine{10062\ \ \ \ \ stbIF2(stbir\_\_simdfX\ c2\ =\ stbir\_\_simdf\_frepX(\ c2s\ );\ )}
\DoxyCodeLine{10063\ \ \ \ \ stbIF3(stbir\_\_simdfX\ c3\ =\ stbir\_\_simdf\_frepX(\ c3s\ );\ )}
\DoxyCodeLine{10064\ \ \ \ \ stbIF4(stbir\_\_simdfX\ c4\ =\ stbir\_\_simdf\_frepX(\ c4s\ );\ )}
\DoxyCodeLine{10065\ \ \ \ \ stbIF5(stbir\_\_simdfX\ c5\ =\ stbir\_\_simdf\_frepX(\ c5s\ );\ )}
\DoxyCodeLine{10066\ \ \ \ \ stbIF6(stbir\_\_simdfX\ c6\ =\ stbir\_\_simdf\_frepX(\ c6s\ );\ )}
\DoxyCodeLine{10067\ \ \ \ \ stbIF7(stbir\_\_simdfX\ c7\ =\ stbir\_\_simdf\_frepX(\ c7s\ );\ )}
\DoxyCodeLine{10068\ }
\DoxyCodeLine{10069\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10070\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ (\ (\textcolor{keywordtype}{char}*)input0\_end\ -\/\ (\textcolor{keywordtype}{char}*)\ input0\ )\ >=\ (16*stbir\_\_simdfX\_float\_count)\ )}
\DoxyCodeLine{10071\ \ \ \ \ \{}
\DoxyCodeLine{10072\ \ \ \ \ \ \ stbir\_\_simdfX\ o0,\ o1,\ o2,\ o3,\ r0,\ r1,\ r2,\ r3;}
\DoxyCodeLine{10073\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(output);}
\DoxyCodeLine{10074\ }
\DoxyCodeLine{10075\ \ \ \ \ \ \ \textcolor{comment}{//\ prefetch\ four\ loop\ iterations\ ahead\ (doesn't\ affect\ much\ for\ small\ resizes,\ but\ helps\ with\ big\ ones)}}
\DoxyCodeLine{10076\ \ \ \ \ \ \ stbIF0(\ stbir\_\_prefetch(\ input0\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10077\ \ \ \ \ \ \ stbIF1(\ stbir\_\_prefetch(\ input1\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10078\ \ \ \ \ \ \ stbIF2(\ stbir\_\_prefetch(\ input2\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10079\ \ \ \ \ \ \ stbIF3(\ stbir\_\_prefetch(\ input3\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10080\ \ \ \ \ \ \ stbIF4(\ stbir\_\_prefetch(\ input4\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10081\ \ \ \ \ \ \ stbIF5(\ stbir\_\_prefetch(\ input5\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10082\ \ \ \ \ \ \ stbIF6(\ stbir\_\_prefetch(\ input6\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10083\ \ \ \ \ \ \ stbIF7(\ stbir\_\_prefetch(\ input7\ +\ (16*stbir\_\_simdfX\_float\_count)\ );\ )}
\DoxyCodeLine{10084\ }
\DoxyCodeLine{10085\ \ \ \ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}
\DoxyCodeLine{10086\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdfX\_load(\ o0,\ output\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ o1,\ output+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ o2,\ output+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ o3,\ output+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_load(\ r0,\ input0\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input0+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input0+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input0+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c0\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c0\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c0\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c0\ );\ )}
\DoxyCodeLine{10089\ \ \ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{10090\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdfX\_load(\ r0,\ input0\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input0+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input0+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input0+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o0,\ r0,\ c0\ );\ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o1,\ r1,\ c0\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o2,\ r2,\ c0\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_mult(\ o3,\ r3,\ c0\ );\ \ )}
\DoxyCodeLine{10092\ \ \ \ \ \ \ \#endif}
\DoxyCodeLine{10093\ }
\DoxyCodeLine{10094\ \ \ \ \ \ \ stbIF1(\ stbir\_\_simdfX\_load(\ r0,\ input1\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input1+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input1+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input1+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c1\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c1\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c1\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c1\ );\ )}
\DoxyCodeLine{10096\ \ \ \ \ \ \ stbIF2(\ stbir\_\_simdfX\_load(\ r0,\ input2\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input2+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input2+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input2+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c2\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c2\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c2\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c2\ );\ )}
\DoxyCodeLine{10098\ \ \ \ \ \ \ stbIF3(\ stbir\_\_simdfX\_load(\ r0,\ input3\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input3+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input3+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input3+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c3\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c3\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c3\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c3\ );\ )}
\DoxyCodeLine{10100\ \ \ \ \ \ \ stbIF4(\ stbir\_\_simdfX\_load(\ r0,\ input4\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input4+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input4+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input4+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c4\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c4\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c4\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c4\ );\ )}
\DoxyCodeLine{10102\ \ \ \ \ \ \ stbIF5(\ stbir\_\_simdfX\_load(\ r0,\ input5\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input5+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input5+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input5+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c5\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c5\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c5\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c5\ );\ )}
\DoxyCodeLine{10104\ \ \ \ \ \ \ stbIF6(\ stbir\_\_simdfX\_load(\ r0,\ input6\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input6+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input6+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input6+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c6\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c6\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c6\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c6\ );\ )}
\DoxyCodeLine{10106\ \ \ \ \ \ \ stbIF7(\ stbir\_\_simdfX\_load(\ r0,\ input7\ );\ \ \ \ \ \ stbir\_\_simdfX\_load(\ r1,\ input7+stbir\_\_simdfX\_float\_count\ );\ \ \ stbir\_\_simdfX\_load(\ r2,\ input7+(2*stbir\_\_simdfX\_float\_count)\ );\ \ \ stbir\_\_simdfX\_load(\ r3,\ input7+(3*stbir\_\_simdfX\_float\_count)\ );}
\DoxyCodeLine{10107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o0,\ o0,\ r0,\ c7\ );\ \ stbir\_\_simdfX\_madd(\ o1,\ o1,\ r1,\ c7\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o2,\ o2,\ r2,\ c7\ );\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_madd(\ o3,\ o3,\ r3,\ c7\ );\ )}
\DoxyCodeLine{10108\ }
\DoxyCodeLine{10109\ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output,\ o0\ );\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_simdfX\_store(\ output+stbir\_\_simdfX\_float\_count,\ o1\ );\ \ stbir\_\_simdfX\_store(\ output+(2*stbir\_\_simdfX\_float\_count),\ o2\ );\ \ stbir\_\_simdfX\_store(\ output+(3*stbir\_\_simdfX\_float\_count),\ o3\ );}
\DoxyCodeLine{10110\ \ \ \ \ \ \ output\ +=\ (4*stbir\_\_simdfX\_float\_count);}
\DoxyCodeLine{10111\ \ \ \ \ \ \ stbIF0(\ input0\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF1(\ input1\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF2(\ input2\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF3(\ input3\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF4(\ input4\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF5(\ input5\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF6(\ input6\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )\ stbIF7(\ input7\ +=\ (4*stbir\_\_simdfX\_float\_count);\ )}
\DoxyCodeLine{10112\ \ \ \ \ \}}
\DoxyCodeLine{10113\ }
\DoxyCodeLine{10114\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10115\ \ \ \ \ \textcolor{keywordflow}{while}\ (\ (\ (\textcolor{keywordtype}{char}*)input0\_end\ -\/\ (\textcolor{keywordtype}{char}*)\ input0\ )\ >=\ 16\ )}
\DoxyCodeLine{10116\ \ \ \ \ \{}
\DoxyCodeLine{10117\ \ \ \ \ \ \ stbir\_\_simdf\ o0,\ r0;}
\DoxyCodeLine{10118\ \ \ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL(output);}
\DoxyCodeLine{10119\ }
\DoxyCodeLine{10120\ \textcolor{preprocessor}{\ \ \ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{10121\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdf\_load(\ o0,\ output\ );\ \ \ stbir\_\_simdf\_load(\ r0,\ input0\ );\ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c0\ )\ );\ )}
\DoxyCodeLine{10122\ \ \ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{10123\ \ \ \ \ \ \ stbIF0(\ stbir\_\_simdf\_load(\ r0,\ input0\ );\ \ stbir\_\_simdf\_mult(\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c0\ )\ );\ )}
\DoxyCodeLine{10124\ \ \ \ \ \ \ \#endif}
\DoxyCodeLine{10125\ \ \ \ \ \ \ stbIF1(\ stbir\_\_simdf\_load(\ r0,\ input1\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c1\ )\ );\ )}
\DoxyCodeLine{10126\ \ \ \ \ \ \ stbIF2(\ stbir\_\_simdf\_load(\ r0,\ input2\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c2\ )\ );\ )}
\DoxyCodeLine{10127\ \ \ \ \ \ \ stbIF3(\ stbir\_\_simdf\_load(\ r0,\ input3\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c3\ )\ );\ )}
\DoxyCodeLine{10128\ \ \ \ \ \ \ stbIF4(\ stbir\_\_simdf\_load(\ r0,\ input4\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c4\ )\ );\ )}
\DoxyCodeLine{10129\ \ \ \ \ \ \ stbIF5(\ stbir\_\_simdf\_load(\ r0,\ input5\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c5\ )\ );\ )}
\DoxyCodeLine{10130\ \ \ \ \ \ \ stbIF6(\ stbir\_\_simdf\_load(\ r0,\ input6\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c6\ )\ );\ )}
\DoxyCodeLine{10131\ \ \ \ \ \ \ stbIF7(\ stbir\_\_simdf\_load(\ r0,\ input7\ );\ \ stbir\_\_simdf\_madd(\ o0,\ o0,\ r0,\ stbir\_\_if\_simdf8\_cast\_to\_simdf4(\ c7\ )\ );\ )}
\DoxyCodeLine{10132\ }
\DoxyCodeLine{10133\ \ \ \ \ \ \ stbir\_\_simdf\_store(\ output,\ o0\ );}
\DoxyCodeLine{10134\ \ \ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{10135\ \ \ \ \ \ \ stbIF0(\ input0\ +=\ 4;\ )\ stbIF1(\ input1\ +=\ 4;\ )\ stbIF2(\ input2\ +=\ 4;\ )\ stbIF3(\ input3\ +=\ 4;\ )\ stbIF4(\ input4\ +=\ 4;\ )\ stbIF5(\ input5\ +=\ 4;\ )\ stbIF6(\ input6\ +=\ 4;\ )\ stbIF7(\ input7\ +=\ 4;\ )}
\DoxyCodeLine{10136\ \ \ \ \ \}}
\DoxyCodeLine{10137\ \ \ \}}
\DoxyCodeLine{10138\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{10139\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10140\ \ \ \textcolor{keywordflow}{while}\ (\ (\ (\textcolor{keywordtype}{char}*)input0\_end\ -\/\ (\textcolor{keywordtype}{char}*)\ input0\ )\ >=\ 16\ )}
\DoxyCodeLine{10141\ \ \ \{}
\DoxyCodeLine{10142\ \ \ \ \ \textcolor{keywordtype}{float}\ o0,\ o1,\ o2,\ o3;}
\DoxyCodeLine{10143\ \ \ \ \ STBIR\_NO\_UNROLL(output);}
\DoxyCodeLine{10144\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{10145\ \ \ \ \ stbIF0(\ o0\ =\ output[0]\ +\ input0[0]\ *\ c0s;\ o1\ =\ output[1]\ +\ input0[1]\ *\ c0s;\ o2\ =\ output[2]\ +\ input0[2]\ *\ c0s;\ o3\ =\ output[3]\ +\ input0[3]\ *\ c0s;\ )}
\DoxyCodeLine{10146\ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{10147\ \ \ \ \ stbIF0(\ o0\ \ =\ input0[0]\ *\ c0s;\ o1\ \ =\ input0[1]\ *\ c0s;\ o2\ \ =\ input0[2]\ *\ c0s;\ o3\ \ =\ input0[3]\ *\ c0s;\ )}
\DoxyCodeLine{10148\ \ \ \ \ \#endif}
\DoxyCodeLine{10149\ \ \ \ \ stbIF1(\ o0\ +=\ input1[0]\ *\ c1s;\ o1\ +=\ input1[1]\ *\ c1s;\ o2\ +=\ input1[2]\ *\ c1s;\ o3\ +=\ input1[3]\ *\ c1s;\ )}
\DoxyCodeLine{10150\ \ \ \ \ stbIF2(\ o0\ +=\ input2[0]\ *\ c2s;\ o1\ +=\ input2[1]\ *\ c2s;\ o2\ +=\ input2[2]\ *\ c2s;\ o3\ +=\ input2[3]\ *\ c2s;\ )}
\DoxyCodeLine{10151\ \ \ \ \ stbIF3(\ o0\ +=\ input3[0]\ *\ c3s;\ o1\ +=\ input3[1]\ *\ c3s;\ o2\ +=\ input3[2]\ *\ c3s;\ o3\ +=\ input3[3]\ *\ c3s;\ )}
\DoxyCodeLine{10152\ \ \ \ \ stbIF4(\ o0\ +=\ input4[0]\ *\ c4s;\ o1\ +=\ input4[1]\ *\ c4s;\ o2\ +=\ input4[2]\ *\ c4s;\ o3\ +=\ input4[3]\ *\ c4s;\ )}
\DoxyCodeLine{10153\ \ \ \ \ stbIF5(\ o0\ +=\ input5[0]\ *\ c5s;\ o1\ +=\ input5[1]\ *\ c5s;\ o2\ +=\ input5[2]\ *\ c5s;\ o3\ +=\ input5[3]\ *\ c5s;\ )}
\DoxyCodeLine{10154\ \ \ \ \ stbIF6(\ o0\ +=\ input6[0]\ *\ c6s;\ o1\ +=\ input6[1]\ *\ c6s;\ o2\ +=\ input6[2]\ *\ c6s;\ o3\ +=\ input6[3]\ *\ c6s;\ )}
\DoxyCodeLine{10155\ \ \ \ \ stbIF7(\ o0\ +=\ input7[0]\ *\ c7s;\ o1\ +=\ input7[1]\ *\ c7s;\ o2\ +=\ input7[2]\ *\ c7s;\ o3\ +=\ input7[3]\ *\ c7s;\ )}
\DoxyCodeLine{10156\ \ \ \ \ output[0]\ =\ o0;\ output[1]\ =\ o1;\ output[2]\ =\ o2;\ output[3]\ =\ o3;}
\DoxyCodeLine{10157\ \ \ \ \ output\ +=\ 4;}
\DoxyCodeLine{10158\ \ \ \ \ stbIF0(\ input0\ +=\ 4;\ )\ stbIF1(\ input1\ +=\ 4;\ )\ stbIF2(\ input2\ +=\ 4;\ )\ stbIF3(\ input3\ +=\ 4;\ )\ stbIF4(\ input4\ +=\ 4;\ )\ stbIF5(\ input5\ +=\ 4;\ )\ stbIF6(\ input6\ +=\ 4;\ )\ stbIF7(\ input7\ +=\ 4;\ )}
\DoxyCodeLine{10159\ \ \ \}}
\DoxyCodeLine{10160\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{10161\ \ \ STBIR\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10162\ \ \ \textcolor{keywordflow}{while}\ (\ input0\ <\ input0\_end\ )}
\DoxyCodeLine{10163\ \ \ \{}
\DoxyCodeLine{10164\ \ \ \ \ \textcolor{keywordtype}{float}\ o0;}
\DoxyCodeLine{10165\ \ \ \ \ STBIR\_NO\_UNROLL(output);}
\DoxyCodeLine{10166\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{10167\ \ \ \ \ stbIF0(\ o0\ =\ output[0]\ +\ input0[0]\ *\ c0s;\ )}
\DoxyCodeLine{10168\ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{10169\ \ \ \ \ stbIF0(\ o0\ \ =\ input0[0]\ *\ c0s;\ )}
\DoxyCodeLine{10170\ \ \ \ \ \#endif}
\DoxyCodeLine{10171\ \ \ \ \ stbIF1(\ o0\ +=\ input1[0]\ *\ c1s;\ )}
\DoxyCodeLine{10172\ \ \ \ \ stbIF2(\ o0\ +=\ input2[0]\ *\ c2s;\ )}
\DoxyCodeLine{10173\ \ \ \ \ stbIF3(\ o0\ +=\ input3[0]\ *\ c3s;\ )}
\DoxyCodeLine{10174\ \ \ \ \ stbIF4(\ o0\ +=\ input4[0]\ *\ c4s;\ )}
\DoxyCodeLine{10175\ \ \ \ \ stbIF5(\ o0\ +=\ input5[0]\ *\ c5s;\ )}
\DoxyCodeLine{10176\ \ \ \ \ stbIF6(\ o0\ +=\ input6[0]\ *\ c6s;\ )}
\DoxyCodeLine{10177\ \ \ \ \ stbIF7(\ o0\ +=\ input7[0]\ *\ c7s;\ )}
\DoxyCodeLine{10178\ \ \ \ \ output[0]\ =\ o0;}
\DoxyCodeLine{10179\ \ \ \ \ ++output;}
\DoxyCodeLine{10180\ \ \ \ \ stbIF0(\ ++input0;\ )\ stbIF1(\ ++input1;\ )\ stbIF2(\ ++input2;\ )\ stbIF3(\ ++input3;\ )\ stbIF4(\ ++input4;\ )\ stbIF5(\ ++input5;\ )\ stbIF6(\ ++input6;\ )\ stbIF7(\ ++input7;\ )}
\DoxyCodeLine{10181\ \ \ \}}
\DoxyCodeLine{10182\ \}}
\DoxyCodeLine{10183\ }
\DoxyCodeLine{10184\ \textcolor{preprocessor}{\#undef\ stbIF0}}
\DoxyCodeLine{10185\ \textcolor{preprocessor}{\#undef\ stbIF1}}
\DoxyCodeLine{10186\ \textcolor{preprocessor}{\#undef\ stbIF2}}
\DoxyCodeLine{10187\ \textcolor{preprocessor}{\#undef\ stbIF3}}
\DoxyCodeLine{10188\ \textcolor{preprocessor}{\#undef\ stbIF4}}
\DoxyCodeLine{10189\ \textcolor{preprocessor}{\#undef\ stbIF5}}
\DoxyCodeLine{10190\ \textcolor{preprocessor}{\#undef\ stbIF6}}
\DoxyCodeLine{10191\ \textcolor{preprocessor}{\#undef\ stbIF7}}
\DoxyCodeLine{10192\ \textcolor{preprocessor}{\#undef\ STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{10193\ \textcolor{preprocessor}{\#undef\ STBIR\_\_vertical\_channels}}
\DoxyCodeLine{10194\ \textcolor{preprocessor}{\#undef\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{10195\ \textcolor{preprocessor}{\#undef\ STBIR\_strs\_join24}}
\DoxyCodeLine{10196\ \textcolor{preprocessor}{\#undef\ STBIR\_strs\_join14}}
\DoxyCodeLine{10197\ \textcolor{preprocessor}{\#undef\ STBIR\_chans}}
\DoxyCodeLine{10198\ \textcolor{preprocessor}{\#ifdef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{10199\ \textcolor{preprocessor}{\#undef\ STB\_IMAGE\_RESIZE\_VERTICAL\_CONTINUE}}
\DoxyCodeLine{10200\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10201\ }
\DoxyCodeLine{10202\ \textcolor{preprocessor}{\#else\ }\textcolor{comment}{//\ !STB\_IMAGE\_RESIZE\_DO\_VERTICALS}}
\DoxyCodeLine{10203\ }
\DoxyCodeLine{10204\ \textcolor{preprocessor}{\#define\ STBIR\_chans(\ start,\ end\ )\ STBIR\_strs\_join1(start,STBIR\_\_horizontal\_channels,end)}}
\DoxyCodeLine{10205\ }
\DoxyCodeLine{10206\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_2\_coeff\_only}}
\DoxyCodeLine{10207\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10208\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_1\_coeff\_only();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10209\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_1\_coeff\_remnant(1);}}
\DoxyCodeLine{10210\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10211\ }
\DoxyCodeLine{10212\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_2\_coeff\_remnant}}
\DoxyCodeLine{10213\ \textcolor{preprocessor}{\#define\ stbir\_\_2\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10214\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_1\_coeff\_remnant(ofs);\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10215\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_1\_coeff\_remnant((ofs)+1);}}
\DoxyCodeLine{10216\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10217\ }
\DoxyCodeLine{10218\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_3\_coeff\_only}}
\DoxyCodeLine{10219\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_only()\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10220\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_2\_coeff\_only();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10221\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_1\_coeff\_remnant(2);}}
\DoxyCodeLine{10222\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10223\ }
\DoxyCodeLine{10224\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_3\_coeff\_remnant}}
\DoxyCodeLine{10225\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_remnant(\ ofs\ )\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10226\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_2\_coeff\_remnant(ofs);\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10227\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_1\_coeff\_remnant((ofs)+2);}}
\DoxyCodeLine{10228\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10229\ }
\DoxyCodeLine{10230\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_3\_coeff\_setup}}
\DoxyCodeLine{10231\ \textcolor{preprocessor}{\#define\ stbir\_\_3\_coeff\_setup()}}
\DoxyCodeLine{10232\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10233\ }
\DoxyCodeLine{10234\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_4\_coeff\_start}}
\DoxyCodeLine{10235\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_start()\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10236\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_2\_coeff\_only();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10237\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_2\_coeff\_remnant(2);}}
\DoxyCodeLine{10238\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10239\ }
\DoxyCodeLine{10240\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_4\_coeff\_continue\_from\_4}}
\DoxyCodeLine{10241\ \textcolor{preprocessor}{\#define\ stbir\_\_4\_coeff\_continue\_from\_4(\ ofs\ )\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10242\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_2\_coeff\_remnant(ofs);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{10243\ \textcolor{preprocessor}{\ \ \ \ stbir\_\_2\_coeff\_remnant((ofs)+2);}}
\DoxyCodeLine{10244\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10245\ }
\DoxyCodeLine{10246\ \textcolor{preprocessor}{\#ifndef\ stbir\_\_store\_output\_tiny}}
\DoxyCodeLine{10247\ \textcolor{preprocessor}{\#define\ stbir\_\_store\_output\_tiny\ stbir\_\_store\_output}}
\DoxyCodeLine{10248\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10249\ }
\DoxyCodeLine{10250\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_1\_coeff)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10251\ \{}
\DoxyCodeLine{10252\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10253\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10254\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10255\ \ \ do\ \{}
\DoxyCodeLine{10256\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10257\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10258\ \ \ \ \ stbir\_\_1\_coeff\_only();}
\DoxyCodeLine{10259\ \ \ \ \ stbir\_\_store\_output\_tiny();}
\DoxyCodeLine{10260\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10261\ \}}
\DoxyCodeLine{10262\ }
\DoxyCodeLine{10263\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_2\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10264\ \{}
\DoxyCodeLine{10265\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10266\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10267\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10268\ \ \ do\ \{}
\DoxyCodeLine{10269\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10270\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10271\ \ \ \ \ stbir\_\_2\_coeff\_only();}
\DoxyCodeLine{10272\ \ \ \ \ stbir\_\_store\_output\_tiny();}
\DoxyCodeLine{10273\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10274\ \}}
\DoxyCodeLine{10275\ }
\DoxyCodeLine{10276\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_3\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10277\ \{}
\DoxyCodeLine{10278\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10279\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10280\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10281\ \ \ do\ \{}
\DoxyCodeLine{10282\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10283\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10284\ \ \ \ \ stbir\_\_3\_coeff\_only();}
\DoxyCodeLine{10285\ \ \ \ \ stbir\_\_store\_output\_tiny();}
\DoxyCodeLine{10286\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10287\ \}}
\DoxyCodeLine{10288\ }
\DoxyCodeLine{10289\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_4\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10290\ \{}
\DoxyCodeLine{10291\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10292\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10293\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10294\ \ \ do\ \{}
\DoxyCodeLine{10295\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10296\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10297\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10298\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10299\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10300\ \}}
\DoxyCodeLine{10301\ }
\DoxyCodeLine{10302\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_5\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10303\ \{}
\DoxyCodeLine{10304\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10305\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10306\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10307\ \ \ do\ \{}
\DoxyCodeLine{10308\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10309\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10310\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10311\ \ \ \ \ stbir\_\_1\_coeff\_remnant(4);}
\DoxyCodeLine{10312\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10313\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10314\ \}}
\DoxyCodeLine{10315\ }
\DoxyCodeLine{10316\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_6\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10317\ \{}
\DoxyCodeLine{10318\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10319\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10320\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10321\ \ \ do\ \{}
\DoxyCodeLine{10322\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10323\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10324\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10325\ \ \ \ \ stbir\_\_2\_coeff\_remnant(4);}
\DoxyCodeLine{10326\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10327\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10328\ \}}
\DoxyCodeLine{10329\ }
\DoxyCodeLine{10330\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_7\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10331\ \{}
\DoxyCodeLine{10332\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10333\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10334\ \ \ stbir\_\_3\_coeff\_setup();}
\DoxyCodeLine{10335\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10336\ \ \ do\ \{}
\DoxyCodeLine{10337\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10338\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10339\ }
\DoxyCodeLine{10340\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10341\ \ \ \ \ stbir\_\_3\_coeff\_remnant(4);}
\DoxyCodeLine{10342\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10343\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10344\ \}}
\DoxyCodeLine{10345\ }
\DoxyCodeLine{10346\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_8\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10347\ \{}
\DoxyCodeLine{10348\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10349\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10350\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10351\ \ \ do\ \{}
\DoxyCodeLine{10352\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10353\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10354\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10355\ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(4);}
\DoxyCodeLine{10356\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10357\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10358\ \}}
\DoxyCodeLine{10359\ }
\DoxyCodeLine{10360\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_9\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10361\ \{}
\DoxyCodeLine{10362\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10363\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10364\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10365\ \ \ do\ \{}
\DoxyCodeLine{10366\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10367\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10368\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10369\ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(4);}
\DoxyCodeLine{10370\ \ \ \ \ stbir\_\_1\_coeff\_remnant(8);}
\DoxyCodeLine{10371\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10372\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10373\ \}}
\DoxyCodeLine{10374\ }
\DoxyCodeLine{10375\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_10\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10376\ \{}
\DoxyCodeLine{10377\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10378\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10379\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10380\ \ \ do\ \{}
\DoxyCodeLine{10381\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10382\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10383\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10384\ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(4);}
\DoxyCodeLine{10385\ \ \ \ \ stbir\_\_2\_coeff\_remnant(8);}
\DoxyCodeLine{10386\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10387\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10388\ \}}
\DoxyCodeLine{10389\ }
\DoxyCodeLine{10390\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_11\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10391\ \{}
\DoxyCodeLine{10392\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10393\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10394\ \ \ stbir\_\_3\_coeff\_setup();}
\DoxyCodeLine{10395\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10396\ \ \ do\ \{}
\DoxyCodeLine{10397\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10398\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10399\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10400\ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(4);}
\DoxyCodeLine{10401\ \ \ \ \ stbir\_\_3\_coeff\_remnant(8);}
\DoxyCodeLine{10402\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10403\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10404\ \}}
\DoxyCodeLine{10405\ }
\DoxyCodeLine{10406\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_12\_coeffs)(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10407\ \{}
\DoxyCodeLine{10408\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10409\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10410\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10411\ \ \ do\ \{}
\DoxyCodeLine{10412\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10413\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10414\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10415\ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(4);}
\DoxyCodeLine{10416\ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(8);}
\DoxyCodeLine{10417\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10418\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10419\ \}}
\DoxyCodeLine{10420\ }
\DoxyCodeLine{10421\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod0\ )(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10422\ \{}
\DoxyCodeLine{10423\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10424\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10425\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10426\ \ \ do\ \{}
\DoxyCodeLine{10427\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10428\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ (\ (\ horizontal\_contributors-\/>n1\ -\/\ horizontal\_contributors-\/>n0\ +\ 1\ )\ -\/\ 4\ +\ 3\ )\ >>\ 2;}
\DoxyCodeLine{10429\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10430\ }
\DoxyCodeLine{10431\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10432\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10433\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{10434\ \ \ \ \ \ \ hc\ +=\ 4;}
\DoxyCodeLine{10435\ \ \ \ \ \ \ decode\ +=\ STBIR\_\_horizontal\_channels\ *\ 4;}
\DoxyCodeLine{10436\ \ \ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(\ 0\ );}
\DoxyCodeLine{10437\ \ \ \ \ \ \ -\/-\/n;}
\DoxyCodeLine{10438\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ n\ >\ 0\ );}
\DoxyCodeLine{10439\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10440\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10441\ \}}
\DoxyCodeLine{10442\ }
\DoxyCodeLine{10443\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod1\ )(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10444\ \{}
\DoxyCodeLine{10445\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10446\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10447\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10448\ \ \ do\ \{}
\DoxyCodeLine{10449\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10450\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ (\ (\ horizontal\_contributors-\/>n1\ -\/\ horizontal\_contributors-\/>n0\ +\ 1\ )\ -\/\ 5\ +\ 3\ )\ >>\ 2;}
\DoxyCodeLine{10451\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10452\ }
\DoxyCodeLine{10453\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10454\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10455\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{10456\ \ \ \ \ \ \ hc\ +=\ 4;}
\DoxyCodeLine{10457\ \ \ \ \ \ \ decode\ +=\ STBIR\_\_horizontal\_channels\ *\ 4;}
\DoxyCodeLine{10458\ \ \ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(\ 0\ );}
\DoxyCodeLine{10459\ \ \ \ \ \ \ -\/-\/n;}
\DoxyCodeLine{10460\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ n\ >\ 0\ );}
\DoxyCodeLine{10461\ \ \ \ \ stbir\_\_1\_coeff\_remnant(\ 4\ );}
\DoxyCodeLine{10462\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10463\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10464\ \}}
\DoxyCodeLine{10465\ }
\DoxyCodeLine{10466\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod2\ )(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10467\ \{}
\DoxyCodeLine{10468\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10469\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10470\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10471\ \ \ do\ \{}
\DoxyCodeLine{10472\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10473\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ (\ (\ horizontal\_contributors-\/>n1\ -\/\ horizontal\_contributors-\/>n0\ +\ 1\ )\ -\/\ 6\ +\ 3\ )\ >>\ 2;}
\DoxyCodeLine{10474\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10475\ }
\DoxyCodeLine{10476\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10477\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10478\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{10479\ \ \ \ \ \ \ hc\ +=\ 4;}
\DoxyCodeLine{10480\ \ \ \ \ \ \ decode\ +=\ STBIR\_\_horizontal\_channels\ *\ 4;}
\DoxyCodeLine{10481\ \ \ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(\ 0\ );}
\DoxyCodeLine{10482\ \ \ \ \ \ \ -\/-\/n;}
\DoxyCodeLine{10483\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ n\ >\ 0\ );}
\DoxyCodeLine{10484\ \ \ \ \ stbir\_\_2\_coeff\_remnant(\ 4\ );}
\DoxyCodeLine{10485\ }
\DoxyCodeLine{10486\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10487\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10488\ \}}
\DoxyCodeLine{10489\ }
\DoxyCodeLine{10490\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ STBIR\_chans(\ stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod3\ )(\ \textcolor{keywordtype}{float}\ *\ output\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ output\_sub\_size,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\_buffer,\ stbir\_\_contributors\ \textcolor{keyword}{const}\ *\ horizontal\_contributors,\ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ horizontal\_coefficients,\ \textcolor{keywordtype}{int}\ coefficient\_width\ )}
\DoxyCodeLine{10491\ \{}
\DoxyCodeLine{10492\ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ output\_end\ =\ output\_buffer\ +\ output\_sub\_size\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10493\ \ \ \textcolor{keywordtype}{float}\ STBIR\_SIMD\_STREAMOUT\_PTR(\ *\ )\ output\ =\ output\_buffer;}
\DoxyCodeLine{10494\ \ \ stbir\_\_3\_coeff\_setup();}
\DoxyCodeLine{10495\ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10496\ \ \ do\ \{}
\DoxyCodeLine{10497\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ decode\ =\ decode\_buffer\ +\ horizontal\_contributors-\/>n0\ *\ STBIR\_\_horizontal\_channels;}
\DoxyCodeLine{10498\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ (\ (\ horizontal\_contributors-\/>n1\ -\/\ horizontal\_contributors-\/>n0\ +\ 1\ )\ -\/\ 7\ +\ 3\ )\ >>\ 2;}
\DoxyCodeLine{10499\ \ \ \ \ \textcolor{keywordtype}{float}\ \textcolor{keyword}{const}\ *\ hc\ =\ horizontal\_coefficients;}
\DoxyCodeLine{10500\ }
\DoxyCodeLine{10501\ \ \ \ \ stbir\_\_4\_coeff\_start();}
\DoxyCodeLine{10502\ \ \ \ \ STBIR\_SIMD\_NO\_UNROLL\_LOOP\_START}
\DoxyCodeLine{10503\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{10504\ \ \ \ \ \ \ hc\ +=\ 4;}
\DoxyCodeLine{10505\ \ \ \ \ \ \ decode\ +=\ STBIR\_\_horizontal\_channels\ *\ 4;}
\DoxyCodeLine{10506\ \ \ \ \ \ \ stbir\_\_4\_coeff\_continue\_from\_4(\ 0\ );}
\DoxyCodeLine{10507\ \ \ \ \ \ \ -\/-\/n;}
\DoxyCodeLine{10508\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\ n\ >\ 0\ );}
\DoxyCodeLine{10509\ \ \ \ \ stbir\_\_3\_coeff\_remnant(\ 4\ );}
\DoxyCodeLine{10510\ }
\DoxyCodeLine{10511\ \ \ \ \ stbir\_\_store\_output();}
\DoxyCodeLine{10512\ \ \ \}\ \textcolor{keywordflow}{while}\ (\ output\ <\ output\_end\ );}
\DoxyCodeLine{10513\ \}}
\DoxyCodeLine{10514\ }
\DoxyCodeLine{10515\ \textcolor{keyword}{static}\ stbir\_\_horizontal\_gather\_channels\_func\ *\ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_funcs)[4]=}
\DoxyCodeLine{10516\ \{}
\DoxyCodeLine{10517\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod0),}
\DoxyCodeLine{10518\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod1),}
\DoxyCodeLine{10519\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod2),}
\DoxyCodeLine{10520\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_n\_coeffs\_mod3),}
\DoxyCodeLine{10521\ \};}
\DoxyCodeLine{10522\ }
\DoxyCodeLine{10523\ \textcolor{keyword}{static}\ stbir\_\_horizontal\_gather\_channels\_func\ *\ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_funcs)[12]=}
\DoxyCodeLine{10524\ \{}
\DoxyCodeLine{10525\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_1\_coeff),}
\DoxyCodeLine{10526\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_2\_coeffs),}
\DoxyCodeLine{10527\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_3\_coeffs),}
\DoxyCodeLine{10528\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_4\_coeffs),}
\DoxyCodeLine{10529\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_5\_coeffs),}
\DoxyCodeLine{10530\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_6\_coeffs),}
\DoxyCodeLine{10531\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_7\_coeffs),}
\DoxyCodeLine{10532\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_8\_coeffs),}
\DoxyCodeLine{10533\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_9\_coeffs),}
\DoxyCodeLine{10534\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_10\_coeffs),}
\DoxyCodeLine{10535\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_11\_coeffs),}
\DoxyCodeLine{10536\ \ \ STBIR\_chans(stbir\_\_horizontal\_gather\_,\_channels\_with\_12\_coeffs),}
\DoxyCodeLine{10537\ \};}
\DoxyCodeLine{10538\ }
\DoxyCodeLine{10539\ \textcolor{preprocessor}{\#undef\ STBIR\_\_horizontal\_channels}}
\DoxyCodeLine{10540\ \textcolor{preprocessor}{\#undef\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS}}
\DoxyCodeLine{10541\ \textcolor{preprocessor}{\#undef\ stbir\_\_1\_coeff\_only}}
\DoxyCodeLine{10542\ \textcolor{preprocessor}{\#undef\ stbir\_\_1\_coeff\_remnant}}
\DoxyCodeLine{10543\ \textcolor{preprocessor}{\#undef\ stbir\_\_2\_coeff\_only}}
\DoxyCodeLine{10544\ \textcolor{preprocessor}{\#undef\ stbir\_\_2\_coeff\_remnant}}
\DoxyCodeLine{10545\ \textcolor{preprocessor}{\#undef\ stbir\_\_3\_coeff\_only}}
\DoxyCodeLine{10546\ \textcolor{preprocessor}{\#undef\ stbir\_\_3\_coeff\_remnant}}
\DoxyCodeLine{10547\ \textcolor{preprocessor}{\#undef\ stbir\_\_3\_coeff\_setup}}
\DoxyCodeLine{10548\ \textcolor{preprocessor}{\#undef\ stbir\_\_4\_coeff\_start}}
\DoxyCodeLine{10549\ \textcolor{preprocessor}{\#undef\ stbir\_\_4\_coeff\_continue\_from\_4}}
\DoxyCodeLine{10550\ \textcolor{preprocessor}{\#undef\ stbir\_\_store\_output}}
\DoxyCodeLine{10551\ \textcolor{preprocessor}{\#undef\ stbir\_\_store\_output\_tiny}}
\DoxyCodeLine{10552\ \textcolor{preprocessor}{\#undef\ STBIR\_chans}}
\DoxyCodeLine{10553\ }
\DoxyCodeLine{10554\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HORIZONALS}}
\DoxyCodeLine{10555\ }
\DoxyCodeLine{10556\ \textcolor{preprocessor}{\#undef\ STBIR\_strs\_join2}}
\DoxyCodeLine{10557\ \textcolor{preprocessor}{\#undef\ STBIR\_strs\_join1}}
\DoxyCodeLine{10558\ }
\DoxyCodeLine{10559\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STB\_IMAGE\_RESIZE\_DO\_HORIZONTALS/VERTICALS/CODERS}}
\DoxyCodeLine{10560\ }
\DoxyCodeLine{10561\ \textcolor{comment}{/*}}
\DoxyCodeLine{10562\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{10563\ \textcolor{comment}{This\ software\ is\ available\ under\ 2\ licenses\ -\/-\/\ choose\ whichever\ you\ prefer.}}
\DoxyCodeLine{10564\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{10565\ \textcolor{comment}{ALTERNATIVE\ A\ -\/\ MIT\ License}}
\DoxyCodeLine{10566\ \textcolor{comment}{Copyright\ (c)\ 2017\ Sean\ Barrett}}
\DoxyCodeLine{10567\ \textcolor{comment}{Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining\ a\ copy\ of}}
\DoxyCodeLine{10568\ \textcolor{comment}{this\ software\ and\ associated\ documentation\ files\ (the\ "{}Software"{}),\ to\ deal\ in}}
\DoxyCodeLine{10569\ \textcolor{comment}{the\ Software\ without\ restriction,\ including\ without\ limitation\ the\ rights\ to}}
\DoxyCodeLine{10570\ \textcolor{comment}{use,\ copy,\ modify,\ merge,\ publish,\ distribute,\ sublicense,\ and/or\ sell\ copies}}
\DoxyCodeLine{10571\ \textcolor{comment}{of\ the\ Software,\ and\ to\ permit\ persons\ to\ whom\ the\ Software\ is\ furnished\ to\ do}}
\DoxyCodeLine{10572\ \textcolor{comment}{so,\ subject\ to\ the\ following\ conditions:}}
\DoxyCodeLine{10573\ \textcolor{comment}{The\ above\ copyright\ notice\ and\ this\ permission\ notice\ shall\ be\ included\ in\ all}}
\DoxyCodeLine{10574\ \textcolor{comment}{copies\ or\ substantial\ portions\ of\ the\ Software.}}
\DoxyCodeLine{10575\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{10576\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{10577\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{10578\ \textcolor{comment}{AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER}}
\DoxyCodeLine{10579\ \textcolor{comment}{LIABILITY,\ WHETHER\ IN\ AN\ ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,}}
\DoxyCodeLine{10580\ \textcolor{comment}{OUT\ OF\ OR\ IN\ CONNECTION\ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE}}
\DoxyCodeLine{10581\ \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{10582\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{10583\ \textcolor{comment}{ALTERNATIVE\ B\ -\/\ Public\ Domain\ (www.unlicense.org)}}
\DoxyCodeLine{10584\ \textcolor{comment}{This\ is\ free\ and\ unencumbered\ software\ released\ into\ the\ public\ domain.}}
\DoxyCodeLine{10585\ \textcolor{comment}{Anyone\ is\ free\ to\ copy,\ modify,\ publish,\ use,\ compile,\ sell,\ or\ distribute\ this}}
\DoxyCodeLine{10586\ \textcolor{comment}{software,\ either\ in\ source\ code\ form\ or\ as\ a\ compiled\ binary,\ for\ any\ purpose,}}
\DoxyCodeLine{10587\ \textcolor{comment}{commercial\ or\ non-\/commercial,\ and\ by\ any\ means.}}
\DoxyCodeLine{10588\ \textcolor{comment}{In\ jurisdictions\ that\ recognize\ copyright\ laws,\ the\ author\ or\ authors\ of\ this}}
\DoxyCodeLine{10589\ \textcolor{comment}{software\ dedicate\ any\ and\ all\ copyright\ interest\ in\ the\ software\ to\ the\ public}}
\DoxyCodeLine{10590\ \textcolor{comment}{domain.\ We\ make\ this\ dedication\ for\ the\ benefit\ of\ the\ public\ at\ large\ and\ to}}
\DoxyCodeLine{10591\ \textcolor{comment}{the\ detriment\ of\ our\ heirs\ and\ successors.\ We\ intend\ this\ dedication\ to\ be\ an}}
\DoxyCodeLine{10592\ \textcolor{comment}{overt\ act\ of\ relinquishment\ in\ perpetuity\ of\ all\ present\ and\ future\ rights\ to}}
\DoxyCodeLine{10593\ \textcolor{comment}{this\ software\ under\ copyright\ law.}}
\DoxyCodeLine{10594\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{10595\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{10596\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{10597\ \textcolor{comment}{AUTHORS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER\ LIABILITY,\ WHETHER\ IN\ AN}}
\DoxyCodeLine{10598\ \textcolor{comment}{ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,\ OUT\ OF\ OR\ IN\ CONNECTION}}
\DoxyCodeLine{10599\ \textcolor{comment}{WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE\ SOFTWARE.}}
\DoxyCodeLine{10600\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{10601\ \textcolor{comment}{*/}}

\end{DoxyCode}
